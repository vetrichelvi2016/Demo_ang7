/*! MerideEmbedFrontAPI 0.11.46 2019-07-23 16:37:38 copyright Mosaicolab srl */
!function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="",t(t.s=40)}([function(e,t,r){"use strict";!function(){var t={each:function(e,t){for(var r=e.length;0!=r--;)t(e[r],r)},error:function(e){return e=new Error(e),"function"==typeof console.error||console.debug,!1},parseArgs:function(e,t){for(var r=e.length,n=new Array(r-t);r--!==t;)n[r-t]=e[r];return n}},r=function(){this._listeners=[],this._maxListeners=10};r.prototype._parseListener=function(e,r){var n={fn:r};if("function"==typeof e)n.fn=e;else if(Array.isArray(e))n.dependencies=e;else{if("string"!=typeof e)return t.error("EventHandler is not a function.");n.dependencies=[e]}return n},r.prototype.removeAllListeners=function(e){if(e||0==e)return this.off(e);this._listeners=[]},r.prototype.setMaxListeners=function(e){this._maxListeners=e},r.prototype.on=function(e,t,r,n){"string"!=typeof e&&(e=e.toString()),this.listeners(e).length>=this._maxListeners||(r=this._parseListener(t,r),r.eventName=e,n&&(r.once=!0),this._listeners.push(r),"newListener"!=e&&this.emit("newListener",r.fn))},r.prototype.once=function(e,t,r){this.on(e,t,r,!0)},r.prototype.off=function(e,t){if(void 0!==e)if(t)for(var r=this._listeners.length;r--;)e==this._listeners[r].eventName&&this._listeners[r].fn===t&&(this.emit("removeListener",this._listeners[r].fn),this._listeners.splice(r,1));else for(var r=this._listeners.length;r--;)e==this._listeners[r].eventName&&(this.emit("removeListener",this._listeners[r].fn),this._listeners.splice(r,1))},r.prototype.listeners=function(e){if(!e)return this._listeners;var t,r=e.split("."),e=r[0],n=r[1]?"."+r[1]:null,i=[];if(t=n?this._matchWithNamespace:this._matchEvent,"function"==typeof this._listeners.filter)return this._listeners.filter(function(r){return t(e,r.eventName,n)});for(var o=0;o<this._listeners;o++)t(e,listener.eventName,n)&&i.push(listener);return i},r.prototype._matchWithNamespace=function(e,t,r){return e==t||e+r==t||0==e.indexOf(t+":")||t==r||"*"==t||"*"==e||0==e.indexOf(t.substring(0,t.indexOf("."))+":")},r.prototype._matchEvent=function(e,t){return e==t||0==e.indexOf(t+":")||0==t.indexOf(e+".")||"*"==t||"*"==e||0==e.indexOf(t.substring(0,t.indexOf("."))+":")},r.prototype._matchArray=function(e,t){var r,n,i,o;for(-1!=t.indexOf(".")?(i=t.split("."),t=i[0],o=i[1]?"."+i[1]:null,r=this._matchWithNamespace):r=this._matchEvent;n=e.pop();)if(r(t,n.eventName,o)||n.eventName.substring(n.eventName.indexOf("."))==o&&"*"!=n.eventName)return!0;return!1},r.prototype._deferredLoop=function(e,r,n){var i,o,a,s,l=this,d=0;for(i=d=e.length;o=e.pop();){if(0==d)return r?void 0:t.error("Deadlock!");if(s=!1,o.dependencies){for(var u=0;u<o.dependencies.length;u++)s=!!l._matchArray(e.slice(),o.dependencies[u])||s;s?e.unshift(o):(a=o.fn(n))&&a.then&&(r++,e.unshift(o),a.then(function(){r--,l._deferredLoop(e,r,n)})),e.length==i?d--:i=d=e.length}else e.unshift(o),d--}},r.prototype.emit=function(e){if(!e)return t.error("Nothing to emit.");"string"!=typeof e&&(e=e.toString());var r,n,i=[],o=this._listeners.slice(),a=0,s=this,l={arguments:t.parseArgs(arguments,1),event:e,stopPropagation:function(){o=[],i=[]}};if(-1!=e.indexOf(".")){var d=e.split("."),e=d[0],u=d[1]?"."+d[1]:null;r=s._matchWithNamespace}else r=s._matchEvent;if(!e)return t.error("Nothing to emit.");t.each(o,function(t,o){if(r(e,t.eventName,u)){if(t.dependencies)return void i.push(t);n=t.fn(l),n&&n.then&&(a++,i.push(t),n.then(function(){a--,s._deferredLoop(i,a,l)})),t.once&&s._listeners.splice(o,1)}}),i.length>0&&s._deferredLoop(i,a,l)},r.prototype.applyEmit=function(e){var r=this,n=t.parseArgs(arguments,0);return function(){r.emit.apply(r,n)}},r.prototype.removeListener=r.prototype.off,r.prototype.addListener=r.prototype.on,r.prototype.one=r.prototype.once,e.exports=r}()},function(e,t){var r={READY:"MERIDE_READY",MAIN_PLAY_CLICKED:"MERIDE_MAIN_PLAY_CLICKED",PLAY:"MERIDE_PLAY",PLAY_CONTENT:"MERIDE_PLAY_CONTENT",ERROR:"ERROR",PAUSE:"MERIDE_PAUSE",ENDED:"MERIDE_ENDED",AD_CLICKED:"MERIDE_AD_CLICKED",AD_REQUESTING:"MERIDE_AD_REQUESTING",AD_REQUEST_COMPLETE:"MERIDE_AD_REQUEST_COMPLETE",AD_STARTED:"MERIDE_AD_STARTED",AD_ERROR:"MERIDE_AD_ERROR",AD_EMPTY:"MERIDE_AD_EMPTY",AD_ENDED:"MERIDE_AD_ENDED",AD_LOADED:"MERIDE_AD_LOADED",LOADEDMETADATA:"MERIDE_LOADEDMETADATA",MANIFEST_PARSED:"MERIDE_MANIFEST_PARSED",ADS_MANAGER_READY:"ADS_MANAGER_READY",ENTER_FULLSCREEN:"ENTER_FULLSCREEN",EXIT_FULLSCREEN:"EXIT_FULLSCREEN",ROLLVIDEO_STARTED:"ROLLVIDEO_STARTED",ROLLVIDEO_ENDED:"ROLLVIDEO_ENDED"};e.exports=r},function(e,t){var r={isAndroidStock:function(){var e=navigator.userAgent,t=e.indexOf("Android")>-1&&e.indexOf("Mozilla/5.0")>-1&&e.indexOf("AppleWebKit")>-1,r=new RegExp(/AppleWebKit\/([\d.]+)/),n=r.exec(e),i=null===n?null:parseFloat(r.exec(e)[1]),o=new RegExp(/Chrome\/([\d.]+)/),a=o.exec(e),s=null===a?null:parseFloat(o.exec(e)[1]);return t&&null!==i&&i<537||null!==s&&s<37},addClickTouch:function(e,t){var n=function(e){return t(e),e.preventDefault(),!1};return r.isAndroidStock()?e.addEventListener("click",n,!1):(e.addEventListener("click",n,!1),e.addEventListener("touchend",n,!1)),n},removeClickTouch:function(e,t){r.isAndroidStock()?e.removeEventListener("click",t):(e.removeEventListener("click",t),e.removeEventListener("touchstart",t))}};e.exports=r},function(e,t){var r={include:function(e,t,r){var n=document.getElementsByTagName("head")[0],i=document.createElement("script");i.type="text/javascript",i.src=e,r&&(!0===r.async&&i.setAttribute("async","true"),r.crossorigin&&i.setAttribute("crossorigin",r.crossorigin),r.onerror&&"function"==typeof r.onerror&&(i.onerror=r.onerror)),void 0!==i.onreadystatechange?i.onreadystatechange=function(){"loaded"!=i.readyState&&"complete"!=i.readyState||"function"!=typeof t||t()}:(i.onload,i.onload=t),n.appendChild(i)}};e.exports=r},function(e,t){var r={onDOMLoaded:function(e){if(document.addEventListener)document.addEventListener("DOMContentLoaded",e,!1);else if(/KHTML|WebKit|iCab/i.test(navigator.userAgent))var t=setInterval(function(){/loaded|complete/i.test(document.readyState)&&(e(),clearInterval(t))},10);else window.addEventListener("load",e)},getElementsByClassName:function(e){return document.getElementsByClassName?document.getElementsByClassName(e):document.querySelectorAll("."+e)},applyStyles:function(e,t){for(var r in t)t.hasOwnProperty(r)&&e&&(e.style[r]=t[r])},isElementInViewport:function(e){"function"==typeof jQuery&&e instanceof jQuery&&(e=e[0]);var t=e.getBoundingClientRect();return t.top>=0&&t.left>=0&&t.top<=(window.innerHeight||document.documentElement.clientHeight)&&t.left<=(window.innerWidth||document.documentElement.clientWidth)}};e.exports=r},function(e,t){var r={applyComponent:function(e,t,r){r&&e.setAttribute("data-txt",r),t.class&&(e.className=t.class),e.innerHTML=t.html},applyStyles:function(e,t){var r=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])};if(Array.isArray(e))for(var n=0,i=e.length;n<i;n+=1)r(e[n],t);else r(e,t)}};e.exports=r},function(e,t){var r={emit:function(e,t,r){r=r||{};var n=new CustomEvent(e,{bubbles:!0,cancelable:!0,detail:r});t.dispatchEvent(n)}};e.exports=r},function(e,t){var r={deviceIphone:"iphone",deviceIpad:"iPad",deviceIpod:"ipod",deviceS60:"series60",deviceSymbian:"symbian",engineWebKit:"webkit",deviceAndroid:"android",deviceWinMob:"windows ce",deviceWinPhone:"windows phone",deviceBB:"blackberry",devicePalm:"palm",uagent:navigator.userAgent.toLowerCase(),androidVersion:function(){var e=navigator.userAgent.match(/Android\s([0-9\.]*)/);return!!e&&e[1]},iOSVersion:function(){var e=window.navigator.userAgent,t=e.indexOf("OS ");return(e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&t>-1&&window.Number(e.substr(t+3,3).replace("_","."))},detectIPhone:function(){return this.uagent.search(this.deviceIphone)>-1&&!this.detectWindowsPhone()},detectIPad:function(){return null!==navigator.userAgent.match(/iPad/i)},detectIPod:function(){return this.uagent.search(this.deviceIpod)>-1},detectIphoneOrIpod:function(){return!!this.detectIPhone()||!!this.detectIPod()},detectS60OssBrowser:function(){return this.uagent.search(this.engineWebKit)>-1&&(this.uagent.search(this.deviceS60)>-1||this.uagent.search(this.deviceSymbian)>-1)},detectAndroid:function(){return this.uagent.search(this.deviceAndroid)>-1&&!this.detectWindowsPhone()},detectWebkit:function(){return uagent.search(engineWebKit)>-1},detectAndroidWebKit:function(){return!!this.detectAndroid()&&!!this.detectWebkit()},detectWindowsMobile:function(){return this.uagent.search(this.deviceWinMob)>-1},detectWindowsPhone:function(){return this.uagent.search(this.deviceWinPhone)>-1},detectBlackBerry:function(){return this.uagent.search(this.deviceBB)>-1},detectPalm:function(){return this.uagent.search(this.devicePalm)>-1},isMobile:function(){return this.detectIPhone()||this.detectIPad()||this.detectIPod()||this.detectAndroid()||this.detectAndroidWebKit()||this.detectWindowsMobile()||this.detectWindowsPhone()||this.detectBlackBerry()},isTouchable:function(){return"ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch}};e.exports=r},function(e,t,r){"use strict";function n(){}function i(e){try{return e.then}catch(e){return g=e,y}}function o(e,t){try{return e(t)}catch(e){return g=e,y}}function a(e,t,r){try{e(t,r)}catch(e){return g=e,y}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._h=0,this._i=0,this._j=null,this._k=null,e!==n&&m(e,this)}function l(e,t,r){return new e.constructor(function(i,o){var a=new s(n);a.then(i,o),d(e,new h(t,r,a))})}function d(e,t){for(;3===e._i;)e=e._j;if(s._l&&s._l(e),0===e._i)return 0===e._h?(e._h=1,void(e._k=t)):1===e._h?(e._h=2,void(e._k=[e._k,t])):void e._k.push(t);u(e,t)}function u(e,t){v(function(){var r=1===e._i?t.onFulfilled:t.onRejected;if(null===r)return void(1===e._i?c(t.promise,e._j):f(t.promise,e._j));var n=o(r,e._j);n===y?f(t.promise,g):c(t.promise,n)})}function c(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=i(t);if(r===y)return f(e,g);if(r===e.then&&t instanceof s)return e._i=3,e._j=t,void p(e);if("function"==typeof r)return void m(r.bind(t),e)}e._i=1,e._j=t,p(e)}function f(e,t){e._i=2,e._j=t,s._m&&s._m(e,t),p(e)}function p(e){if(1===e._h&&(d(e,e._k),e._k=null),2===e._h){for(var t=0;t<e._k.length;t++)d(e,e._k[t]);e._k=null}}function h(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function m(e,t){var r=!1,n=a(e,function(e){r||(r=!0,c(t,e))},function(e){r||(r=!0,f(t,e))});r||n!==y||(r=!0,f(t,g))}var v=r(16),g=null,y={};e.exports=s,s._l=null,s._m=null,s._n=n,s.prototype.then=function(e,t){if(this.constructor!==s)return l(this,e,t);var r=new s(n);return d(this,new h(e,t,r)),r}},function(e,t,r){"use strict";function n(){}function i(e){try{return e.then}catch(e){return g=e,y}}function o(e,t){try{return e(t)}catch(e){return g=e,y}}function a(e,t,r){try{e(t,r)}catch(e){return g=e,y}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==n&&m(e,this)}function l(e,t,r){return new e.constructor(function(i,o){var a=new s(n);a.then(i,o),d(e,new h(t,r,a))})}function d(e,t){for(;3===e._65;)e=e._55;if(s._37&&s._37(e),0===e._65)return 0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t);u(e,t)}function u(e,t){v(function(){var r=1===e._65?t.onFulfilled:t.onRejected;if(null===r)return void(1===e._65?c(t.promise,e._55):f(t.promise,e._55));var n=o(r,e._55);n===y?f(t.promise,g):c(t.promise,n)})}function c(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=i(t);if(r===y)return f(e,g);if(r===e.then&&t instanceof s)return e._65=3,e._55=t,void p(e);if("function"==typeof r)return void m(r.bind(t),e)}e._65=1,e._55=t,p(e)}function f(e,t){e._65=2,e._55=t,s._87&&s._87(e,t),p(e)}function p(e){if(1===e._40&&(d(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)d(e,e._72[t]);e._72=null}}function h(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function m(e,t){var r=!1,n=a(e,function(e){r||(r=!0,c(t,e))},function(e){r||(r=!0,f(t,e))});r||n!==y||(r=!0,f(t,g))}var v=r(16),g=null,y={};e.exports=s,s._37=null,s._87=null,s._61=n,s.prototype.then=function(e,t){if(this.constructor!==s)return l(this,e,t);var r=new s(n);return d(this,new h(e,t,r)),r}},function(e,t,r){"use strict";function n(){}function i(e){try{return e.then}catch(e){return g=e,y}}function o(e,t){try{return e(t)}catch(e){return g=e,y}}function a(e,t,r){try{e(t,r)}catch(e){return g=e,y}}function s(e){if("object"!=typeof this)throw new TypeError("Promises must be constructed via new");if("function"!=typeof e)throw new TypeError("Promise constructor's argument is not a function");this._40=0,this._65=0,this._55=null,this._72=null,e!==n&&m(e,this)}function l(e,t,r){return new e.constructor(function(i,o){var a=new s(n);a.then(i,o),d(e,new h(t,r,a))})}function d(e,t){for(;3===e._65;)e=e._55;if(s._37&&s._37(e),0===e._65)return 0===e._40?(e._40=1,void(e._72=t)):1===e._40?(e._40=2,void(e._72=[e._72,t])):void e._72.push(t);u(e,t)}function u(e,t){v(function(){var r=1===e._65?t.onFulfilled:t.onRejected;if(null===r)return void(1===e._65?c(t.promise,e._55):f(t.promise,e._55));var n=o(r,e._55);n===y?f(t.promise,g):c(t.promise,n)})}function c(e,t){if(t===e)return f(e,new TypeError("A promise cannot be resolved with itself."));if(t&&("object"==typeof t||"function"==typeof t)){var r=i(t);if(r===y)return f(e,g);if(r===e.then&&t instanceof s)return e._65=3,e._55=t,void p(e);if("function"==typeof r)return void m(r.bind(t),e)}e._65=1,e._55=t,p(e)}function f(e,t){e._65=2,e._55=t,s._87&&s._87(e,t),p(e)}function p(e){if(1===e._40&&(d(e,e._72),e._72=null),2===e._40){for(var t=0;t<e._72.length;t++)d(e,e._72[t]);e._72=null}}function h(e,t,r){this.onFulfilled="function"==typeof e?e:null,this.onRejected="function"==typeof t?t:null,this.promise=r}function m(e,t){var r=!1,n=a(e,function(e){r||(r=!0,c(t,e))},function(e){r||(r=!0,f(t,e))});r||n!==y||(r=!0,f(t,g))}var v=r(16),g=null,y={};e.exports=s,s._37=null,s._87=null,s._61=n,s.prototype.then=function(e,t){if(this.constructor!==s)return l(this,e,t);var r=new s(n);return d(this,new h(e,t,r)),r}},function(e,t,r){var n=r(51),i=function(){var e=navigator.language||navigator.browserLanguage,t=e.substr(0,2);return{__:function(e,r){var i="";if(n[e]&&(i=n[e][t]||n[e].en||""),r&&r.length>0&&""!==i){var o=1,a=r.length,s=new RegExp("{param}","g");for(o;o<=a;o++)o>1&&(s=new RegExp("{param"+o+"}","g")),r[o-1]=""+r[o-1],i=i.replace(s,r[o-1].replace(/_/g," "))}return i}}}();e.exports=i.__},function(e,t){var r={replace:function(e,t){var r=e,n="";for(var i in t)t.hasOwnProperty(i)&&(n=new RegExp("\\["+i+"\\]","gi"),r=r.replace(n,t[i]));return r},replaceTimestamp:function(e){if(null!==e.match("\\[timestamp\\]")){var t=new Date;return e.replace("[timestamp]",t.getTime())}return e},replaceRandom:function(e){if(null!==e.match("\\[random\\]")){for(var t,r=e.split("***"),n=0,i=r.length;n<i;n+=1)t=Math.floor(9e9*Math.random())+1e9,r[n]=r[n].replace(/\[random\]/g,t).replace(/%5Brandom%5D/g,t);return r.join("***")}return e},replaceRnd:function(e){if(null!==e.match("\\[rnd\\]")){for(var t,r=e.split("***"),n=0,i=r.length;n<i;n+=1)t=Math.floor(9e9*Math.random())+1e9,r[n]=r[n].replace(/\[rnd\]/g,t).replace(/%5Brnd%5D/g,t);return r.join("***")}return e},replaceReferrerURL:function(e){return null!==e.match("\\[referrer_url\\]")?e.replace("[referrer_url]",encodeURIComponent(document.location.toString())):e},replaceURL:function(e){return null!==e.match("\\[url\\]")?e.replace("[url]",encodeURIComponent(document.location.toString())):e},replaceDescriptionURL:function(e){return null!==e.match("\\[description_url\\]")?e.replace("[description_url]",encodeURIComponent(document.location.toString())):e},replaceDimensions:function(e,t,r){return null!==e.match("\\[width\\]")&&(e=e.replace("[width]",t)),null!==e.match("\\[height\\]")&&(e=e.replace("[height]",r)),e}};e.exports=r},function(e,t,r){var n=r(0),i=(r(1),function(){var e=(new n,""),t="",r=!1,i=null,o={getAdvState:function(){return t},setAdvState:function(e){t=e},getPlayerState:function(){return e},setPlayerState:function(t){e=t},getAdblockDetectedState:function(){return r},setAdblockDetectedState:function(e){r=e}};return{instance:function(){return null===i&&(i=o),i}}}());e.exports=i.instance()},function(e,t){var r={vendors:["","webkit","moz","o","ms"],isFullScreen:function(){return document.isFullScreen||document.webkitIsFullScreen||document.mozIsFullScreen||window.fullScreen||document.oIsFullScreen||document.msIsFullScreen||!!document.msFullscreenElement},attachOnFullScreenError:function(e,t){for(var n=0,i=r.vendors.length;n<i;++n)e.addEventListener(r.vendors[n]+"fullscreenerror",t);e.addEventListener("MSFullscreenError",t)},attachOnFullScreenChange:function(e,t){for(var n=0,i=r.vendors.length;n<i;++n)e.addEventListener(r.vendors[n]+"fullscreenchange",t);e.addEventListener("MSFullscreenChange",t)},getFullScreenAPI:function(){var e,t,r,n=document,i=n.createElement("video"),o={w3c:["fullscreenEnabled","fullscreenElement","requestFullscreen","exitFullscreen","fullscreenchange","fullscreenerror"],moz:["mozFullScreenEnabled","mozFullScreenElement","mozRequestFullScreen","mozCancelFullScreen","mozfullscreenchange","mozfullscreenerror"],webkit:["","webkitCurrentFullScreenElement","webkitRequestFullScreen","webkitCancelFullScreen","webkitfullscreenchange",""],webkitVideo:["webkitSupportsFullscreen","webkitDisplayingFullscreen","webkitEnterFullscreen","webkitExitFullscreen","",""],ms:["msFullscreenEnabled","msFullscreenElement","msRequestFullscreen","msExitFullscreen","MSFullscreenChange","MSFullscreenError"]},a=["w3c","moz","webkit","webkitVideo","ms"];for(e={support:{w3c:!!n[o.w3c[0]],moz:!!n[o.moz[0]],ms:"function"==typeof i[o.ms[2]],webkit:"function"==typeof n[o.webkit[3]],webkitVideo:"function"==typeof i[o.webkitVideo[2]]},used:{},spec:null},t=0,r=a.length;t<r;t++){var s=a[t];if(e.support[s]){e.spec=s,e.used[s]=!0;break}}if(null!==e.spec){var l=o[e.spec];e.api={fullscreenEnabled:!0,fullscreenElement:function(e){return e=e||n,e[l[1]]},requestFullscreen:function(e){return e[l[2]]()},exitFullscreen:function(e){return e=e||n,e[l[3]]()}},e.event={fullscreenchange:l[4],fullscreenerror:l[5]}}else e.api={fullscreenEnabled:!1,fullscreenElement:function(){return null},requestFullscreen:function(){},exitFullscreen:function(){}},e.event={};return e}};e.exports=r},function(e,t,r){var n=r(27),i=r(78),o={read:function(e){return new i(function(t,r){n(e,function(e,n,i){if(e&&r(e),200!==n.statusCode)return r(new Error(i));t(i)})})}};e.exports=o},function(e,t,r){"use strict";(function(t){function r(e){a.length||(o(),s=!0),a[a.length]=e}function n(){for(;l<a.length;){var e=l;if(l+=1,a[e].call(),l>d){for(var t=0,r=a.length-l;t<r;t++)a[t]=a[t+l];a.length-=l,l=0}}a.length=0,l=0,s=!1}function i(e){return function(){function t(){clearTimeout(r),clearInterval(n),e()}var r=setTimeout(t,0),n=setInterval(t,50)}}e.exports=r;var o,a=[],s=!1,l=0,d=1024,u=void 0!==t?t:self,c=u.MutationObserver||u.WebKitMutationObserver;o="function"==typeof c?function(e){var t=1,r=new c(e),n=document.createTextNode("");return r.observe(n,{characterData:!0}),function(){t=-t,n.data=t}}(n):i(n),r.requestFlush=o,r.makeRequestCallFromTimer=i}).call(t,r(28))},function(e,t,r){var n=(r(24),r(0)),i=r(11),o=r(25),a=r(13),s=function(e){if(!e)throw new Error("No initial parameters for AdBlockManager");if(!e.containerEl)throw new Error("A containerEl param is required by AdBlockManager");if(!e.policy)throw new Error("A policy param is required by AdBlockManager");var t={},r=e.containerEl,s=r.getAttribute("data-embed"),l=!1!==e.executeBehaviour,d=!1,u=e.player,c=new n,f=function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])};t.on=function(e,t){return c.on(e,t)},t.off=function(e,t){return c.off(e,t)},t.detected=d;var p={empty:function(){},block_video:function(){f(r,{width:r.getAttribute("data-width")?r.getAttribute("data-width")+"px":"100%",height:r.getAttribute("data-height")?r.getAttribute("data-height")+"px":"100%",color:"#fff",maxWidth:"100%",maxHeight:"100%",textAlign:"center",display:"table-cell",verticalAlign:"middle"}),r.innerHTML='<div class="adblock_message">'+i("adblock_detected_block_video")+"</div>"},black_preroll:function(){var e=document.createElement("div"),t=null,n=15;f(e,{width:"100%",height:"100%",color:"#fff",backgroundColor:"#000",paddingTop:"20%",maxWidth:"100%",maxHeight:"100%",textAlign:"center",boxSizing:"border-box",position:"absolute",top:"0",left:"0",zIndex:"20"}),e.innerHTML='<div class="adblock_message" id="adblock_message_'+s+'">'+i("adblock_detected_timeout",[n])+"</div>",r.appendChild(e),setTimeout(function(){clearInterval(t),e.parentNode.removeChild(e),c.emit("meride.adblock_timeout_ended")},15e3),c.emit("meride.adblock_timeout_started"),t=setInterval(function(){n-=1,e.innerHTML='<div class="adblock_message" id="adblock_message_'+s+'">'+i("adblock_detected_timeout",[n])+"</div>"},1e3)},roll_video:function(){new o({player:u,containerEl:r,ad:e.ad||!1})}},h=function(){d=!0,a.setAdblockDetectedState(!0),c.emit("meride.adblock_detected"),!0===l&&p[e.policy](),e.onAdBlockDetected&&"function"==typeof e.onAdBlockDetected&&e.onAdBlockDetected(p[e.policy])},m=function(){d=!1,a.setAdblockDetectedState(!1),c.emit("meride.adblock_not_detected"),e.onAdBlockNotDetected&&"function"==typeof e.onAdBlockNotDetected&&e.onAdBlockNotDetected()};return"undefined"==typeof blockAdBlock?h():(blockAdBlock.setOption("checkOnLoad",!1),blockAdBlock.onDetected(h),blockAdBlock.onNotDetected(m),blockAdBlock.check(!0)),t};e.exports=s},function(e,t){var r={volumeOnSVG:'<svg width="100%" height="100%" viewBox="0 0 43 43" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs> <g id="merideVolumeOn" stroke="#333" stroke-width=".5"> <path d="M2.691,15.437v12.361h7.035l10.534,8.644l0.007-29.654L9.733,15.437H2.691L2.691,15.437z M24.305,14.015 c-0.617-0.608-1.599-0.608-2.217,0.006c-0.608,0.611-0.608,1.603,0.003,2.214v-0.003c1.352,1.354,2.187,3.21,2.187,5.271 c0,2.056-0.832,3.908-2.185,5.257c-0.616,0.614-0.616,1.599-0.003,2.223c0.304,0.306,0.705,0.458,1.106,0.458 c0.404,0,0.815-0.152,1.11-0.458c1.912-1.911,3.099-4.564,3.099-7.477C27.408,18.582,26.216,15.925,24.305,14.015z M27.897,10.425 c-0.618-0.611-1.6-0.611-2.214,0c-0.613,0.611-0.613,1.605,0,2.214c2.271,2.271,3.685,5.396,3.685,8.86 c0,3.465-1.402,6.587-3.683,8.861c-0.619,0.608-0.619,1.599,0,2.214c0.295,0.303,0.706,0.458,1.109,0.458 c0.402,0,0.815-0.155,1.107-0.458c2.835-2.838,4.601-6.758,4.597-11.075C32.49,17.182,30.731,13.253,27.897,10.425z M31.308,7.016 c-0.62-0.611-1.602-0.608-2.212,0.003c-0.614,0.612-0.614,1.603,0.003,2.214h-0.003c3.147,3.144,5.082,7.47,5.082,12.27 c0,4.795-1.935,9.124-5.079,12.268c-0.614,0.614-0.614,1.599,0.003,2.217c0.303,0.296,0.704,0.455,1.107,0.455 c0.4,0,0.802-0.162,1.107-0.459c3.696-3.702,5.999-8.836,5.992-14.48C37.315,15.849,35.013,10.716,31.308,7.016z"/> </g> </defs> <use xlink:href="#merideVolumeOn" class="btn"></use> </svg>',volumeOffSVG:'<svg width="100%" height="100%" viewBox="0 0 43 43" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <defs> <g id="merideVolumeOff" stroke="#333" stroke-width=".5"> <path d="M 3.59375 3.09375 C 3.081875 3.09375 2.5775 3.297 2.1875 3.6875 C 1.4055 4.4685 1.4055 5.719 2.1875 6.5 L 10.5 14.8125 L 9.71875 15.4375 L 2.6875 15.4375 L 2.6875 27.8125 L 9.71875 27.8125 L 20.25 36.4375 L 20.25 24.5625 L 22.25 26.5625 C 22.193716 26.622407 22.15199 26.691933 22.09375 26.75 C 21.47775 27.364 21.48075 28.34475 22.09375 28.96875 C 22.39775 29.27475 22.7865 29.4375 23.1875 29.4375 C 23.5915 29.4375 24.0175 29.27475 24.3125 28.96875 C 24.36977 28.91151 24.412794 28.839808 24.46875 28.78125 L 25.875 30.1875 C 25.814286 30.250578 25.749525 30.313166 25.6875 30.375 C 25.0685 30.983 25.0685 31.9475 25.6875 32.5625 C 25.9825 32.8655 26.37825 33.03125 26.78125 33.03125 C 27.18325 33.03125 27.61425 32.8655 27.90625 32.5625 C 27.964551 32.504137 28.005109 32.434272 28.0625 32.375 L 29.28125 33.59375 C 29.220311 33.656544 29.155631 33.719369 29.09375 33.78125 C 28.47975 34.39525 28.47675 35.382 29.09375 36 C 29.39675 36.296 29.81575 36.4375 30.21875 36.4375 C 30.61875 36.4375 31.0075 36.26575 31.3125 35.96875 C 31.370369 35.910787 31.411567 35.839912 31.46875 35.78125 L 35 39.3125 C 35.391 39.7035 35.89425 39.90625 36.40625 39.90625 C 36.91825 39.90625 37.4225 39.7035 37.8125 39.3125 C 38.5935 38.5315 38.5935 37.281 37.8125 36.5 L 34 32.6875 C 36.094594 29.472446 37.317603 25.614159 37.3125 21.5 C 37.3195 15.845 35.0175 10.73125 31.3125 7.03125 C 30.6925 6.42025 29.70375 6.42025 29.09375 7.03125 C 28.47975 7.64325 28.47675 8.60775 29.09375 9.21875 C 32.24075 12.36275 34.1875 16.7 34.1875 21.5 C 34.1875 24.760609 33.279968 27.802679 31.71875 30.40625 L 30.46875 29.15625 C 31.746209 26.888956 32.502575 24.279092 32.5 21.5 C 32.492 17.183 30.74025 13.2655 27.90625 10.4375 C 27.28825 9.8265 26.3015 9.8265 25.6875 10.4375 C 25.0745 11.0485 25.0745 12.016 25.6875 12.625 C 27.9585 14.896 29.375 18.036 29.375 21.5 C 29.375 23.416735 28.925739 25.22241 28.15625 26.84375 L 26.65625 25.34375 C 27.121908 24.151446 27.40625 22.8527 27.40625 21.5 C 27.40925 18.576 26.2235 15.91 24.3125 14 C 23.6955 13.392 22.71175 13.41725 22.09375 14.03125 C 21.48575 14.64225 21.48275 15.639 22.09375 16.25 C 23.435898 17.602531 24.28125 19.447521 24.28125 21.5 C 24.28125 21.960169 24.23612 22.407372 24.15625 22.84375 L 20.28125 18.96875 L 20.28125 6.78125 L 13.59375 12.28125 L 5 3.6875 C 4.6095 3.297 4.105625 3.09375 3.59375 3.09375 z"/> </g> </defs> <use xlink:href="#merideVolumeOff" class="btn"></use> </svg>'};e.exports=r},function(e,t,r){"use strict";function n(){if(l.length)throw l.shift()}function i(e){var t;t=s.length?s.pop():new o,t.task=e,a(t)}function o(){this.task=null}var a=r(16),s=[],l=[],d=a.makeRequestCallFromTimer(n);e.exports=i,o.prototype.call=function(){try{this.task.call()}catch(e){i.onerror?i.onerror(e):(l.push(e),d())}finally{this.task=null,s[s.length]=this}}},function(e,t){var r=r||{};e.exports=r},function(e,t){e.exports={baseURL:"{BASE_URL}",proxyURL:"{PROXY_URL}",tokenServiceURL:"{TOKEN_SERVICE_URL}"}},function(e,t,r){var n=r(23),i=r(7),o=r(3),a=r(42),s=r(1),l=r(43),d=r(44),u=r(45),c=r(46),f=r(47),p=r(48),h=r(49),m=r(0),v=r(50),g=r(52),y=r(53),E=r(6),b=(r(26),r(55)),w=r(25),_=r(63),T=r(64),A=r(29),S=r(17),L=r(65),k=r(67),D=r(68),C=r(69),R=r(70),x=(r(24),r(4).applyStyles),O=r(13),I=r(11);r(71);var M=function(e){var t={},r=meride.embed.Embed,M=meride.adv.AdLoader,P=(meride.adv.MediaFactoryRenderer,meride.player.Player),N=new m,B=!1,F={};t.on=function(e,t){return N.on(e,t)},t.off=function(e,t){return N.off(e,t)};var j=function(e){if(!e)throw new Error("No parameter passed to initEmbed. At least embedID required");if(!e.embedID)throw new Error("embedID is a required parameter");var t=e.embedID,m=e.embedElement,j=m.getAttribute("data-customer"),U=(m.getAttribute("data-nfs"),i.isMobile()),V=parseInt(m.getAttribute("data-width"),10),G=parseInt(m.getAttribute("data-height"),10),q=!0===e.advPrefetch,H=!1!==e.showPauseBtnOnMouseOver,K=e.type||(U?"html5":"flash"),W=e.advSuffix?e.advSuffix:null!==m.getAttribute("data-adv-suffix")?m.getAttribute("data-adv-suffix"):"",z=e.srcSuffix||"",Y=e.titlePrefix||"",X=e.advManager||null,Q=e.skin||null,J=e.videoFormat||{},Z=e.ima||{},$=Z.vpaidMode||null,ee=e.bulkLabel?e.bulkLabel||"NO_LABEL":m.getAttribute("data-bulk-label")||"NO_LABEL",te=function(){try{return window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}catch(e){return!1}}(),re=e.hls||null,ne=!1!==e.allowM3u8OnDesktop,ie=e.embed||null,oe=!1!==e.enableFullscreen;null===ie&&(ie=new r({embedID:t,clientID:j,device:U?"mobile":"desktop",videoFormat:U?"m3u8":"f4m",bulkLabel:ee}));var ae=function(r){var j,ae,se,le,de,ue,ce,fe,pe={url:"",type:"",link:"",settingVolume:"-1"},he={url:"",type:"",link:"",settingVolume:"-1"},me=[],ve=!1,ge=ie.getOverlay("primary"),ye=ie.getOverlay("initial"),Ee=ie.getPoster(),be=Y+r.getElementsByTagName("title")[0].firstChild.data,we=ie.getVideo()+z,_e=ie.getAnalytic("meride"),Te=null,Ae=r.getElementsByTagName("embed")[0],Se=""===Ae.getAttribute("wmode")&&null===Ae.getAttribute("wmode")?Ae.getAttribute("wmode"):"direct",Le=e.defaultVolume||1,ke="true"===Ae.getAttribute("autoplay"),De="true"===Ae.getAttribute("responsive"),Ce="true"===Ae.getAttribute("mute"),Re="false"!==Ae.getAttribute("controlbar-auto-hide"),xe=Ae.getAttribute("controlbarmode"),Oe="html5"===Ae.getAttribute("desktop-player"),Ie="false"!==Ae.getAttribute("seekable"),Me="true"===Ae.getAttribute("crop"),Pe=Ae.getAttribute("background-image")||m.getAttribute("data-background-image"),Ne=Ae.getAttribute("background-color")||m.getAttribute("data-background-color"),Be=ie.getAnalytic("ama"),Fe=e.scrollMode||{},je=ie.getWatermark(),Ue=!1,Ve=ie.getAnalytic("comscore"),Ge=ie.getAnalytic("nielsen"),qe=ie.getAnalytic("webtrekk"),He=Ae.getElementsByTagName("video")[0],Ke=["default","ima","freewheel"],We=!1,ze=null,Ye="true"===m.getAttribute("data-360"),Xe=!1,Qe=y(navigator.userAgent);null===X&&-1!==Ke.indexOf(Ae.getAttribute("player-adv-manager"))&&(X=Ae.getAttribute("player-adv-manager")),$=null===$&&void 0!==Ae.getAttribute("ima-vpaid-mode")?Ae.getAttribute("ima-vpaid-mode"):$,"ENABLED"!==$&&"INSECURE"!==$&&"DISABLED"!==$&&($="ENABLED"),0===e.defaultVolume&&(Le=0),!0!==Oe||e.type||(K="html5"),e.bulkLabel||m.getAttribute("data-bulk-label")||null===Ae.getAttribute("bulk-selected-label")||(ee=Ae.getAttribute("bulk-selected-label")),void 0!==e.is360&&(Ye=e.is360);var Je=function(e){var t,r,n,i=e.split(":");return 3!==i.length?0:(t=parseInt(i[2],10),r=parseInt(i[1],10),n=parseInt(i[0],10),t+60*r+3600*n)},Ze=function(e,t){var n=!0===t?e.url:e.url.split("***")[0],i={url:decodeURIComponent(n),type:e.type,link:e.link,settingVolume:e.settingVolume};if("video"===i.type){var o=r.getElementsByTagName("preroll")[0];"akamai_adaptive_media_delivery"===r.getElementsByTagName("video")[0].getAttribute("caching_type")&&(i.url=o.getElementsByTagName("iphone")[0].firstChild.data)}return i},$e=function(e,t){return e.timeSetting===t.timeSetting?0:e.timeSetting<t.timeSetting?-1:1};if(void 0!==e.wmode&&(Se=e.wmode),null!==m.getAttribute("data-autoplay")&&(ke="true"===m.getAttribute("data-autoplay")),void 0!==e.autoPlay&&(ke=e.autoPlay),!0===e.crop&&(Me=!0),null!==m.getAttribute("data-responsive")&&(De="true"===m.getAttribute("data-responsive")),void 0!==e.responsive&&(De=!1!==e.responsive),null!==m.getAttribute("data-muted")&&(Ce="true"===m.getAttribute("data-muted")),void 0!==e.muted&&(Ce=e.muted),x(m,{width:V+"px",height:G+"px"}),j=ie.getPrerolls(),j.length>0)if("flash"===K){fe=j[0];for(var et=1,tt=j.length;et<tt;et+=1)fe.url+="||"+j[et].url;pe=Ze(fe,!0)}else fe=j.splice(0,1)[0],pe=Ze(fe,"ima"!==X);if(me=ie.getMidrolls(),ae=ie.getEndrolls(),ae.length>0&&(he=Ze(ae[0],"html5"!==K)),_e.staturl&&"akamai_log"===_e.tecnology&&(Te=new v({baseURL:_e.staturl,embed:ie,playerType:K,playerContainer:m,videoSrc:we,bulkLabel:ee,advManager:""!==pe.url?X:"",isLive:!0===He.getAttribute("live")||"true"===He.getAttribute("live")}),Te.init()),"html5"!==K&&!1===a.installed?K="html5":"html5"===K&&!0===a.installed&&!0!==te&&(K="flash"),"html5"===K){U?((void 0===J.html5||"m3u8"!==J.html5&&"mp4"!==J.html5)&&(J.html5="m3u8"),!0===i.detectWindowsPhone()&&(J.html5="mp4"),!0===Ye&&!0===i.detectIPhone()&&-1!==Qe.browser.name.indexOf("Safari")&&(J.html5="mp4")):J.html5?!1===ne&&(J.html5="mp4"):J.html5=te&&!1!==ne?"m3u8":"mp4",we=ie.getVideo(J.html5),null!==we.match(/\.mp4$/)&&(J.html5="mp4"),we+=z;var rt={src:we,container:m,width:V,height:G,autoPlay:ke,showVolumeBar:!1!==e.showVolumeBar,clickableVideo:!0===e.clickableVideo,dblClickFullscreen:!1!==e.dblClickFullscreen,loop:!0===e.loop,muted:!0===Ce,volume:Le,cbAutoHide:Re};je.logoURL&&(rt.watermark=function(){return je.right.length>0&&-1===je.right.indexOf("%")&&(je.right=parseInt(je.right,10)),je.top.length>0&&-1===je.top.indexOf("%")&&(je.top=parseInt(je.top,10)),je.left.length>0&&-1===je.left.indexOf("%")&&(je.left=parseInt(je.left,10)),je.bottom.length>0&&-1===je.bottom.indexOf("%")&&(je.bottom=parseInt(je.bottom,10)),je.displayTime.length>0&&(je.displayTime=1e3*parseInt(je.displayTime,10)),je}()),pe&&""!==pe.url&&!0===ke&&"ima"===X&&(rt.autoPlay=!1),"freewheel"===X&&(!0===e.autoPlay&&(e.freewheel.prerollAtTime||e.freewheel.prerollDelay)?rt.autoPlay=!0:rt.autoPlay=!1),null!==Q&&(rt.skin=Q),rt.hlsOpts={maxBufferLength:8,maxMaxBufferLength:8},re&&(void 0!==re.capLevelToPlayerSize&&(rt.hlsOpts.capLevelToPlayerSize=re.capLevelToPlayerSize),void 0!==re.startLevel&&(rt.hlsOpts.startLevel=re.startLevel,rt.hlsOpts.capLevelToPlayerSize=!1),void 0!==re.loadLevel&&(rt.hlsOpts.loadLevel=re.loadLevel),void 0!==re.autoLevelCapping&&(rt.hlsOpts.autoLevelCapping=re.autoLevelCapping)),rt.enableFullscreen=oe,rt.showPauseBtnOnMouseOver=H,"freewheel"!==X&&(rt.controls=["keyboard"]),!1===e.loadDefaultFonts&&(rt.loadDefaultFonts=!1),!0===Ye&&(rt.is360=!0,rt.config360={},"true"===m.getAttribute("data-360")&&("true"===m.getAttribute("data-360-vrmode")&&(rt.config360.vrModeUI=!0),"false"===m.getAttribute("data-360-embedded")&&(rt.config360.embedded=!1)),!0===e.is360&&(rt.config360=e.config360),rt.config360.scriptURL=n.BASE_URL+"scripts/vr/aframe.0.9.0.min.js");var nt=new P(rt);if(Ee){new T({container:m,video:nt.video,src:Ee})}if(!0===Ce&&nt.video.setAttribute("muted","muted"),!1===Ie){nt.disableSeek();var it=function(){nt.off("meride.first_play",it),nt.disableSeek()};nt.on("meride.first_play",it)}if(("hidden"===xe||"hidden"===e.controlbarMode&&"visible"!==e.controlbarMode)&&nt.disableControlBar(),"visible"===e.controlbarMode&&nt.enableControlBar(),G>=V){new R({container:m,player:nt,crop:Me})}!0===Me&&(x(nt.video,{"object-fit":"cover"}),x(m,{overflow:"hidden"})),nt.on("meride.enterfullscreen",function(){E.emit(s.ENTER_FULLSCREEN,m)}),nt.on("meride.exitfullscreen",function(){E.emit(s.EXIT_FULLSCREEN,m)}),nt.on("meride.manifest_parsed",function(){E.emit(s.MANIFEST_PARSED,m)}),nt.on("meride.hlsobject_error",function(e){if(e.arguments){var t=e.arguments[1]||{};!0===t.fatal&&E.emit(s.ERROR,m,{error:t})}}),nt.video.addEventListener("error",function(e){E.emit(s.ERROR,m,{error:{details:"generic_error"}})}),nt.video.addEventListener("stalled",function(e){}),nt.video.addEventListener("loadedmetadata",function(e){E.emit(s.LOADEDMETADATA,m,{player:nt.video})}),nt.video.addEventListener("playing",function(e){nt.video.src!==pe.url&&nt.video.src!==he.url&&E.emit(s.PLAY,m)}),nt.video.addEventListener("pause",function(e){nt.video.src!==pe.url&&nt.video.src!==he.url&&E.emit(s.PAUSE,m)}),nt.video.addEventListener("ended",function(e){nt.video.src!==we&&null===nt.video.src.match(/^blob:/)||E.emit(s.ENDED,m)});var ot=function(e){setTimeout(function(){ze=nt.video.getAttribute("data-meride-adv"),!isNaN(nt.video.duration)&&nt.video.duration>0&&!1===We&&"started"!==ze&&!nt.video.paused&&!1===Xe&&(Xe=!0,nt.video.removeEventListener("durationchange",ot),E.emit(s.PLAY_CONTENT,m))},500)};if(nt.container.addEventListener(Meride.EventType.AD_STARTED,function(){We=!0},!1),nt.container.addEventListener(Meride.EventType.AD_ENDED,function(){We=!1},!1),nt.container.addEventListener(Meride.EventType.AD_ERROR,function(){We=!1},!1),nt.video.addEventListener("durationchange",ot,!1),nt.video.addEventListener("play",ot,!1),N.emit("meride.video_rendered"),Pe&&x(m,{backgroundImage:"url('"+Pe+"')",backgroundSize:"cover",backgroundRepeat:"no-repeat"}),Ne&&x(m,{backgroundColor:Ne}),E.emit(s.READY,m,{player:nt.video,title:be,poster:Ee}),!0===De){new g(nt.video,m,{responsiveVertical:!0===e.responsiveVertical})}else m.style.maxWidth="none";var at=function(){if(Ge.clientid&&""!==Ge.clientid){Ge.title=be,Ge.src=nt.video.src;var t=!1,r=null;e.analytics&&e.analytics.nielsen&&(e.analytics.nielsen.vcid&&(Ge.vcid=e.analytics.nielsen.vcid),e.analytics.nielsen.title&&"string"==typeof e.analytics.nielsen.title&&(Ge.title=e.analytics.nielsen.title),!0===e.analytics.nielsen.sdk&&(t=!0,e.analytics.nielsen.appid&&(Ge.appid=e.analytics.nielsen.appid),!0===e.analytics.nielsen.sdkdebug&&(Ge.sdkdebug="debug"))),!0===t?(r=new u({params:Ge,player:nt,containerEl:m,type:"html5",isLive:!0===He.getAttribute("live")||"true"===He.getAttribute("live"),hls:nt.hls}),r.init()):(r=new d({params:Ge,player:nt,type:"html5"}),r.init())}},st=function(){qe.title=be,qe.player=nt,qe.advManager=""!==pe.url?X:"",qe.playerContainer=m,qe.autoPlay=ke,m.getAttribute("data-webtrekk-mg")&&(qe.mg=m.getAttribute("data-webtrekk-mg")),m.getAttribute("data-webtrekk-title")&&(qe.title=Y+m.getAttribute("data-webtrekk-title")),e.webtrekk&&(e.webtrekk.mg&&(qe.mg=e.webtrekk.mg),e.webtrekk.title&&(qe.title=Y+e.webtrekk.title)),qe.scriptURL=n.BASE_URL+"scripts/webtrekk/webtrekk_tracking.js",new f(qe).init()},lt=function(){Ve.title=be,new c({params:Ve}).init()},dt=!(""===ye.url&&""===ge.url&&""===pe.url&&""===he.url);if(!0===dt&&"video"===pe.type){new w({player:nt,containerEl:m,ad:ie.getRollVideo()})}!0===dt&&"black_preroll"===F.policy&&m.addEventListener(Meride.EventType.AD_ERROR,function(){de=new S({containerEl:m,policy:F.policy,executeBehaviour:!1,onAdBlockDetected:function(e){B=!0,Ue=!0,nt.video.pause(),de.on("meride.adblock_timeout_ended",function(){nt.video.play()}),e()},onAdBlockNotDetected:function(){}})},!1);var ut=function(){null!==nt.watermark&&nt.watermark.show()},ct=function(){null!==nt.watermark&&nt.watermark.hide()};if(!0===dt&&null!==nt.watermark&&nt.watermark.hide(),m.addEventListener(Meride.EventType.AD_ERROR,function(){nt.video.removeAttribute("data-meride-adv"),ut()},!1),m.addEventListener(Meride.EventType.PLAY_CONTENT,function(){setTimeout(function(){"started"!==nt.video.getAttribute("data-meride-adv")&&ut()},1e3)},!1),m.addEventListener(Meride.EventType.AD_EMPTY,function(){nt.video.removeAttribute("data-meride-adv"),ut()},!1),m.addEventListener(Meride.EventType.ROLLVIDEO_ENDED,function(){nt.video.removeAttribute("data-meride-adv")},!1),"freewheel"!==X&&m.addEventListener(Meride.EventType.AD_ENDED,function(){nt.video.removeAttribute("data-meride-adv")},!1),m.addEventListener(Meride.EventType.AD_ENDED,function(){ut()},!1),m.addEventListener(Meride.EventType.AD_STARTED,function(){nt.video.setAttribute("data-meride-adv","started"),(!e.watermark||e.watermark&&!1!==e.watermark.hideOnAdv)&&ct()},!1),m.addEventListener(Meride.EventType.ROLLVIDEO_STARTED,function(){nt.video.setAttribute("data-meride-adv","started")},!1),m.addEventListener(Meride.EventType.PLAY,function(){"started"!==nt.video.getAttribute("data-meride-adv")&&nt.enableSeek(),nt.video.removeAttribute("data-meride-adv")},!1),"freewheel"===X){var ft=function(){var t=e.freewheel||{};t.player=nt,t.hideControls=!1!==t.hideControls,t.originalSource=we,t.playBtns=[m.querySelector(".playBtn"),m.querySelector(".playSmallBtn")],t.autoPlay=ke,nt.video.autoplay=!1,t.hlsOpts=re;var r=!1;try{var n=new k(t);r=!0}catch(e){nt.video.autoplay=ke}!0===r&&(n.on("meride.freewheel_requestcomplete",function(){!0===ke&&(nt.video.setAttribute("autoplay","true"),setTimeout(function(){n.play()},500))}),n.init(),n.on("meride.freewheel_loaded",function(){(new D({freewheel:n,containerEl:m}).init(),!0===t.hideControls)&&new C({freewheel:n,containerEl:m,autoPlay:ke,showCountdown:!0===t.showCountdown}).init();n.requestAds()}),n.on("meride.freewheel_slot_ended",function(){nt.video.removeAttribute("data-meride-adv")}),n.on("meride.freewheel_current_context_change",function(e){E.emit(s.ADS_MANAGER_READY,m,{adsManager:e.arguments[0]})}))},pt=null,ht=function(){m.removeEventListener(s.AD_ERROR,ht),m.removeEventListener(s.AD_ENDED,ht),m.removeEventListener(s.AD_STARTED,ht),m.removeEventListener(s.AD_REQUEST_COMPLETE,ht),null!==pt&&pt.reset()},mt=null,vt=e.freewheel.prerollDelay,gt=function(){e.freewheel.prerollAtTime=parseInt(e.freewheel.prerollAtTime||0,10),e.freewheel.prerollDelay=parseInt(e.freewheel.prerollDelay||0,10);var t=function(){m.removeEventListener(s.PLAY_CONTENT,t),mt=setInterval(function(){if(3===(vt-=1)&&!0===e.freewheel.showCountdown){pt=new A({containerEl:m}),pt.show(I("view_video_pre_countdown"))}0===vt&&(clearInterval(mt),mt=null,ft())},1e3)},r=0,n=function(){nt.video.currentTime>1&&(r=nt.video.currentTime),e.freewheel.prerollAtTime&&nt.video.currentTime>e.freewheel.prerollAtTime&&ft()},i=function(){nt.video.removeEventListener("timeupdate",n)},o=function(){var e=function(){""!==O.getAdvState()&&O.getAdvState()!==s.AD_ENDED&&O.getAdvState()!==s.PLAY_CONTENT||(nt.video.removeEventListener("playing",e),nt.video.currentTime=r)};m.removeEventListener(s.AD_ERROR,o),m.removeEventListener(s.AD_ENDED,o),nt.video.removeEventListener("timeupdate",n),nt.video.addEventListener("playing",e,!1)};e.freewheel.prerollDelay&&m.addEventListener(s.PLAY_CONTENT,t,!1),e.freewheel.prerollDelay&&m.addEventListener(s.PLAY_CONTENT,t,!1),nt.video.addEventListener("timeupdate",n,!1),m.addEventListener(s.AD_ERROR,o,!1),m.addEventListener(s.AD_ENDED,o,!1),m.addEventListener(s.AD_EMPTY,o,!1),m.addEventListener(s.AD_STARTED,i,!1)};if(de=new S({containerEl:m,policy:"empty",onAdBlockDetected:function(e){},onAdBlockNotDetected:function(){if(e.freewheel.prerollAtTime||e.freewheel.prerollDelay){if(gt(),e.freewheel.prerollAtTime){var t=parseInt(e.freewheel.prerollAtTime,10),r=function(){t-nt.video.currentTime<=3&&(nt.video.removeEventListener("timeupdate",r),pt=new A({containerEl:m}),pt.show(I("view_video_pre_countdown")))};nt.video.addEventListener("timeupdate",r,!1)}m.addEventListener(s.AD_ERROR,ht,!1),m.addEventListener(s.AD_ENDED,ht,!1),m.addEventListener(s.AD_STARTED,ht,!1),m.addEventListener(s.AD_REQUEST_COMPLETE,ht,!1)}else ft()}}),Be.beacon&&""!==Be.beacon){var yt={akamaiVars:{title:encodeURIComponent(be),category:document.domain,deliveryType:"O",device:Qe.os.name+" "+Qe.os.version+" "+Qe.device.model},configUrl:Be.beacon,embedID:t,prerollURL:pe.url,adLoader:void 0,adRenderer:void 0};se=new h(yt)}Ve.user&&""!==Ve.user&&lt(),qe.trackId&&""!==qe.trackId&&qe.trackDomain&&""!==qe.trackDomain&&st(),at()}else if("ima"===X&&!0===dt){var Et=function(){var e={debug:!0===Z.debug,width:nt.video.offsetWidth,height:nt.video.offsetHeight,videoID:t,player:nt,container:m,originSrc:we,autoPlay:!0===ke,sources:[{type:"video/mp4",src:nt.video.src}],settingVolume:pe.settingVolume,vpaidMode:$,advPrefetch:q,muted:Ce};if(Z.loadVideoTimeout&&(e.loadVideoTimeout=Z.loadVideoTimeout),Z.locale&&(e.locale=Z.locale),pe&&pe.url&&(e.preroll=pe.url+W),""!==he.url&&(e.postroll=he.url+decodeURIComponent(W)),""!==ye.url&&(e.overlayInitial=decodeURIComponent(ye.url),e.overlayInitialAfterTime=ye.afterTime>8?1e3*ye.afterTime:1e3*ye.afterTime+1e3*(8-ye.afterTime),e.overlayInitialShowTime=1e3*ye.stayTime),""!==ge.url&&(e.overlay=decodeURIComponent(ge.url),e.overlayFixed="0"!==ge.fixed,e.overlayAfterTime=1e3*ge.afterTime,!1===e.overlayFixed&&(e.overlayShowTime=ge.stayTime>8?1e3*ge.stayTime:1e3*ge.stayTime+1e3*(8-ge.stayTime),e.overlayUpdateTime=1e3*ge.delayTime,e.overlayMaxWidth=ge.maxDimensionWidth,e.overlayMaxHeight=ge.maxDimensionHeight)),Be.beacon&&""!==Be.beacon){var r={akamaiVars:{title:encodeURIComponent(be),category:document.domain,deliveryType:"O",device:Qe.os.name+" "+Qe.os.version+" "+Qe.device.model},configUrl:Be.beacon,embedID:t,prerollURL:pe.url};se=new h(r)}if(Ve.user&&""!==Ve.user&&lt(),qe.trackId&&""!==qe.trackId&&qe.trackDomain&&""!==qe.trackDomain&&st(),!0===te&&"m3u8"===J.html5){at(),e.hlsObj=nt.hls;var n=function(){if(nt.off("meride.manifest_parsed",n),""!==pe.url){var e=function(){if(m.removeEventListener(Event.AD_ERROR,e),!0===ke){var t=nt.video.play();t&&t.catch(function(e){nt.video.pause()})}};m.addEventListener(s.AD_ERROR,e,!1)}};nt.on("meride.manifest_parsed",n)}else at();e.scrollMode=Fe,e.midrolls=me,e.isHlsSupported=te;var i=function(){m.removeEventListener(s.READY,i),ce=new L(e),ce.on("meride.imascript_loaded",function(){N.emit("meride.imascript_loaded",{googleIMA:ce})}),ce.on("meride.ima_main_play_clicked",function(){E.emit(s.MAIN_PLAY_CLICKED,m)})};if(null===Q)i();else{var o=null,a=10;o=setInterval(function(){0===a&&(clearInterval(o),o=null);try{null!==m.querySelector(".playBtn")&&(clearInterval(o),o=null,i())}catch(e){}a-=1},100)}};"roll_video"===F.policy?(le=ie.getRollVideoAdBlock(),de=new S({ad:le,containerEl:m,policy:F.policy,player:nt,executeBehaviour:!1,onAdBlockDetected:function(e){B=!0;var t=function(){m.removeEventListener(s.AD_ERROR,t,!1),e()};m.addEventListener(s.AD_ERROR,t,!1),Et()},onAdBlockNotDetected:function(){Et()}})):Et()}else if("default"===X){"roll_video"===F.policy&&(le=ie.getRollVideoAdBlock(),de=new S({ad:le,containerEl:m,policy:F.policy,player:nt,onAdBlockDetected:function(e){B=!0},onAdBlockNotDetected:function(){}}));var bt=function(){try{nt.video.removeEventListener("play",bt)}catch(e){}if(ge&&""!==ge.url){var e=function(){new _({loader:new M({ads:[{uri:ge.url+W}],videoEl:nt.video}),data:ge,videoEl:nt.video,containerEl:m,onLoad:function(e){e.render()},onAdEnded:function(){ge.delayTime&&""!==ge.delayTime&&setTimeout(e,1e3*parseInt(ge.delayTime,10))}})};ge.afterTime&&""!==ge.afterTime?(setTimeout(e,1e3*parseInt(ge.afterTime,10)),ge.afterTime=""):e()}},wt=function(){new _({loader:new M({ads:[{uri:ye.url+W}],videoEl:nt.video}),data:ye,videoEl:nt.video,containerEl:m,onLoad:function(e){e.render()},onAdEnded:bt})};if(""===pe.url&&(ye&&""!==ye.url&&wt(),!ge||""===ge.url||ye&&""!==ye.url||nt.video.addEventListener("play",bt)),""!==pe.url&&"dart"===pe.type){var _t=!1,Tt=new b({containerEl:m,player:nt,useAdWaterfall:!0,originSrc:we,rolls:ie.getPrerolls(),advSuffix:W,adBlock:F,autoPlay:ke}),At=function(e){if(Tt.off("meride.rollvastended",At),at(),ye&&""!==ye.url&&wt(),!ge||""===ge.url||ye&&""!==ye.url||bt(),!0===te&&"m3u8"===J.html5){var t=m.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}},St=function(e){if(Tt.off("meride.rollvasterror",St),at(),nt.video.display="block",!0===te&&"m3u8"===J.html5){var t=m.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}nt.video.play(),_t=!0},Lt=function(e){if(Tt.off("meride.rollvastready",Lt),!0===te&&"m3u8"===J.html5){nt.hls.stopLoad();var r=m.querySelector(".qualityContainer");r&&(r.style.display="none")}if(Ve.user&&""!==Ve.user){new p({user:Ve.user,playerID:t,player:nt,renderer:e.arguments[0].renderer}).init()}};Tt.on("meride.rollvastready",Lt),Tt.on("meride.rollvasterror",St),Tt.on("meride.rollvastended",At),!1===q?nt.on("meride.first_play",function(){nt.video.pause(),Tt.loadRoll({autoPlay:!0})}):Tt.loadRoll({autoPlay:ke})}if(me.length>0){for(var kt=0,Dt=me.length;kt<Dt;kt+=1)me[kt].timeSetting=Je(me[kt].timeSetting);me=me.sort($e),ue=me.shift();var Ct=function(){nt.video.removeEventListener("playing",Ct),nt.video.currentTime=ue.timeSetting;var e=setInterval(function(){nt.video.currentTime<ue.timeSetting?nt.video.currentTime=ue.timeSetting:clearInterval(e)},20),t=function(){nt.video.removeEventListener("playing",t),ue=me.shift(),nt.video.addEventListener("timeupdate",Pt)};nt.video.addEventListener("playing",t,!1)},Rt=null,xt=function(e){if(Rt.off("meride.rollvastended",xt),!0===te&&"m3u8"===J.html5){var t=m.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}},Ot=function(e){if(Rt.off("meride.rollvasterror",Ot),nt.video.display="block",!0===te&&"m3u8"===J.html5){var t=m.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}},It=function(e){if(Rt.off("meride.rollvastready",It),!0===te&&"m3u8"===J.html5){nt.hls.stopLoad();var t=m.querySelector(".qualityContainer");t&&(t.style.display="none")}},Mt=function(e){Rt.off("meride.rollvastended",Mt),nt.video.addEventListener("playing",Ct,!1)},Pt=function(){nt.video.currentTime>ue.timeSetting&&(nt.video.removeEventListener("timeupdate",Pt),ve=!0,Rt=new b({containerEl:m,player:nt,useAdWaterfall:!0,originSrc:we,rolls:ue.rolls,advSuffix:W,adBlock:F,autoPlay:!0}),Rt.on("meride.rollvastready",It),Rt.on("meride.rollvasterror",Ot),Rt.on("meride.rollvastended",xt),Rt.on("meride.rollvastended",Mt),Rt.loadRoll())},Nt=function(){try{m.removeEventListener(s.PLAY,Nt),m.removeEventListener(s.AD_ENDED,Nt),m.removeEventListener(s.AD_ERROR,Nt)}catch(e){}nt.video.addEventListener("timeupdate",Pt)};""===pe.url?m.addEventListener(s.PLAY,Nt,!1):(m.addEventListener(s.AD_ENDED,Nt,!1),m.addEventListener(s.AD_ERROR,Nt,!1))}if(he.url&&""!==he.url){var Bt=function(){m.removeEventListener(s.ENDED,Bt);var e=new b({containerEl:m,player:nt,useAdWaterfall:!0,originSrc:we,rolls:ae,advSuffix:W,adBlock:F,autoPlay:!1}),t=function(r){if(e.off("meride.rollvastended",t),!0===te&&"m3u8"===J.html5){var n=m.querySelector(".qualityContainer");n&&(n.style.display="table-cell")}var i=function(){nt.video.removeEventListener("playing",i),nt.video.pause()};nt.video.addEventListener("playing",i,!1)},r=function(t){if(e.off("meride.rollvasterror",r),nt.video.display="block",!0===te&&"m3u8"===J.html5){var n=m.querySelector(".qualityContainer");n&&(n.style.display="table-cell")}},n=function(t){if(e.off("meride.rollvastready",n),!0===te&&"m3u8"===J.html5){nt.hls.stopLoad();var r=m.querySelector(".qualityContainer");r&&(r.style.display="none")}};e.on("meride.rollvastready",n),e.on("meride.rollvasterror",r),e.on("meride.rollvastended",t),e.loadRoll()};m.addEventListener(s.ENDED,Bt)}if(Be.beacon&&""!==Be.beacon){var yt={akamaiVars:{title:encodeURIComponent(be),category:document.domain,deliveryType:"O",device:Qe.os.name+" "+Qe.os.version+" "+Qe.device.model},configUrl:Be.beacon,embedID:t,prerollURL:pe.url,adLoader:void 0,adRenderer:void 0};se=new h(yt)}Ve.user&&""!==Ve.user&&lt(),qe.trackId&&""!==qe.trackId&&qe.trackDomain&&""!==qe.trackDomain&&st(),pe&&pe.url||at()}else Ve.user&&""!==Ve.user&&lt(),qe.trackId&&""!==qe.trackId&&qe.trackDomain&&""!==qe.trackDomain&&st(),pe&&pe.url||at()}else{var Ft,jt=document.createElement("div"),Ut="meride_flash_"+t,Vt=null,Gt={},qt=ie.getVideoProvider();jt.setAttribute("id",Ut),m.appendChild(jt);var Ht=new l({embedID:t,container:m});null!==Te&&Te.registerFlashObject(Ht);var Kt,Wt=!0,zt=function(){Kt=document.createElement("div"),x(Kt,{width:"100%",height:"100%",position:"absolute",top:"0",left:"0"});var e=document.createElement("a");x(e,{display:"block",width:"100%",height:"100%",position:"absolute",top:"0",left:"0"}),e.setAttribute("href",pe.link),e.setAttribute("onclick","window.open(this.href, 'meride_adv_link'); return false;"),Kt.appendChild(e),m.appendChild(Kt)},Yt=function(){Kt.parentNode.removeChild(Kt)},Xt=function(){if(""!==pe.url&&"video"===pe.type){try{jt.getElementsByTagName("embed")[0].hideControlBar()}catch(e){}try{jt.getElementsByTagName("object")[0].hideControlBar()}catch(e){}}},Qt=function(){E.emit(s.PLAY,m),!0===Wt&&(Wt=!1,""!==pe.link&&zt())},Jt=function(){E.emit(s.PAUSE,m)},Zt=function(e){"black_preroll"===F.policy&&(de=new S({containerEl:m,policy:F.policy,executeBehaviour:!1,onAdBlockDetected:function(e){B=!0,Ue=!0,null!==Vt&&j.length>0&&(de.on("meride.adblock_timeout_ended",function(){Vt.play2()}),e())},onAdBlockNotDetected:function(){}}))},$t=function(){if(""!==pe.url&&"video"===pe.type){""!==pe.link&&Yt();var e=function(){Ht.off("meride.ready",e),Vt.play2()};Ht.on("meride.ready",e),Vt.setMediaResourceURL(we),Vt.showControlBar()}Ht.off("meride.ready",Xt),Ht.off("meride.playing",Qt),Ht.off("meride.pause",Jt),Ht.off("meride.complete",$t)},er=function(){Ht.off("meride.playing",er),!0===Ue&&Vt.pause()},tr=function(e){Ht.off("meride.ready",tr),Vt=e.arguments[0].player,Ht.on("meride.aderror",Zt)},rr=0,nr=function(e){rr=e.arguments[1]},ir=function(e){e.arguments[1]>rr&&Vt.seek(rr)};if(Ht.on("meride.ready",Xt),Ht.on("meride.ready",tr),Ht.on("meride.complete",$t),Ht.on("meride.playing",Qt),Ht.on("meride.playing",er),Ht.on("meride.paused",Jt),!1===Ie&&(Ht.on("meride.currentTimeChange",nr),Ht.on("meride.seekingChange",ir)),""!==pe.url&&"video"===pe.type){var or=pe.url.match(/\.m3u8/);if("akamai_stream_packaging"===He.getAttribute("caching_type")&&null!==or){var ar=He.getElementsByTagName("iphone")[0].firstChild.data;ar&&(we=ar)}}if("http_smoothstreaming"===qt||"dvr_smoothstreaming"===qt){var sr=He.getElementsByTagName("default")[0].firstChild.data;sr&&(we=sr)}if("http"!==qt||null!==He.getAttribute("caching_type")&&""!==He.getAttribute("caching_type")||!0!==He.getAttribute("live")&&"true"!==He.getAttribute("live")||(we=He.getElementsByTagName("default")[0].firstChild.data?He.getElementsByTagName("default")[0].firstChild.data:we),Gt={src:""!==pe.url&&"video"===pe.type?pe.url:we,width:V,height:G,autoPlay:ke,controlBarAutoHide:Re,scaleMode:"letterbox",backgroundColor:"#000000",target:"meride_target_"+t,wmode:Se,javascriptCallbackFunction:"merideJsCallback"+t,playButtonOverlay:!0,initialBufferTime:3,expandedBufferTime:20,volume:Le},Ee&&(Gt.poster=encodeURIComponent(Ee)),"dvr"===qt&&(Gt.akamaiStream=!0),"http_smoothstreaming"!==qt&&"dvr_smoothstreaming"!==qt||(Gt.isSmoothStreaming=!0),je.logoURL&&(Gt.watermark=function(){return je.right.length>0&&-1===je.right.indexOf("%")&&(je.right=parseInt(je.right,10)),je.top.length>0&&-1===je.top.indexOf("%")&&(je.top=parseInt(je.top,10)),je.left.length>0&&-1===je.left.indexOf("%")&&(je.left=parseInt(je.left,10)),je.bottom.length>0&&-1===je.bottom.indexOf("%")&&(je.bottom=parseInt(je.bottom,10)),je.displayTime.length>0&&(je.displayTime=1e3*parseInt(je.displayTime,10)),je}(),Gt.watermark=encodeURIComponent(JSON.stringify(Gt.watermark))),me.length>0){Gt.midrolls=[];for(var lr=0,dr=me.length;lr<dr;lr+=1){for(var ur={time:Je(me[lr].timeSetting),type:me[lr].mode,adv:[]},cr=0,fr=me[lr].rolls.length;cr<fr;cr+=1)ur.adv.push({url:me[lr].rolls[cr].url});Gt.midrolls.push(ur)}Gt.midrolls=encodeURIComponent(JSON.stringify(Gt.midrolls))}if(Ge.clientid&&""!==Ge.clientid){Ge.title=be,Ge.src=we;new d({params:Ge,player:Ht,type:"flash"}).init()}var pr=ie.getAnalytic("comscore");if(pr.user&&""!==pr.user){pr.title=be;var hr={user:pr.user,adtrack:{standard:pr.adtrack_standard,start:pr.adtrack_start,complete:pr.adtrack_complete}};Gt.comscore=encodeURIComponent(JSON.stringify(hr));new c({params:pr}).init()}Be.beacon&&""!==Be.beacon&&(Gt.isAkamaiAnalytics=!0,Gt.akamaianalytic_configPath=Be.beacon,Gt.akamaianalytic_playerId="meride-video-player-"+t,Gt.akamaianalytic_title=encodeURIComponent(be),Gt.akamaianalytic_category=document.domain,Gt.akamaianalytic_deliveryType="O"),window["merideJsCallback"+t]=Ht.javascriptCallbackFunction;null!==Gt.src.match(/\.m3u8$|\.m3u8\?+/i)&&(Gt.cachingType="akamai_adaptive_media_delivery"),(""!==pe.url||""!==he.url||ye.url||ge.url)&&(Gt.dfp_width=V,Gt.dfp_height=G,Gt.dfp_companiontype="html",Gt.isAFV=!0,Gt.isDART=!0),""!==pe.url&&"dart"===pe.type&&(Gt.dfp_preroll=encodeURIComponent(pe.url+W),Gt.dfp_tag=Gt.dfp_preroll.split("||")[0]+W),""!==he.url&&"dart"===he.type&&(Gt.dfp_tagEnd=encodeURIComponent(he.url+W)),ye&&""!==ye.url&&(Gt.dfp_overlayInitial=encodeURIComponent(ye.url+W),Gt.dfp_overlayInitialShowTime=ye.stayTime,Gt.dfp_overlayInitialAfterTime=ye.afterTime),ge&&""!==ge.url&&(Gt.dfp_overlay=encodeURIComponent(ge.url+W),Gt.dfp_overlayAfterTime=ge.afterTime,!1!==ge.fixed&&"0"!==ge.fixed||(Gt.dfp_overlayShowTime=ge.stayTime,Gt.dfp_overlayUpdateTime=ge.delayTime,Gt.dfp_overlayMaxWidth=ge.maxDimensionWidth,Gt.dfp_overlayMaxHeight=ge.maxDimensionHeight)),"hidden"===xe&&(Gt.controlBarMode="none"),o.include(n.WCORE_URL+"WCore.js",function(){var e=function(){o.include(n.WCORE_URL+"WPlayer/WPlayer.js",function(){WPlayer.factory(null,Gt,"f4m",function(e){if(Ft=e,jt.innerHTML=e.render(),!0===De){new g(jt.getElementsByTagName("object")[0],m),new g(jt.getElementsByTagName("embed")[0],m)}})},!0)};"roll_video"===F.policy?(le=ie.getRollVideoAdBlock(),de=new S({containerEl:m,policy:F.policy,executeBehaviour:!1,onAdBlockDetected:function(t){B=!0,pe.url=le.url.mp4,pe.type="video",pe.link=le.link,Gt.src=pe.url,E.emit(s.ROLLVIDEO_STARTED,m),e()},onAdBlockNotDetected:function(){e()}})):e()},!0)}},se=function(e){var t=e.getElementsByTagName("embed")[0].getAttribute("adblock-policy");t=null===t||""===t?"":t,F={policy:t},"block_video"===t?new S({containerEl:m,policy:t,onAdBlockDetected:function(e){B=!0},onAdBlockNotDetected:function(){ae(e)}}):ae(e)};e.response&&""!==e.response?se(e.response):ie.read().then(se).catch(function(e){})};return t.init=function(e){return j(e)},t};e.exports=M},function(e,t){var r={BASE_URL:"https://medialamborghini-meride-tv.akamaized.net/",WCORE_URL:"https://medialamborghini-meride-tv.akamaized.net/libs/wcore/latest/",DATA_URL:"https://medialamborghini-meride-tv.akamaized.net/meride/",TOKEN_SERVICE_URL:""};e.exports=r},function(e,t){!function(e){var t=function(t){this._options={checkOnLoad:!1,resetOnEnd:!1,loopCheckTime:50,loopMaxNumber:5,baitClass:"pub_300x250 pub_300x250m pub_728x90 text-ad textAd text_ad text_ads text-ads text-ad-links",baitStyle:"width: 1px !important; height: 1px !important; position: absolute !important; left: -10000px !important; top: -1000px !important;",debug:!1},this._var={version:"3.2.1",bait:null,checking:!1,loop:null,loopNumber:0,event:{detected:[],notDetected:[]}},void 0!==t&&this.setOption(t);var r=this,n=function(){setTimeout(function(){!0===r._options.checkOnLoad&&(!0===r._options.debug&&r._log("onload->eventCallback","A check loading is launched"),null===r._var.bait&&r._creatBait(),setTimeout(function(){r.check()},1))},1)};void 0!==e.addEventListener?e.addEventListener("load",n,!1):e.attachEvent("onload",n)};t.prototype._options=null,t.prototype._var=null,t.prototype._bait=null,t.prototype._log=function(e,t){},t.prototype.setOption=function(e,t){if(void 0!==t){var r=e;e={},e[r]=t}for(var n in e)this._options[n]=e[n],!0===this._options.debug&&this._log("setOption",'The option "'+n+'" he was assigned to "'+e[n]+'"');return this},t.prototype._creatBait=function(){var t=document.createElement("div");t.setAttribute("class",this._options.baitClass),t.setAttribute("style",this._options.baitStyle),this._var.bait=e.document.body.appendChild(t),this._var.bait.offsetParent,this._var.bait.offsetHeight,this._var.bait.offsetLeft,this._var.bait.offsetTop,this._var.bait.offsetWidth,this._var.bait.clientHeight,this._var.bait.clientWidth,!0===this._options.debug&&this._log("_creatBait","Bait has been created")},t.prototype._destroyBait=function(){e.document.body.removeChild(this._var.bait),this._var.bait=null,!0===this._options.debug&&this._log("_destroyBait","Bait has been removed")},t.prototype.check=function(e){if(void 0===e&&(e=!0),!0===this._options.debug&&this._log("check","An audit was requested "+(!0===e?"with a":"without")+" loop"),!0===this._var.checking)return!0===this._options.debug&&this._log("check","A check was canceled because there is already an ongoing"),!1;this._var.checking=!0,null===this._var.bait&&this._creatBait();var t=this;return this._var.loopNumber=0,!0===e&&(this._var.loop=setInterval(function(){t._checkBait(e)},this._options.loopCheckTime)),setTimeout(function(){t._checkBait(e)},1),!0===this._options.debug&&this._log("check","A check is in progress ..."),!0},t.prototype._checkBait=function(t){var r=!1;if(null===this._var.bait&&this._creatBait(),null===e.document.body.getAttribute("abp")&&null!==this._var.bait.offsetParent&&0!=this._var.bait.offsetHeight&&0!=this._var.bait.offsetLeft&&0!=this._var.bait.offsetTop&&0!=this._var.bait.offsetWidth&&0!=this._var.bait.clientHeight&&0!=this._var.bait.clientWidth||(r=!0),void 0!==e.getComputedStyle){var n=e.getComputedStyle(this._var.bait,null);!n||"none"!=n.getPropertyValue("display")&&"hidden"!=n.getPropertyValue("visibility")||(r=!0)}!0===this._options.debug&&this._log("_checkBait","A check ("+(this._var.loopNumber+1)+"/"+this._options.loopMaxNumber+" ~"+(1+this._var.loopNumber*this._options.loopCheckTime)+"ms) was conducted and detection is "+(!0===r?"positive":"negative")),!0===t&&++this._var.loopNumber>=this._options.loopMaxNumber&&this._stopLoop(),!0===r?(this._stopLoop(),this._destroyBait(),this.emitEvent(!0),!0===t&&(this._var.checking=!1)):null!==this._var.loop&&!1!==t||(this._destroyBait(),this.emitEvent(!1),!0===t&&(this._var.checking=!1))},t.prototype._stopLoop=function(e){clearInterval(this._var.loop),this._var.loop=null,this._var.loopNumber=0,!0===this._options.debug&&this._log("_stopLoop","A loop has been stopped")},t.prototype.emitEvent=function(e){!0===this._options.debug&&this._log("emitEvent","An event with a "+(!0===e?"positive":"negative")+" detection was called");var t=this._var.event[!0===e?"detected":"notDetected"];for(var r in t)!0===this._options.debug&&this._log("emitEvent","Call function "+(parseInt(r)+1)+"/"+t.length),t.hasOwnProperty(r)&&t[r]();return!0===this._options.resetOnEnd&&this.clearEvent(),this},t.prototype.clearEvent=function(){this._var.event.detected=[],this._var.event.notDetected=[],!0===this._options.debug&&this._log("clearEvent","The event list has been cleared")},t.prototype.on=function(e,t){return this._var.event[!0===e?"detected":"notDetected"].push(t),!0===this._options.debug&&this._log("on",'A type of event "'+(!0===e?"detected":"notDetected")+'" was added'),this},t.prototype.onDetected=function(e){return this.on(!0,e)},t.prototype.onNotDetected=function(e){return this.on(!1,e)},e.BlockAdBlock=t,void 0===e.blockAdBlock&&(e.blockAdBlock=new t({checkOnLoad:!0,resetOnEnd:!0}))}(window)},function(e,t,r){var n=r(4),i=r(1),o=r(0),a=r(11),s=r(6),l=r(7),d=function(e){if(!e)throw new Error("RollVideo requires some parameter");if(!e.containerEl)throw new Error("RollVideo requires a containerEl parameter");if(!e.player)throw new Error("RollVideo requires a Player - player parameter");if(!e.ad)throw new Error("RollVideo reaquires an adv definition - ad parameter");var t,r={},d=e.player,u=d.video.src,c=e.ad,f=(c.link,new o),p=document.createElement("div"),h=l.isMobile(),m=function(){var e=function(t,r){d.hls.off(Hls.Events.MANIFEST_PARSED,e);try{d.video.currentTime=0,d.play()}catch(e){}},t=function(){d.hls.on(Hls.Events.MANIFEST_PARSED,e),d.hls.attachMedia(d.video),d.hls.loadSource(u);try{d.video.currentTime=0,d.play()}catch(e){}};null!==d.hls?(d.hls.on(Hls.Events.MEDIA_DETACHED,t),d.video.pause(),d.hls.detachMedia()):(d.reload(u),d.video.load(),d.video.play()),d.enableSeek()},v=function(){try{p.parentNode.removeChild(p)}catch(e){}m()},g=document.createElement("div");r.on=function(e,t){return f.on(e,t)},r.off=function(e,t){return f.off(e,t)};var y=function(){return h?c.url.iphone:c.url.mp4};n.applyStyles(g,{position:"absolute",top:"0px",left:"0px",height:"4px",width:"0%",backgroundColor:"#0088cc"}),n.applyStyles(p,{width:"100%",height:"100%",position:"absolute",zIndex:"9",top:"0px",left:"0px"}),p.appendChild(g);var E=function(){d.video.play()},b=function(){d.video.removeEventListener("ended",b),f.emit("meride.rollvideo_ended"),s.emit(i.ROLLVIDEO_ENDED,e.containerEl),d.video.addEventListener("loadedmetadata",E),v()};d.video.addEventListener("ended",b),d.reload(y()),d.video.addEventListener("timeupdate",function(){t=parseFloat(d.video.duration-d.video.currentTime,10),g.style.width=100*d.video.currentTime/d.video.duration+"%"});var w=function(){if(d.video.removeEventListener("play",w),d.disableSeek(),f.emit("meride.rollvideo_started"),s.emit(i.ROLLVIDEO_STARTED,e.containerEl),c.link&&""!==c.link){var t=document.createElement("div");t.innerHTML=a("adv_open_advertiser"),n.applyStyles(t,{cursor:"pointer",color:"#fff",padding:"10px",backgroundColor:"rgba(0, 0, 0, 0.7)",border:"1px solid #fff",position:"absolute",bottom:"15%",right:"0"}),t.addEventListener("click",function(t){t.preventDefault(),f.emit("meride.adclicked",{clickTracking:c.link||null}),window.open(c.link,"ad_meride_window"),s.emit(i.AD_CLICKED,e.containerEl,{clickThroughUrl:c.link})}),p.appendChild(t)}};return"play"===d.video.getAttribute("autoPlay")&&(d.video.load(),d.video.play()),e.containerEl.appendChild(p),d.video.addEventListener("play",w,!1),r};e.exports=d},function(e,t,r){var n=r(11),i=r(0),o=r(6),a=r(1),s=r(4),l=r(18),d=r(2),u=function(e){if(!e.renderer)throw new Error("Renderer required by LinearGUI");if(!e.loader)throw new Error("AdLoader required by LinearGUI");if(!e.ad)throw new Error("Ad required by LinearGUI");if(!e.player)throw new Error("Player required by LinearGUI");var t,r,u,c,f={},p=e.renderer,h=(e.loader,e.ad),m=p.containerEl,v=e.player,g=p.videoEl,y=document.createElement("div"),E="",b=[],w=!1!==e.playOnSkip,_=new i,T=l.volumeOnSVG,A=l.volumeOffSVG,S=document.createElement("button"),L=document.createElement("button"),k=function(){p.off("start"),p.off("complete"),p.off("pause"),p.off("mute"),p.off("unmute"),p.off("impression"),p.off("error"),p.off("resume");try{y.parentNode.removeChild(y)}catch(e){}g.style.display="block",v.enableSeek(),v.enableKeyboard(!0),P()&&(m.querySelector(".controlBarContainer").style.visibility="visible",M())},D=document.createElement("div"),C=-1,R=null;f.on=function(e,t){return _.on(e,t)},f.off=function(e,t){return _.off(e,t)};var x=function(e){g.muted=!0,S.style.display="none",L.style.display="inline-block",e.preventDefault()},O=function(e){g.muted=!1,L.style.display="none",S.style.display="inline-block",e.preventDefault()},I=function(){S.innerHTML=T,L.innerHTML=A,s.applyStyles(S,{backgroundColor:"transparent",cursor:"pointer",border:"none",width:"40px",height:"40px",position:"absolute",top:"3%",left:"2%",zIndex:"999"}),s.applyStyles(L,{backgroundColor:"transparent",cursor:"pointer",border:"none",width:"40px",height:"40px",position:"absolute",top:"3%",left:"2%",zIndex:"999"}),g.volume>0&&!0==!g.muted?(L.style.display="none",S.style.display="inline-block"):(S.style.display="none",L.style.display="inline-block"),d.addClickTouch(S,x),d.addClickTouch(L,O),m.appendChild(S),m.appendChild(L)},M=function(){try{S.parentNode.removeChild(S),L.parentNode.removeChild(L)}catch(e){}};s.applyStyles(D,{position:"absolute",top:"0px",left:"0px",height:"4px",width:"0%",backgroundColor:"#0088cc"});var P=function(){return null!==R?R:R=g.offsetWidth<540};g.addEventListener("timeupdate",function(){if(c=parseFloat(g.duration-g.currentTime,10),D.style.width=100*g.currentTime/g.duration+"%",t)if(C=parseInt(t-(g.duration-c),10),r&&C>0)r.innerHTML=n("skip_countdown",[C]);else if(r&&0===C){C=-1;try{r.parentNode.removeChild(r)}catch(e){}s.applyStyles(u,{display:"block"})}}),P()&&(m.querySelector(".controlBarContainer").style.visibility="hidden"),s.applyStyles(y,{width:"100%",height:"100%",position:"absolute",zIndex:"9",top:"0px",left:"0px"}),y.appendChild(D);var N=h.Ad.getElementsByTagName("Linear")[0];if(N){E=N.getElementsByTagName("ClickThrough")[0];var B=N.getElementsByTagName("ClickTracking");if(B)for(var F=0,j=B.length;F<j;F+=1)try{b.push(B[F].firstChild.data)}catch(e){}if(E&&null!==E.firstChild){E=E.firstChild.data;var U=document.createElement("div");U.innerHTML=n("adv_open_advertiser"),U.className="meride-open-advlink-btn",P()?s.applyStyles(U,{cursor:"pointer",color:"#fff",padding:"4px",backgroundColor:"rgba(100, 100, 100, 0.8)",position:"absolute",top:"4px",right:"0",textAlign:"center",fontSize:"14px",border:"1px solid #fff",borderRight:"none"}):s.applyStyles(U,{cursor:"pointer",color:"#fff",padding:"12px 8px",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"absolute",bottom:"60px",right:"0",fontSize:"14px"}),d.addClickTouch(U,function(e){e.preventDefault(),_.emit("meride.adclicked",{clickTracking:b}),window.open(E,"ad_meride_window");var t=h.Ad.getElementsByTagName("AdTitle")[0],r=h.Ad.getElementsByTagName("AdSystem")[0];t&&(t=t.firstChild.data),r&&(r=r.firstChild.data),o.emit(a.AD_CLICKED,m,{clickThroughUrl:E,adID:h.id,adTitle:t,adSystem:r})}),y.appendChild(U)}t=N.getAttribute("skipoffset"),t&&(t=parseInt(t.split(":")[2].replace(/(\.[0-9]+)/g,""),10),r=document.createElement("div"),u=document.createElement("div"),r.innerHTML=n("skip_countdown",[t]),u.innerHTML=n("skip"),d.addClickTouch(u,function(e){e.preventDefault(),_.emit("meride.ad_skipped"),k(),w||v.video.removeAttribute("autoplay");var t=function(){v.video.removeEventListener("loadedmetadata",t),v.video.currentTime=0};v.video.addEventListener("loadedmetadata",t,!1)}),P()?(s.applyStyles(u,{cursor:"pointer",color:"#fff",padding:"2px",backgroundColor:"rgba(100, 100, 100, 0.8)",position:"absolute",bottom:"20px",right:"0",display:"none",fontSize:"14px",border:"1px solid #fff",borderRight:"none"}),s.applyStyles(r,{color:"#fff",padding:"2px",backgroundColor:"rgba(100, 100, 100, 0.8)",position:"absolute",bottom:"20px",right:"0",fontSize:"12px",border:"1px solid #fff",borderRight:"none"})):(s.applyStyles(u,{cursor:"pointer",color:"#fff",padding:"8px",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"absolute",top:"0",right:"0",display:"none",fontSize:"14px"}),s.applyStyles(r,{color:"#fff",padding:"8px",backgroundColor:"rgba(0, 0, 0, 0.8)",position:"absolute",top:"0",right:"0",fontSize:"12px"})),y.appendChild(r),y.appendChild(u))}return p.on("start",function(){v.enableKeyboard(!1),m.appendChild(y),v.disableSeek(),P()&&I()}),p.on("complete",function(){k()}),p.on("pause",function(){}),p.on("mute",function(){}),p.on("unmute",function(){}),p.on("impression",function(){}),p.on("error",function(){k()}),p.on("resume",function(){}),f};e.exports=u},function(e,t,r){"use strict";function n(e){for(var t in e)if(e.hasOwnProperty(t))return!1;return!0}function i(e,t,r){var n=e;return u(t)?(r=t,"string"==typeof e&&(n={uri:e})):n=f(t,{uri:e}),n.callback=r,n}function o(e,t,r){return t=i(e,t,r),a(t)}function a(e){function t(){4===u.readyState&&setTimeout(a,0)}function r(){var e=void 0;if(e=u.response?u.response:u.responseText||s(u),b)try{e=JSON.parse(e)}catch(e){}return e}function i(e){return clearTimeout(h),e instanceof Error||(e=new Error(""+(e||"Unknown XMLHttpRequest Error"))),e.statusCode=0,d(e,w)}function a(){if(!p){var t;clearTimeout(h),t=e.useXDR&&void 0===u.status?200:1223===u.status?204:u.status;var n=w,i=null;return 0!==t?(n={body:r(),statusCode:t,method:v,headers:{},url:m,rawRequest:u},u.getAllResponseHeaders&&(n.headers=c(u.getAllResponseHeaders()))):i=new Error("Internal XMLHttpRequest Error"),d(i,n,n.body)}}if(void 0===e.callback)throw new Error("callback argument missing");var l=!1,d=function(t,r,n){l||(l=!0,e.callback(t,r,n))},u=e.xhr||null;u||(u=e.cors||e.useXDR?new o.XDomainRequest:new o.XMLHttpRequest);var f,p,h,m=u.url=e.uri||e.url,v=u.method=e.method||"GET",g=e.body||e.data,y=u.headers=e.headers||{},E=!!e.sync,b=!1,w={body:void 0,headers:{},statusCode:0,method:v,url:m,rawRequest:u};if("json"in e&&!1!==e.json&&(b=!0,y.accept||y.Accept||(y.Accept="application/json"),"GET"!==v&&"HEAD"!==v&&(y["content-type"]||y["Content-Type"]||(y["Content-Type"]="application/json"),g=JSON.stringify(!0===e.json?g:e.json))),u.onreadystatechange=t,u.onload=a,u.onerror=i,u.onprogress=function(){},u.onabort=function(){p=!0},u.ontimeout=i,u.open(v,m,!E,e.username,e.password),E||(u.withCredentials=!!e.withCredentials),!E&&e.timeout>0&&(h=setTimeout(function(){if(!p){p=!0,u.abort("timeout");var e=new Error("XMLHttpRequest timeout");e.code="ETIMEDOUT",i(e)}},e.timeout)),u.setRequestHeader)for(f in y)y.hasOwnProperty(f)&&u.setRequestHeader(f,y[f]);else if(e.headers&&!n(e.headers))throw new Error("Headers cannot be set on an XDomainRequest object");return"responseType"in e&&(u.responseType=e.responseType),"beforeSend"in e&&"function"==typeof e.beforeSend&&e.beforeSend(u),u.send(g||null),u}function s(e){try{if("document"===e.responseType)return e.responseXML;var t=e.responseXML&&"parsererror"===e.responseXML.documentElement.nodeName;if(""===e.responseType&&!t)return e.responseXML}catch(e){}return null}function l(){}var d=r(56),u=r(57),c=r(58),f=r(62);e.exports=o,e.exports.default=o,o.XMLHttpRequest=d.XMLHttpRequest||l,o.XDomainRequest="withCredentials"in new o.XMLHttpRequest?o.XMLHttpRequest:d.XDomainRequest,function(e,t){for(var r=0;r<e.length;r++)t(e[r])}(["get","put","post","patch","head","delete"],function(e){o["delete"===e?"del":e]=function(t,r,n){return r=i(t,r,n),r.method=e.toUpperCase(),a(r)}})},function(e,t){var r;r=function(){return this}();try{r=r||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(r=window)}e.exports=r},function(e,t,r){var n=r(4),i=function(e){if(!e||!e.containerEl)throw new Error("TopMessage requires containerEl");var t={},r=null,i=null,o=e.containerEl,a=function(){try{i.parentNode.removeChild(i)}catch(e){}};t.show=function(e){a(),e&&(r.innerHTML=e),o.appendChild(i)},t.reset=a,t.setMessage=function(e){null!==r&&e&&(r.innerHTML=e)};return function(){null===i&&(i=document.createElement("div"),n.applyStyles(i,{position:"absolute",top:"0px",left:"0px",height:"22px",lineHeight:"22px",textAlign:"center",width:"100%",backgroundColor:"rgba(60, 60, 60, 0.3)",color:"#fff",fontSize:"14px"})),null===r&&(r=document.createElement("div")),i.appendChild(r)}(),t};e.exports=i},function(e,t,r){"use strict";e.exports=r(85)},function(e,t,r){var n=r(32),i=r(15),o=r(12),a=function(e,t,r){this.name="AdError",this.message=e,this.code=t,!this.message&&this.code&&(this.message=n[this.code]),r&&r.reportTo&&i.read({uri:o.replace(r.reportTo,{ERRORCODE:this.code})})};a.prototype=Object.create(Error.prototype),e.exports=a},function(e,t){var r={100:"XML parsing error",101:"VAST schema validation error",102:"VAST version of response not supported",200:"Trafficking error. Video player received an Ad type that it was not expecting and/or cannot display",201:"Video player expecting different linearity",202:"Video player expecting different duration",203:"Video player expecting different size",300:"General Wrapper error",301:"Timeout of VAST URI provided in Wrapper element, or of VAST URI provided in a subsequent Wrapper element. (URI was either unavailable or reached a timeout as defined by the video player.)",302:"Wrapper limit reached, as defined by the video player. Too many Wrapper responses have been received with no InLine response",303:"No Ads VAST response after one or more Wrappers",400:"General Linear error. Video player is unable to display the Linear Ad",401:"File not found. Unable to fine Linear/MediaFile from URI",402:"Timeout of MediaFile URI",403:"Couldnt find MediaFile that is supported by this video player, based on the attributes of the MediaFile element",405:"Problem displaying MediaFile. Video player found a MediaFile with supported type but couldnt display it. MediaFile may include: unsupported codecs, different MIME type than MediaFile@type, unsupported delivery method, etc.",500:"General NonLinearAds error",501:"Unable to display NonLinear Ad because creative dimensions do not align with creative display area (i.e. creative dimension too large)",502:"Unable to fetch NonLinearAds/NonLinear resource",503:"Couldn't find NonLinear resource with supported type",600:"General CompanionAds error",601:"Unable to display Companion because creative dimensions do not fit within Companiondisplay area (i.e., no available space)",602:"Unable to display Required Companion",603:"Unable to fetch CompanionAds/Companion resource",604:"Couldn't find Companion resource with supported type",900:"Undefined Error",901:"General VPAID error",1001:"Empty VAST with Error tag",1002:"General error reading VAST file"};e.exports=r},function(e,t,r){"use strict";e.exports=r(102)},function(e,t,r){function n(e){e=e||{},this.css=e.css||null,this.components=e.components||new i,!0===e.loadDefaultFonts&&r(113)}var i=r(35);e.exports=n},function(e,t,r){function n(e){e=e||{},this.components=e.components||i,this.playBtn=document.createElement("button"),this.playSmallBtn=document.createElement("button"),this.pauseBtn=document.createElement("button"),this.pauseSmallBtn=document.createElement("button"),this.fullBtn=document.createElement("button"),this.reduceBtn=document.createElement("button"),this.settingBtn=document.createElement("button"),this.audioTracksBtn=document.createElement("button"),this.subtitleTracksBtn=document.createElement("button"),this.seekBtn=document.createElement("button"),this.closeSettingsBtn=document.createElement("button"),this.volumeOnBtn=document.createElement("button"),this.volumeOn1_3Btn=document.createElement("button"),this.volumeOn2_3Btn=document.createElement("button"),this.volumeOffBtn=document.createElement("button"),this.qualityBtn=document.createElement("button"),this.qualityHDBtn=document.createElement("button"),this.vrBtn=document.createElement("button"),this.timeUpdate=document.createElement("div"),this.timeTooltip=document.createElement("div"),this.controlBarContainer=document.createElement("div"),this.controlBar=document.createElement("div"),this.topBar=document.createElement("div"),this.timeUpdate=document.createElement("span"),this.duration=document.createElement("span"),this.progressBar=document.createElement("div"),this.bufferContainer=document.createElement("div"),this.progressBarSpinner=document.createElement("div"),this.settings=document.createElement("div"),this.loadingSpinner=document.createElement("div"),this.controlBarCenter=document.createElement("div"),this.playPauseSmallBtnContainer=document.createElement("div"),this.timeUpdateContainer=document.createElement("div"),this.durationContainer=document.createElement("div"),this.volumeContainer=document.createElement("div"),this.volumeBarContainer=document.createElement("div"),this.volumeBarInnerContainer=document.createElement("div"),this.volumeBarSpinner=document.createElement("div"),this.volumeBarLevel=document.createElement("div"),this.volumeHandlerBtn=document.createElement("button"),this.fullscreenBtnContainer=document.createElement("div"),this.qualityContainer=document.createElement("div"),this.qualitySelectionContainer=document.createElement("div"),this.vrBtnContainer=document.createElement("div"),this.audioTracksContainer=document.createElement("div"),this.audioTracksSelectionContainer=document.createElement("div"),this.audioTracksLabel=document.createElement("div"),this.subtitleTracksContainer=document.createElement("div"),this.subtitleTracksSelectionContainer=document.createElement("div"),this.subtitleTracksLabel=document.createElement("div")}var i=r(36),o=r(5);n.prototype.render=function(e){var t=document.createDocumentFragment(),r=(document.createDocumentFragment(),document.createDocumentFragment());this.progressBar.className="md-progressBar",this.bufferContainer.className="md-bufferContainer",this.progressBarSpinner.className="md-spinner",this.settings.className="md-settings",this.seekBtn.innerHTML=this.components.seekBtn.html,this.seekBtn.className="md-seekBtn",this.components.seekBtn.class&&(this.seekBtn.className+=" "+this.components.seekBtn.class),this.timeTooltip.className="md-timeTooltip",this.progressBar.appendChild(this.bufferContainer),this.progressBar.appendChild(this.progressBarSpinner),this.progressBar.appendChild(this.seekBtn),this.progressBar.appendChild(this.timeTooltip),o.applyComponent(this.playBtn,this.components.playBtn,">"),o.applyComponent(this.playSmallBtn,this.components.playSmallBtn,">"),o.applyComponent(this.pauseBtn,this.components.pauseBtn,"||"),o.applyComponent(this.pauseSmallBtn,this.components.pauseSmallBtn,"||"),o.applyComponent(this.fullBtn,this.components.fullBtn,"&#8596;"),o.applyComponent(this.reduceBtn,this.components.reduceBtn,"&#8596;"),o.applyComponent(this.settingBtn,this.components.settingBtn,"&#8362;"),o.applyComponent(this.volumeOnBtn,this.components.volumeOnBtn,"vol. on"),o.applyComponent(this.volumeOn1_3Btn,this.components.volumeOn1_3Btn,"vol. 1/3"),o.applyComponent(this.volumeOn2_3Btn,this.components.volumeOn2_3Btn,"vol. 2/3"),o.applyComponent(this.volumeOffBtn,this.components.volumeOffBtn,"vol. off"),o.applyComponent(this.qualityBtn,this.components.qualityBtn,"Q"),o.applyComponent(this.qualityHDBtn,this.components.qualityHDBtn,"Q-hd"),o.applyComponent(this.vrBtn,this.components.vrBtn,"VR"),o.applyComponent(this.loadingSpinner,this.components.loadingSpinner,"loading..."),o.applyComponent(this.audioTracksBtn,this.components.audioTracksBtn,"&#9834;"),o.applyComponent(this.subtitleTracksBtn,this.components.subtitleTracksBtn,"&#9834;"),o.applyComponent(this.closeSettingsBtn,this.components.closeSettingsBtn,"X"),this.settings.appendChild(this.closeSettingsBtn),e.appendChild(this.settings),this.timeUpdate.className="timeUpdate",this.duration.className="duration",e.appendChild(this.playBtn),e.appendChild(this.pauseBtn),e.appendChild(this.loadingSpinner),this.reduceBtn.style.display="none",this.playPauseSmallBtnContainer.className="controlBarCell",this.timeUpdateContainer.className="controlBarCell",this.durationContainer.className="controlBarCell",this.controlBarCenter.className="controlBarCell controlBarCenter",this.fullscreenBtnContainer.className="controlBarCell controlBarCellRight",this.vrBtnContainer.className="controlBarCell controlBarCellRight",this.playPauseSmallBtnContainer.appendChild(this.playSmallBtn),this.playPauseSmallBtnContainer.appendChild(this.pauseSmallBtn),this.timeUpdateContainer.appendChild(this.timeUpdate),this.controlBarCenter.appendChild(this.progressBar),this.durationContainer.appendChild(this.duration),t.appendChild(this.playPauseSmallBtnContainer),t.appendChild(this.timeUpdateContainer),t.appendChild(this.controlBarCenter),t.appendChild(this.durationContainer),this.volumeBarContainer.className="volumeBarContainer inactive",this.volumeBarInnerContainer.className="volumeBarInnerContainer",this.volumeBarSpinner.className="volumeBarSpinner",this.volumeBarLevel.className="volumeBarLevel",this.volumeHandlerBtn.className="volumeHandlerBtn",this.volumeHandlerBtn.innerHTML=this.components.volumeHandlerBtn.html,this.volumeBarLevel.appendChild(this.volumeHandlerBtn),this.volumeBarLevel.appendChild(this.volumeBarSpinner),this.volumeBarInnerContainer.appendChild(this.volumeBarLevel),this.volumeBarContainer.appendChild(this.volumeBarInnerContainer),this.volumeContainer.className="volumeContainer controlBarCell controlBarCellRight",this.volumeContainer.appendChild(this.volumeOnBtn),this.volumeContainer.appendChild(this.volumeOn1_3Btn),this.volumeContainer.appendChild(this.volumeOn2_3Btn),this.volumeContainer.appendChild(this.volumeOffBtn),this.volumeContainer.appendChild(this.volumeBarContainer),this.qualityContainer.className="qualityContainer controlBarCell controlBarCellRight",this.qualitySelectionContainer.className="qualitySelectionContainer inactive",this.qualityContainer.appendChild(this.qualityBtn),this.qualityContainer.appendChild(this.qualityHDBtn),this.qualityContainer.appendChild(this.qualitySelectionContainer),this.fullscreenBtnContainer.appendChild(this.fullBtn),this.fullscreenBtnContainer.appendChild(this.reduceBtn),this.vrBtnContainer.appendChild(this.vrBtn),this.audioTracksContainer.className="audioTracksContainer controlBarCell controlBarCellRight",this.audioTracksSelectionContainer.className="audioTracksSelectionContainer inactive",this.audioTracksLabel.className="audioTracksLabel",this.audioTracksContainer.appendChild(this.audioTracksBtn),this.audioTracksContainer.appendChild(this.audioTracksLabel),this.audioTracksContainer.appendChild(this.audioTracksSelectionContainer),this.subtitleTracksContainer.className="subtitleTracksContainer controlBarCell controlBarCellRight",this.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer inactive",this.subtitleTracksLabel.className="subtitleTracksLabel",this.subtitleTracksContainer.appendChild(this.subtitleTracksBtn),this.subtitleTracksContainer.appendChild(this.subtitleTracksLabel),this.subtitleTracksContainer.appendChild(this.subtitleTracksSelectionContainer),t.appendChild(this.qualityContainer),t.appendChild(this.audioTracksContainer),t.appendChild(this.subtitleTracksContainer),t.appendChild(this.volumeContainer),t.appendChild(this.vrBtnContainer),t.appendChild(this.fullscreenBtnContainer),r.appendChild(this.settingBtn);var n=document.createElement("div");n.className="otherComponents",this.controlBar.className="controlBar",this.controlBar.appendChild(t),this.controlBarContainer.className="controlBarContainer",this.controlBarContainer.appendChild(this.controlBar),n.appendChild(this.controlBarContainer),this.topBar.className="topBar",this.topBar.appendChild(r),n.appendChild(this.topBar),e.appendChild(n)},e.exports=n},function(e,t){var r={playBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 92 92"><g stroke="#333" stroke-width=".0"><g><circle opacity="0.6" fill="#29abe2" cx="46" cy="46.002" r="45" /><g><path fill="#FFFFFF" d="M31.455,66.984c0,1.422,1.021,2.037,2.273,1.355L72.7,47.232c1.249-0.676,1.249-1.779,0-2.463L33.729,23.658c-1.252-0.678-2.273-0.064-2.273,1.355V66.984z"/></g></g> </svg>',class:"boxcenter boxcenterBtn playBtn"},playSmallBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 92 92"><g stroke="#333" stroke-width=".0"><g><path fill="#FFFFFF" d="M31.455,66.984c0,1.422,1.021,2.037,2.273,1.355L72.7,47.232c1.249-0.676,1.249-1.779,0-2.463L33.729,23.658c-1.252-0.678-2.273-0.064-2.273,1.355V66.984z"/></g> </svg>',class:"playSmallBtn"},pauseBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 92 92"><g stroke="#333" stroke-width=".0"><g><circle opacity="0.6" fill="#29abe2" cx="46" cy="46.002" r="45"/><g><g><g><path fill="#FFFFFF" d="M42.603,64.973c0,1.387-1.016,2.527-2.262,2.527h-7.923c-1.242,0-2.261-1.141-2.261-2.527V27.029c0-1.389,1.019-2.529,2.261-2.529h7.923c1.246,0,2.262,1.141,2.262,2.529V64.973z"/></g><g><path fill="#FFFFFF" d="M61.843,64.973c0,1.387-1.02,2.527-2.262,2.527h-7.924c-1.245,0-2.261-1.141-2.261-2.527V27.029c0-1.389,1.016-2.529,2.261-2.529h7.924c1.242,0,2.262,1.141,2.262,2.529V64.973z"/></g></g></g></g> </svg>',class:"boxcenter boxcenterBtn pauseBtn"},pauseSmallBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 92 92"><g stroke="#333" stroke-width=".0"><g><g><g><path fill="#FFFFFF" d="M42.603,64.973c0,1.387-1.016,2.527-2.262,2.527h-7.923c-1.242,0-2.261-1.141-2.261-2.527V27.029c0-1.389,1.019-2.529,2.261-2.529h7.923c1.246,0,2.262,1.141,2.262,2.529V64.973z"/></g><g><path fill="#FFFFFF" d="M61.843,64.973c0,1.387-1.02,2.527-2.262,2.527h-7.924c-1.245,0-2.261-1.141-2.261-2.527V27.029c0-1.389,1.016-2.529,2.261-2.529h7.924c1.242,0,2.262,1.141,2.262,2.529V64.973z"/></g></g></g> </svg>',class:"pauseSmallBtn"},fullBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g fill="#FFF"><path d="M9.492 10.964H3.43c-.208 0-.376.168-.376.375v6.063c0 .207.168.375.375.375h1.563c.207 0 .375-.168.375-.375v-4.125h4.124c.207 0 .375-.168.375-.375V11.34c0-.208-.168-.376-.375-.376zM22.6 10.964h-6.065c-.207 0-.375.168-.375.375v1.563c0 .207.168.375.375.375h4.125v4.125c0 .207.168.375.375.375H22.6c.206 0 .374-.168.374-.375V11.34c0-.208-.168-.376-.375-.376zM22.6 20.55h-1.565c-.207 0-.375.167-.375.374v4.125h-4.125c-.207 0-.375.167-.375.374v1.564c0 .207.168.375.375.375H22.6c.206 0 .374-.168.374-.375v-6.064c0-.207-.168-.375-.375-.375zM9.492 25.05H5.368v-4.126c0-.207-.168-.375-.375-.375H3.43c-.208 0-.376.167-.376.374v6.064c0 .207.168.375.375.375H9.49c.207 0 .375-.168.375-.375v-1.564c0-.207-.168-.375-.375-.375z"/></g></svg>',class:"fullBtn controlBarBtn"},reduceBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g fill="#FFF"><path d="M3.43 17.778H9.49c.207 0 .375-.168.375-.375V11.34c0-.208-.168-.376-.375-.376H7.928c-.207 0-.375.168-.375.375v4.124H3.43c-.208 0-.376.168-.376.375v1.563c0 .207.168.375.375.375zM16.534 17.778h6.064c.207 0 .375-.168.375-.375V15.84c0-.208-.168-.376-.375-.376h-4.125V11.34c0-.208-.168-.376-.375-.376h-1.564c-.207 0-.375.168-.375.375v6.063c0 .207.167.375.374.375zM16.534 27.363h1.564c.207 0 .375-.168.375-.375v-4.125h4.125c.207 0 .375-.168.375-.375v-1.564c0-.207-.168-.375-.375-.375h-6.064c-.207 0-.375.167-.375.374v6.064c0 .207.167.375.374.375zM3.43 22.863h4.123v4.125c0 .207.168.375.375.375h1.564c.207 0 .375-.168.375-.375v-6.064c0-.207-.168-.375-.375-.375H3.43c-.208 0-.376.167-.376.374v1.564c0 .207.168.375.375.375z"/></g></svg>',class:"reduceBtn controlBarBtn"},settingBtn:{html:'<svg width="7px" height="100%" viewBox="0 0 7 28"><g stroke="#333" stroke-width=".5"><path pointer-events="all" d="M3.5,28C1.566,28,0,26.434,0,24.5C0,22.568,1.566,21,3.5,21C5.433,21,7,22.568,7,24.5 C7,26.434,5.433,28,3.5,28z M7,3.5C7,1.568,5.433,0,3.5,0C1.566,0,0,1.568,0,3.5C0,5.434,1.566,7,3.5,7C5.433,7,7,5.434,7,3.5z M7,14c0-1.932-1.567-3.5-3.5-3.5C1.566,10.5,0,12.068,0,14c0,1.934,1.566,3.5,3.5,3.5C5.433,17.5,7,15.934,7,14z"> </path> </g> </svg>',class:"toright topBarBtn"},closeSettingsBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 24 24"><g><path d="M3.39,0.043c-0.177-0.02-0.34,0.032-0.462,0.152L0.196,2.929c-0.239,0.24-0.175,0.684,0.125,0.982 l8.137,8.139l-8.137,8.136c-0.3,0.301-0.364,0.741-0.125,0.982l2.732,2.732c0.241,0.242,0.686,0.208,0.983-0.09l8.137-8.14 l8.138,8.14c0.3,0.298,0.742,0.332,0.983,0.09l2.733-2.732c0.238-0.241,0.176-0.682-0.124-0.982l-8.137-8.136l8.137-8.139 c0.3-0.299,0.362-0.742,0.124-0.982L21.17,0.195c-0.241-0.239-0.684-0.175-0.983,0.123l-8.138,8.14l-8.137-8.14 C3.762,0.169,3.567,0.062,3.39,0.043z"/> </g> </defs> </svg>',class:"closeSettingBtn"},ccBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 55 55"><g><path d="M22.107,29.635l3.156,1c-0.484,1.76-1.289,3.068-2.415,3.92c-1.125,0.855-2.553,1.283-4.283,1.283 c-2.141,0-3.9-0.732-5.279-2.193c-1.378-1.465-2.067-3.465-2.067-6c0-2.684,0.692-4.77,2.079-6.252 c1.386-1.486,3.207-2.229,5.466-2.229c1.973,0,3.574,0.582,4.806,1.748c0.733,0.689,1.283,1.68,1.65,2.971l-3.223,0.77 c-0.19-0.836-0.588-1.496-1.194-1.98c-0.604-0.482-1.339-0.725-2.204-0.725c-1.195,0-2.165,0.428-2.908,1.285 c-0.746,0.859-1.117,2.248-1.117,4.17c0,2.037,0.366,3.49,1.1,4.355s1.687,1.297,2.859,1.297c0.865,0,1.609-0.275,2.233-0.824 C21.389,31.68,21.836,30.814,22.107,29.635z"/> <path d="M40.626,29.635l3.156,1c-0.484,1.76-1.289,3.068-2.415,3.92c-1.125,0.855-2.553,1.283-4.283,1.283 c-2.141,0-3.9-0.732-5.279-2.193c-1.378-1.465-2.067-3.465-2.067-6c0-2.684,0.693-4.77,2.079-6.252 c1.386-1.486,3.208-2.229,5.466-2.229c1.973,0,3.574,0.582,4.807,1.748c0.732,0.689,1.283,1.68,1.649,2.971l-3.223,0.77 c-0.19-0.836-0.588-1.496-1.193-1.98c-0.604-0.482-1.34-0.725-2.205-0.725c-1.195,0-2.165,0.428-2.908,1.285 c-0.745,0.859-1.117,2.248-1.117,4.17c0,2.037,0.366,3.49,1.1,4.355s1.687,1.297,2.86,1.297c0.864,0,1.609-0.275,2.232-0.824 C39.907,31.68,40.354,30.814,40.626,29.635z"/> </g> </svg>',class:"settingBtn ccBtn"},infoBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 55 55"><g><path fill="#FFFFFF" d="M29.812,23.572c-0.604-0.583-1.456-0.924-2.312-0.924c-0.857,0-1.707,0.341-2.311,0.924 c-0.602,0.584-0.947,1.404-0.934,2.223v12.763c-0.014,0.812,0.327,1.624,0.919,2.207c0.592,0.582,1.427,0.929,2.275,0.94 c0.865,0.012,1.733-0.323,2.346-0.908c0.611-0.585,0.961-1.412,0.949-2.239V25.795C30.756,24.977,30.413,24.156,29.812,23.572z"/> <circle fill="#FFFFFF" cx="27.499" cy="16.803" r="3.507"/> <path fill="#54ACEE" d="M27.499,5C15.073,5,5,15.072,5,27.499S15.073,50,27.499,50C39.924,50,50,39.926,50,27.499 S39.924,5,27.499,5z M29.795,40.797c-0.612,0.585-1.48,0.92-2.346,0.908c-0.849-0.012-1.684-0.358-2.275-0.94 c-0.592-0.583-0.933-1.396-0.919-2.207V25.795c-0.014-0.818,0.332-1.639,0.934-2.223c0.604-0.583,1.453-0.924,2.311-0.924 c0.856,0,1.709,0.341,2.312,0.924c0.602,0.584,0.944,1.404,0.933,2.223v12.763C30.756,39.385,30.406,40.212,29.795,40.797z M27.499,20.31c-1.937,0-3.508-1.57-3.508-3.507c0-1.938,1.571-3.507,3.508-3.507c1.936,0,3.51,1.569,3.51,3.507 C31.009,18.739,29.435,20.31,27.499,20.31z"/> </g> </svg>',class:"settingBtn infoBtn"},audioTracksBtn:{html:'<svg viewBox="0 0 35 35"><path d="M8 17.48c2.925-3.402.513 1.65.66-.694.505-1.55 1.528-3.133 3.198-3.468 1.008-.31 2.078-.217 3.035.223 1.438.443 2.856 1.33 4.404 1.095 1.587-.533 2.34-2.212 3.32-3.46.64.504.9 1.862 1.394 2.68.997 2.196 2.002 4.388 2.99 6.588-.996 1.347-1.794 3.12-3.485 3.653-1.72.165-3.256-.843-4.868-1.293-1.028-.408-2.375-.52-3.133.475-.99 1.06-1.524 2.448-2.197 3.722 0 0-2.404-3.155-5.317-9.52z" fill="#fff"/></svg>',class:"audioTracksBtn controlBarBtn"},subtitleTracksBtn:{html:'<svg viewBox="0 0 35 35"><g aria-label="cc" fill="#fff" stroke-width=".611"><path d="M16.69 15.471h-1.894q-.18-1.24-.902-1.894-.721-.676-1.893-.676-1.533 0-2.413 1.262-.856 1.24-.856 3.45 0 2.096.879 3.291.88 1.195 2.435 1.195 2.412 0 2.886-2.84h1.893q-.18 2.164-1.443 3.381-1.262 1.195-3.381 1.195-2.413 0-3.833-1.668-1.398-1.691-1.398-4.554 0-2.931 1.42-4.69 1.444-1.758 3.833-1.758 2.052 0 3.27 1.105 1.24 1.104 1.397 3.201zM28.094 15.471h-1.893q-.18-1.24-.902-1.894-.722-.676-1.894-.676-1.533 0-2.412 1.262-.857 1.24-.857 3.45 0 2.096.88 3.291.879 1.195 2.434 1.195 2.412 0 2.886-2.84h1.894q-.18 2.164-1.443 3.381-1.263 1.195-3.382 1.195-2.412 0-3.832-1.668-1.398-1.691-1.398-4.554 0-2.931 1.42-4.69 1.443-1.758 3.833-1.758 2.051 0 3.269 1.105 1.24 1.104 1.397 3.201z" /></g></svg>',class:"subtitleTracksBtn controlBarBtn"},vrBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><path class="fill" d="M25.248 11.694H5.323c-.744 0-1.369.648-1.369 1.449v11.865c0 .8.625 1.454 1.397 1.454h5.447c.585 0 1.085-.37 1.295-.897l1.58-2.54a1.777 1.777 0 0 1 1.647-1.136c.738 0 1.374.466 1.641 1.136l1.58 2.54c.21.528.71.897 1.266.897h5.435a1.43 1.43 0 0 0 1.432-1.448V13.148c0-.8-.625-1.454-1.426-1.454zm-15.046 8.379a2.412 2.412 0 0 1-2.414-2.414 2.412 2.412 0 0 1 2.414-2.414 2.412 2.412 0 0 1 2.414 2.414 2.412 2.412 0 0 1-2.414 2.414zm10.224 0a2.412 2.412 0 0 1-2.414-2.414 2.412 2.412 0 0 1 2.414-2.414 2.412 2.412 0 0 1 2.414 2.414 2.412 2.412 0 0 1-2.414 2.414z" fill="none" stroke="#fff" stroke-width="1.8"/></svg>',class:"vrBtn controlBarBtn"},seekBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g><image overflow="visible" opacity=".25" width="27" height="28" xlink:href="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABsAAAAcCAYAAACQ0cTtAAAACXBIWXMAAAsSAAALEgHS3X78AAAA GXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAn1JREFUeNqkVoty0zAQjGQltkOh oUCBwsD0/7+K1wCltIE0jh2ciBOz19mqkuMOmdmxotfqTnerM5OH/Uyiz//P4twcM0DmxxCbEWMW bUvQ357g8c2SugEiJXDAFN8CY2HDnaAX/MG3HyI0GSKLTQNBKaiBSjDDeNh0K2gFG6AD8Y6szZKx NYFkLngsOBYs0K4w3oNoJVgKfqHdgLSPCV2GKGx4JHgqeCE4xTcQPiKyNYh+CC7wvcZebUzoojsq 4Kaw4TPBmeCt4I3gleAEYwVcFciuBN9gdYkDeyK5jVS2TK2qYUHY/L3gXPBO8BL9NZFtYNkx9e8p WPTudrFlFgExhwWvQXIO657DtSUFSIe+ig7Q4t7u3Z2LwlzJFrinM5Ce0ukdhX6JNRZEDSz9Cffe gPAfR8qNFfy/gIUahXMKeyXTnNvDpSeJqLVxNHKATDFxDtSwgBNayQylSU1rKuzD8+8piBK6CJYs Mgk5s4k1RZzH9oA2mgEBfvBcm1BwDVVGTu88CXJqjU8JsSeinjSvRVtzhl3IB8utuZPYLnoueoTq Gjq3Qvge0VwbkXWIxBtas45y7Nay2KoNFgSNu0Qol5jfR3mm86+RW5dor9B/x7oi87Q45NSUNo9d 3GDTK4jwZ8EHwSfBVyR3gydnH7uRT7qEuM4w1qJPk1XlSp+YYNEXwUesW5JlPhUgfGcrnHaC/7/x 3Kiyqw525PLvwAX6utwTw0Gypajr4Yqw2ZNIsnRug8MsAX1AtxwcuZc6lq2aMCNF4TvcEFoqDfg9 y9YgQ8UOB9VuoOjxh2qQMWWcSSjOqHJujOZNMgI8iYrTg4XqmIp4zNxRJfhfAQYA2JgMxCr5ERYA AAAASUVORK5CYII=" transform="translate(4 5.164)"/><circle fill="#FFF" cx="17.5" cy="19.164" r="7.5"/> </g> </svg>'},volumeHandlerBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g><circle fill="#FFF" cx="17.5" cy="19.164" r="14"/> </g> </svg>'},volumeOnBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g fill="#FFF"><path d="M14.283 11.41c-.182-.095-.402-.082-.57.035l-5.088 3.503H3.608c-.306 0-.555.25-.555.556v7.5c0 .306.25.554.555.554H8.63l5.093 3.333c.09.058.196.09.303.09.09 0 .18-.022.262-.065.18-.097.29-.284.29-.487v-14.53c0-.205-.114-.392-.295-.488zM18.694 14.998c-.36-.358-.943-.358-1.303 0-.358.36-.358.944 0 1.305 1.58 1.577 1.58 4.144 0 5.723-.358.358-.358.943 0 1.303.18.178.417.27.652.27.236 0 .472-.09.65-.27 2.3-2.298 2.3-6.036.002-8.332z"/><path d="M21.632 11.834c-.36-.36-.943-.36-1.304 0-.36.36-.36.943 0 1.303 3.323 3.323 3.323 8.73 0 12.053-.36.358-.36.942 0 1.303.18.18.415.272.65.272.235 0 .472-.092.652-.272 1.958-1.957 3.036-4.56 3.036-7.328s-1.077-5.374-3.034-7.33z"/><path d="M24.905 8.933c-.36-.358-.943-.358-1.303 0s-.36.943 0 1.303c2.384 2.387 3.697 5.556 3.697 8.93 0 3.37-1.315 6.54-3.698 8.925-.36.36-.36.944 0 1.304.18.18.415.27.65.27.235 0 .473-.09.652-.27 2.732-2.73 4.238-6.365 4.238-10.23.002-3.864-1.504-7.498-4.237-10.23z"/></g> </svg>',class:"volumeOnBtn controlBarBtn"},volumeOn1_3Btn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g fill="#FFF"><path d="M14.283 11.41c-.182-.095-.402-.082-.57.035l-5.088 3.503H3.608c-.306 0-.555.25-.555.556v7.5c0 .306.25.554.555.554H8.63l5.093 3.333c.09.058.196.09.303.09.09 0 .18-.022.262-.065.18-.097.29-.284.29-.487v-14.53c0-.205-.114-.392-.295-.488zM18.694 14.998c-.36-.358-.943-.358-1.303 0-.358.36-.358.944 0 1.305 1.58 1.577 1.58 4.144 0 5.723-.358.358-.358.943 0 1.303.18.178.417.27.652.27.236 0 .472-.09.65-.27 2.3-2.298 2.3-6.036.002-8.332z"/></g> </svg>',class:"volumeOn1_3Btn controlBarBtn"},volumeOn2_3Btn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"> <g fill="#FFF"> <path d="M14.283 11.41c-.182-.095-.402-.082-.57.035l-5.088 3.503H3.608c-.306 0-.555.25-.555.556v7.5c0 .306.25.554.555.554H8.63l5.093 3.333c.09.058.196.09.303.09.09 0 .18-.022.262-.065.18-.097.29-.284.29-.487v-14.53c0-.205-.114-.392-.295-.488zM18.694 14.998c-.36-.358-.943-.358-1.303 0-.358.36-.358.944 0 1.305 1.58 1.577 1.58 4.144 0 5.723-.358.358-.358.943 0 1.303.18.178.417.27.652.27.236 0 .472-.09.65-.27 2.3-2.298 2.3-6.036.002-8.332z"/><path d="M21.632 11.834c-.36-.36-.943-.36-1.304 0-.36.36-.36.943 0 1.303 3.323 3.323 3.323 8.73 0 12.053-.36.358-.36.942 0 1.303.18.18.415.272.65.272.235 0 .472-.092.652-.272 1.958-1.957 3.036-4.56 3.036-7.328s-1.077-5.374-3.034-7.33z"/></g> </svg>',class:"volumeOn2_3Btn controlBarBtn"},volumeOffBtn:{html:'<svg width="100%" height="100%" viewBox="0 0 35 35"><g fill="#FFF"><path d="M14.283 11.41c-.182-.095-.402-.082-.57.035l-5.088 3.503H3.608c-.306 0-.555.25-.555.556v7.5c0 .306.25.554.555.554H8.63l5.093 3.333c.09.058.196.09.303.09.09 0 .18-.022.262-.065.18-.097.29-.284.29-.487v-14.53c0-.205-.114-.392-.295-.488zM19.436 19.09l-2.197-3.338h2.11l1.325 2.174 1.337-2.174h2.11l-2.22 3.34 2.325 3.484H22.11l-1.436-2.338-1.44 2.338h-2.112l2.314-3.485z"/></g> </svg>',class:"volumeOffBtn controlBarBtn"},qualityBtn:{html:'<svg viewBox="0 0 35 35"><path d="M16.145 9.664c-.5 0-.905.404-.905.905v1.242c-.468.144-.918.326-1.343.55l-.877-.876c-.354-.354-.925-.354-1.28 0l-1.912 1.917c-.354.354-.354.925 0 1.28l.876.875c-.226.425-.408.875-.55 1.343h-1.25c-.5 0-.904.406-.904.907v2.714c0 .5.404.906.905.906h1.244c.143.468.324.918.55 1.343l-.876.876c-.354.354-.354.925 0 1.28l1.916 1.915c.354.355.925.355 1.28 0l.875-.876c.425.226.875.408 1.343.55v1.245c0 .5.405.904.906.904h2.714c.5 0 .905-.404.905-.905v-1.245c.466-.143.912-.326 1.336-.55l.876.876c.354.355.925.355 1.28 0l1.922-1.915c.353-.354.353-.925 0-1.28l-.885-.883c.225-.423.415-.87.558-1.335h1.245c.5 0 .905-.404.905-.905v-2.714c0-.5-.404-.905-.905-.905H24.85c-.142-.465-.333-.91-.557-1.335l.884-.884c.353-.353.353-.924 0-1.278l-1.924-1.916c-.354-.354-.925-.354-1.28 0l-.875.876c-.422-.225-.87-.408-1.335-.55V10.57c0-.5-.404-.904-.905-.904h-2.713v.002zm1.357 4.976c2.498 0 4.524 2.025 4.524 4.524 0 2.498-2.025 4.524-4.524 4.524-2.498 0-4.524-2.025-4.524-4.524 0-2.498 2.025-4.524 4.524-4.524z" fill="#fff"/></svg>',class:"qualityBtn controlBarBtn"},qualityHDBtn:{html:'<svg viewBox="0 0 35 35"><g fill="#FFF"><path d="M16.145 9.664c-.5 0-.905.404-.905.905v1.242c-.468.144-.918.326-1.343.55l-.877-.876c-.354-.354-.925-.354-1.28 0l-1.912 1.917c-.354.354-.354.925 0 1.28l.876.875c-.226.425-.408.875-.55 1.343h-1.25c-.5 0-.904.406-.904.907v2.714c0 .5.404.906.905.906h1.244c.143.468.324.918.55 1.343l-.876.876c-.354.354-.354.925 0 1.28l1.916 1.915c.354.355.925.355 1.28 0l.875-.876c.425.226.875.408 1.343.55v1.245c0 .5.405.904.906.904h2.714c.5 0 .905-.404.905-.905v-1.245c.466-.143.912-.326 1.336-.55l.876.876c.354.355.925.355 1.28 0l1.922-1.915c.353-.354.353-.925 0-1.28l-.885-.883c.225-.423.415-.87.558-1.335h1.245c.5 0 .905-.404.905-.905v-2.714c0-.5-.404-.905-.905-.905H24.85c-.142-.465-.333-.91-.557-1.335l.884-.884c.353-.353.353-.924 0-1.278l-1.924-1.916c-.354-.354-.925-.354-1.28 0l-.875.876c-.422-.225-.87-.408-1.335-.55V10.57c0-.5-.404-.904-.905-.904h-2.713v.002zm1.357 4.976c2.498 0 4.524 2.025 4.524 4.524 0 2.498-2.025 4.524-4.524 4.524-2.498 0-4.524-2.025-4.524-4.524 0-2.498 2.025-4.524 4.524-4.524z"/><path d="M26.793 10.265H25.57V7.77h-2.29v2.495h-1.23V4.48h1.227v2.27h2.29V4.48h1.223v5.783zm6.257-2.948c0 .953-.27 1.683-.81 2.19-.544.504-1.326.76-2.35.76h-1.637V4.48h1.816c.944 0 1.677.252 2.2.75.52.497.78 1.194.78 2.087zm-1.273.033c0-1.242-.547-1.864-1.645-1.864h-.65V9.25h.526c1.18 0 1.77-.632 1.77-1.9z" fill="#29abe2"/></g></svg>',class:"qualityHDBtn controlBarBtn"},loadingSpinner:{html:"<div></div>",class:"loadingSpinner"}};e.exports=r},function(e,t){function r(e,t){var r=e[1]||"",i=e[3];if(!i)return r;if(t&&"function"==typeof btoa){var o=n(i);return[r].concat(i.sources.map(function(e){return"/*# sourceURL="+i.sourceRoot+e+" */"})).concat([o]).join("\n")}return[r].join("\n")}function n(e){return"/*# sourceMappingURL=data:application/json;charset=utf-8;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(e))))+" */"}e.exports=function(e){var t=[];return t.toString=function(){return this.map(function(t){var n=r(t,e);return t[2]?"@media "+t[2]+"{"+n+"}":n}).join("")},t.i=function(e,r){"string"==typeof e&&(e=[[null,e,""]]);for(var n={},i=0;i<this.length;i++){var o=this[i][0];"number"==typeof o&&(n[o]=!0)}for(i=0;i<e.length;i++){var a=e[i];"number"==typeof a[0]&&n[a[0]]||(r&&!a[2]?a[2]=r:r&&(a[2]="("+a[2]+") and ("+r+")"),t.push(a))}},t}},function(e,t,r){function n(e,t){for(var r=0;r<e.length;r++){var n=e[r],i=h[n.id];if(i){i.refs++;for(var o=0;o<i.parts.length;o++)i.parts[o](n.parts[o]);for(;o<n.parts.length;o++)i.parts.push(u(n.parts[o],t))}else{for(var a=[],o=0;o<n.parts.length;o++)a.push(u(n.parts[o],t));h[n.id]={id:n.id,refs:1,parts:a}}}}function i(e,t){for(var r=[],n={},i=0;i<e.length;i++){var o=e[i],a=t.base?o[0]+t.base:o[0],s=o[1],l=o[2],d=o[3],u={css:s,media:l,sourceMap:d};n[a]?n[a].parts.push(u):r.push(n[a]={id:a,parts:[u]})}return r}function o(e,t){var r=v(e.insertInto);if(!r)throw new Error("Couldn't find a style target. This probably means that the value for the 'insertInto' parameter is invalid.");var n=E[E.length-1];if("top"===e.insertAt)n?n.nextSibling?r.insertBefore(t,n.nextSibling):r.appendChild(t):r.insertBefore(t,r.firstChild),E.push(t);else{if("bottom"!==e.insertAt)throw new Error("Invalid value for parameter 'insertAt'. Must be 'top' or 'bottom'.");r.appendChild(t)}}function a(e){if(null===e.parentNode)return!1;e.parentNode.removeChild(e);var t=E.indexOf(e);t>=0&&E.splice(t,1)}function s(e){var t=document.createElement("style");return e.attrs.type="text/css",d(t,e.attrs),o(e,t),t}function l(e){var t=document.createElement("link");return e.attrs.type="text/css",e.attrs.rel="stylesheet",d(t,e.attrs),o(e,t),t}function d(e,t){Object.keys(t).forEach(function(r){e.setAttribute(r,t[r])})}function u(e,t){var r,n,i,o;if(t.transform&&e.css){if(!(o=t.transform(e.css)))return function(){};e.css=o}if(t.singleton){var d=y++;r=g||(g=s(t)),n=c.bind(null,r,d,!1),i=c.bind(null,r,d,!0)}else e.sourceMap&&"function"==typeof URL&&"function"==typeof URL.createObjectURL&&"function"==typeof URL.revokeObjectURL&&"function"==typeof Blob&&"function"==typeof btoa?(r=l(t),n=p.bind(null,r,t),i=function(){a(r),r.href&&URL.revokeObjectURL(r.href)}):(r=s(t),n=f.bind(null,r),i=function(){a(r)});return n(e),function(t){if(t){if(t.css===e.css&&t.media===e.media&&t.sourceMap===e.sourceMap)return;n(e=t)}else i()}}function c(e,t,r,n){var i=r?"":n.css;if(e.styleSheet)e.styleSheet.cssText=w(t,i);else{var o=document.createTextNode(i),a=e.childNodes;a[t]&&e.removeChild(a[t]),a.length?e.insertBefore(o,a[t]):e.appendChild(o)}}function f(e,t){var r=t.css,n=t.media;if(n&&e.setAttribute("media",n),e.styleSheet)e.styleSheet.cssText=r;else{for(;e.firstChild;)e.removeChild(e.firstChild);e.appendChild(document.createTextNode(r))}}function p(e,t,r){var n=r.css,i=r.sourceMap,o=void 0===t.convertToAbsoluteUrls&&i;(t.convertToAbsoluteUrls||o)&&(n=b(n)),i&&(n+="\n/*# sourceMappingURL=data:application/json;base64,"+btoa(unescape(encodeURIComponent(JSON.stringify(i))))+" */");var a=new Blob([n],{type:"text/css"}),s=e.href;e.href=URL.createObjectURL(a),s&&URL.revokeObjectURL(s)}var h={},m=function(e){var t;return function(){return void 0===t&&(t=e.apply(this,arguments)),t}}(function(){return window&&document&&document.all&&!window.atob}),v=function(e){var t={};return function(r){return void 0===t[r]&&(t[r]=e.call(this,r)),t[r]}}(function(e){return document.querySelector(e)}),g=null,y=0,E=[],b=r(115);e.exports=function(e,t){if("undefined"!=typeof DEBUG&&DEBUG&&"object"!=typeof document)throw new Error("The style-loader cannot be used in a non-browser environment");t=t||{},t.attrs="object"==typeof t.attrs?t.attrs:{},t.singleton||(t.singleton=m()),t.insertInto||(t.insertInto="head"),t.insertAt||(t.insertAt="bottom");var r=i(e,t);return n(r,t),function(e){for(var o=[],a=0;a<r.length;a++){var s=r[a],l=h[s.id];l.refs--,o.push(l)}if(e){n(i(e,t),t)}for(var a=0;a<o.length;a++){var l=o[a];if(0===l.refs){for(var d=0;d<l.parts.length;d++)l.parts[d]();delete h[l.id]}}}};var w=function(){var e=[];return function(t,r){return e[t]=r,e.filter(Boolean).join("\n")}}()},function(e,t,r){function n(e){if(!e)throw new Error("Slider needs some parameter");if(!e.handlerEl)throw new Error("Slider needs a handlerEl param");if(!e.barEl)throw new Error("Slider needs a barEl param");var t,r,n,a=this,s=e.handlerEl,l=e.barEl,d=(o.addClickTouch,"vertical"===e.scrollDirection?"clientY":"clientX"),u="vertical"===e.scrollDirection?"offsetHeight":"offsetWidth",c=(e.scrollDirection,"vertical"===e.scrollDirection?"top":"left"),f="vertical"===e.scrollDirection?"clientHeight":"clientWidth",p="vertical"===e.scrollDirection?"height":"width",h=!1,m=new i,v=e.spinnerEl||null,g=e.initLoad||0;a.on=function(e,t){return m.on(e,t)},a.off=function(e,t){return m.off(e,t)},a.mouseDown=function(){return h};var y={mouseMoveVertical:function(e){e[d]>=l.getClientRects()[0][c]&&s.offsetTop>=0?(s.offsetTop<=l[f]&&(s.style[c]=e[d]-s[u]/2-l.getClientRects()[0][c]+"px"),s.offsetTop>l[f]-s[u]/2&&(s.style[c]=l[f]-s[u]+"px")):s.style[c]="0px",null!==v&&(v.style[p]=l.offsetHeight-s.offsetTop-s.offsetHeight/2+"px")},mouseMoveHorizontal:function(e){void 0!==l.getClientRects()[0]?e[d]>=l.getClientRects()[0][c]&&e[d]<=l.getClientRects()[0][p]+l.getClientRects()[0][c]?e[d]<l.getClientRects()[0][p]+l.getClientRects()[0][c]?s.style[c]=e[d]-l.getClientRects()[0][c]+"px":s.style[c]=l.getClientRects()[0][p]+l.getClientRects()[0][c]+"px":e[d]<l.getClientRects()[0][c]?s.style[c]="0":e[d]>l.getClientRects()[0][p]+l.getClientRects()[0][c]&&(s.style[c]=l.getClientRects()[0][p]+"px"):s.style[c]="0",null!==v&&(v.style[p]=l.offsetWidth-s.offsetLeft-s.offsetWidth/2+"px")}},E=function(e){!0===h&&void 0!==l.getClientRects()[0]&&(n(e),m.emit("meride.slider_mousemove")),e.preventDefault()},b=function(e){document.removeEventListener("mouseup",b),document.removeEventListener("mousemove",E),h=!1,m.emit("meride.slider_mouseup")},w=function(e){h=!0,document.addEventListener("mouseup",b,!1),document.addEventListener("mousemove",E,!1),m.emit("meride.slider_mousedown"),e.preventDefault()},_=function(e){m.emit("meride.slider_movetouch"),void 0!==l.getClientRects()[0]&&void 0!==t[0]?t[0][d]>=l.getClientRects()[0][c]&&t[0][d]<=l.getClientRects()[0][p]+l.getClientRects()[0][c]?t[0][d]<l.getClientRects()[0][p]+l.getClientRects()[0][c]?s.style[c]=t[0][d]-l.getClientRects()[0][c]+"px":s.style[c]=l.getClientRects()[0][p]+l.getClientRects()[0][c]+"px":t[0][d]<l.getClientRects()[0][c]?s.style[c]="1px":t[0][d]>l.getClientRects()[0][p]+l.getClientRects()[0][c]&&(s.style[c]=l.getClientRects()[0][p]+"px"):s.style[c]="0",r=0},T=function(e){m.emit("meride.slider_movetouch_notreqanim"),void 0!==l.getClientRects()[0]&&void 0!==e.touches[0]&&(s.style[c]=e.touches[0][d]-s[u]/2-l.getClientRects()[0][c]+"px")},A=function(e){t=e.touches,!r&&window.requestAnimationFrame&&(r=window.requestAnimationFrame(_)),e.cancelable&&e.preventDefault()},S=function(e){m.emit("meride.slider_touchend"),e.target.removeEventListener("touchend",S),e.target.removeEventListener("touchcancel",S),e.target.removeEventListener("touchmove",A),e.preventDefault()},L=function(e){m.emit("meride.slider_touchstart"),e.target.addEventListener("touchend",S,!1),e.target.addEventListener("touchcancel",S,!1),e.target.addEventListener("touchmove",A,!1),e.defaultPrevented&&e.preventDefault()},k=function(t){if(!t)throw new Error("Slider.setPosition requires some opts");if(void 0===t.level)throw new Error("Slider.setPosition requires a level option");setTimeout(function(){var r,n;"vertical"===e.scrollDirection?(r=l[f]-t.level*l[f],0===t.level?r-=s[u]:1!==t.level&&(r-=s[u]/2),s.style[c]=r+"px"):(r=t.level*l[f]-s[u]/l[f]/2,s.style[c]=r+"px"),null!==v&&(n=t.level*l[f],v.style[p]=n+"px")},500)};a.setPosition=k,a.init=function(e){s.addEventListener("mousedown",w,!1),s.addEventListener("mouseup",b,!1),s.addEventListener("touchstart",L,{passive:!0}),window.requestAnimationFrame||s.addEventListener("touchstart",T,{passive:!0});var t=g;e&&e.level&&(t=e.level),k({level:t})},a.end=function(){s.removeEventListener("mousedown",w),s.removeEventListener("mouseup",b),s.removeEventListener("touchstart",L),window.requestAnimationFrame||s.removeEventListener("touchstart",T)},n="vertical"===e.scrollDirection?y.mouseMoveVertical:y.mouseMoveHorizontal}var i=r(0),o=r(2);e.exports=n},function(e,t,r){var n=r(41),i=r(4),o=r(23);r(74),r(99),r(110);window.Meride=n,meride.embed.EmbedConfig.proxyURL=o.BASE_URL+"proxy/bulkproxynew/embedproxy_bulk.php/",meride.embed.EmbedConfig.tokenServiceURL=o.TOKEN_SERVICE_URL,document.querySelectorAll||function(){var e=document,t=e.createStyleSheet();e.querySelectorAll=function(r,n,i,o,a){for(a=e.all,n=[],r=r.replace(/\[for\b/gi,"[htmlFor").split(","),i=r.length;i--;){for(t.addRule(r[i],"k:v"),o=a.length;o--;)a[o].currentStyle.k&&n.push(a[o]);t.removeRule(0)}return n}}(),"function"!=typeof Object.create&&(Object.create=function(){var e=function(){};return function(t){if(arguments.length>1)throw Error("Second argument not supported");if("object"!=typeof t)throw TypeError("Argument must be an object");e.prototype=t;var r=new e;return e.prototype=null,r}}()),window.CustomEvent||-1!=navigator.appVersion.indexOf("MSIE 8.")||-1!=navigator.appVersion.indexOf("MSIE 7.")||-1!=navigator.appVersion.indexOf("MSIE 6.")||function(){var e;e=function(e,t){var r;t=t||{bubbles:!1,cancelable:!1,detail:void 0};try{r=document.createEvent("CustomEvent"),r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail)}catch(i){r=document.createEvent("Event");for(var n in t)r[n]=t[n];r.initEvent(e,t.bubbles,t.cancelable)}return r},e.prototype=window.Event.prototype,window.CustomEvent=e}(),(-1!=navigator.appVersion.indexOf("MSIE 9.")||-1!=navigator.appVersion.indexOf("MSIE 10.")||navigator.userAgent.match(/Trident\//)&&navigator.userAgent.match(/rv/))&&function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}e.prototype=window.Event.prototype,window.CustomEvent=e}(),function(){function e(e,t){t=t||{bubbles:!1,cancelable:!1,detail:void 0};var r=document.createEvent("CustomEvent");return r.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),r}if("function"==typeof window.CustomEvent)return!1;e.prototype=window.Event.prototype,window.CustomEvent=e}(),i.onDOMLoaded(function(){!0!==window.Meride.preventOnDOMLoaded&&n.initAll()})},function(e,t,r){var n=r(22),i=r(72),o=r(1),a=r(73),s=r(3),l=r(7),d=window.Meride||{};d.EventType=o,d.initEmbed=function(e){if(!e.embedID&&!e.embedSelector)throw new Error("embedID or embedSelector required by initEmbed");var t=function(t){if(!t)throw new Error("Meride - Embed not found");var r,i=meride.embed.Embed,d=t.getAttribute("data-customer"),u=t.getAttribute("data-holacdn"),c=l.isMobile(),f=e.bulkLabel?e.bulkLabel||"NO_LABEL":t.getAttribute("data-bulk-label")||"NO_LABEL",p=new i({embedID:e.embedID,clientID:d,device:c?"mobile":"desktop",videoFormat:c?"m3u8":"f4m",bulkLabel:f});null!==u&&"true"===u&&void 0===window.hola_cdn&&s.include("//player.h-cdn.com/loader.js?customer=mosaico",function(){},{async:!0,crossorigin:"anonymous"}),p.read().then(function(i){try{var s=p.getScrollMode(),l=!(!e.scrollMode||!0!==e.scrollMode.enabled)||!0===s.enabled;if(e.response=i,e.embed=p,e.embedElement=t,l){if(!e.scrollMode&&(e.scrollMode=s,e.scrollMode.destroyOn))for(var d in e.scrollMode.destroyOn)e.scrollMode.destroyOn.hasOwnProperty(d)&&(e.scrollMode.destroyOn[d]=o[e.scrollMode.destroyOn[d]]);e.advManager&&"ima"===e.advManager&&(e.advManager="default");new a(e)}else r=new n,r.init(e)}catch(e){}})};try{if(e.embedSelector){var r=document.querySelector(e.embedSelector);if(r){if(null===r.getAttribute("data-embed"))throw new Error("data-embed is required on Meride element");e.embedID=r.getAttribute("data-embed"),t(r)}}else{var i=document.querySelectorAll(".meride-video-container[data-embed='"+e.embedID+"']");for(var d in i)i.hasOwnProperty(d)&&t(i[d])}}catch(e){}},d.initAll=function(e){for(var t=document.getElementsByClassName("meride-video-container"),r=0,n=t.length;r<n;r+=1){var i={};for(var o in e)e.hasOwnProperty(o)&&(i[o]=e[o]);i.embedID=t[r].getAttribute("data-embed"),d.initEmbed(i)}},d.getPlayer=function(e){if(!e.embedID&&!e.embedSelector)throw new Error("embedID or embedSelector required by getPlayer");return e.embedID?document.querySelector(".meride-video-container[data-embed='"+e.embedID+"']"):e.embedSelector?document.querySelector(e.embedSelector):void 0},d.getPlayerContainer=d.getPlayer,d.preventOnDOMLoaded=!1,d.resize=function(e){if(!e)throw new Error("resize method requires embedID property");var t=d.getPlayer({embedID:e.embedID});if(null!==t){var r=t.querySelector("video");t.style.width=(e.width||t.offsetWidth)+"px",t.style.height=(e.height||t.offsetHeight)+"px",r.style.width=(e.width||r.offsetWidth)+"px",r.style.height=(e.height||r.offsetHeight)+"px",r.setAttribute("width",e.width||r.offsetWidth),r.setAttribute("height",e.height||r.offsetHeight)}},d.initEmbedFullWindow=function(e){return new i(e)},e.exports=d},function(e,t){var r=new function(){var e=this;e.installed=!1,e.raw="",e.major=-1,e.minor=-1,e.revision=-1,e.revisionStr="";var t=[{name:"ShockwaveFlash.ShockwaveFlash.7",version:function(e){return r(e)}},{name:"ShockwaveFlash.ShockwaveFlash.6",version:function(e){var t="6,0,21";try{e.AllowScriptAccess="always",t=r(e)}catch(e){}return t}},{name:"ShockwaveFlash.ShockwaveFlash",version:function(e){return r(e)}}],r=function(e){var t=-1;try{t=e.GetVariable("$version")}catch(e){}return t};e.majorAtLeast=function(t){return e.major>=t},e.minorAtLeast=function(t){return e.minor>=t},e.revisionAtLeast=function(t){return e.revision>=t},e.versionAtLeast=function(t){var r=[e.major,e.minor,e.revision],n=Math.min(r.length,arguments.length);for(i=0;i<n;i++){if(!(r[i]>=arguments[i]))return!1;if(!(i+1<n&&r[i]==arguments[i]))return!0}},e.FlashDetect=function(){var r,n,i,o,a;if(navigator.plugins&&0<navigator.plugins.length){var s=navigator.mimeTypes;if(s&&s["application/x-shockwave-flash"]&&s["application/x-shockwave-flash"].enabledPlugin&&s["application/x-shockwave-flash"].enabledPlugin.description){r=s=s["application/x-shockwave-flash"].enabledPlugin.description;var s=r.split(/ +/),l=s[2].split(/\./),s=s[3];n=parseInt(l[0],10),i=parseInt(l[1],10),o=s,a=parseInt(s.replace(/[a-zA-Z]/g,""),10)||e.revision,e.raw=r,e.major=n,e.minor=i,e.revisionStr=o,e.revision=a,e.installed=!0}}else if(-1==navigator.appVersion.indexOf("Mac")&&window.execScript)for(s=-1,l=0;l<t.length&&-1==s;l++){r=-1;try{r=new ActiveXObject(t[l].name)}catch(e){r={activeXError:!0}}r.activeXError||(e.installed=!0,-1!=(s=t[l].version(r))&&(r=s,o=r.split(","),n=parseInt(o[0].split(" ")[1],10),i=parseInt(o[1],10),a=parseInt(o[2],10),o=o[2],e.raw=r,e.major=n,e.minor=i,e.revision=a,e.revisionStr=o))}}()};r.JS_RELEASE="1.0.4",e.exports=r},function(e,t,r){var n=r(0),i=r(1),o=r(6),a=function(e){if(!e.embedID)throw new Error("embedID required by FlashObject");var t={},r=null,a=e.embedID,s=e.container,l=new n;t.embedID=a,t.on=function(e,t){return l.on(e,t)},t.off=function(e,t){return l.off(e,t)};var d=function(){l.emit("meride."+r.getState(),a)},u=function(e){l.emit("meride.durationChange",a,e)},c=function(e){l.emit("meride.playing",a,e)},f=function(e){l.emit("meride.currentTimeChange",a,e)},p=function(e){l.emit("meride.seekingChange",a,e)},h=function(){o.emit(i.ENDED,s),l.emit("meride.complete",a)},m=function(e){o.emit(i.AD_STARTED,s,{tag:e}),l.emit("meride.adstarted",a,e)},v=function(){o.emit(i.AD_ENDED,s),l.emit("meride.adcompleted",a)},g=function(){o.emit(i.AD_ERROR,s),l.emit("meride.aderror",a)},y=function(e){o.emit(i.AD_CLICKED,s,{clickThroughUrl:e.clickThroughUrl||"",adID:e.adID,adTitle:e.adTitle,adSystem:e.adSystem}),l.emit("meride.adclicked",a,e)};return t.javascriptCallbackFunction=function(e){null===r&&(r=document.getElementById(e),l.emit("meride.ready",{player:r}),o.emit(i.READY,s,{player:r}),window["merideOnMediaPlayerStateChange"+a]=d,window["durationChange"+a]=u,window["currentTimeChange"+a]=f,window["seekingChange"+a]=p,window["complete"+a]=h,window["adStarted"+a]=m,window["adCompleted"+a]=v,window["adError"+a]=g,window["adClicked"+a]=y,window["playing"+a]=c,r.addEventListener("mediaPlayerStateChange","merideOnMediaPlayerStateChange"+a),r.addEventListener("durationChange","durationChange"+a),r.addEventListener("currentTimeChange","currentTimeChange"+a),r.addEventListener("seekingChange","seekingChange"+a),r.addEventListener("playing","playing"+a),r.addEventListener("complete","complete"+a),r.addAdvEventListener("AD_STARTED","adStarted"+a),r.addAdvEventListener("ALL_ADS_COMPLETED","adCompleted"+a),r.addAdvEventListener("AD_LOAD_ERROR","adError"+a),r.addAdvEventListener("AD_CLICKED","adClicked"+a))},t};e.exports=a},function(e,t,r){var n=r(0),i=r(3),o=function(e){if(!e.params)throw new Error("Nielsen requires some parameters (params)");if(!e.player)throw new Error("Nielsen requires a player object (FlashObject or video tag HTML5)");if(!e.type)throw new Error("Nielsen requires a type (html5|flash)");var t={},r=(new n,e.params),o=0,a=!1,s=null,l=e.player,d=!1,u=!1,c=function(){l.on("meride.playing",function(e){e.arguments[0]===l.embedID&&o>0&&!1===a&&(a=!0,s.ggPM(15,r.src,"content","<length>"+parseInt(o,10)+"</length><title>"+r.title.replace("'","'")+"</title><censuscategory>content_"+r.vcid+"</censuscategory>"))}),l.on("meride.durationChange",function(e){e.arguments[0]===l.embedID&&(o=e.arguments[1])}),l.on("meride.complete",function(e){e.arguments[0]===l.embedID&&(a=!1,s.ggPM(7,parseInt(o,10)))})},f=function(){var e=[0,0],t={pause:function(){d=!0,s.ggPM(6,Math.floor(l.video.currentTime))},seeked:function(t){void 0!==e[0]&&void 0!==e[1]&&Math.abs(Math.floor(e[0])-Math.floor(e[1]))>2&&s.ggPM(8,Math.floor(e[0]),Math.floor(e[1]))},seekStart:function(e){},ended:function(){a=!1,s.ggPM(7,Math.floor(l.video.duration))},timeupdate:function(t){e.push(l.video.currentTime),e.splice(0,1)},playing:function(){!1===u?(u=!0,s.ggPM(3,r.src,"content","<length>"+Math.floor(l.video.duration)+"</length><title>"+r.title.replace("'","'")+"</title><censuscategory>content_"+r.vcid+"</censuscategory>"),s.ggPM(5,Math.floor(l.video.currentTime))):!0===d&&(d=!1,s.ggPM(5,Math.floor(l.video.currentTime))),!1===a&&(a=!0,l.video.addEventListener("pause",t.pause,!1),l.video.addEventListener("seeked",t.seeked,!1),l.video.addEventListener("ended",t.ended,!1))}};l.video.addEventListener("playing",t.playing,!1),l.video.addEventListener("timeupdate",t.timeupdate,!1)};return t.init=function(){i.include("https://secure-it.imrworldwide.com/novms/js/2/ggcmb390.js",function(){if(s=new gg,s.ggInitialize(r,0,!1,!0),"flash"===e.type)c();else{if("html5"!==e.type)throw new Error("Invalid parameter for Nielsen type");f()}})},t};e.exports=o},function(e,t,r){var n=r(0),i=(r(3),r(13)),o=r(1),a=function(e){if(!e.params)throw new Error("NielsenNewSDK requires some parameters (params)");if(!e.params.appid)throw new Error("NielsenNewSDK requires an appid");if(!e.player)throw new Error("NielsenNewSDK requires a player object (FlashObject or video tag HTML5)");if(!e.containerEl)throw new Error("NielsenNewSDK requires a containerEl object (main Meride div)");if(!e.type)throw new Error("NielsenNewSDK requires a type (html5|flash)");var t={},r=(new n,e.params),a=0,s=!1,l=e.player,d=e.containerEl,u=!1,c=!1,f=!1,p=!1,h=0,m=!1,v=null,g={},y=!1,E=!0===e.isLive,b=null,w={clientid:r.clientid,vcid:r.vcid},_=0,T=e.hls?e.hls:null,A=null,S=!1,L=0,k=function(){l.on("meride.playing",function(e){e.arguments[0]===l.embedID&&a>0&&!1===s&&(s=!0,v.ggPM("5",g))}),l.on("meride.durationChange",function(e){e.arguments[0]===l.embedID&&(a=e.arguments[1])}),l.on("meride.complete",function(e){e.arguments[0]===l.embedID&&(s=!1,v.ggPM("57",parseInt(a,10)))})},D=function(){var e=[0,0],t="",r=function(e,r,n){""!==(t=i.getAdvState())&&t!==o.AD_ENDED||(void 0!==n?v.ggPM(e,r,n):v.ggPM(e,r))},n=function(){return!0===E?Math.floor(Date.now()/1e3):Math.floor(l.video.currentTime)},a=function(){try{clearInterval(b),b=null}catch(e){}},w=function(){var e=n();_===e||l.video.paused||c||p||(_=e,r("49",n()))},k=function(){b=setInterval(function(){w()},500)},D=function(){setTimeout(function(){!1===S&&!isNaN(l.video.duration)&&l.video.duration>0&&!1===y&&(y=!0,g.length=!0===E?"86400":Math.floor(l.video.duration).toString(),r("3",g),l.video.addEventListener("pause",C.pause,!1),l.video.addEventListener("ended",C.ended,!1),null===T?(l.video.addEventListener("stalled",C.stalled,!1),l.video.addEventListener("error",C.error,!1),l.video.addEventListener("canplay",C.canplay,!1)):l.on("meride.hlsobject_error",C.hlsError),l.on("meride.seek_start",C.seekStart),l.video.addEventListener("playing",C.playing,!1),l.video.addEventListener("play",function(){},!1),l.video.addEventListener("timeupdate",C.timeupdate,!1),r("5",0),l.video.addEventListener("seeked",C.seeked,!1),k())},500)},C={pause:function(){u=!0,r("6",n())},seeked:function(t){p||f||void 0!==e[0]&&void 0!==e[1]&&e[0]>0&&e[1]>0&&(r("6",Math.floor(L)),r("8",Math.floor(L),Math.floor(e[1]))),l.video.paused||(l.video.play(),p||f||0===n()||r("5",n()))},seekStart:function(e){p=!0,h=n(),l.video.pause()},ended:function(){if(i.getAdvState()!==o.AD_REQUESTING){var e=function(){l.video.removeEventListener("play",e),r("3",g),p=!1,setTimeout(function(){l.video.addEventListener("seeked",C.seeked)},500)};s=!1,r("57",n()),r("7",n()),l.video.removeEventListener("seeked",C.seeked),l.video.addEventListener("play",e,!1),m=!1}},timeupdate:function(t){(0===e[0]&&0===e[1]||Math.abs(l.video.currentTime-e[0])>=1)&&(L=e[0],e.push(l.video.currentTime),e.splice(0,1))},stalled:function(){c=!0,C.pause()},error:function(){f=!0},canplay:function(){c=!1,f=!1},durationchange:function(){setTimeout(function(){A=l.video.getAttribute("data-meride-adv"),isNaN(l.video.duration)||!(l.video.duration>0)||!1!==S||"started"===A||l.video.paused&&!1!==l.video.autoplay||(l.video.removeEventListener("durationchange",C.durationchange),D())},500)},playing:function(){p&&(p=!1,r("8",h,n())),f=!1,!0===u&&(u=!1,0!==n()&&r("5",n())),!0===c&&(c=!1),!1===s&&(s=!0)},beforeunload:function(){r("57",n()),r("7",n()),a()},hlsError:function(e){f=!0,e.arguments&&e.arguments[1]&&!0===e.arguments[1].fatal&&(p=!1,u=!0,r("6",n()))}};d.addEventListener(Meride.EventType.AD_STARTED,function(){S=!0},!1),d.addEventListener(Meride.EventType.AD_ENDED,function(){S=!1},!1),d.addEventListener(Meride.EventType.AD_ERROR,function(){S=!1},!1),l.video.addEventListener("durationchange",C.durationchange,!1),"onpagehide"in window?window.addEventListener("pagehide",C.beforeunload):window.addEventListener("beforeunload",C.beforeunload),window.addEventListener("scroll",w)},C=function(e){return e.replace("&#039;"," ").replace("''"," ").replace("","a").replace("","o").replace("","e").replace("","e").replace("","u").replace("","i").replace("+"," ").replace("+","").replace("&","_e_").replace("%26","_e_").replace("","_eur_").replace("","_pound_").replace("&amp;"," ")};return t.init=function(){!function(e,t){e[t]=e[t]||{nlsQ:function(r,n,i,o,a,s){return a=e.document,o=a.createElement("script"),o.async=1,o.src=("http:"===e.location.protocol?"http:":"https:")+"//cdn-gl.imrworldwide.com/conf/"+r+".js#name="+n+"&ns="+t,s=a.getElementsByTagName("script")[0],s.parentNode.insertBefore(o,s),e[n]=e[n]||{g:i,ggPM:function(t,r,i,o,a){(e[n].q=e[n].q||[]).push([t,r,i,o,a])}},e[n]}}}(window,"NOLBUNDLE"),r.sdkdebug&&"debug"===r.sdkdebug&&(w.nol_sdkDebug="debug");var t=C(r.title);if(g={type:"content",assetid:l.container.getAttribute("data-embed"),program:t.substr(0,25),title:t.substr(0,40),airdate:"19700101 00:00:00",isfullepisode:"y",adloadtype:"2"},void 0===(v=NOLBUNDLE.nlsQ(r.appid,t,w)))throw new Error("NielsenNewSDK - nSdkInstance is undefined. Please check if title is less then 11 characters.");if("flash"===e.type)k();else{if("html5"!==e.type)throw new Error("Invalid parameter for NielsenNewSDK type");D()}},t};e.exports=a},function(e,t,r){var n=r(3),i=function(e){if(!e.params)throw new Error("Comscore requires some parameters (params)");if(!e.params.user)throw new Error("Comscore requires a user inside params");var t={},r=e.params;e.player;return t.init=function(){n.include("https://sb.scorecardresearch.com/beacon.js",function(){COMSCORE.beacon({c1:1,c2:r.user,c3:r.title,c5:"02"})})},t};e.exports=i},function(e,t,r){var n=r(3),i=r(1),o=function(e){if(!e)throw new Error("Webtrekk requires some parameter");if(!e.scriptURL)throw new Error("Webtrekk requires scriptURL param");if(!e.trackDomain)throw new Error("Webtrekk requires trackDomain param");if(!e.trackId)throw new Error("Webtrekk requires trackId param");if(!e.player)throw new Error("Webrekk requires a player {Player} param");if(!e.playerContainer)throw new Error("Webrekk requires a playerContainer {DOMElement} param");var t={},r=e.player.video,o=e.playerContainer,a=e.title?encodeURIComponent(e.title):"No title",s=function(){wt_sendinfo_media.apply(this,arguments)},l=!1,d=e.mg||"",u=null,c=-1,f=function(){null!==u&&(clearInterval(u),u=null)},p=function(e){if(null===u){var t=r.currentTime;u=setInterval(function(){(t=Math.round(r.currentTime))%30==0&&0!==t&&(s(a,"pos",t,c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now()),t%60==0&&0!==t&&s(a,"alive",t,c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now()))},1e3)}c<=0?setTimeout(function(){s(a,"play",Math.round(r.currentTime),c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now())},500):s(a,"play",Math.round(r.currentTime),c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now())},h=function(e){!1===l&&Math.round(r.currentTime)!==c&&(s(a,"pause",Math.round(r.currentTime),c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now()),f())},m=function(e){s(a,"eof",Math.round(r.currentTime),c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now()),f()},v=function(e){r.removeEventListener("seeked",v),l=!1,setTimeout(function(){!0===r.paused?h():p()},500)},g=function(e){r.addEventListener("seeked",v,!1),l=!0,s(a,"seek",Math.round(r.currentTime),c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now())},y=function(t){try{o.removeEventListener(i.AD_ENDED,y)}catch(e){}try{o.removeEventListener(i.AD_ERROR,y)}catch(e){}r.addEventListener("play",p,!1),r.addEventListener("pause",h,!1),r.addEventListener("ended",m,!1),e.player.on("meride.seek_start",g)},E=function(t){o.removeEventListener(i.LOADEDMETADATA,E),c=Math.round(r.duration),s(a,"init",Math.round(r.currentTime),c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now()),!0===e.autoPlay&&s(a,"autoplay_on",Math.round(r.currentTime),c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now())},b=function(e){o.removeEventListener(i.AD_STARTED,b),s(a,"preroll1-start",Math.round(r.currentTime),c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now())},w=function(e){o.removeEventListener(i.AD_ENDED,w),s(a,"preroll1-stop",Math.round(r.currentTime),c,d,"",100*r.volume,!0===r.muted?"1":"0",Date.now())};return t.init=function(){n.include(e.scriptURL,function(){wt_init_media(e.trackDomain,e.trackId,e.samplingRate||null),o.addEventListener(i.LOADEDMETADATA,E,!1),o.addEventListener(i.AD_STARTED,b,!1),o.addEventListener(i.AD_ENDED,w,!1),e.advManager&&"default"===e.advManager?(o.addEventListener(i.AD_ENDED,y,!1),o.addEventListener(i.AD_ERROR,y,!1)):(r.addEventListener("play",p,!1),r.addEventListener("pause",h,!1),r.addEventListener("ended",m,!1),e.player.on("meride.seek_start",g))})},t};e.exports=o},function(e,t,r){var n=(r(1),function(e){if(!e)throw new Error("ComscoreVA requires some parameters");if(!e.user)throw new Error("ComscoreVA requires a user param");if(!e.playerID)throw new Error("ComscoreVA requires a playerID param");if(!e.player)throw new Error("ComscoreVA requires a player param");if(!e.renderer)throw new Error("ComscoreVA requires a renderer param");var t={},r=(e.user,e.playerID),n=e.player,i=e.renderer,o=i.tracker,a=["start","complete","pause","mute","unmute","resume","creativeView","error","impression","viewable_impression"];t.init=function(){for(var e=function(e){e.arguments[0]&&null!==e.arguments[0].match("vce4v=1")&&(o.blockNetTracking=!0,cs_vce_.trackEvent(e.event.replace("meride:tracking:",""),e.arguments[0],{ns_ad_cd:n.video.duration,ns_ad_fs:!1,ns_ad_vs:0!==n.video.volume,ns_ad_ctp:!1,ns_ad_sz:n.video.offsetWidth+"x"+n.video.offsetHeight},r))},t=0,i=a.length;t<i;t+=1)o.on("meride:tracking:"+a[t],e)};return"undefined"==typeof cs_vce_&&function(){!function(){var e="encodeURIComponent",t="decodeURIComponent",r="createElement",n="location",i="getElementById",o="length",a="setAttribute",s="indexOf",l="charAt",d="href",u="split",c="substr",f="src",p="width",h="height",m="http",v="addEventListener",g="queryParams",y="optionalParams",E="ns_ad_",b=E+"pcd",w=E+"sz",_=E+"ps",T=E+"vs",A="defaultTrackingURL",S="handlerForVCECallback",L="loader",k="playerId",D="partnerId",C="notInited",R=window,x=document;ns_=R.ns_||{},ns_.vce_vh=ns_.vce_vh||{},ns_.vce_vh.player_cache=ns_.vce_vh.player_cache||{},ns_.vce_vh.Loader=ns_.vce_vh.Loader||function(){function E(e){return e?e.replace(/\s+/g,""):e}function A(){try{return ns_.vce_v.R&&ns_.vce_v&&ns_}catch(e){return!1}}function S(){var e=E(ue);return e=e+"#cs_vp_sv="+$+"&ns_ad_pa="+H+"&ns_swfid="+ee}function L(e){var t=x[r]("script");t.type="text/javascript",t[f]=e,t.async=!0;try{var n=x[i](K);if(!n)return;n[v]("loadedmetadata",function(e){var t=this.videoWidth,r=this.videoHeight,i=this[p],o=this[h];re[b]=n.duration,re[w]=t+"x"+r,re[_]=i+"x"+o,re[T]=0!==n.volume},!1),n.parentNode.insertBefore(t,n.nextSibling)}catch(e){}}function k(e){var t={};return t=N(e),!t[_]&&re[_]&&(t[_]=re[_]),!t[w]&&re[w]&&(t[w]=re[w]),!t[b]&&re[b]&&(t[b]=re[b]),!t[T]&&re[T]&&(t[T]=re[T]),t}function D(e,t,r){t||(t=z),e&&t&&(r?Y.push({eventType:e,eventURL:t,optionalParams:r}):Y.push({eventType:e,eventURL:t,optionalParams:{}}),setTimeout(C,0))}function C(){var e=0,t=Y[o],r={},n="",i={};if(X>Q){for(e=0;e<t;++e)O(Y[e]);return void(Y[o]=0)}if(!A())return X+=J,void setTimeout(C,J);if(0!==t){for(e=0;e<t;++e){try{r=P(Y[e].eventURL),n=r.url+"?"+M(r[g]),B(),i=k(Y[e][y]),i.bufferTime=X}catch(e){}try{ns_.vce_v.Tr(ee,Y[e].eventType,n,M(i))}catch(e){}}Y[o]=0}}function O(e){var t,r,n={},i="",o={},a="v_"+e.eventType,s=e[y],l={},d="";try{n=P(e.eventURL),i=n.url;for(t in n[g])o[t]=n[g][t];if(r=o.c2+""+o.c3,o.ns__t=(new Date).getTime(),r in ce?(o.ns__p=ce[r],te=ce[r]):ce[r]=o.ns__t,o.ns_ad_vevent=a,o.ns_ad_event="video",o.ns_ad_pa=H,te)for(var u=["c3","ca3","cb3","cc3","cd3","ce3","cf3","cg3","ch3","ci3","cj3","ck3","cl3"],c=0;c<u.length;c++){var f=u[c],p=f.replace(/3/gi,1);o.hasOwnProperty(f)&&3==o[p]&&(o[f]="_e0_"+o[f])}if(o.cs_vp_sv=$,o.ns_ad_wt=X,s){B(),l=k(s);for(var h in l)o[h]=l[h]}d=i+"?"+M(o),F(d)}catch(e){}}function I(e){var t,r=0;for(t in e)e[t]&&r++;return r}function M(e){var t="";for(var r in e)""!==t&&(t+="&"),t+=r+"="+ae(e[r]).replace(/-/g,"%2D").replace(/@/g,"%40").replace(/\*/g,"%2A");return t}function P(e){var r="",n={},i="",a=0,d=[];if(!e)return{url:null,queryParams:null};if(e=E(e),0!==e[s](m)&&(e=m+"://"+e),le[l](4)!=e[l](4)&&(e=le+("s"==le[l](4)?e[c](7):e[c](9))),-1!=e[s]("?")){if(r=e[c](0,e[s]("?")),i=e[c](e[s]("?")+1),-1!=i[s]("&")){n={},i=i.replace(/&amp;/gi,"&").replace(/amp;/gi,"");var f=i[u]("&");for(a=0;a<f[o];++a)if(d=f[a][u]("="),2==d[o])try{n[R[t](d[0])]=R[t](d[1])}catch(e){n[d[0]]=d[1]}}else if(d=i[u]("="),2==d[o]){n={};try{n[R[t](d[0])]=R[t](d[1])}catch(e){n[d[0]]=d[1]}}}else r=e;return{url:r,queryParams:n}}function N(e){var r,n={};if(!e)return{};if(0===I(e))return{};for(r in e)try{n[R[t](r)]=R[t](e[r])}catch(i){r=R[t](r),n[r]=e[r]}return n}function B(){if(K){var e=x[i](K);if(re[b]||(re[b]=e.duration),!re[w]){var t=e.videoWidth,r=e.videoHeight;re[w]=t+"x"+r}if(!re[_]){var n=e[p],o=e[h];re[_]=n+"x"+o}re[T]||(re[T]=0!==e.volume)}}function F(e){var t=x[r]("img");t[a](f,e),t[a](h,"1px"),t[a](p,"1px"),x.body.appendChild(t)}function j(){for(var e=x[i](K),t=!1,r=0,n=oe[o];r<n;++r)t=t||e==x[oe[r]],x[oe[r]]&&(t=t||e==x[oe[r]].getElementsByTagName("video")[0]),t=t||ne;return t}function U(e,t){W&&W(e,t)}function V(){var e,t=Z+"evt",r=Z+"fs";K&&(e=x[i](K)),e&&(e[t]=U,e[r]=j)}function G(e){W=e}function q(e,t,r){H=e;var n=x[i](t);n&&(n[ee]=function(){return!0},K=t,L(S()),V(),r&&(z=r),n[v]("webkitbeginfullscreen",function(){ne=!0},!1),n[v]("webkitendfullscreen",function(){ne=!1},!1))}var H,K,W,z,Y=[],X=0,Q=5e3,J=500,Z="cs_",$="1.1501.28h",ee=Z+Math.floor(1e13*Math.random()+1),te=0,re={},ne=!1,ie="FullscreenElement",oe=["ms"+ie,"webkit"+ie,"mozFullScreenElement","fullscreenElement","o"+ie,"khtml"+ie],ae=R[e]?R[e]:escape,se=ae(x[n]&&x[n][d]?x[n][d]:x.URL),le="http"+("s"==se[l](4)?"s://s":"://"),de=le+"b.scorecardresearch.com",ue=de+"/c2/vce4v/rs.js",ce={};return{init:q,addCallback:G,trackEvent:D}},ns_.vce_vh.boot=ns_.vce_vh.boot||function(){function e(e){if(e.length<2)return!1;var t=e[0];if("string"==typeof t&&t.trim().length>0){for(var r=1,n=e.length;r<n;++r){var i=e[r];if(i.constructor!==Object||!i[k])break}if(r===n)return!0}return!1}function t(){if(e(arguments)){for(var t=arguments,r=t[0].trim(),o=1,a=t.length;o<a;++o){var s=t[o],l=s[k],d=new i;n[l]={},n[l][L]=d,n[l][D]=r,n[l][A]=s[A]?s[A].trim():null,n[l][S]=s[S],n[l][C]=!0}for(var u in n)if(n.hasOwnProperty(u)){var c=n[u],f=c[D];if(c[C]){var p=c[S];p&&p instanceof Function&&c[L].addCallback(p),c[L].init(f,u,c[A]),c[C]=!1}}}}function r(e,t,r,i){var o="",a="";if(i)o=i;else for(var s in n)if(n.hasOwnProperty(s)){o=s;break}o&&n[o]&&(a=t||n[o][A],n[o][L].trackEvent(e,a,r))}var n=ns_.vce_vh.player_cache,i=ns_.vce_vh.Loader;return{init:t,redirect:r}}(),R.cs_vce_=R.cs_vce_||{init:ns_.vce_vh.boot.init,trackEvent:ns_.vce_vh.boot.redirect}}()}(),t});e.exports=n},function(e,t,r){var n=r(3),i=r(1),o=function(e){var t,r={},o="";return function(){o=e.configUrl,t=e.akamaiVars,t.pageUrl=window.location.href,t.pageReferrer=document.referrer?document.referrer:"",t.playerId=e.embedID,window.AKAMAI_MEDIA_ANALYTICS_CONFIG_FILE_PATH=o;var r=Meride.getPlayerContainer({embedID:e.embedID}),a=function(){n.include("https://79423.analytics.edgekey.net/html5/akamaihtml5-min.js",function(){for(var r in t)setAkamaiMediaAnalyticsData(r,t[r],e.embedID)},!0)};e.prerollURL.length>0?(r.addEventListener(i.AD_ENDED,function(e){a()}),r.addEventListener(i.AD_ERROR,function(e){a()})):a()}(),r};e.exports=o},function(e,t,r){var n=r(7),i=r(1),o=r(17),a=function(e){if(!e)throw new Error("Some parameter is required by MerideAkamai");if(!e.baseURL)throw new Error("A baseURL is required by MerideAkamai");if(!e.embed)throw new Error("A embed is required by MerideAkamai");if(!e.playerContainer)throw new Error("A playerContainer is required by MerideAkamai");var t={},r=e.playerContainer,a=e.isLive||!1,s=null,l=!1,d=r.getAttribute("data-customer")+".gif",u="image"===e.driver||"ajax"===e.driver?e.driver:"image",c=e.baseURL,f=[],p=1,h=0,m=null,v=!1,g=null,y=0,E=0,b=null,w=(e.videoSrc,null),_={d:n.isMobile()?"m":"d",e:e.embed.id,bl:encodeURIComponent(e.bulkLabel)||"",ty:e.playerType||"def",u:encodeURIComponent(window.location.href),t:-1,tv:0,re:!1,lm:!1,qr:0,er:!1,ads:!1,adc:!1,ade:!1,adey:!1,adurl:"",adb:!1,adrs:!1,adrc:!1,lv:!0===a?1:0},T=function(){!1===l&&(s=new o({containerEl:e.playerContainer,policy:"nopolicy",executeBehaviour:!1,onAdBlockDetected:function(){l=!0,A[u]({paramsString:"adb=1"})}}))},A={image:function(e){var t=document.createElement("img"),r=parseInt(1e7*Math.random(),10);paramStr="?d="+_.d+"&e="+_.e+"&ty="+_.ty+"&bl="+_.bl+"&lv="+_.lv+"&rn="+r+(e.paramsString?"&"+e.paramsString:""),t.style.display="none",t.setAttribute("src",c+d+paramStr),document.body.appendChild(t),document.body.removeChild(t)}},S=function(e){E=b.currentTime,"started"!==(w=b.getAttribute("data-meride-adv"))&&!isNaN(h)&&h>0&&4===b.readyState&&E>h*p&&(p<4&&!1===a&&A[u]({paramsString:"q"+p+"=1&tv="+h+"&rs="+E}),f[p-1]=!0,p+=1)},L=function(e){r.removeEventListener(i.READY,L),A[u]({paramsString:"i=1&u="+_.u}),T(),b=e.detail.player,w=b.getAttribute("data-meride-adv"),!0===a&&(b.addEventListener("playing",G),b.addEventListener("pause",V),b.addEventListener("ended",U))},k=function(){"started"!==(w=b.getAttribute("data-meride-adv"))&&(r.removeEventListener(i.PLAY,k),A[u]({paramsString:"py=1&u="+_.u}),y=b.duration,h=y/4,b.addEventListener("timeupdate",S))},D=function(){r.removeEventListener(i.PLAY,D),A[u]({paramsString:"py=1&u="+_.u});var e=0,t=function(){y=b.duration,h=y/4,e+=200},n=setInterval(function(){e>5e3?clearInterval(n):isNaN(h)?t():(clearInterval(n),b.addEventListener("timeupdate",S))},200)},C=function(){"started"!==w&&(r.removeEventListener(i.ENDED,C),p=1,isNaN(h)||!1!==a?A[u]({paramsString:"co=1"}):A[u]({paramsString:"co=1&q4=1&tv="+h+"&rs="+E}))},R=function(){r.removeEventListener(i.ROLLVIDEO_STARTED,R),A[u]({paramsString:"adrs=1"})},x=function(){r.removeEventListener(i.ROLLVIDEO_ENDED,x),A[u]({paramsString:"adrc=1"})},O=function(){r.removeEventListener(i.AD_STARTED,O),A[u]({paramsString:"ads=1"})},I=function(){r.removeEventListener(i.AD_ENDED,I),A[u]({paramsString:"adc=1"})},M=function(){r.removeEventListener(i.ERROR,M),A[u]({paramsString:"er=1"})},P=function(e){r.removeEventListener(i.AD_ERROR,P);var t="ade=1";try{1009!==e.detail.errorCode&&101!==e.detail.errorCode||(t+="&adey=1")}catch(e){}A[u]({paramsString:t}),T()},N=function(e){var t="ck=1&cktr="+encodeURIComponent(e.detail.clickThroughUrl);e.detail.adID&&(t+="&ckadid="+encodeURIComponent(e.detail.adID)),e.detail.adTitle&&(t+="&ckadtt="+encodeURIComponent(e.detail.adTitle)),e.detail.adSystem&&(t+="&ckadsy="+encodeURIComponent(e.detail.adSystem)),A[u]({paramsString:t})},B=function(e){try{r.removeEventListener(i.AD_ENDED,B)}catch(e){}try{r.removeEventListener(i.AD_ERROR,B)}catch(e){}r.addEventListener(i.PLAY,k,!1),r.addEventListener(i.ENDED,C,!1)};t.init=function(){for(var t=0;t<3;t+=1)f[t]=!1;r.addEventListener(i.READY,L,!1),r.addEventListener(i.AD_STARTED,O,!1),r.addEventListener(i.ROLLVIDEO_STARTED,R,!1),r.addEventListener(i.ROLLVIDEO_ENDED,x,!1),r.addEventListener(i.AD_ENDED,I,!1),r.addEventListener(i.AD_ERROR,P,!1),r.addEventListener(i.AD_CLICKED,N,!1),r.addEventListener(i.ERROR,M,!1),!e.advManager||"default"!==e.advManager&&"freewheel"!==e.advManager?(r.addEventListener(i.PLAY,k,!1),r.addEventListener(i.ENDED,C,!1)):(r.addEventListener(i.AD_ENDED,B,!1),r.addEventListener(i.AD_ERROR,B,!1))};var F=function(e){isNaN(h)||(E=e.arguments[1])>h*p&&(A[u]({paramsString:"tv="+h+"&rs="+e.arguments[1]}),f[p-1]=!0,p+=1)},j=function(e){e.arguments[1]&&e.arguments[1]>0&&(m.off("meride.durationChange",j),y=parseFloat(e.arguments[1]),h=y/4,m.on("meride.currentTimeChange",F))},U=function(){null!==g&&(clearInterval(g),g=null)},V=function(){clearInterval(g),g=null},G=function(){null===g&&(g=setInterval(function(){A[u]({paramsString:"tv=15"})},15e3))};return t.registerFlashObject=function(e){m=e,v=!0,!0===a?(m.on("meride.paused",V),m.on("meride.playing",G)):(m.on("meride.durationChange",j),m.on("meride.complete",U)),r.removeEventListener(i.PLAY,k,!1),r.addEventListener(i.PLAY,D,!1)},t};e.exports=a},function(e,t){var r={adv_open_advertiser:{it:"Scopri di pi&ugrave;",en:"More details &#8594;"},adv_open_advertiser_short:{it:"Vedi offerta &#8594;",en:"More &#8594;"},skip:{it:"Salta annuncio",en:"Skip advertising"},skip_short:{it:"X",en:"X"},skip_countdown:{it:"Salta annuncio tra {param} secondi",en:"Skip advertising in {param} seconds"},view_video_countdown:{it:"Il video riprender&agrave; tra {param} secondi",en:"The video will start in {param} seconds"},view_video_pre_countdown:{it:"Il video riprender&agrave; dopo l'inserzione",en:"The video will start after the advertisment"},adblock_detected_block_video:{it:"AdBlock &egrave; stato rilevato. Disattivarlo per visualizzare il video.",en:"AdBlock was detected. Disable it to watch the video."},adblock_detected_timeout:{it:"AdBlock &egrave; stato rilevato. Attendi {param} secondi per visualizzare il video.",en:"AdBlock was detected. Please wait {param} seconds to watch the video."}};e.exports=r},function(e,t,r){var n=r(14),i=r(4).applyStyles,o=function(e,t,r){var o=null,a=0,s=0,l=1.78,d=r||{},u=!0===d.responsiveVertical,c=(n.getFullScreenAPI().api,0),f=0,p=function(){o.offsetWidth<a?(c=parseInt(o.offsetWidth,10),f=parseInt(c/l,10),i(t,{width:c+"px",height:f+"px"}),e.setAttribute("width",c),e.setAttribute("height",f),i(e,{width:"100%",height:f+"px"})):(i(t,{width:a+"px",height:s+"px"}),i(e,{width:a+"px",height:s+"px"}))},h=function(){i(t,{width:screen.width+"px",height:screen.height+"px"}),i(e,{width:screen.width+"px",height:screen.height+"px"})},m=function(e){n.isFullScreen()?h():p()};o=t.parentNode,a=parseInt(t.getAttribute("data-width"),10),s=parseInt(t.getAttribute("data-height"),10),l=a/s,window.addEventListener("resize",m,!1),window.addEventListener("orientationchange",m,!1),!0===u&&function(){i(t,{maxHeight:"100vh"}),i(e,{maxHeight:"100vh"})}(),p()};e.exports=o},function(e,t,r){var n;!function(i,o){"use strict";var a="model",s="name",l="type",d="vendor",u="version",c="mobile",f="tablet",p={extend:function(e,t){var r={};for(var n in e)t[n]&&t[n].length%2==0?r[n]=t[n].concat(e[n]):r[n]=e[n];return r},has:function(e,t){return"string"==typeof e&&-1!==t.toLowerCase().indexOf(e.toLowerCase())},lowerize:function(e){return e.toLowerCase()},major:function(e){return"string"==typeof e?e.replace(/[^\d\.]/g,"").split(".")[0]:void 0},trim:function(e){return e.replace(/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,"")}},h={rgx:function(e,t){for(var r,n,i,o,a,s,l=0;l<t.length&&!a;){var d=t[l],u=t[l+1];for(r=n=0;r<d.length&&!a;)if(a=d[r++].exec(e))for(i=0;i<u.length;i++)s=a[++n],o=u[i],"object"==typeof o&&o.length>0?2==o.length?"function"==typeof o[1]?this[o[0]]=o[1].call(this,s):this[o[0]]=o[1]:3==o.length?"function"!=typeof o[1]||o[1].exec&&o[1].test?this[o[0]]=s?s.replace(o[1],o[2]):void 0:this[o[0]]=s?o[1].call(this,s,o[2]):void 0:4==o.length&&(this[o[0]]=s?o[3].call(this,s.replace(o[1],o[2])):void 0):this[o]=s||void 0;l+=2}},str:function(e,t){for(var r in t)if("object"==typeof t[r]&&t[r].length>0){for(var n=0;n<t[r].length;n++)if(p.has(t[r][n],e))return"?"===r?void 0:r}else if(p.has(t[r],e))return"?"===r?void 0:r;return e}},m={browser:{oldsafari:{version:{"1.0":"/8",1.2:"/1",1.3:"/3","2.0":"/412","2.0.2":"/416","2.0.3":"/417","2.0.4":"/419","?":"/"}}},device:{amazon:{model:{"Fire Phone":["SD","KF"]}},sprint:{model:{"Evo Shift 4G":"7373KT"},vendor:{HTC:"APA",Sprint:"Sprint"}}},os:{windows:{version:{ME:"4.90","NT 3.11":"NT3.51","NT 4.0":"NT4.0",2000:"NT 5.0",XP:["NT 5.1","NT 5.2"],Vista:"NT 6.0",7:"NT 6.1",8:"NT 6.2",8.1:"NT 6.3",10:["NT 6.4","NT 10.0"],RT:"ARM"}}}},v={browser:[[/(opera\smini)\/([\w\.-]+)/i,/(opera\s[mobiletab]+).+version\/([\w\.-]+)/i,/(opera).+version\/([\w\.]+)/i,/(opera)[\/\s]+([\w\.]+)/i],[s,u],[/(opios)[\/\s]+([\w\.]+)/i],[[s,"Opera Mini"],u],[/\s(opr)\/([\w\.]+)/i],[[s,"Opera"],u],[/(kindle)\/([\w\.]+)/i,/(lunascape|maxthon|netfront|jasmine|blazer)[\/\s]?([\w\.]*)/i,/(avant\s|iemobile|slim|baidu)(?:browser)?[\/\s]?([\w\.]*)/i,/(?:ms|\()(ie)\s([\w\.]+)/i,/(rekonq)\/([\w\.]*)/i,/(chromium|flock|rockmelt|midori|epiphany|silk|skyfire|ovibrowser|bolt|iron|vivaldi|iridium|phantomjs|bowser|quark)\/([\w\.-]+)/i],[s,u],[/(trident).+rv[:\s]([\w\.]+).+like\sgecko/i],[[s,"IE"],u],[/(edge|edgios|edga)\/((\d+)?[\w\.]+)/i],[[s,"Edge"],u],[/(yabrowser)\/([\w\.]+)/i],[[s,"Yandex"],u],[/(puffin)\/([\w\.]+)/i],[[s,"Puffin"],u],[/(focus)\/([\w\.]+)/i],[[s,"Firefox Focus"],u],[/(opt)\/([\w\.]+)/i],[[s,"Opera Touch"],u],[/((?:[\s\/])uc?\s?browser|(?:juc.+)ucweb)[\/\s]?([\w\.]+)/i],[[s,"UCBrowser"],u],[/(comodo_dragon)\/([\w\.]+)/i],[[s,/_/g," "],u],[/(micromessenger)\/([\w\.]+)/i],[[s,"WeChat"],u],[/(brave)\/([\w\.]+)/i],[[s,"Brave"],u],[/(qqbrowserlite)\/([\w\.]+)/i],[s,u],[/(QQ)\/([\d\.]+)/i],[s,u],[/m?(qqbrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(BIDUBrowser)[\/\s]?([\w\.]+)/i],[s,u],[/(2345Explorer)[\/\s]?([\w\.]+)/i],[s,u],[/(MetaSr)[\/\s]?([\w\.]+)/i],[s],[/(LBBROWSER)/i],[s],[/xiaomi\/miuibrowser\/([\w\.]+)/i],[u,[s,"MIUI Browser"]],[/;fbav\/([\w\.]+);/i],[u,[s,"Facebook"]],[/safari\s(line)\/([\w\.]+)/i,/android.+(line)\/([\w\.]+)\/iab/i],[s,u],[/headlesschrome(?:\/([\w\.]+)|\s)/i],[u,[s,"Chrome Headless"]],[/\swv\).+(chrome)\/([\w\.]+)/i],[[s,/(.+)/,"$1 WebView"],u],[/((?:oculus|samsung)browser)\/([\w\.]+)/i],[[s,/(.+(?:g|us))(.+)/,"$1 $2"],u],[/android.+version\/([\w\.]+)\s+(?:mobile\s?safari|safari)*/i],[u,[s,"Android Browser"]],[/(chrome|omniweb|arora|[tizenoka]{5}\s?browser)\/v?([\w\.]+)/i],[s,u],[/(dolfin)\/([\w\.]+)/i],[[s,"Dolphin"],u],[/((?:android.+)crmo|crios)\/([\w\.]+)/i],[[s,"Chrome"],u],[/(coast)\/([\w\.]+)/i],[[s,"Opera Coast"],u],[/fxios\/([\w\.-]+)/i],[u,[s,"Firefox"]],[/version\/([\w\.]+).+?mobile\/\w+\s(safari)/i],[u,[s,"Mobile Safari"]],[/version\/([\w\.]+).+?(mobile\s?safari|safari)/i],[u,s],[/webkit.+?(gsa)\/([\w\.]+).+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[[s,"GSA"],u],[/webkit.+?(mobile\s?safari|safari)(\/[\w\.]+)/i],[s,[u,h.str,m.browser.oldsafari.version]],[/(konqueror)\/([\w\.]+)/i,/(webkit|khtml)\/([\w\.]+)/i],[s,u],[/(navigator|netscape)\/([\w\.-]+)/i],[[s,"Netscape"],u],[/(swiftfox)/i,/(icedragon|iceweasel|camino|chimera|fennec|maemo\sbrowser|minimo|conkeror)[\/\s]?([\w\.\+]+)/i,/(firefox|seamonkey|k-meleon|icecat|iceape|firebird|phoenix|palemoon|basilisk|waterfox)\/([\w\.-]+)$/i,/(mozilla)\/([\w\.]+).+rv\:.+gecko\/\d+/i,/(polaris|lynx|dillo|icab|doris|amaya|w3m|netsurf|sleipnir)[\/\s]?([\w\.]+)/i,/(links)\s\(([\w\.]+)/i,/(gobrowser)\/?([\w\.]*)/i,/(ice\s?browser)\/v?([\w\._]+)/i,/(mosaic)[\/\s]([\w\.]+)/i],[s,u]],cpu:[[/(?:(amd|x(?:(?:86|64)[_-])?|wow|win)64)[;\)]/i],[["architecture","amd64"]],[/(ia32(?=;))/i],[["architecture",p.lowerize]],[/((?:i[346]|x)86)[;\)]/i],[["architecture","ia32"]],[/windows\s(ce|mobile);\sppc;/i],[["architecture","arm"]],[/((?:ppc|powerpc)(?:64)?)(?:\smac|;|\))/i],[["architecture",/ower/,"",p.lowerize]],[/(sun4\w)[;\)]/i],[["architecture","sparc"]],[/((?:avr32|ia64(?=;))|68k(?=\))|arm(?:64|(?=v\d+[;l]))|(?=atmel\s)avr|(?:irix|mips|sparc)(?:64)?(?=;)|pa-risc)/i],[["architecture",p.lowerize]]],device:[[/\((ipad|playbook);[\w\s\);-]+(rim|apple)/i],[a,d,[l,f]],[/applecoremedia\/[\w\.]+ \((ipad)/],[a,[d,"Apple"],[l,f]],[/(apple\s{0,1}tv)/i],[[a,"Apple TV"],[d,"Apple"]],[/(archos)\s(gamepad2?)/i,/(hp).+(touchpad)/i,/(hp).+(tablet)/i,/(kindle)\/([\w\.]+)/i,/\s(nook)[\w\s]+build\/(\w+)/i,/(dell)\s(strea[kpr\s\d]*[\dko])/i],[d,a,[l,f]],[/(kf[A-z]+)\sbuild\/.+silk\//i],[a,[d,"Amazon"],[l,f]],[/(sd|kf)[0349hijorstuw]+\sbuild\/.+silk\//i],[[a,h.str,m.device.amazon.model],[d,"Amazon"],[l,c]],[/android.+aft([bms])\sbuild/i],[a,[d,"Amazon"],[l,"smarttv"]],[/\((ip[honed|\s\w*]+);.+(apple)/i],[a,d,[l,c]],[/\((ip[honed|\s\w*]+);/i],[a,[d,"Apple"],[l,c]],[/(blackberry)[\s-]?(\w+)/i,/(blackberry|benq|palm(?=\-)|sonyericsson|acer|asus|dell|meizu|motorola|polytron)[\s_-]?([\w-]*)/i,/(hp)\s([\w\s]+\w)/i,/(asus)-?(\w+)/i],[d,a,[l,c]],[/\(bb10;\s(\w+)/i],[a,[d,"BlackBerry"],[l,c]],[/android.+(transfo[prime\s]{4,10}\s\w+|eeepc|slider\s\w+|nexus 7|padfone)/i],[a,[d,"Asus"],[l,f]],[/(sony)\s(tablet\s[ps])\sbuild\//i,/(sony)?(?:sgp.+)\sbuild\//i],[[d,"Sony"],[a,"Xperia Tablet"],[l,f]],[/android.+\s([c-g]\d{4}|so[-l]\w+)\sbuild\//i],[a,[d,"Sony"],[l,c]],[/\s(ouya)\s/i,/(nintendo)\s([wids3u]+)/i],[d,a,[l,"console"]],[/android.+;\s(shield)\sbuild/i],[a,[d,"Nvidia"],[l,"console"]],[/(playstation\s[34portablevi]+)/i],[a,[d,"Sony"],[l,"console"]],[/(sprint\s(\w+))/i],[[d,h.str,m.device.sprint.vendor],[a,h.str,m.device.sprint.model],[l,c]],[/(lenovo)\s?(S(?:5000|6000)+(?:[-][\w+]))/i],[d,a,[l,f]],[/(htc)[;_\s-]+([\w\s]+(?=\))|\w+)*/i,/(zte)-(\w*)/i,/(alcatel|geeksphone|lenovo|nexian|panasonic|(?=;\s)sony)[_\s-]?([\w-]*)/i],[d,[a,/_/g," "],[l,c]],[/(nexus\s9)/i],[a,[d,"HTC"],[l,f]],[/d\/huawei([\w\s-]+)[;\)]/i,/(nexus\s6p)/i],[a,[d,"Huawei"],[l,c]],[/(microsoft);\s(lumia[\s\w]+)/i],[d,a,[l,c]],[/[\s\(;](xbox(?:\sone)?)[\s\);]/i],[a,[d,"Microsoft"],[l,"console"]],[/(kin\.[onetw]{3})/i],[[a,/\./g," "],[d,"Microsoft"],[l,c]],[/\s(milestone|droid(?:[2-4x]|\s(?:bionic|x2|pro|razr))?:?(\s4g)?)[\w\s]+build\//i,/mot[\s-]?(\w*)/i,/(XT\d{3,4}) build\//i,/(nexus\s6)/i],[a,[d,"Motorola"],[l,c]],[/android.+\s(mz60\d|xoom[\s2]{0,2})\sbuild\//i],[a,[d,"Motorola"],[l,f]],[/hbbtv\/\d+\.\d+\.\d+\s+\([\w\s]*;\s*(\w[^;]*);([^;]*)/i],[[d,p.trim],[a,p.trim],[l,"smarttv"]],[/hbbtv.+maple;(\d+)/i],[[a,/^/,"SmartTV"],[d,"Samsung"],[l,"smarttv"]],[/\(dtv[\);].+(aquos)/i],[a,[d,"Sharp"],[l,"smarttv"]],[/android.+((sch-i[89]0\d|shw-m380s|gt-p\d{4}|gt-n\d+|sgh-t8[56]9|nexus 10))/i,/((SM-T\w+))/i],[[d,"Samsung"],a,[l,f]],[/smart-tv.+(samsung)/i],[d,[l,"smarttv"],a],[/((s[cgp]h-\w+|gt-\w+|galaxy\snexus|sm-\w[\w\d]+))/i,/(sam[sung]*)[\s-]*(\w+-?[\w-]*)/i,/sec-((sgh\w+))/i],[[d,"Samsung"],a,[l,c]],[/sie-(\w*)/i],[a,[d,"Siemens"],[l,c]],[/(maemo|nokia).*(n900|lumia\s\d+)/i,/(nokia)[\s_-]?([\w-]*)/i],[[d,"Nokia"],a,[l,c]],[/android\s3\.[\s\w;-]{10}(a\d{3})/i],[a,[d,"Acer"],[l,f]],[/android.+([vl]k\-?\d{3})\s+build/i],[a,[d,"LG"],[l,f]],[/android\s3\.[\s\w;-]{10}(lg?)-([06cv9]{3,4})/i],[[d,"LG"],a,[l,f]],[/(lg) netcast\.tv/i],[d,a,[l,"smarttv"]],[/(nexus\s[45])/i,/lg[e;\s\/-]+(\w*)/i,/android.+lg(\-?[\d\w]+)\s+build/i],[a,[d,"LG"],[l,c]],[/android.+(ideatab[a-z0-9\-\s]+)/i],[a,[d,"Lenovo"],[l,f]],[/linux;.+((jolla));/i],[d,a,[l,c]],[/((pebble))app\/[\d\.]+\s/i],[d,a,[l,"wearable"]],[/android.+;\s(oppo)\s?([\w\s]+)\sbuild/i],[d,a,[l,c]],[/crkey/i],[[a,"Chromecast"],[d,"Google"]],[/android.+;\s(glass)\s\d/i],[a,[d,"Google"],[l,"wearable"]],[/android.+;\s(pixel c)[\s)]/i],[a,[d,"Google"],[l,f]],[/android.+;\s(pixel( [23])?( xl)?)\s/i],[a,[d,"Google"],[l,c]],[/android.+;\s(\w+)\s+build\/hm\1/i,/android.+(hm[\s\-_]*note?[\s_]*(?:\d\w)?)\s+build/i,/android.+(mi[\s\-_]*(?:one|one[\s_]plus|note lte)?[\s_]*(?:\d?\w?)[\s_]*(?:plus)?)\s+build/i,/android.+(redmi[\s\-_]*(?:note)?(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[d,"Xiaomi"],[l,c]],[/android.+(mi[\s\-_]*(?:pad)(?:[\s_]*[\w\s]+))\s+build/i],[[a,/_/g," "],[d,"Xiaomi"],[l,f]],[/android.+;\s(m[1-5]\snote)\sbuild/i],[a,[d,"Meizu"],[l,f]],[/(mz)-([\w-]{2,})/i],[[d,"Meizu"],a,[l,c]],[/android.+a000(1)\s+build/i,/android.+oneplus\s(a\d{4})\s+build/i],[a,[d,"OnePlus"],[l,c]],[/android.+[;\/]\s*(RCT[\d\w]+)\s+build/i],[a,[d,"RCA"],[l,f]],[/android.+[;\/\s]+(Venue[\d\s]{2,7})\s+build/i],[a,[d,"Dell"],[l,f]],[/android.+[;\/]\s*(Q[T|M][\d\w]+)\s+build/i],[a,[d,"Verizon"],[l,f]],[/android.+[;\/]\s+(Barnes[&\s]+Noble\s+|BN[RT])(V?.*)\s+build/i],[[d,"Barnes & Noble"],a,[l,f]],[/android.+[;\/]\s+(TM\d{3}.*\b)\s+build/i],[a,[d,"NuVision"],[l,f]],[/android.+;\s(k88)\sbuild/i],[a,[d,"ZTE"],[l,f]],[/android.+[;\/]\s*(gen\d{3})\s+build.*49h/i],[a,[d,"Swiss"],[l,c]],[/android.+[;\/]\s*(zur\d{3})\s+build/i],[a,[d,"Swiss"],[l,f]],[/android.+[;\/]\s*((Zeki)?TB.*\b)\s+build/i],[a,[d,"Zeki"],[l,f]],[/(android).+[;\/]\s+([YR]\d{2})\s+build/i,/android.+[;\/]\s+(Dragon[\-\s]+Touch\s+|DT)(\w{5})\sbuild/i],[[d,"Dragon Touch"],a,[l,f]],[/android.+[;\/]\s*(NS-?\w{0,9})\sbuild/i],[a,[d,"Insignia"],[l,f]],[/android.+[;\/]\s*((NX|Next)-?\w{0,9})\s+build/i],[a,[d,"NextBook"],[l,f]],[/android.+[;\/]\s*(Xtreme\_)?(V(1[045]|2[015]|30|40|60|7[05]|90))\s+build/i],[[d,"Voice"],a,[l,c]],[/android.+[;\/]\s*(LVTEL\-)?(V1[12])\s+build/i],[[d,"LvTel"],a,[l,c]],[/android.+;\s(PH-1)\s/i],[a,[d,"Essential"],[l,c]],[/android.+[;\/]\s*(V(100MD|700NA|7011|917G).*\b)\s+build/i],[a,[d,"Envizen"],[l,f]],[/android.+[;\/]\s*(Le[\s\-]+Pan)[\s\-]+(\w{1,9})\s+build/i],[d,a,[l,f]],[/android.+[;\/]\s*(Trio[\s\-]*.*)\s+build/i],[a,[d,"MachSpeed"],[l,f]],[/android.+[;\/]\s*(Trinity)[\-\s]*(T\d{3})\s+build/i],[d,a,[l,f]],[/android.+[;\/]\s*TU_(1491)\s+build/i],[a,[d,"Rotor"],[l,f]],[/android.+(KS(.+))\s+build/i],[a,[d,"Amazon"],[l,f]],[/android.+(Gigaset)[\s\-]+(Q\w{1,9})\s+build/i],[d,a,[l,f]],[/\s(tablet|tab)[;\/]/i,/\s(mobile)(?:[;\/]|\ssafari)/i],[[l,p.lowerize],d,a],[/(android[\w\.\s\-]{0,9});.+build/i],[a,[d,"Generic"]]],engine:[[/windows.+\sedge\/([\w\.]+)/i],[u,[s,"EdgeHTML"]],[/(presto)\/([\w\.]+)/i,/(webkit|trident|netfront|netsurf|amaya|lynx|w3m)\/([\w\.]+)/i,/(khtml|tasman|links)[\/\s]\(?([\w\.]+)/i,/(icab)[\/\s]([23]\.[\d\.]+)/i],[s,u],[/rv\:([\w\.]{1,9}).+(gecko)/i],[u,s]],os:[[/microsoft\s(windows)\s(vista|xp)/i],[s,u],[/(windows)\snt\s6\.2;\s(arm)/i,/(windows\sphone(?:\sos)*)[\s\/]?([\d\.\s\w]*)/i,/(windows\smobile|windows)[\s\/]?([ntce\d\.\s]+\w)/i],[s,[u,h.str,m.os.windows.version]],[/(win(?=3|9|n)|win\s9x\s)([nt\d\.]+)/i],[[s,"Windows"],[u,h.str,m.os.windows.version]],[/\((bb)(10);/i],[[s,"BlackBerry"],u],[/(blackberry)\w*\/?([\w\.]*)/i,/(tizen)[\/\s]([\w\.]+)/i,/(android|webos|palm\sos|qnx|bada|rim\stablet\sos|meego|contiki)[\/\s-]?([\w\.]*)/i,/linux;.+(sailfish);/i],[s,u],[/(symbian\s?os|symbos|s60(?=;))[\/\s-]?([\w\.]*)/i],[[s,"Symbian"],u],[/\((series40);/i],[s],[/mozilla.+\(mobile;.+gecko.+firefox/i],[[s,"Firefox OS"],u],[/(nintendo|playstation)\s([wids34portablevu]+)/i,/(mint)[\/\s\(]?(\w*)/i,/(mageia|vectorlinux)[;\s]/i,/(joli|[kxln]?ubuntu|debian|suse|opensuse|gentoo|(?=\s)arch|slackware|fedora|mandriva|centos|pclinuxos|redhat|zenwalk|linpus)[\/\s-]?(?!chrom)([\w\.-]*)/i,/(hurd|linux)\s?([\w\.]*)/i,/(gnu)\s?([\w\.]*)/i],[s,u],[/(cros)\s[\w]+\s([\w\.]+\w)/i],[[s,"Chromium OS"],u],[/(sunos)\s?([\w\.\d]*)/i],[[s,"Solaris"],u],[/\s([frentopc-]{0,4}bsd|dragonfly)\s?([\w\.]*)/i],[s,u],[/(haiku)\s(\w+)/i],[s,u],[/cfnetwork\/.+darwin/i,/ip[honead]{2,4}(?:.*os\s([\w]+)\slike\smac|;\sopera)/i],[[u,/_/g,"."],[s,"iOS"]],[/(mac\sos\sx)\s?([\w\s\.]*)/i,/(macintosh|mac(?=_powerpc)\s)/i],[[s,"Mac OS"],[u,/_/g,"."]],[/((?:open)?solaris)[\/\s-]?([\w\.]*)/i,/(aix)\s((\d)(?=\.|\)|\s)[\w\.])*/i,/(plan\s9|minix|beos|os\/2|amigaos|morphos|risc\sos|openvms|fuchsia)/i,/(unix)\s?([\w\.]*)/i],[s,u]]},g=function(e,t){if("object"==typeof e&&(t=e,e=void 0),!(this instanceof g))return new g(e,t).getResult();var r=e||(i&&i.navigator&&i.navigator.userAgent?i.navigator.userAgent:""),n=t?p.extend(v,t):v;return this.getBrowser=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,r,n.browser),e.major=p.major(e.version),e},this.getCPU=function(){var e={architecture:void 0};return h.rgx.call(e,r,n.cpu),e},this.getDevice=function(){var e={vendor:void 0,model:void 0,type:void 0};return h.rgx.call(e,r,n.device),e},this.getEngine=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,r,n.engine),e},this.getOS=function(){var e={name:void 0,version:void 0};return h.rgx.call(e,r,n.os),e},this.getResult=function(){return{ua:this.getUA(),browser:this.getBrowser(),engine:this.getEngine(),os:this.getOS(),device:this.getDevice(),cpu:this.getCPU()}},this.getUA=function(){return r},this.setUA=function(e){return r=e,this},this};g.VERSION="0.7.19",g.BROWSER={NAME:s,MAJOR:"major",VERSION:u},g.CPU={ARCHITECTURE:"architecture"},g.DEVICE={MODEL:a,VENDOR:d,TYPE:l,CONSOLE:"console",MOBILE:c,SMARTTV:"smarttv",TABLET:f,WEARABLE:"wearable",EMBEDDED:"embedded"},g.ENGINE={NAME:s,VERSION:u},g.OS={NAME:s,VERSION:u},void 0!==t?(void 0!==e&&e.exports&&(t=e.exports=g),t.UAParser=g):r(54)?void 0!==(n=function(){return g}.call(t,r,t,e))&&(e.exports=n):i&&(i.UAParser=g);var y=i&&(i.jQuery||i.Zepto);if(void 0!==y&&!y.ua){var E=new g;y.ua=E.getResult(),y.ua.get=function(){return E.getUA()},y.ua.set=function(e){E.setUA(e);var t=E.getResult();for(var r in t)y.ua[r]=t[r]}}}("object"==typeof window?window:this)},function(e,t){(function(t){e.exports=t}).call(t,{})},function(e,t,r){var n=r(0),i=r(6),o=r(1),a=r(26),s=(r(27),r(17)),l=function(e){if(!e)throw new Error("RollVAST requires some parameter");if(!e.containerEl)throw new Error("RollVAST requires a containerEl parameter");if(!e.player)throw new Error("RollVAST requires a Player - player parameter");if(!e.rolls)throw new Error("RollVAST requires a rolls parameter as array of rolls");if(0===e.rolls.length)throw new Error("RollVAST requires a rolls parameter as array with at least one roll");var t,r,l,d,u={},c=new n,f=e.autoPlay||!0,p=meride.adv.AdLoader,h=meride.adv.MediaFactoryRenderer,m=e.containerEl,v=e.player,g=e.originSrc||v.video.src,y=[],E=function(){return y.splice(0,1)},b=e.useAdWaterfall||!0,w=[],_=e.rolls||[],T=e.advSuffix||"",A=!1,S=(e.prefetch,e.adBlock||{}),L={url:"",type:"",link:"",settingVolume:""},k=function(e,t){var r=!0===t?e.url:e.url.split("***")[0];return{url:decodeURIComponent(r),type:e.type,link:e.link,settingVolume:e.settingVolume}},D=!1;u.on=function(e,t){return c.on(e,t)},u.off=function(e,t){return c.off(e,t)};var C=function(e){var t=document.createElement("img");t.style.display="none",t.setAttribute("src",e.url),document.body.appendChild(t),document.body.removeChild(t)},R=function(e){v.off("meride.first_play",R),!0===A&&(A=!1,v.pause()),e&&"function"==typeof e&&e()},x=function(){var e=function(t,r){v.hls.off(Hls.Events.MANIFEST_PARSED,e);try{v.video.currentTime=0,!0===f&&v.play()}catch(e){}};if(null!==v.hls){v.hls.on(Hls.Events.MANIFEST_PARSED,e),v.reload(g);var t=v.video.play();t&&t.catch(function(e){})}else r.restoreOriginalVideo(!0)},O=function(e){var n={tag:L.url,message:"",errorCode:""};e.arguments[0]&&"AdError"===e.arguments[0].name?(n.message=e.arguments[0].message,n.errorCode=e.arguments[0].code):n.message=e.arguments[0],i.emit(o.AD_ERROR,m,n),101===n.errorCode&&i.emit(o.AD_EMPTY,m,n),"black_preroll"===S.policy?t=new s({containerEl:m,policy:S.policy,executeBehaviour:!1,onAdBlockDetected:function(e){D=!0,A=!0,_.length>0&&(v.on("meride.first_play",function(){R(e)}),t.on("meride.adblock_timeout_ended",function(){v.play()}))},onAdBlockNotDetected:function(){}}):y.length>0?("defaultOff"===L.settingVolume&&(v.video.muted=!0),L.url=E(),I({autoPlay:!0})):_.length>0?(L=k(prerolls.splice(0,1)[0],!0),I({autoPlay:!0})):(v.video.addEventListener("loadedmetadata",function(){v.video.play()},!1),r.restoreOriginalVideo(!0))},I=function(e){e&&(f=!1!==e.autoPlay),r=new p({ads:[{uri:decodeURIComponent(L.url)+T}],videoEl:v.video}),r.on("VAST_ERROR",O),r.on("LOAD_ERROR",O),r.load().then(function(e){if(d=e,"ad"===e.type){l=new h("Linear",{videoEl:v.video,containerEl:m,ad:e});var t=new a({renderer:l,loader:r,ad:e,player:v}),n=function(e){if(e.arguments[0]&&e.arguments[0].clickTracking)for(var t=0,r=e.arguments[0].clickTracking.length;t<r;t+=1)C({url:e.arguments[0].clickTracking[t]})};t.on("meride.adclicked",n),l.on("meride.aderror",function(e){x()}),l.on("meride.adstarted",function(e){window.loadedAd=d;var t={tag:"",clickThrough:""},r=d.Ad.getElementsByTagName("ClickThrough");r.length>0&&null!==r.item(0).firstChild&&(t.clickThrough=r.item(0).firstChild.data);try{t.tag=L.url}catch(e){}i.emit(o.AD_STARTED,m,t)});var s=function(){_.length>0?(L=k(_.splice(0,1)[0],b),I({autoPlay:!0})):(l.off("meride.adcompleted",s),c.emit("meride.rollvastended"),i.emit(o.AD_ENDED,m),x())};l.on("meride.adcompleted",s),t.on("meride.ad_skipped",s),l.init(),c.emit("meride.rollvastready",{renderer:l}),!0===f&&(null!==v.hls&&(v.hls.detachMedia(),v.hls.destroy()),l.render())}}).catch(function(e){c.emit("meride.rollvasterror",[{roll:L}])})};if(u.loadRoll=I,L=k(_.splice(0,1)[0],b),w=L.url.split("***"),w.length>1){for(var M=0,P=w.length;M<P;M+=1)y.push(w[M]);L.url=E()}return"defaultOff"===L.settingVolume&&(v.video.muted=!0),u};e.exports=l},function(e,t,r){(function(t){var r;r="undefined"!=typeof window?window:void 0!==t?t:"undefined"!=typeof self?self:{},e.exports=r}).call(t,r(28))},function(e,t){function r(e){var t=n.call(e);return"[object Function]"===t||"function"==typeof e&&"[object RegExp]"!==t||"undefined"!=typeof window&&(e===window.setTimeout||e===window.alert||e===window.confirm||e===window.prompt)}e.exports=r;var n=Object.prototype.toString},function(e,t,r){var n=r(59),i=r(60),o=function(e){return"[object Array]"===Object.prototype.toString.call(e)};e.exports=function(e){if(!e)return{};var t={};return i(n(e).split("\n"),function(e){var r=e.indexOf(":"),i=n(e.slice(0,r)).toLowerCase(),a=n(e.slice(r+1));void 0===t[i]?t[i]=a:o(t[i])?t[i].push(a):t[i]=[t[i],a]}),t}},function(e,t){function r(e){return e.replace(/^\s*|\s*$/g,"")}t=e.exports=r,t.left=function(e){return e.replace(/^\s*/,"")},t.right=function(e){return e.replace(/\s*$/,"")}},function(e,t,r){"use strict";var n=r(61),i=Object.prototype.toString,o=Object.prototype.hasOwnProperty,a=function(e,t,r){for(var n=0,i=e.length;n<i;n++)o.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},s=function(e,t,r){for(var n=0,i=e.length;n<i;n++)null==r?t(e.charAt(n),n,e):t.call(r,e.charAt(n),n,e)},l=function(e,t,r){for(var n in e)o.call(e,n)&&(null==r?t(e[n],n,e):t.call(r,e[n],n,e))},d=function(e,t,r){if(!n(t))throw new TypeError("iterator must be a function");var o;arguments.length>=3&&(o=r),"[object Array]"===i.call(e)?a(e,t,o):"string"==typeof e?s(e,t,o):l(e,t,o)};e.exports=d},function(e,t,r){"use strict";var n=Function.prototype.toString,i=/^\s*class\b/,o=function(e){try{var t=n.call(e);return i.test(t)}catch(e){return!1}},a=function(e){try{return!o(e)&&(n.call(e),!0)}catch(e){return!1}},s=Object.prototype.toString,l="function"==typeof Symbol&&"symbol"==typeof Symbol.toStringTag;e.exports=function(e){if(!e)return!1;if("function"!=typeof e&&"object"!=typeof e)return!1;if("function"==typeof e&&!e.prototype)return!0;if(l)return a(e);if(o(e))return!1;var t=s.call(e);return"[object Function]"===t||"[object GeneratorFunction]"===t}},function(e,t){function r(){for(var e={},t=0;t<arguments.length;t++){var r=arguments[t];for(var i in r)n.call(r,i)&&(e[i]=r[i])}return e}e.exports=r;var n=Object.prototype.hasOwnProperty},function(e,t,r){var n=r(6),i=r(1),o=r(0),a=function(e){if(!e.loader)throw new Error("A loader (meride.adv.AdLoader) is required by Overlay");if(!e.videoEl)throw new Error("A videoEl is required by Overlay");if(!e.containerEl)throw new Error("A containerEl is required by Overlay");var t,r={},a=e.loader,s=e.data,l=new o;return r.on=function(e,t){return l.on(e,t)},r.off=function(e,t){return l.off(e,t)},a.on("VAST_ERROR",function(t){n.emit(i.AD_ERROR,e.containerEl)}),a.on("LOAD_ERROR",function(t){n.emit(i.AD_ERROR,e.containerEl)}),a.load().then(function(r){"ad"===r.type&&(t=new meride.adv.MediaFactoryRenderer("NonLinear",{videoEl:e.videoEl,containerEl:e.containerEl,ad:r,btnInitAction:document.getElementById("playBtn"),stayTime:s.stayTime||null,afterTime:s.afterTime||null}),e.onLoad&&"function"==typeof e.onLoad&&e.onLoad(t),e.onAdEnded&&"function"==typeof e.onAdEnded&&t.on("meride.nonlinear_adcompleted",e.onAdEnded),e.onPlay&&"function"==typeof e.onPlay&&e.videoEl.addEventListener("play",function(){e.onPlay(t)}))}),r};e.exports=a},function(e,t){var r=function(e){if(!e)throw new Error("Poster requires some param");if(!e.src)throw new Error("Poster requires a src param");if(!e.container)throw new Error("Poster requires a container param");if(!e.video)throw new Error("Poster requires a video param");var t={},r=document.createElement("div");return function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e.style[r]=t[r])}(r,{backgroundImage:"url("+e.src+")",backgroundSize:"cover",backgroundPosition:"center",backgroundRepeat:"no-repeat",position:"absolute",width:"100%",height:"100%",zIndex:"8",top:"0",left:"0"}),e.container.appendChild(r),e.video.addEventListener("play",function(){r.style.visibility="hidden",r.style.display="none"}),e.video.addEventListener("ended",function(){r.style.visibility="visible",r.style.display="block"}),t};e.exports=r},function(e,t,r){var n=r(1),i=r(3),o=r(66),a=r(7),s=r(4),l=r(2),d=r(0),u=function(e){if(!e)throw new Error("No parameters passed to GoogleIMA");if(!e.container)throw new Error("No container passed to GoogleIMA");if(!e.player)throw new Error("No player passed to GoogleIMA");if(!e.videoID)throw new Error("No videoID passed to GoogleIMA");var t,r,u={},c=e.hlsObj||null,f=e.container,p=e.player,h=e.player.video,m=document.createElement("div"),v="adContainer-"+e.videoID,g=f.querySelector(".playBtn"),y=g.cloneNode(!0),E=e.preroll||"",b=E.split("||"),w=e.midrolls||[],_={},T=new d,A=!1,S=null,L=a.isMobile(),k=e.isHlsSupported||!0;u.on=function(e,t){return T.on(e,t)},u.off=function(e,t){return T.off(e,t)},u.setUpHlsObj=function(e){c=e};for(var D in e)e.hasOwnProperty(D)&&(_[D]=e[D]);m.setAttribute("id",v),m.className="meride-ad-container",s.applyStyles(m,{position:"absolute",display:"none",width:_.width+"px",height:"100px",top:"0",left:"0",zIndex:"9"}),f.addEventListener(n.ADS_MANAGER_READY,function(e){m.style.display="block"},!1),f.addEventListener(n.AD_STARTED,function(e){p.container.querySelector(".loadingSpinner").style.display="none"},!1),f.addEventListener(n.AD_ERROR,function(e){p.container.querySelector(".loadingSpinner").style.display="none",p.enableSeek()},!1),f.addEventListener(n.AD_ENDED,function(e){p.enableSeek()},!1),f.appendChild(m),_.adContainerID=v,g.style.display="none",g.parentNode.appendChild(y),b.reverse(),_.preroll=b.pop(),h.style.visibility="hidden",_.vpaidMode=_.vpaidMode?_.vpaidMode:"ENABLED","ENABLED"!==_.vpaidMode&&"INSECURE"!==_.vpaidMode&&"DISABLED"!==_.vpaidMode&&(_.vpaidMode="ENABLED");var C=!0===_.debug?"https://s0.2mdn.net/instream/html5/ima3_debug.js":"https://s0.2mdn.net/instream/html5/ima3.js";_.hlsObj=c;var R=function(){h.removeEventListener("play",R),h.removeEventListener("playing",R);try{y.parentNode.removeChild(y)}catch(e){}},x=function(){A=!0,p.container.querySelector(".loadingSpinner").style.display="inline-block";try{y.parentNode.removeChild(y)}catch(e){}if(""!==_.preroll&&void 0!==_.preroll)p.disableSeek(),S.startPlayback(_.preroll);else if(""!==e.overlayInitial&&void 0!==e.overlayInitial){setTimeout(function(){var e=h.play();e&&e.catch(function(e){}),S.showOverlayInitial()},500);var t=h.play();t&&t.catch(function(e){})}else if(""!==e.overlay&&void 0!==e.overlay){h.style.visibility="visible",setTimeout(function(){var e=h.play();e&&e.catch(function(e){}),S.showOverlay()},500);var t=h.play();t&&t.catch(function(e){})}else if(""!==e.postroll&&void 0!==e.postroll){h.style.visibility="visible",setTimeout(function(){var e=h.play();e&&e.catch(function(e){})},500);var t=h.play();t&&t.catch(function(e){})}if(w.length>0){for(var r=function(e,t){return e.timeSetting===t.timeSetting?0:e.timeSetting<t.timeSetting?-1:1},i=0,o=w.length;i<o;i+=1)w[i].timeSetting=function(e){var t,r,n,i=e.split(":");return 3!==i.length?0:(t=parseInt(i[2],10),r=parseInt(i[1],10),n=parseInt(i[0],10),t+60*r+3600*n)}(w[i].timeSetting);w=w.sort(r);var a=w.shift(),s=function(){var e=function(t,r){_.hlsObj.off(Hls.Events.MANIFEST_PARSED,e);try{h.currentTime=0,!0===autoPlay&&D.play()}catch(e){}};if(null!==_.hlsObj){_.hlsObj.on(Hls.Events.MANIFEST_PARSED,e),p.reload(_.originSrc);var t=h.play();t&&t.catch(function(e){})}else h.src=_.originSrc,h.load(),h.play()},l=function(){h.removeEventListener("playing",l),h.currentTime=a.timeSetting;var e=setInterval(function(){h.currentTime<a.timeSetting?h.currentTime=a.timeSetting:clearInterval(e)},20),t=function(){h.removeEventListener("playing",t),a=w.shift(),h.addEventListener("timeupdate",m)};h.addEventListener("playing",t,!1)},d=function(e){if(f.removeEventListener(Meride.EventType.AD_ENDED,d),!0===k){var t=f.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}h.play()},u=function(e){if(f.removeEventListener(Meride.EventType.AD_ERROR,u),h.display="block",!0===k){var t=f.querySelector(".qualityContainer");t&&(t.style.display="table-cell")}s()},c=function(e){f.removeEventListener(Meride.EventType.AD_ENDED,c),s(),h.addEventListener("playing",l,!1)},m=function(){if(!a)return void h.removeEventListener("timeupdate",m);h.currentTime>a.timeSetting&&(h.removeEventListener("timeupdate",m),f.addEventListener(Meride.EventType.AD_ERROR,u),f.addEventListener(Meride.EventType.AD_ENDED,d),f.addEventListener(Meride.EventType.AD_ENDED,c),_.hlsObj&&_.hlsObj.stopLoad(),p.disableSeek(),S.startPlayback(a.rolls[0].url))},v=function(){try{f.removeEventListener(n.PLAY,v),f.removeEventListener(n.AD_ENDED,v),f.removeEventListener(n.AD_ERROR,v)}catch(e){}h.addEventListener("timeupdate",m)};""===_.preroll||void 0===_.preroll?f.addEventListener(n.PLAY,v,!1):(f.addEventListener(n.AD_ENDED,v,!1),f.addEventListener(n.AD_ERROR,v,!1))}if(""!==e.postroll&&void 0!==e.postroll){var g=function(e){f.removeEventListener(n.AD_ENDED,g),p.enableSeek();var t=function(){h.removeEventListener("playing",t),h.pause()};h.addEventListener("playing",t,!1),s()},E=function(){h.removeEventListener(Meride.EventType.ENDED,E),f.addEventListener(n.AD_ENDED,g,!1),S.startPlayback(e.postroll)};f.addEventListener(Meride.EventType.ENDED,E)}},O=function(e){l.removeClickTouch(y,O),x(),T.emit("meride.ima_main_play_clicked")},I=function(){S=new o(_),h.addEventListener("play",R,!1),h.addEventListener("playing",R,!1),T.emit("meride.imascript_loaded");var e=function(){h.removeEventListener("play",e),!1===A&&(h.pause(),x())};if(h.style.visibility="visible",h.style.display="block",h.pause(),!0!==_.autoPlay||L&&!1===h.muted)l.addClickTouch(y,O),h.addEventListener("play",e,!1);else{var n=h.play();void 0!==n&&n.then(function(){t=!0,r=!1,S.setAutoplayAllowed(!0),S.setAutoplayRequiresMuted(!1),h.pause(),x()}).catch(function(n){t=!1,S.setAutoplayAllowed(!1);var i=h.muted;h.volume=0,h.muted=!0;var o=h.play();void 0!==o&&o.then(function(){h.pause(),t=!0,r=!0,S.setAutoplayAllowed(!0),S.setAutoplayRequiresMuted(!0),x()}).catch(function(n){t=!1,r=!1,i||(h.volume=1,h.muted=!1),S.setAutoplayAllowed(!1),S.setAutoplayRequiresMuted(!1),l.addClickTouch(y,O),h.addEventListener("play",e,!1)})})}},M=function(){if(h.style.display="block",h.style.visibility="visible",h.addEventListener("play",R,!1),h.addEventListener("playing",R,!1),!0===_.autoPlay){var e=h.play();e&&e.catch(function(e){})}l.removeClickTouch(y,O),l.addClickTouch(y,function(){var e=h.play();e&&e.catch(function(e){})})};return window.google&&window.google.ima&&"function"==typeof window.google.ima.AdsLoader?I():i.include(C,I,{onerror:M}),u};e.exports=u},function(e,t,r){var n=r(7),i=r(1),o=r(2),a=r(18),s=function(e){function t(){if(Ee&&Ee.isLinear())if(J===B||J===j){ue();var e=g.play();e&&e.catch(function(e){})}else g.addEventListener("ended",Be),g.addEventListener("loadedmetadata",r),null===k?(g.src=y,g.load()):(k.attachMedia(g),k.loadSource(y))}function r(){if(g.seekable.length){if(g.seekable.end(0)>oe)if(g.currentTime=oe,g.removeEventListener("loadedmetadata",r),!1===Ne){g.addEventListener("ended",Be,!1);var e=g.play();e&&e.catch(function(e){})}else g.pause()}else setTimeout(r,100)}var s,l,d,u,c,f,p,h,m,v,g,y,E,b,w,_,T,A,S,L,k,D,C,R={},x=!1,O="",I="",M="",P="",N="",B="",F=!0,j="",U=e.loadVideoTimeout||15e3,V=e.locale||null,G=e.scrollMode||{},q=!1,H=!1,K=!1,W=!0,z=[],Y=[],X=!1,Q=!1,J="",Z="",$="",ee=(n.isTouchable(),n.isMobile(),"-1"),te=a.volumeOnSVG,re=a.volumeOffSVG,ne=document.createElement("button"),ie=document.createElement("button"),oe=0,ae="ENABLED",se=function(e){A.setVolume(0),ne.style.display="none",ie.style.display="inline-block",e.preventDefault()},le=function(e){A.setVolume(1),ie.style.display="none",ne.style.display="inline-block",e.preventDefault()},de=function(){"none"!==ee&&(ne.innerHTML=te,ie.innerHTML=re,ne.style.backgroundColor="transparent",ne.style.cursor="pointer",ne.style.border="none",ne.style.width="40px",ne.style.height="40px",ne.style.position="absolute",ne.style.top="3%",ne.style.left="2%",ne.style.zIndex="999",ie.style.backgroundColor="transparent",ie.style.cursor="pointer",ie.style.border="none",ie.style.width="40px",ie.style.height="40px",ie.style.position="absolute",ie.style.top="3%",ie.style.zIndex="999",ie.style.left="2%","defaultOn"===ee||"-1"===ee?(A.setVolume(1),ie.style.display="none",ne.style.display="inline-block"):(A.setVolume(0),ne.style.display="none",ie.style.display="inline-block"),o.addClickTouch(ne,se),o.addClickTouch(ie,le),b.appendChild(ne),b.appendChild(ie))},ue=function(e){var t=!0===e;try{b.style.display="none",void 0!==A&&!0===t&&A.stop(),b.innerHTML=""}catch(e){}},ce=function(e){J=decodeURIComponent(e),b.style.display="block";try{google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode[ae])}catch(e){google.ima.settings.setVpaidMode(google.ima.ImaSdkSettings.VpaidMode.ENABLED)}null!==V&&google.ima.settings.setLocale(V);var t=n.iOSVersion();!1!==t&&t>9&&google.ima.settings.setDisableCustomPlaybackForIOS10Plus(!0),google.ima.settings.setNumRedirects(9),w=new google.ima.AdDisplayContainer(b,g),_=new google.ima.AdsLoader(w);""!==J&&fe(J)},fe=function(e){Q=!1,w.initialize(),J!==B&&J!==j&&g.load(),_.addEventListener(google.ima.AdsManagerLoadedEvent.Type.ADS_MANAGER_LOADED,ge,!1),_.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,xe,!1),T=new google.ima.AdsRequest,T.adTagUrl=e,T.linearAdSlotWidth=h,T.linearAdSlotHeight=2*m,void 0!==f&&void 0!==p&&e===B?(T.nonLinearAdSlotWidth=f>0?f:h,T.nonLinearAdSlotHeight=p>0?p:m-80):(T.nonLinearAdSlotWidth=2*h,T.nonLinearAdSlotHeight=m-80),T.setAdWillAutoPlay(D),T.setAdWillPlayMuted(C),!0===G.enabled&&(T.setAdWillAutoPlay(!0),T.setAdWillPlayMuted(!0)),_.requestAds(T)},pe=function(e){0===A.getVolume()?(ne.style.display="none",ie.style.display="inline-block"):(ie.style.display="none",ne.style.display="inline-block")},he=function(e){ne.style.display="none",ie.style.display="inline-block"},me=function(){A.removeEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,me),setTimeout(function(){ue()},1e3),g.pause(),g.setAttribute("autoplay","false");var e=function(){g.removeEventListener("play",e),g.removeEventListener("playing",e),g.removeEventListener("loadedmetadata",e),g.pause(),g.currentTime=0};g.addEventListener("play",e,!1),g.addEventListener("playing",e,!1),g.addEventListener("loadedmetadata",e,!1)},ve=function(){A.removeEventListener(google.ima.AdEvent.Type.STARTED,ve),N=""},ge=function(r){var n=new google.ima.AdsRenderingSettings;n.loadVideoTimeout=U,n.restoreCustomPlaybackStateOnAdBreakComplete=!0,!0===e.advPrefetch&&(n.enablePreloading=!0),A=r.getAdsManager(g,n);var o=new CustomEvent(i.ADS_MANAGER_READY,{bubbles:!0,cancelable:!0,detail:{adsManager:A}});E.dispatchEvent(o),A.addEventListener(google.ima.AdErrorEvent.Type.AD_ERROR,xe),A.addEventListener(google.ima.AdEvent.Type.CONTENT_PAUSE_REQUESTED,Oe),A.addEventListener(google.ima.AdEvent.Type.CONTENT_RESUME_REQUESTED,t),A.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,Re),A.addEventListener(google.ima.AdEvent.Type.LOADED,Re),A.addEventListener(google.ima.AdEvent.Type.STARTED,Re),A.addEventListener(google.ima.AdEvent.Type.COMPLETE,Re),A.addEventListener(google.ima.AdEvent.Type.CLICK,Re),A.addEventListener(google.ima.AdEvent.Type.PAUSED,be),A.addEventListener(google.ima.AdEvent.Type.RESUMED,we),A.addEventListener(google.ima.AdEvent.Type.USER_CLOSE,Te),A.addEventListener(google.ima.AdEvent.Type.SKIPPED,_e),A.addEventListener(google.ima.AdEvent.Type.VOLUME_CHANGED,pe),A.addEventListener(google.ima.AdEvent.Type.VOLUME_MUTED,he),!0===Ne&&""!==N&&(A.addEventListener(google.ima.AdEvent.Type.ALL_ADS_COMPLETED,me,!1),A.addEventListener(google.ima.AdEvent.Type.STARTED,ve,!1));try{!0===H?A.init(screen.width,screen.height,google.ima.ViewMode.FULLSCREEN):T.adTagUrl==j||T.adTagUrl==B?A.init(h,m-60,google.ima.ViewMode.NORMAL):A.init(h,m,google.ima.ViewMode.NORMAL),A.setVolume(g.muted||e.muted?0:g.volume),!0!==G.enabled&&!0!==C||A.setVolume(0),A.start()}catch(e){ue(),K=!0;var a=g.play();a&&a.catch(function(e){})}},ye=document.createElement("button");ye.setAttribute("data-txt",">"),ye.className="boxcenter boxcenterBtn playBtn",ye.innerHTML='<svg width="100%" height="100%" viewBox="0 0 92 92" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink"> <g stroke="#333" stroke-width=".0"> <g><circle opacity="0.6" fill="#29abe2" cx="46" cy="46.002" r="45"></circle><g><path fill="#FFFFFF" d="M31.455,66.984c0,1.422,1.021,2.037,2.273,1.355L72.7,47.232c1.249-0.676,1.249-1.779,0-2.463L33.729,23.658c-1.252-0.678-2.273-0.064-2.273,1.355V66.984z"></path></g></g> </g></svg>',ye.style.display="inline-block",ye.addEventListener("click",function(){A.resume()},!1);var Ee,be=function(){b.appendChild(ye)},we=function(){try{b.removeChild(ye)}catch(e){}},_e=function(){if(Ee&&!1===Ee.isLinear()){var e=g.play();e&&e.catch(function(e){})}},Te=function(){if(ue(!0),v.enableSeek(),Ee&&!1===Ee.isLinear()){var e=g.play();e&&e.catch(function(e){})}},Ae=function(){""!==B&&(clearTimeout(S),clearInterval(L),setTimeout(function(){l=0,ce(B),void 0!==s&&void 0!==d&&!1===F&&(S=setTimeout(function(){clearTimeout(S),ue(),L=setInterval(function(){Ae()},d)},s))},l))},Se=function(){""!==j&&setTimeout(function(){c=0,ce(j),void 0!==u&&(S=setTimeout(function(){ue(),Ae()},u))},c)},Le=function(){q=!1,K=!0,""!==j?Se():""!==B&&Ae()},ke=function(e){setTimeout(function(){if(H){var t=screen.height,r=screen.width;b.style.width=r+"px",b.style.height=t+"px",A.resize(r,t,google.ima.ViewMode.FULLSCREEN)}else{var t=!1===e?E.offsetHeight-60:E.offsetHeight;b.style.width=E.offsetWidth+"px",b.style.height=t+"px",A.resize(E.offsetWidth,t,google.ima.ViewMode.NORMAL)}},300)},De=!1,Ce={clickThroughUrl:null},Re=function(e){if(Ee=e.getAd(),e.type==google.ima.AdEvent.Type.CLICK){var t=new CustomEvent(i.AD_CLICKED,{bubbles:!0,cancelable:!0,detail:{clickThroughUrl:Ce.clickThroughUrl}});E.dispatchEvent(t)}if(e.type==google.ima.AdEvent.Type.STARTED){var r=new CustomEvent(i.AD_STARTED,{bubbles:!0,cancelable:!0,detail:{tag:J,clickThroughUrl:Ce.clickThroughUrl}});E.dispatchEvent(r)}if(e.type==google.ima.AdEvent.Type.ALL_ADS_COMPLETED){var n=new CustomEvent(i.AD_ENDED,{bubbles:!0,cancelable:!0,detail:{tag:J}});E.dispatchEvent(n)}switch(e.type){case google.ima.AdEvent.Type.CLICK:!1===De?(De=!0,Ee.isLinear()&&(q=!1)):Ee.isLinear()&&(A.resume(),q=!0);break;case google.ima.AdEvent.Type.LOADED:Q=!0,Ce=e.getAdData(),b.style.display="block",g.style.visibility="visible",g.style.display="block",Ee.isLinear()&&de();var o=new CustomEvent(i.AD_LOADED,{bubbles:!0,cancelable:!0,detail:{tag:J}});E.dispatchEvent(o);break;case google.ima.AdEvent.Type.STARTED:Ee.isLinear()?(b.style.zIndex="20",g.style.display="block",q=!0,v.enableKeyboard(!1)):b.style.zIndex="9",window.addEventListener("resize",function(e){ke(Ee.isLinear())}),window.addEventListener("orientationchange",function(e){ke(Ee.isLinear())}),ke(Ee.isLinear());break;case google.ima.AdEvent.Type.COMPLETE:break;case google.ima.AdEvent.Type.ALL_ADS_COMPLETED:v.enableKeyboard(!0);var a=function(){g.removeEventListener("playing",a),ue()};if(g.addEventListener("playing",a,!1),null===k)Ne&&y===g.src||(g.addEventListener("ended",Be,!1),setTimeout(function(){var e=g.play();e&&e.catch(function(e){}),""===B&&""===j||Le()},500));else if(ue(),""===B&&""===j||(b.style.display="block",Le()),!0===Ne){g.pause();var s=function(){k.off(Hls.Events.MANIFEST_PARSED,s),setTimeout(function(){g.pause()},150),setTimeout(function(){g.currentTime=0},500)};k.on(Hls.Events.MANIFEST_PARSED,s),k.attachMedia(g),k.loadSource(y)}else{var l=g.play();l&&l.catch(function(e){})}}},xe=function(e){var t=e.getError(),n=new CustomEvent(i.AD_ERROR,{bubbles:!0,cancelable:!1,detail:{errorCode:t.getErrorCode(),message:t.getMessage()}});if(E.dispatchEvent(n),1009===t.getErrorCode()){var o=new CustomEvent(i.AD_EMPTY,{bubbles:!0,cancelable:!1,detail:{errorCode:t.getErrorCode(),message:t.getMessage()}});E.dispatchEvent(o)}ue(),g.style.visibility="visible";var a=function(){k.off(Hls.Events.MANIFEST_PARSED,a),setTimeout(function(){var e=g.play();e&&e.catch(function(e){})},150)},s=function(){k.off(Hls.Events.MANIFEST_PARSED,s),setTimeout(function(){g.pause()},150),setTimeout(function(){g.currentTime=0},500)};switch(Ee&&!0===Ee.isLinear()?(v.enableKeyboard(!0),!1===Ne?(null!==k&&(k.on(Hls.Events.MANIFEST_PARSED,a),k.attachMedia(g),k.loadSource(y)),setTimeout(function(){var e=g.play();e&&e.catch(function(e){})},150)):(null!==k&&(k.on(Hls.Events.MANIFEST_PARSED,s),k.attachMedia(g),k.loadSource(y)),setTimeout(function(){g.pause()},150))):null!==k&&J===P&&(k.on(Hls.Events.MANIFEST_PARSED,a),k.attachMedia(g),k.loadSource(y)),t.getErrorCode()){case 1005:""===B&&""===j||(b.style.display="block",Le());break;case 1009:var l=function(e){g.removeEventListener("loadedmetadata",l);var t=g.play();t&&t.catch(function(e){g.pause()})};null===k&&g.src!==y&&(g.src=y,g.addEventListener("loadedmetadata",r,!1),g.addEventListener("loadedmetadata",l,!1),g.load())}if(J===P){var d=g.play();d&&d.catch(function(e){g.pause()})}},Oe=function(){Ee&&Ee.isLinear()&&(g.removeEventListener("ended",Be),oe=g.currentTime,g.pause())},Ie=function(e){if(!0===W||!1===X)if(W=!1,g.addEventListener("play",function(){var e=new CustomEvent(i.PLAY,{bubbles:!0,cancelable:!0,detail:{}});E.dispatchEvent(e)},!1),g.addEventListener("pause",function(){var e=new CustomEvent(i.PAUSE,{bubbles:!0,cancelable:!0,detail:{}});E.dispatchEvent(e)},!1),g.addEventListener("ended",function(){var e=new CustomEvent(i.ENDED,{bubbles:!0,cancelable:!0,detail:{}});E.dispatchEvent(e)},!1),null===k){if(g.setAttribute("src",y),g.addEventListener("loadedmetadata",function(t){X=!0;var r=new CustomEvent(i.LOADEDMETADATA,{bubbles:!0,cancelable:!0,detail:{player:g}});E.dispatchEvent(r),g.style.visibility="visible",g.style.display="block",g.pause(),void 0!==e&&"function"==typeof e&&e()},!1),g.load(),navigator.userAgent.toLowerCase().indexOf("android")>-1){var t=g.play();t&&t.catch(function(e){})}}else k.on(Hls.Events.MANIFEST_PARSED,function(){setTimeout(function(){var e=g.play();e&&e.catch(function(e){})},150)}),k.attachMedia(g),k.loadSource(y)},Me=function(e){if(!1===X){Ie(function(){var e=g.play();e&&e.catch(function(e){})});var t=g.play();t&&t.catch(function(e){})}else{var t=g.play();t&&t.catch(function(e){})}},Pe=function(e){"object"==typeof A&&A.pause(),g.pause()};R.playFunction=function(e){Me()},R.pauseFunction=function(e){Pe()},R.resizeAd=function(e,t){},R.startPlayback=function(e){ce(e)},R.showOverlayInitial=function(){Se()},R.showOverlay=function(){Ae()},R.initializeContent=function(e){Ie(e)},R.setAutoplayAllowed=function(e){D=e},R.setAutoplayRequiresMuted=function(e){C=e};var Ne=!1,Be=function(e){if(g.src===y){g.removeEventListener("ended",Be),Ne=!0;try{S&&clearTimeout(S),L&&clearInterval(L),ue(),""!==N&&setTimeout(function(){g.removeAttribute("autoplay"),g.currentTime=0,g.pause(),ce(N)},1e3)}catch(e){}}};return function(){O=e.videoID,z=e.sources,x=e.debug||!1,I=e.adContainerID,M=e.mainContainerID,k=e.hlsObj||null;var t=e.preroll||"";Y=t.split("||"),Y.reverse(),P=Y.pop(),N=e.postroll||"",B=e.overlay||"",j=e.overlayInitial||"",v=e.player,g=v.video,y=e.originSrc,E=e.container,h=g.offsetWidth,m=g.offsetHeight,b=document.getElementById(I),F=void 0===e.overlayFixed||e.overlayFixed,s=e.overlayShowTime,l=e.overlayAfterTime||0,d=e.overlayUpdateTime,u=e.overlayInitialShowTime,c=e.overlayInitialAfterTime||0,f=e.overlayMaxWidth,p=e.overlayMaxHeight,Z=e.videoTitle||"",$=e.videoDescription||"",ee=e.settingVolume||"-1",ae=e.vpaidMode||"ENABLED",(g.muted||e.muted)&&(ee="defaultOff"),E.addEventListener(i.ENTER_FULLSCREEN,function(e){H=!0},!1),E.addEventListener(i.EXIT_FULLSCREEN,function(e){H=!1},!1),N&&""!==N&&g.addEventListener("ended",Be,!1)}(),R};e.exports=s},function(e,t,r){var n=r(0),i=r(3),o=r(2),a=(r(6),function(e){if(!e)throw new Error("No initial parameters for Freewheel");if(!e.player)throw new Error("No player (Player) for Freewheel");if(!e.playBtns)throw new Error("No playBtns for Freewheel");if(!e.networkID)throw new Error("No networkID for Freewheel");if(!e.server)throw new Error("No server for Freewheel");if(!e.profile)throw new Error("No profile for Freewheel");if(!e.displayBaseID)throw new Error("No displayBaseID for Freewheel");if(!e.assetID)throw new Error("No assetID for Freewheel");if(!e.sectionID)throw new Error("No sectionID for Freewheel");var t,r={},a=new n,s=e.playBtns,l=[],d=null,u=e.networkID,c=e.server,f=e.profile,p=e.player,h=p.video,m=e.displayBaseID,v=[],g=[],y=e.keyValues||[],E=[],b=!1,w=!0===e.temporalSlotMode,_=(e.hideControls,!0===e.debug),T=(e.hlsOpts,!0===e.autoPlay),A=e.originalSource||h.currentSrc||h.src,S=e.scriptURL&&-1!==e.scriptURL.indexOf("fwmrm.net")?e.scriptURL:"//adm.fwmrm.net/p/vitest-js/AdManager.js";r.on=function(e,t){return a.on(e,t)},r.off=function(e,t){return a.off(e,t)};var L=function(e){if(d)return d.setVideoState(e)},k=function(){if(0==E.length)return void h.removeEventListener("timeupdate",k);for(var e=0;e<E.length;e++){var t=E[e],r=t.getTimePosition(),n=h.currentTime;if(Math.abs(n-r)<.5)return E.splice(e,1),void t.play()}},D=function(){h.removeEventListener("ended",D),L(tv.freewheel.SDK.VIDEO_STATE_STOPPED)},C=function(){if(B(),P(),G(),!0===T){N(),p.video.setAttribute("autoplay","true");p.video.play()}},R=function(e){if(a.emit("meride.freewheel_request_complete"),!0===e.success){b=!0;for(var t=d.getTemporalSlots(),n=0;n<t.length;n++){var i=t[n];switch(0===i.getAdCount()&&a.emit("meride.freewheel_ad_empty"),i.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:v.push(i);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_OVERLAY:E.push(i);break;case tv.freewheel.SDK.TIME_POSITION_CLASS_POSTROLL:g.push(i)}}!1===T&&r.play();try{0===e.response.ads.ads.length&&e.response.errors.errors.length>0&&C()}catch(e){}}else a.emit("meride.freewheel_ad_error"),C()},x=function(){},O=function(e){switch(e.slot.getTimePositionClass()){case tv.freewheel.SDK.TIME_POSITION_CLASS_PREROLL:M()}},I=!1,M=function(){if(v.length){var e=v.shift();try{e.play()}catch(e){I=!0,M()}}else P(),setTimeout(N,100),!0===I&&(I=!1,B(),a.emit("meride.freewheel_error"))},P=function(){p.video.removeAttribute("data-meride-adv"),p.enableSeek(),null===p.hls?h.currentSrc!=A&&(h.src=A):p.reload(A)},N=function(){!0===b&&(h.addEventListener("ended",D),h.addEventListener("timeupdate",k),L(tv.freewheel.SDK.VIDEO_STATE_PLAYING),a.emit("meride.playing_content"));var e=h.play();e&&e.catch(function(e){G()})},B=function(e){p.enableSeek()},F=function(e){if(e.subType===tv.freewheel.SDK.EVENT_AD_AUTO_PLAY_BLOCKED&&(r.play(),G()),e.subType===tv.freewheel.SDK.EVENT_AD_IMPRESSION&&!1===p.video.playing&&!0===T){r.play(),q();for(var t=0,n=l.length;t<n;t+=1)l[t].style.display="inline-block"}e.subType===tv.freewheel.SDK.EVENT_AD_INITIATED&&a.emit("meride.freewheel_ad_initiated")},j=function(e){p.disableSeek()};r.requestAds=function(){a.emit("meride.freewheel_requesting"),d=t.newContext(),a.emit("meride.freewheel_current_context_change",d),X(),d.setProfile(f),!0===w?d.setVideoAsset(e.assetID,p.video.duration||500,u):d.setVideoAsset(e.assetID),d.setSiteSection(e.sectionID);for(var r in y)y.hasOwnProperty(r)&&"vprn"!==r&&d.addKeyValue(r,y[r]);d.addKeyValue("vprn",parseInt(1e8*Math.random(),10).toString()),!0===w&&d.addTemporalSlot("Preroll_1",tv.freewheel.SDK.ADUNIT_PREROLL,0),d.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,R),d.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,x),d.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,O),d.addEventListener(tv.freewheel.SDK.EVENT_ERROR,B),d.addEventListener(tv.freewheel.SDK.EVENT_AD,F),d.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,j),d.registerVideoDisplayBase(m),d.submitRequest()},r.play=function(){try{!1!==p.video.playing||!0!==T?v.length?M():N():!0===T&&(v.length?M():N())}catch(e){P(),G(),p.enableSeek(),!0===T&&p.play(),B()}};var U=function(){for(var e=0,t=s.length;e<t;e+=1)l[e]=s[e].cloneNode(!0),l[e].setAttribute("meride-cloned-adv-btn","cloned"),o.addClickTouch(l[e],K)},V=function(){for(var e=0,t=s.length;e<t;e+=1)s[e].style.display="none"},G=function(){try{for(var e=0,t=l.length;e<t;e+=1)if(l[e])try{l[e].parentNode.removeChild(l[e])}catch(e){}for(var e=0,t=s.length;e<t;e+=1)s[e]&&(s[e].parentNode.appendChild(s[e]),s[e].style.display="inline-block")}catch(e){}},q=function(){for(var e=0,t=s.length;e<t;e+=1)l[e]&&s[e].parentNode.appendChild(l[e])},H=function(){for(var e=0,t=l.length;e<t;e+=1){o.removeClickTouch(l[e],K);try{l[e].parentNode.removeChild(l[e])}catch(e){}}},K=function(e){a.emit("meride.freewheel_main_play_clicked"),p.video.removeEventListener("playing",W),!1===p.video.playing&&!0===T?r.play():v.length&&M(),H()},W=function(){p.video.removeEventListener("playing",W),d&&!1===T&&r.play(),H()},z=function(){p.video.removeEventListener("loadedmetadata",z)},Y=function(e){L(tv.freewheel.SDK.VIDEO_STATE_PAUSED)},X=function(){d&&(d.addEventListener(tv.freewheel.SDK.EVENT_REQUEST_COMPLETE,function(e){a.emit("meride.freewheel_requestcomplete",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_SLOT_STARTED,function(e){p.video.addEventListener("pause",Y,!1),a.emit("meride.freewheel_slot_started",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_SLOT_ENDED,function(e){p.video.removeEventListener("pause",Y),a.emit("meride.freewheel_slot_ended",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_ERROR,function(e){a.emit("meride.freewheel_error",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION,function(e){a.emit("meride.freewheel_ad_impression",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_IMPRESSION_END,function(e){a.emit("meride.freewheel_ad_impression_end",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_CLICK,function(e){a.emit("meride.freewheel_ad_click",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_FIRST_QUARTILE,function(e){a.emit("meride.freewheel_ad_first_quartile",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_MIDPOINT,function(e){a.emit("meride.freewheel_ad_midpoint",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_THIRD_QUARTILE,function(e){a.emit("meride.freewheel_third_quartile",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_COMPLETE,function(e){a.emit("meride.freewheel_ad_complete",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_MUTE,function(e){a.emit("meride.freewheel_ad_mute",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_UNMUTE,function(e){a.emit("meride.freewheel_ad_unmute",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_COLLAPSE,function(e){a.emit("meride.freewheel_ad_collapse",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_EXPAND,function(e){a.emit("meride.freewheel_ad_expand",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_PAUSE,function(e){L(tv.freewheel.SDK.VIDEO_STATE_PAUSED),a.emit("meride.freewheel_ad_pause",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_RESUME,function(e){a.emit("meride.freewheel_ad_resume",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_REWIND,function(e){a.emit("meride.freewheel_ad_rewind",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_ACCEPT_INVITATION,function(e){a.emit("meride.freewheel_accept_invitation",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_CLOSE,function(e){a.emit("meride.freewheel_ad_close",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD_MINIMIZE,function(e){a.emit("meride.freewheel_ad_minimize",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_RESELLER_NO_AD,function(e){a.emit("meride.freewheel_reseller_no_ad",e)}),d.addEventListener(tv.freewheel.SDK.EVENT_AD,function(e){}))},Q=function(){null!==p.hls&&(p.hls.detachMedia(),p.hls.destroy(),p.video.addEventListener("loadedmetadata",z,!1)),i.include(S,function(){U(),p.video.addEventListener("playing",W,!1),V(),p.video.playing=!1,p.video.addEventListener("play",function(){this.playing=!0},!1),!1===_?tv.freewheel.SDK.setLogLevel(tv.freewheel.SDK.LOG_LEVEL_QUIET):tv.freewheel.SDK.setLogLevel(tv.freewheel.SDK.LOG_LEVEL_DEBUG),t=new tv.freewheel.SDK.AdManager,t.setNetwork(u),t.setServer(c),a.emit("meride.freewheel_loaded"),!1===T&&q()},{onerror:function(){C()}})};return r.init=Q,r});e.exports=a},function(e,t,r){var n=r(6),i=r(1),o=r(13),a=function(e){if(!e)throw new Error("No parameter to FreewheelMerideEvents");if(!e.freewheel)throw new Error("No freewheel parameter to FreewheelMerideEvents");if(!e.containerEl)throw new Error("No containerEl parameter to FreewheelMerideEvents");var t={},r=e.freewheel,a=e.containerEl,s=function(){r.on("meride.freewheel_main_play_clicked",function(){n.emit(i.MAIN_PLAY_CLICKED,a)}),r.on("meride.freewheel_request_complete",function(){o.setAdvState(i.AD_REQUEST_COMPLETE),n.emit(i.AD_REQUEST_COMPLETE,a)}),r.on("meride.freewheel_requesting",function(){o.setAdvState(i.AD_REQUESTING),n.emit(i.AD_REQUESTING,a)}),r.on("meride.freewheel_ad_initiated",function(){o.setAdvState(i.AD_REQUESTING)}),r.on("meride.playing_content",function(){o.setPlayerState(i.PLAY_CONTENT),o.setAdvState("")}),r.on("meride.freewheel_ad_impression",function(){o.setAdvState(i.AD_STARTED),n.emit(i.AD_STARTED,a)}),r.on("meride.freewheel_ad_impression_end",function(){n.emit(i.AD_ENDED,a),o.setAdvState(i.AD_ENDED)}),r.on("meride.freewheel_ad_click",function(e){var t=e.arguments[0];window.clickEv=t,t&&t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK).length>0&&n.emit(i.AD_CLICKED,a,{clickThroughUrl:t.adInstance.getEventCallbackUrls(tv.freewheel.SDK.EVENT_AD_CLICK,tv.freewheel.SDK.EVENT_TYPE_CLICK)[0]})}),r.on("meride.freewheel_error",function(){o.setAdvState(""),n.emit(i.AD_ERROR,a)}),r.on("meride.freewheel_ad_error",function(){n.emit(i.AD_ERROR,a)}),r.on("meride.freewheel_reseller_no_ad",function(){n.emit(i.AD_EMPTY,a)}),r.on("meride.freewheel_ad_empty",function(){n.emit(i.AD_EMPTY,a)})};return t.init=s,t};e.exports=a},function(e,t,r){var n=r(18),i=r(29),o=r(2),a=r(4),s=r(1),l=r(11),d=function(e){if(!e)throw new Error("No parameter to ControlsManager");if(!e.freewheel)throw new Error("No freewheel parameter to ControlsManager");if(!e.containerEl)throw new Error("No containerEl parameter to ControlsManager");var t,r,d,u={},c=e.freewheel,f=e.containerEl,p=!0===e.autoPlay,h=a.applyStyles,m=null,v=null,g=null,y=null,E=function(){for(var e=f.querySelectorAll(".boxcenterBtn"),t=0,r=e.length;t<r;t+=1)e[t].style.visibility="hidden"},b=function(){for(var e=f.querySelectorAll(".otherComponents"),t=0,r=e.length;t<r;t+=1)e[t].style.visibility="hidden"},w=function(){E(),b()},_=function(){for(var e=f.querySelectorAll(".boxcenterBtn"),t=0,r=e.length;t<r;t+=1)e[t].style.visibility="visible"},T=function(){for(var e=f.querySelectorAll(".otherComponents"),t=0,r=e.length;t<r;t+=1)e[t].style.visibility="visible"},A=function(){_(),T()},S=null,L=function(){null===y&&(y=new i({containerEl:f}),y.show()),S=d.getContentVideoElement(),g=setInterval(function(){S&&!1===S.paused&&!0===S.playing&&(m-=1,y.setMessage(l("view_video_countdown",[m])),0===m&&k())},1e3)},k=function(){null!==g&&(clearInterval(g),g=null,null!==y&&y.reset())},D=function(){t=document.createElement("button"),r=document.createElement("button"),t.innerHTML=n.volumeOnSVG,r.innerHTML=n.volumeOffSVG,h(t,{backgroundColor:"transparent",cursor:"pointer",border:"none",width:"40px",height:"40px",position:"absolute",top:"18px",left:"2%",zIndex:"999999",display:"none"}),h(r,{backgroundColor:"transparent",cursor:"pointer",border:"none",width:"40px",height:"40px",position:"absolute",top:"18px",left:"2%",zIndex:"999999",display:"none"}),o.addClickTouch(t,C),o.addClickTouch(r,R),f.appendChild(t),f.appendChild(r)},C=function(){d&&d.setAdVolume(0)},R=function(){d&&d.setAdVolume(1)},x=function(){try{t.parentNode.removeChild(t),r.parentNode.removeChild(r)}catch(e){}},O=function(){d&&(d.getAdVolume()>0?(h(r,{display:"none"}),h(t,{display:"inline-block"})):(h(t,{display:"none"}),h(r,{display:"inline-block"})))},I=function(e){e.subType==tv.freewheel.SDK.EVENT_AD_VOLUME_CHANGE&&O()},M=function(){A(),x(),!0===e.showCountdown&&k()},P=function(){!0===p?w():b(),f.addEventListener(s.PLAY_CONTENT,function(){A()}),c.on("meride.freewheel_current_context_change",function(e){d=e.arguments[0],O(),d.addEventListener(tv.freewheel.SDK.EVENT_AD,I)}),c.on("meride.freewheel_ad_impression",function(){w()}),c.on("meride.freewheel_main_play_clicked",function(){w()}),c.on("meride.freewheel_slot_started",function(t){D(),O(),!0===e.showCountdown&&(t.arguments&&t.arguments[0]&&t.arguments[0].slot&&(v=t.arguments[0].slot,m=parseInt(v.getTotalDuration(),10)),L())}),c.on("meride.freewheel_slot_ended",function(){M()}),c.on("meride.freewheel_error",function(){M()}),c.on("meride.freewheel_ad_error",function(){M()}),c.on("meride.freewheel_reseller_no_ad",function(){M()}),c.on("meride.freewheel_ad_empty",function(){M()})};return u.init=P,u};e.exports=d},function(e,t,r){var n=r(14),i=r(4).applyStyles,o=function(e){if(!e)throw new Error("No opts passed to VerticalVideo");if(!e.container)throw new Error("No opts.container passed to VerticalVideo");if(!e.player)throw new Error("No opts.player passed to VerticalVideo");var t=(n.getFullScreenAPI().api,e.player),r=e.container,o=parseInt(r.getAttribute("data-width"),10),a=parseInt(r.getAttribute("data-height"),10),s=function(){i(t.video,{"object-fit":"contain"})},l=function(){a>=o?!0===e.crop?i(t.video,{"object-fit":"cover"}):i(t.video,{"object-fit":"fill"}):i(t.video,{"object-fit":"contain"})},d=function(e){a=r.offsetHeight,o=r.offsetWidth,n.isFullScreen()?s():l()};window.addEventListener("resize",d,!1),window.addEventListener("orientationchange",d,!1),d()};e.exports=o},function(module,exports){var JSON;JSON||(JSON={}),function(){"use strict";function f(e){return e<10?"0"+e:e}function quote(e){return escapable.lastIndex=0,escapable.test(e)?'"'+e.replace(escapable,function(e){var t=meta[e];return"string"==typeof t?t:"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})+'"':'"'+e+'"'}function str(e,t){var r,n,i,o,a,s=gap,l=t[e];switch(l&&"object"==typeof l&&"function"==typeof l.toJSON&&(l=l.toJSON(e)),"function"==typeof rep&&(l=rep.call(t,e,l)),typeof l){case"string":return quote(l);case"number":return isFinite(l)?String(l):"null";case"boolean":case"null":return String(l);case"object":if(!l)return"null";if(gap+=indent,a=[],"[object Array]"===Object.prototype.toString.apply(l)){for(o=l.length,r=0;r<o;r+=1)a[r]=str(r,l)||"null";return i=0===a.length?"[]":gap?"[\n"+gap+a.join(",\n"+gap)+"\n"+s+"]":"["+a.join(",")+"]",gap=s,i}if(rep&&"object"==typeof rep)for(o=rep.length,r=0;r<o;r+=1)"string"==typeof rep[r]&&(n=rep[r],(i=str(n,l))&&a.push(quote(n)+(gap?": ":":")+i));else for(n in l)Object.prototype.hasOwnProperty.call(l,n)&&(i=str(n,l))&&a.push(quote(n)+(gap?": ":":")+i);return i=0===a.length?"{}":gap?"{\n"+gap+a.join(",\n"+gap)+"\n"+s+"}":"{"+a.join(",")+"}",gap=s,i}}var global=Function("return this")(),JSON=global.JSON;JSON||(JSON={}),"function"!=typeof Date.prototype.toJSON&&(Date.prototype.toJSON=function(e){return isFinite(this.valueOf())?this.getUTCFullYear()+"-"+f(this.getUTCMonth()+1)+"-"+f(this.getUTCDate())+"T"+f(this.getUTCHours())+":"+f(this.getUTCMinutes())+":"+f(this.getUTCSeconds())+"Z":null},String.prototype.toJSON=Number.prototype.toJSON=Boolean.prototype.toJSON=function(e){return this.valueOf()});var cx=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,escapable=/[\\\"\x00-\x1f\x7f-\x9f\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g,gap,indent,meta={"\b":"\\b","\t":"\\t","\n":"\\n","\f":"\\f","\r":"\\r",'"':'\\"',"\\":"\\\\"},rep;"function"!=typeof JSON.stringify&&(JSON.stringify=function(e,t,r){var n;if(gap="",indent="","number"==typeof r)for(n=0;n<r;n+=1)indent+=" ";else"string"==typeof r&&(indent=r);if(rep=t,t&&"function"!=typeof t&&("object"!=typeof t||"number"!=typeof t.length))throw new Error("JSON.stringify");return str("",{"":e})}),"function"!=typeof JSON.parse&&(JSON.parse=function(text,reviver){function walk(e,t){var r,n,i=e[t];if(i&&"object"==typeof i)for(r in i)Object.prototype.hasOwnProperty.call(i,r)&&(n=walk(i,r),void 0!==n?i[r]=n:delete i[r]);return reviver.call(e,t,i)}var j;if(text=String(text),cx.lastIndex=0,cx.test(text)&&(text=text.replace(cx,function(e){return"\\u"+("0000"+e.charCodeAt(0).toString(16)).slice(-4)})),/^[\],:{}\s]*$/.test(text.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,"@").replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,"]").replace(/(?:^|:|,)(?:\s*\[)+/g,"")))return j=eval("("+text+")"),"function"==typeof reviver?walk({"":j},""):j;throw new SyntaxError("JSON.parse")}),global.JSON=JSON,module.exports=JSON}()},function(e,t){var r=function(e){if(!e)throw new Error("No parameter passed to MerideEmbedFullWindow");if(!e.embedOptions)throw new Error("No embedOptions parameter passed to MerideEmbedFullWindow");if(!e.embedOptions.embedID)throw new Error("No embedOptions.embedID parameter passed to MerideEmbedFullWindow");if(!e.clientID)throw new Error("No clientID parameter passed to MerideEmbedFullWindow");var t,r,n=e.container||document.body,i=e.embedOptions,o=e.embedOptions.embedID,a=e.clientID,s="absolute"===e.position?"absolute":"fixed",l=window.innerWidth,d=window.innerHeight,u=null,c=function(){null!==u&&(u.style.width="100%",u.style.height="100%"),n.style.width="100%",n.style.height="100%",n.style.position=s,t.style.height="100%",t.style.width="100%",r.style.height="100%",r.style.width="100%"},f=function(){document.fullscreen||c()};!function(){i.responsive=!1,n.innerHTML='<div class="meride-video-container" data-embed="'+o+'" data-customer="'+a+'" data-nfs="'+a+'" data-width="'+l+'" data-height="'+d+'"></div>',Meride.initEmbed(i),t=Meride.getPlayerContainer({embedID:o}),t.style.height="100% !important",t.addEventListener(Meride.EventType.READY,function(e){r=e.detail.player,u=document.getElementById("meride_flash_"+o),c(),window.addEventListener("resize",c,!1)}),document.addEventListener("fullscreenchange",f,!1),document.addEventListener("webkitfullscreenchange",f,!1),document.addEventListener("mozfullscreenchange",f,!1)}()};e.exports=r},function(e,t,r){var n=r(22),i=r(4),o=(r(2),r(7)),a=r(1),s=function(e){if(!e.embedID)throw new Error("embedID required by ScrollMode");if(!e.embed)throw new Error("embed required by ScrollMode");if(!e.response)throw new Error("response required by ScrollMode");var t={},r=!1,s=!1,l=null,d=document.querySelector(".meride-video-container[data-embed='"+e.embedID+"']"),u=null,c=null,f=e.embedID,p=e.scrollMode.actionContainer?"absolute":"fixed";actionContainer=e.scrollMode.actionContainer||document.body,restoreAudioAfterPreroll=!0===e.scrollMode.restoreAudioAfterPreroll,pauseVideoAfterPreroll=!0===e.scrollMode.pauseVideoAfterPreroll,muteOnMouseOver=!1!==e.scrollMode.muteOnMouseOver,preload=!0===e.scrollMode.preload,embDiv=document.querySelector(".meride-video-container[data-embed='"+e.embedID+"']"),embedRoot=e.response.getElementsByTagName("embed")[0],autoPlay="true"===embedRoot.getAttribute("autoplay"),contentInitialized=!1,adsLoaded=!1,adsStarted=!1,adsError=!1,adsEnded=!1,isMobile=o.isMobile(),isAndroid=o.detectAndroid(),prerolls=e.embed.getPrerolls(),null!==embDiv.getAttribute("data-autoplay")&&(autoPlay="true"===embDiv.getAttribute("data-autoplay")),void 0!==e.autoPlay&&(autoPlay=e.autoPlay);var h=function(e){u.muted=!1},m=function(e){u.muted=!0},v=function(e){c.setVolume(1)},g=function(e){c.setVolume(0)},y=document.createElement("button");y.className="meride-scrollmode-layer-btn";var E=function(e){s=!0,u.removeEventListener("play",E),u.removeEventListener("playing",E),document.body.removeEventListener("touchstart",w);try{y.removeEventListener("touchstart",k),y.removeEventListener("touchmove",k),y.removeEventListener("touchend",k),y.removeEventListener("click",k),y.remove()}catch(e){}},b=function(){!0===autoPlay&&u.play()},w=function(e){b()},_=function(e){u.removeEventListener("playing",_),u.removeEventListener("play",_),u.pause()},T=document.createElement("div");T.className="meride-black-panel";var A=function(){var e=prerolls.length>0&&!0===pauseVideoAfterPreroll&&(!0===adsEnded||!0===adsError);if(u.removeEventListener("loadedmetadata",A),prerolls.length>0&&!0===restoreAudioAfterPreroll&&(!0===adsEnded||!0===adsError)?u.muted=!1:u.muted=!0,!0===autoPlay){if(adsEnded||adsError||adsLoaded||adsStarted){u.currentTime=0;try{l.removeChild(T)}catch(e){}}else!isAndroid&&prerolls.length>0&&(i.applyStyles(T,{position:"absolute",top:"0",left:"0",width:u.offsetWidth+"px",height:u.offsetHeight+"px",background:"#000",zIndex:11}),l.appendChild(T));prerolls.length>0&&!isMobile&&u.pause(),u.play()}!0===e&&(u.addEventListener("playing",_,!1),u.addEventListener("play",_,!1)),!0===muteOnMouseOver&&(l.addEventListener("mouseover",h,!1),l.addEventListener("mouseout",m,!1))},S=function(){!0!==adsError&&!0!==adsStarted||(u.removeEventListener("play",S),u.addEventListener("playing",S)),isMobile||u.pause()},L=function(){if(0===prerolls.length?(u.addEventListener("loadedmetadata",A,!1),r||u.load(),s||u.play()):(u.addEventListener("loadedmetadata",A,!1),u.addEventListener("play",S,!1),u.addEventListener("playing",S,!1)),!r)try{u.load()}catch(e){}if(!s)try{u.play()}catch(e){}},k=function(e){return!0===preload?L():(C(),L()),!1},D=function(){var t=function(e){u.addEventListener("play",function(){u.pause(),u.src=""},!1);try{l.parentNode.removeChild(l)}catch(e){}};l.addEventListener(a.READY,function(){if(u=l.querySelector("video"),!0===autoPlay&&isAndroid&&u.setAttribute("autoplay","autoplay"),u.setAttribute("muted","muted"),u.addEventListener("play",E,!1),u.addEventListener("playing",E,!1),e.scrollMode.destroyOn)for(var r in e.scrollMode.destroyOn)e.scrollMode.destroyOn.hasOwnProperty(r)&&l.addEventListener(e.scrollMode.destroyOn[r],t,!1);i.applyStyles(y,{width:actionContainer.offsetWidth+"px",height:actionContainer.offsetHeight+"px"})},!1),l.addEventListener(a.ADS_MANAGER_READY,function(e){c=e.detail.adsManager,!0===autoPlay&&(l.querySelector(".playBtn").style.display="none",l.querySelector(".loadingSpinner").style.display="inline-block"),adsLoaded=!0,!0===muteOnMouseOver&&(c.setVolume(0),l.addEventListener("mouseover",v,!1),l.addEventListener("mouseout",g,!1))}),l.addEventListener(a.AD_STARTED,function(e){adsStarted=!0;try{l.removeChild(T)}catch(e){}try{y.removeEventListener("touchstart",k),y.removeEventListener("touchmove",k),y.removeEventListener("touchend",k),y.removeEventListener("touchend",k),y.remove()}catch(e){}},!1),l.addEventListener(a.AD_ERROR,function(e){adsError=!0;try{l.removeChild(T)}catch(e){}if(!0===muteOnMouseOver&&(l.removeEventListener("mouseover",v),l.removeEventListener("mouseout",g)),isAndroid)try{u.play()}catch(e){}},!1),l.addEventListener(a.AD_ENDED,function(e){adsEnded=!0,!0===muteOnMouseOver&&(l.removeEventListener("mouseover",v),l.removeEventListener("mouseout",g));try{l.removeChild(T)}catch(e){}},!1),l.addEventListener(a.ROLLVIDEO_ENDED,function(e){adsEnded=!0;try{l.removeChild(T)}catch(e){}},!1),l.addEventListener(a.LOADEDMETADATA,A,!1)},C=function(){if(!r){r=!0,window.removeEventListener("DOMContentLoaded",x),window.removeEventListener("load",x),window.removeEventListener("scroll",x),window.removeEventListener("resize",x);var t=new n;l=Meride.getPlayerContainer({embedID:f}),D(),e.videoFormat={html5:"mp4"},t.init(e),!0===autoPlay&&(l.querySelector(".playBtn").style.display="none")}},R=function(){i.applyStyles(y,{width:actionContainer.offsetWidth+"px",height:actionContainer.offsetHeight+"px",position:p,top:"0",left:"0",border:"none",backgroundColor:"transparent",zIndex:"999999"}),y.addEventListener("touchstart",k,!1),y.addEventListener("touchmove",k,!1),y.addEventListener("touchend",k,!1),y.addEventListener("click",k,!1),actionContainer.appendChild(y)},x=function(){!0===i.isElementInViewport(d)&&(C(),!0===isMobile&&R())},O=function(){e.scrollMode.actionContainer||L()};return!0===preload?(window.addEventListener("DOMContentLoaded",O,!1),window.addEventListener("load",O,!1),window.addEventListener("scroll",O,!1),window.addEventListener("resize",O,!1),!0===isMobile&&R(),function(){var t=new n;l=Meride.getPlayerContainer({embedID:f}),D(),l.removeEventListener(a.LOADEDMETADATA,A),e.videoFormat={html5:"mp4"},i.isElementInViewport(d)||(e.autoPlay=!1),t.init(e),r=!0}()):(window.addEventListener("DOMContentLoaded",x,!1),window.addEventListener("load",x,!1),window.addEventListener("scroll",x,!1),window.addEventListener("resize",x,!1),i.isElementInViewport(d)&&(C(),!0===isMobile&&R())),t};e.exports=s},function(e,t,r){var n=r(75);window.meride=n},function(e,t,r){var n=r(76),i=r(93),o=r(32),a=window.meride||{};a.adv={},a.adv.AdLoader=n,a.adv.MediaFactoryRenderer=i,a.adv.VASTErrorCodes=o,e.exports=a},function(e,t,r){var n=r(77),i=r(91),o=r(92),a=r(31),s=r(12),l=r(30),d=r(0),u=function(e){var t={},r=e,u=new d,c=r.videoEl||null,f=c?c.src:"";t.on=function(e,t){return u.on(e,t)},t.off=function(e,t){return u.off(e,t)};var p=function(e){c.removeEventListener("loadedmetadata",p);var t=c.play();t&&t.then(function(){}).catch(function(e){})},h=function(e){if(c.src!==f){c.setAttribute("src",f),!0===e&&c.addEventListener("loadedmetadata",p,!1);var t=c.load();t&&t.then(function(){}).catch(function(e){})}if(!0===e){var r=c.play();r&&r.then(function(){}).catch(function(e){})}};t.restoreOriginalVideo=function(e){return h(e)};var m=function(e){return null!==c&&(e=s.replaceDimensions(e,c.offsetWidth,c.offsetHeight)),e};if(t.load=function(){var e=r.ads.map(function(e){var t=m(e.uri);return new n({uri:t,videoEl:c}).read(t)});return l.all(e).then(function(e){return new l(function(t,r){if(e)if(e&&1===e.length&&0===e[0].length)u.emit("VAST_ERROR",new a(null,101));else if(1===e.length)try{t(new i({ads:e[0]}))}catch(e){u.emit("VAST_ERROR",e)}else e.length>1&&t(new o({ads:e}));else r("Empty result in the responses")})}).catch(function(e){var t=new a(null,900);throw u.emit("LOAD_ERROR",t),t})},!r)throw new Error("No initialization parameters passed");if(!r.ads)throw new Error("No advertisment passed. Please use the ads attribute ad an array of ads");if(r.ads&&!r.ads.hasOwnProperty("length"))throw new Error("Ads attribute must be an array");return t};e.exports=u},function(e,t,r){var n=r(15),i=r(30),o=r(12),a=function(e){var t={},r=(e.uri,0),a=!1,s=null,l=null,d=[],u={},c=[],f=[],p=e.videoEl||null;if(!e)throw new Error("You have to pass init parameters to VASTReader");if(!e.uri)throw new Error("You have to pass uri parameters to VASTReader");var h=function(e){var t=e;return t=o.replaceTimestamp(t),t=o.replaceRandom(t),t=o.replaceRnd(t),t=o.replaceReferrerURL(t),t=o.replaceURL(t),t=o.replaceDescriptionURL(t),null!==p&&(t=o.replaceDimensions(t,p.offsetWidth,p.offsetHeight)),t},m=function(e){if(document.implementation&&document.implementation.createDocument)xmlDoc=(new DOMParser).parseFromString(e,"text/xml");else{if(!window.ActiveXObject)return null;xmlDoc=new ActiveXObject("Microsoft.XMLDOM"),xmlDoc.loadXML(e)}return xmlDoc},v=function(e){return n.read({uri:h(e),responseType:"text",useXDR:!0,withCredentials:!0})},g=function(e){if(e=m(e),s=e.getElementsByTagName("Wrapper")[0],l=e.getElementsByTagName("VASTAdTagURI")[0],s&&l){if((r+=1)>3)return!1;var n=e.getElementsByTagName("Impression"),i=0,o=0;if(n&&n.length>0)for(i=0,o=n.length;i<o;i+=1)d.push(n[i]);var p=e.getElementsByTagName("Linear"),h=[];if(p){var v=p[0].getElementsByTagName("Tracking");for(var g in v)if(v.hasOwnProperty(g)&&(h=p.item(0).getElementsByTagName("Tracking"))&&h.length>0)for(i=0,o=h.length;i<o;i+=1)c.push(h[i])}var y=e.getElementsByTagName("ClickTracking");for(var E in y)y.hasOwnProperty(E)&&f.push(y[E]);u=e.getElementsByTagName("Tracking");var b=l.firstChild.data;return null!==b.match(/^\[CDATA\[/)&&null!==b.match(/\]\]$/)&&(b=b.replace("[CDATA[","").replace("]]","")),t.read(b)}return!!e.getElementsByTagName("InLine")[0]&&(a=!0,e)},y=function(e){if(!e||e&&0===e.length)return[];var t=0,r=0,n=e.getElementsByTagName("InLine");if(n.length>0)for(n=n[0],t=0,r=d.length;t<r;t+=1)n.appendChild(d[t]);var i=e.getElementsByTagName("Linear"),o=null;if(i.length>0){if((o=i[0].getElementsByTagName("TrackingEvents"))&&o.length>0)for(t=0,r=c.length;t<r;t+=1)try{o[0].appendChild(c[t])}catch(e){}null}var a=e.getElementsByTagName("VideoClicks")[0];if(a)for(var s in f)f.hasOwnProperty(s)&&a.appendChild(f[s]);return e};return t.read=function(e){return new i(function(t,r){v(e).then(g).then(function(e){!1!==e?(e=y(e),t(e)):t([])}).catch(function(e){r("Error retrieving advertising while reading VAST file.")})})},t};e.exports=a},function(e,t,r){"use strict";e.exports=r(79)},function(e,t,r){"use strict";e.exports=r(8),r(80),r(81),r(82),r(83),r(84)},function(e,t,r){"use strict";var n=r(8);e.exports=n,n.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,r){"use strict";var n=r(8);e.exports=n,n.prototype.finally=function(e){return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})}},function(e,t,r){"use strict";function n(e){var t=new i(i._n);return t._i=1,t._j=e,t}var i=r(8);e.exports=i;var o=n(!0),a=n(!1),s=n(null),l=n(void 0),d=n(0),u=n("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return l;if(!0===e)return o;if(!1===e)return a;if(0===e)return d;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,r){r(e)})}return n(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,r){function n(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._i;)s=s._j;return 1===s._i?n(a,s._j):(2===s._i&&r(s._j),void s.then(function(e){n(a,e)},r))}var l=s.then;if("function"==typeof l){return void new i(l.bind(s)).then(function(e){n(a,e)},r)}}t[a]=s,0==--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)n(a,t[a])})},i.reject=function(e){return new i(function(t,r){r(e)})},i.race=function(e){return new i(function(t,r){e.forEach(function(e){i.resolve(e).then(t,r)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,r){"use strict";function n(e,t){for(var r=[],n=0;n<t;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(r).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}function i(e){for(var t=Math.max(e.length-1,3),r=[],n=0;n<t;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",r.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(r.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}var o=r(8),a=r(19);e.exports=o,o.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?n(e,t):i(e)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";o.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),r="function"==typeof t[t.length-1]?t.pop():null,n=this;try{return e.apply(this,arguments).nodeify(r,n)}catch(e){if(null===r||void 0===r)return new o(function(t,r){r(e)});a(function(){r.call(n,e)})}}},o.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(r){a(function(){e.call(t,null,r)})},function(r){a(function(){e.call(t,r)})})}},function(e,t,r){"use strict";var n=r(8);e.exports=n,n.enableSynchronous=function(){n.prototype.isPending=function(){return 0==this.getState()},n.prototype.isFulfilled=function(){return 1==this.getState()},n.prototype.isRejected=function(){return 2==this.getState()},n.prototype.getValue=function(){if(3===this._i)return this._j.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._j},n.prototype.getReason=function(){if(3===this._i)return this._j.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._j},n.prototype.getState=function(){return 3===this._i?this._j.getState():-1===this._i||-2===this._i?0:this._i}},n.disableSynchronous=function(){n.prototype.isPending=void 0,n.prototype.isFulfilled=void 0,n.prototype.isRejected=void 0,n.prototype.getValue=void 0,n.prototype.getReason=void 0,n.prototype.getState=void 0}},function(e,t,r){"use strict";e.exports=r(9),r(86),r(87),r(88),r(89),r(90)},function(e,t,r){"use strict";var n=r(9);e.exports=n,n.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,r){"use strict";var n=r(9);e.exports=n,n.prototype.finally=function(e){return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})}},function(e,t,r){"use strict";function n(e){var t=new i(i._61);return t._65=1,t._55=e,t}var i=r(9);e.exports=i;var o=n(!0),a=n(!1),s=n(null),l=n(void 0),d=n(0),u=n("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return l;if(!0===e)return o;if(!1===e)return a;if(0===e)return d;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,r){r(e)})}return n(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,r){function n(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._65;)s=s._55;return 1===s._65?n(a,s._55):(2===s._65&&r(s._55),void s.then(function(e){n(a,e)},r))}var l=s.then;if("function"==typeof l){return void new i(l.bind(s)).then(function(e){n(a,e)},r)}}t[a]=s,0==--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)n(a,t[a])})},i.reject=function(e){return new i(function(t,r){r(e)})},i.race=function(e){return new i(function(t,r){e.forEach(function(e){i.resolve(e).then(t,r)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,r){"use strict";function n(e,t){for(var r=[],n=0;n<t;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(r).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}function i(e){for(var t=Math.max(e.length-1,3),r=[],n=0;n<t;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",r.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(r.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}var o=r(9),a=r(19);e.exports=o,o.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?n(e,t):i(e)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";o.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),r="function"==typeof t[t.length-1]?t.pop():null,n=this;try{return e.apply(this,arguments).nodeify(r,n)}catch(e){if(null===r||void 0===r)return new o(function(t,r){r(e)});a(function(){r.call(n,e)})}}},o.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(r){a(function(){e.call(t,null,r)})},function(r){a(function(){e.call(t,r)})})}},function(e,t,r){"use strict";var n=r(9);e.exports=n,n.enableSynchronous=function(){n.prototype.isPending=function(){return 0==this.getState()},n.prototype.isFulfilled=function(){return 1==this.getState()},n.prototype.isRejected=function(){return 2==this.getState()},n.prototype.getValue=function(){if(3===this._65)return this._55.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._55},n.prototype.getReason=function(){if(3===this._65)return this._55.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._55},n.prototype.getState=function(){return 3===this._65?this._55.getState():-1===this._65||-2===this._65?0:this._65}},n.disableSynchronous=function(){n.prototype.isPending=void 0,n.prototype.isFulfilled=void 0,n.prototype.isRejected=void 0,n.prototype.getValue=void 0,n.prototype.getReason=void 0,n.prototype.getState=void 0}},function(e,t,r){var n=r(31),i=function(e){var t={},r=null;if(t.opts=e,t.type="ad",!e.ads||0===e.ads.length)throw new Error("Ads must be passed as ads element");r=e.ads.getElementsByTagName("VAST")[0];var i=e.ads.getElementsByTagName("InLine")[0],o=e.ads.getElementsByTagName("Wrapper")[0],a=e.ads.getElementsByTagName("Error")[0];if(!(r=e.ads.getElementsByTagName("VAST")[0]))throw new n("NO VAST element found",101);if(!r.hasChildNodes())throw new n("Empty VAST found",101);if(!i&&!o&&a)throw new n(null,1001,{reportTo:a.firstChild.data});var s=e.ads;if(t.Ad=s.getElementsByTagName("Ad")[0],t.tracking=s.getElementsByTagName("Tracking"),t.id=t.Ad.getAttribute("id"),t.isVPAID=!1,t.VPAID={},t.mediaFile=s.getElementsByTagName("MediaFile"),t.mediaFile&&t.mediaFile.length>0)for(var l=0,d=t.mediaFile.length;l<d;l+=1)t.mediaFile[l]&&"VPAID"===t.mediaFile[l].getAttribute("apiFramework")&&"application/javascript"===t.mediaFile[l].getAttribute("type")&&(t.isVPAID=!0,t.VPAID={type:t.mediaFile[l].getAttribute("type"),adParameters:s.getElementsByTagName("AdParameters").length>0?JSON.parse(s.getElementsByTagName("AdParameters")[0].firstChild.wholeText):{},mediaFile:t.mediaFile[l].firstChild.data},"function"==typeof t.VPAID.mediaFile.trim&&""===t.VPAID.mediaFile.trim()&&(t.VPAID.mediaFile=t.mediaFile[l].textContent));return t};e.exports=i},function(e,t){var r=function(e){var t={};if(t.opts=e,t.type="adGroup",!e.ads)throw new Error("Ads must be passed as ads element");return t};e.exports=r},function(e,t,r){var n=r(20),i=(r(94),r(97),function(e,t){return new n[e+"Renderer"](t)});e.exports=i},function(e,t,r){var n=r(20),i=r(95),o=r(0),a=r(96),s=r(3);n.LinearRenderer=function(e){var t,r={},n=e.videoEl||null,l=e.containerEl||null,d="",u=n.getAttribute("src"),c=e.ad.Ad.getElementsByTagName("Linear"),f=c.item(0).getElementsByTagName("MediaFile"),p=e.ad.Ad.getElementsByTagName("Tracking"),h="ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch,m=h?"touchstart":"click",v=e.btnInitAction||null,g=new o,y=e.preventReproduceMainVideo||!1,E=!1,b=!1,w={play:0},_={start:"timeupdate",complete:"ended",pause:"pause",mute:"volumechange",unmute:"volumechange",resume:"play",error:"error",impression:"timeupdate"},T={onstart:function(){n.currentTime>0&&(n.removeEventListener(_.start,T.onstart),w.play+=1,g.emit("start"),g.emit("meride.adstarted"))},onimpression:function(){n.removeEventListener(_.impression,T.onimpression),g.emit("impression")},oncomplete:function(){n.removeEventListener(_.complete,T.oncomplete),g.emit("complete"),g.emit("meride.adcompleted")},onpause:function(e){g.emit("pause")},onFirstQuartile:function(){},onMidpoint:function(){},onThirdQuartile:function(){},onerror:function(){g.emit("error"),g.emit("meride.aderror")},onmute:function(e){n.muted&&(b=!0,g.emit("mute"))},onunmute:function(e){!n.muted&&b&&(b=!1,g.emit("unmute"))},onrewind:function(e){},onresume:function(e){w.play>1&&g.emit("resume"),w.play+=1},onfullscreen:function(e){},onexitFullscreen:function(e){},onexpand:function(e){},oncollapse:function(e){},onacceptInvitationLinear:function(e){},"oncloseLinear:":function(e){},onskip:function(e){},onprogress:function(e){}};r.on=function(e,t){return g.on(e,t)},r.off=function(e,t){return g.off(e,t)};var A=function(){n.removeEventListener("loadedmetadata",S),n.removeEventListener("ended",k);for(var e in _)_.hasOwnProperty(e)&&p[e]&&n.removeEventListener(_[e],T["on"+e])},S=function(e){n.removeEventListener("loadedmetadata",S),E=!0,n.play()},L=function(e){n.removeEventListener("loadedmetadata",L);var t=n.play();t&&t.then(function(){}).catch(function(e){})},k=function(e){if(n.removeEventListener("ended",k),n.setAttribute("src",u),g.emit("LINEAR_ENDED"),!y){n.addEventListener("loadedmetadata",L);var t=n.load();t&&t.then(function(){}).catch(function(e){});var r=n.play();r&&r.then(function(){}).catch(function(e){})}},D=function(e){if(n.removeEventListener("error",D),A(),n.setAttribute("src",u),g.emit("LINEAR_ENDED"),!y){n.addEventListener("loadedmetadata",L);var t=n.load();t&&t.then(function(){}).catch(function(e){});var r=n.play();r&&r.then(function(){}).catch(function(e){})}},C=function(){n.addEventListener("error",D),n.addEventListener("loadedmetadata",S),n.addEventListener("ended",k);for(var e in _)_.hasOwnProperty(e)&&n.addEventListener(_[e],T["on"+e])},R=function(){var t;s.include(e.ad.VPAID.mediaFile,function(){if(void 0!==window.getVPAIDAd){var r=getVPAIDAd,i=null,o=[],a=[],s=function(){try{l.removeChild(i)}catch(e){}};r&&"function"==typeof r&&(t=r()),i=document.createElement("div"),i.style.position="absolute",i.style.top="0",i.style.left="0",l.appendChild(i),a.slot=i,a.videoSlot=n,o.AdParameters=JSON.stringify(e.ad.VPAID.adParameters),t.subscribe(function(){t.startAd()},"AdLoaded"),t.subscribe(function(){n.src===u&&n.pause()},"AdVideoStart"),t.subscribe(function(){T.onFirstQuartile()},"AdVideoFirstQuartile"),t.subscribe(function(){T.onMidpoint()},"AdVideoMidpoint"),t.subscribe(function(){T.onThirdQuartile()},"AdVideoThirdQuartile"),t.subscribe(function(){T.onstart()},"AdStarted"),t.subscribe(function(){t.resizeAd(0,0,"normal"),s()},"AdStopped"),t.subscribe(function(){T.oncomplete(),s(),g.emit("LINEAR_ENDED")},"AdVideoComplete"),t.subscribe(function(){T.onskip(),s()},"AdSkipped"),t.subscribe(function(){T.onerror(),s()},"AdError"),t.initAd(l.offsetWidth,l.offsetHeight,"normal",256,o,a)}},!0)},x=function(){if(!0===e.ad.isVPAID)R();else{var o=i.selectVideo(f,n);if(!1===o)throw new Error("No reproducible video found");d=o.src,n.setAttribute("src",d)}A(),C(),t=new a({videoEl:n,tracks:p,impressions:e.ad.Ad.getElementsByTagName("Impression"),errors:e.ad.Ad.getElementsByTagName("Error")}),r.tracker=t};if(r.tracker=t,r.init=x,r.render=function(){n.setAttribute("preload","none"),n.style.display="block",v&&v.addEventListener(m,function(e){e.preventDefault(),E?n.play():(n.load(),n.play())}),n.load(),n.play()},r.containerEl=l,r.videoEl=n,navigator.userAgent.match(/(iPod|iPhone|iPad)/)){var O=document.createElement("style");O.type="text/css",O.innerHTML="video { -webkit-transform-style: preserve-3d; }",document.body.appendChild(O)}return r},e.exports=n},function(e,t){e.exports={selectVideo:function(e,t){var r="",n=!1,i=0,o=0,a="";for(i=0,o=e.length;i<o;i+=1)if(r=e[i].getAttribute("type"),"maybe"===(n=t.canPlayType(r))){a=1===e[i].childNodes?e[i].firstChild.data:e[i].firstChild.wholeText.replace(/[\n\r]/g,"");break}if(!n)for(i=0,o=e.length;i<o;i+=1)if(r=e[i].getAttribute("type"),"probably"===(n=t.canPlayType(r))){a=1===e[i].childNodes?e[i].firstChild.data:e[i].firstChild.wholeText.replace(/[\n\r]/g,"");break}return!!n&&{type:r,src:a}}}},function(e,t,r){var n=r(12),i=r(0),o=function(e){if(!e.videoEl)throw new Error("Tracker require a video element (videoEl param)");if(!e.tracks)throw new Error("Tracker require tracking elements");var t,r={},o=e.videoEl,a={},s={start:"timeupdate",complete:"ended",pause:"pause",mute:"volumechange",unmute:"volumechange",resume:"play",creativeView:"timeupdate",error:"error",impression:"timeupdate",viewable_impression:"timeupdate"},l={play:0},d=new i,u=o.duration,c=0,f=!1,p=!1,h=!1,m=!1,v={onstart:function(){o.currentTime>0&&(o.removeEventListener(s.start,v.onstart),l.play+=1,T("start"))},onimpression:function(){o.removeEventListener(s.impression,v.onimpression),T("impression")},onviewable_impression:function(){o.removeEventListener(s.viewable_impression,v.onviewable_impression),T("viewable_impression")},oncomplete:function(){o.removeEventListener(s.complete,v.oncomplete),T("complete")},onpause:function(e){T("pause")},oncreativeView:function(){o.currentTime>1&&(o.removeEventListener(s.creativeView,v.oncreativeView),T("creativeView"))},onFirstQuartile:function(){},onMidpoint:function(){},onThirdQuartile:function(){},onerror:function(){b(),o.removeEventListener(s.error,v.onerror),T("error")},onmute:function(e){o.muted&&(m=!0,T("mute"))},onunmute:function(e){!o.muted&&m&&(m=!1,T("unmute"))},onrewind:function(e){},onresume:function(e){l.play>1&&T("resume"),l.play+=1},onfullscreen:function(e){},onexitFullscreen:function(e){},onexpand:function(e){},oncollapse:function(e){},onacceptInvitationLinear:function(e){},"oncloseLinear:":function(e){},onskip:function(e){},onprogress:function(e){}};r.blockNetTracking=!1,r.on=function(e,t){return d.on(e,t)},r.off=function(e,t){return d.off(e,t)};for(var g=0,y=e.tracks.length;g<y;g+=1)t=e.tracks[g].getAttribute("event"),a[t]||(a[t]=[]),a[t].push(e.tracks[g].firstChild.data);if(e.impressions)for(a.impression=[],g=0,y=e.impressions.length;g<y;g+=1)a.impression.push(e.impressions[g].firstChild.data);if(e.errors){for(a.error=[],g=0,y=e.errors.length;g<y;g+=1)a.error.push(e.errors[g].firstChild.data);o.addEventListener(s.error,v.onerror)}for(var E in s)s.hasOwnProperty(E)&&a[E]&&o.addEventListener(s[E],v["on"+E]);var b=function(){o.removeEventListener("ended",b);for(var e in s)s.hasOwnProperty(e)&&a[e]&&o.removeEventListener(s[e],v["on"+e]);o.removeEventListener("durationchange",_),o.removeEventListener("timeupdate",w)};o.addEventListener("ended",b);var w=function(e){4===o.readyState&&(o.currentTime>1*c&&!f&&a.firstQuartile&&(f=!0,T("firstQuartile")),o.currentTime>2*c&&!p&&a.midpoint&&(p=!0,T("midpoint")),o.currentTime>3*c&&!h&&a.thirdQuartile&&(h=!0,T("thirdQuartile")))},_=function(e){u=o.duration,c=u/4};(a.firstQuartile||a.midpoint||a.thirdQuartile)&&o.addEventListener("timeupdate",w),o.addEventListener("durationchange",_);var T=function(e,t){for(var i in a[e])if(a[e].hasOwnProperty(i)&&(d.emit("meride:tracking:"+e,i),!0!==r.blockNetTracking)){var o=document.createElement("img");o.style.display="none",o.setAttribute("src",n.replace(a[e][i],t)),document.body.appendChild(o),o.parentNode.removeChild(o)}r.blockNetTracking=!1};return r.track=function(e){if(!e.eventName)throw new Error("Tracker needs an event");if(!a[e.eventName])throw new Error("Trying to track an unexistent event");T(e.eventName,e.uri,e.replacements||{})},r};e.exports=o},function(e,t,r){var n=r(20),i=r(0),o=r(98);n.NonLinearRenderer=function(e){var t,r={},n=e.videoEl||null,a=e.containerEl||null,s=e.ad.Ad.getElementsByTagName("NonLinear"),l=e.ad.Ad.getElementsByTagName("Tracking"),d=document.createElement("div"),u=e.ad.Ad.getElementsByTagName("NonLinearClickThrough"),c=new i,f=function(){var e=document.getElementsByClassName("merideNonLinearContainer")[0];if(null===e||void 0===e){var t,n,i,o=parseInt(s[0].getAttribute("width"),10);d.setAttribute("class","merideNonLinearContainer"),d.style.width=o+"px",d.style.height=s[0].getAttribute("height")+"px",d.style.position="absolute",d.style.bottom="40px",d.style.left="50%",d.style.marginLeft="-"+Math.round(o/2)+"px",t=s[0].getElementsByTagName("StaticResource")[0].firstChild.data,n=document.createElement("img"),n.setAttribute("src",t);try{i=s[0].getElementsByTagName("NonLinearClickThrough")[0].firstChild.data}catch(e){}if(i){var l=document.createElement("a");l.setAttribute("href",i),l.setAttribute("title","Adv link"),l.addEventListener("click",function(e){return c.emit("meride.nonlinear_adclicked"),window.open(this.href,"meride_adv_link"),e.preventDefault(),!1}),l.appendChild(n),d.appendChild(l)}else d.appendChild(n);a.style.position="relative",a.appendChild(d),c.emit("meride.nonlinear_adshowed"),null!==r.stayTime&&setTimeout(function(){d.parentNode.removeChild(d),c.emit("meride.nonlinear_adcompleted")},parseInt(1e3*r.stayTime,10))}};return r.on=function(e,t){return c.on(e,t)},r.off=function(e,t){return c.off(e,t)},r.stayTime=e.stayTime||null,r.afterTime=e.afterTime||null,r.delayTime=e.delayTime||null,r.tracker=t,r.render=function(){t=new o({videoEl:n,tracks:l,impressions:e.ad.Ad.getElementsByTagName("Impression"),errors:e.ad.Ad.getElementsByTagName("Error"),nonLinearClickThrough:u,renderer:r}),r.tracker=t,c.emit("meride.nonlinear_adstarted"),null!==r.afterTime?setTimeout(function(){f()},parseInt(1e3*r.afterTime,10)):f()},r},e.exports=n},function(e,t,r){var n=r(12),i=r(0),o=function(e){if(!e.videoEl)throw new Error("NonLinearTracker require a video element (videoEl param)");if(!e.tracks)throw new Error("NonLinearTracker require tracking elements");if(!e.renderer)throw new Error("NonLinearTracker require a renderer");var t={},r=(e.videoEl,{}),o=new i,a=e.renderer;t.on=function(e,t){return o.on(e,t)},t.off=function(e,t){return o.off(e,t)};for(var s=0,l=e.tracks.length;s<l;s+=1)_event=e.tracks[s].getAttribute("event"),r[_event]||(r[_event]=[]),r[_event].push(e.tracks[s].firstChild.data);if(e.impressions)for(r.impression=[],s=0,l=e.impressions.length;s<l;s+=1)r.impression.push(e.impressions[s].firstChild.data);if(e.nonLinearClickThrough)for(r.nonLinearClickThrough=[],s=0,l=e.nonLinearClickThrough.length;s<l;s+=1)r.nonLinearClickThrough.push(e.nonLinearClickThrough[s].firstChild.data);if(e.errors)for(r.error=[],s=0,l=e.errors.length;s<l;s+=1)r.error.push(e.errors[s].firstChild.data);a.on("meride.nonlinear_adstarted",function(){d("impression")}),a.on("meride.nonlinear_adshowed",function(){d("creativeView"),d("start")}),a.on("meride.nonlinear_adcompleted",function(){}),a.on("meride.nonlinear_adclicked",function(){d("nonLinearClickThrough")});var d=function(e,i){for(var a in r[e])if(r[e].hasOwnProperty(a)&&(o.emit("meride:tracking:"+e,a),!0!==t.blockNetTracking)){var s=document.createElement("img");s.style.display="none",s.setAttribute("src",n.replace(r[e][a],i)),document.body.appendChild(s),s.parentNode.removeChild(s)}t.blockNetTracking=!1};return t.track=function(e){if(!e.eventName)throw new Error("Tracker needs an event");if(!r[e.eventName])throw new Error("Trying to track an unexistent event");d(e.eventName,e.uri,e.replacements||{})},t};e.exports=o},function(e,t,r){var n=r(100);window.meride=n},function(e,t,r){var n=r(101),i=r(21),o=window.meride||{};o.embed={},o.embed.Embed=n,o.embed.EmbedConfig=i,e.exports=o},function(e,t,r){var n=(r(0),r(15)),i=r(33),o=r(21),a=r(108),s=r(109),l=function(e){if(!e)throw new Error("No parameters passed to embed");if(!e.embedID)throw new Error("Embed requires a embedID param");if(!e.clientID)throw new Error("Embed requires a clientID param");var t,r={},l=e.bulkLabel||"NO_LABEL",d=e.videoFormat||"f4m",u=e.requestType||"default",c=e.device||"desktop",f=e.advSuffix||"",p="";r.id=e.embedID;var h=function(){var e=void 0!==document.location.origin?document.location.origin:document.location.protocol+"//"+document.location.hostname;return"/"===e[e.length-1]?e+="*":e+="/*",e=s.encode(e),e=e.replace(/\//g,"-"),e=e.replace(/\+/g,",")};r.read=function(){var r=o.proxyURL+e.embedID+"/"+e.clientID+"/"+c+"/"+l+"/"+d+"/"+u+"/"+h();return new i(function(e,i){n.read({uri:r,responseType:"document",useXDR:!0}).then(function(r){t=r;var n=t.getElementsByTagName("video")[0];if("true"===n.getAttribute("token_protection"))try{a.requestTokenSMP({authKey:n.getAttribute("token_protection_key")}).then(function(t){p=t,e(r)}).catch(function(e){throw new Error("Unable to get a token.")})}catch(e){}else e(r)}).catch(function(e){throw new Error("Error reading embed data.")})})};var m=function(){var e=t.getElementsByTagName("video")[0],r="";if(r="desktop"===c&&e.attributes.caching_type&&""!==e.attributes.caching_type.value?"akamai_adaptive_media_delivery"===e.attributes.caching_type.value?e.getElementsByTagName("iphone")[0].firstChild.data:e.getElementsByTagName("default")[0].firstChild.data:e.getElementsByTagName("iphone")[0].firstChild.data,null!==r.match(/\.m3u8$/)&&"mobile"===c){if(!document.createElement("video").canPlayType("application/vnd.apple.mpegurl")){var n=e.getElementsByTagName("mp4")[0].firstChild.data;""!==n&&(r=n)}}return r+p},v=function(e){var r=t.getElementsByTagName("video")[0];switch(e){case"mp4":return r.getElementsByTagName("mp4")[0].firstChild.data+p;case"f4m":return r.getElementsByTagName("default")[0].firstChild.data+p;default:return r.getElementsByTagName("iphone")[0].firstChild.data+p}};r.getVideo=function(e){return e?v(e):m()},r.getPoster=function(){var e=t.getElementsByTagName("video")[0];try{return e.getElementsByTagName("poster")[0].firstChild.data}catch(e){throw new Error("Video format "+format+" not exists")}};var g=function(e){for(var t=e.split("||"),r=null,n=0,i=0,o=t.length;i<o;i+=1){r=t[i].split("***");for(var a=0,s=r.length;a<s;a+=1)n=Math.floor(9e9*Math.random())+1e9,r[a]=r[a].replace(/\[random\]/g,n).replace(/%5Brandom%5D/g,n),""!==f&&(r[a]+=f);t[i]=r.join("***")}return t.join("||")};r.getPrerolls=function(e){for(var r,n,i,o,a=t.getElementsByTagName("preroll"),s=[],l=0,d=a.length;l<d;l+=1)r=a[l],r.getElementsByTagName("iphone")[0].firstChild.data,n=r.getElementsByTagName("default")[0].firstChild.data,i=n,""!==i&&!0===e&&(i=g(i)),i&&""!==i&&(o=i.split("||"),o.forEach(function(e){s.push({url:e,link:r.getElementsByTagName("link")[0].firstChild.data,type:r.getAttribute("type"),skip:r.getAttribute("skip"),skipTime:r.getAttribute("skip-time"),settingVolume:r.getAttribute("setting-volume")})}));return s},r.getMidrolls=function(e){for(var r,n,i,o,a,s,l=t.getElementsByTagName("midroll"),d=[],u=0,c=l.length;u<c;u+=1){o={mode:l[u].getAttribute("mode"),timeSetting:l[u].getAttribute("time_setting"),rolls:[]},a=l[u].getElementsByTagName("roll");for(var f=0,p=a.length;f<p;f+=1)r=a[f],r.getElementsByTagName("iphone")[0].firstChild.data,n=r.getElementsByTagName("default")[0].firstChild.data,i=n,""!==i&&!0===e&&(i=g(i)),i&&""!==i&&(s=i.split("||"),s.forEach(function(e){o.rolls.push({url:e,link:r.getElementsByTagName("link")[0].firstChild.data,type:r.getAttribute("type"),skip:r.getAttribute("skip"),skipTime:r.getAttribute("skip-time"),settingVolume:r.getAttribute("setting-volume")})}));d.push(o)}return d},r.getEndrolls=function(e){var r=t.getElementsByTagName("endroll")[0],n=[],i=(r.getElementsByTagName("iphone")[0].firstChild.data,r.getElementsByTagName("default")[0].firstChild.data),o=i;if(""!==o&&!0===e&&(o=g(o)),o&&""!==o){o.split("||").forEach(function(e){n.push({url:e,link:r.getElementsByTagName("link")[0].firstChild.data,type:r.getAttribute("type"),skip:r.getAttribute("skip"),skipTime:r.getAttribute("skip-time"),settingVolume:r.getAttribute("setting-volume")})})}return n};var y=function(e,r){var n=t.getElementsByTagName(r)[0];if(n&&"video"===n.getAttribute("type")){var i=n.getElementsByTagName("iphone")[0].firstChild.data,o=n.getElementsByTagName("default")[0].firstChild.data,a=n.getElementsByTagName("mp4")[0].firstChild.data,s=n.getElementsByTagName("link")[0].firstChild.data,l=o;return""!==l&&!0===e&&(l=g(l)),{url:{iphone:i,default:o,mp4:a},link:s,type:n.getAttribute("type"),skip:n.getAttribute("skip"),skipTime:n.getAttribute("skip-time"),settingVolume:n.getAttribute("setting-volume"),cachingType:n.getAttribute("caching_type"),id:n.getAttribute("id")}}return{}};return r.getRollVideo=function(e){return y(e,"preroll")},r.getRollVideoAdBlock=function(e){return y(e,"adblock-preroll")},r.getOverlay=function(e,r){if(!e||null===e.match(/initial|primary/))throw new Error("Invalid overlay type");var n=t.getElementsByTagName("overlay")[0],i=n.getElementsByTagName(e)[0],o=i.getElementsByTagName("tagurl")[0].firstChild.data,a={};return""!==o&&!0===r&&(o=g(o)),a.url=decodeURIComponent(o),a.stayTime=i.getAttribute("stay-time"),a.afterTime=i.getAttribute("after-time"),"primary"===e&&(a.fixed=i.getAttribute("fixed"),a.delayTime=i.getAttribute("delay-time"),a.maxDimensionWidth=i.getAttribute("max-dimension-width"),a.maxDimensionHeight=i.getAttribute("max-dimension-height")),a},r.getScrollMode=function(){var e=t.getElementsByTagName("scrollmode")[0],r={};if(e){r.enabled="1"===e.getAttribute("enabled"),r.muteOnMouseOver="1"===e.getAttribute("mute-on-mouse-over"),r.addVolumeIcon="1"===e.getAttribute("icon-volume");var n=e.getElementsByTagName("destroyOn");r.destroyOn=[];for(var i=0,o=n.length;i<o;i+=1)r.destroyOn.push(n[i].firstChild.data)}return r},r.getWatermark=function(){var e=t.getElementsByTagName("watermark")[0],r={};if(e){var n=e.getElementsByTagName("image"),i=e.getElementsByTagName("link"),o=e.getElementsByTagName("display");r.logoURL=n.length>0?e.getElementsByTagName("image")[0].firstChild.data:"",r.link=i.length>0?e.getElementsByTagName("link")[0].firstChild.data:"";var a=o.length>0?e.getElementsByTagName("display")[0]:null;null!==a&&(r.displayTime=a.getAttribute("time"),r.bottom=a.getAttribute("position-bottom"),r.right=a.getAttribute("position-right"),r.top=a.getAttribute("position-top"),r.left=a.getAttribute("position-left"),r.hide=a.getAttribute("hide")||!1,r.hide="1"===r.hide,r.opacity=a.getAttribute("opacity")||1,r.width=a.getAttribute("width"),r.height=a.getAttribute("height"))}return r},r.get_meride=function(e){try{var t=e.getElementsByTagName("meride")[0];return{staturl:t.getAttribute("staturl"),tecnology:t.getAttribute("tecnology")}}catch(e){return{}}},r.get_ama=function(e){try{return{beacon:e.getElementsByTagName("ama")[0].getElementsByTagName("beacon")[0].firstChild.data}}catch(e){return{}}},r.get_comscore=function(e){try{var t=e.getElementsByTagName("comscore")[0];return{user:t.getElementsByTagName("user")[0].firstChild.data,adtrack_start:t.getElementsByTagName("adtrack_start")[0].firstChild.data,adtrack_complete:t.getElementsByTagName("adtrack_complete")[0].firstChild.data,adtrack_standard:t.getElementsByTagName("adtrack_standard")[0].firstChild.data}}catch(e){return{}}},r.get_nielsen=function(e){try{var t=e.getElementsByTagName("nielsen")[0];return{clientid:t.getElementsByTagName("clientid")[0].firstChild.data,vcid:t.getElementsByTagName("vcid")[0].firstChild.data,cisuffix:t.getElementsByTagName("cisuffix")[0].firstChild.data,sfcode:t.getElementsByTagName("sfcode")[0].firstChild.data,prod:t.getElementsByTagName("prod")[0].firstChild.data}}catch(e){return{}}},r.get_webtrekk=function(e){try{var t=e.getElementsByTagName("webtrekk")[0];return{trackId:t.getElementsByTagName("track_id")[0].firstChild.data,trackDomain:t.getElementsByTagName("track_domain")[0].firstChild.data,mg:t.getElementsByTagName("mg")[0].firstChild.data}}catch(e){return{}}},r.getAnalytic=function(e){if(!e||"function"!=typeof this["get_"+e])throw new Error("Invalid analytics type");var r=t.getElementsByTagName("analytics")[0];return this["get_"+e](r)},r.getVideoProvider=function(){var e=t.getElementsByTagName("video")[0];return e.attributes.provider?e.attributes.provider.value:void 0},r};e.exports=l},function(e,t,r){"use strict";e.exports=r(10),r(103),r(104),r(105),r(106),r(107)},function(e,t,r){"use strict";var n=r(10);e.exports=n,n.prototype.done=function(e,t){(arguments.length?this.then.apply(this,arguments):this).then(null,function(e){setTimeout(function(){throw e},0)})}},function(e,t,r){"use strict";var n=r(10);e.exports=n,n.prototype.finally=function(e){return this.then(function(t){return n.resolve(e()).then(function(){return t})},function(t){return n.resolve(e()).then(function(){throw t})})}},function(e,t,r){"use strict";function n(e){var t=new i(i._61);return t._65=1,t._55=e,t}var i=r(10);e.exports=i;var o=n(!0),a=n(!1),s=n(null),l=n(void 0),d=n(0),u=n("");i.resolve=function(e){if(e instanceof i)return e;if(null===e)return s;if(void 0===e)return l;if(!0===e)return o;if(!1===e)return a;if(0===e)return d;if(""===e)return u;if("object"==typeof e||"function"==typeof e)try{var t=e.then;if("function"==typeof t)return new i(t.bind(e))}catch(e){return new i(function(t,r){r(e)})}return n(e)},i.all=function(e){var t=Array.prototype.slice.call(e);return new i(function(e,r){function n(a,s){if(s&&("object"==typeof s||"function"==typeof s)){if(s instanceof i&&s.then===i.prototype.then){for(;3===s._65;)s=s._55;return 1===s._65?n(a,s._55):(2===s._65&&r(s._55),void s.then(function(e){n(a,e)},r))}var l=s.then;if("function"==typeof l){return void new i(l.bind(s)).then(function(e){n(a,e)},r)}}t[a]=s,0==--o&&e(t)}if(0===t.length)return e([]);for(var o=t.length,a=0;a<t.length;a++)n(a,t[a])})},i.reject=function(e){return new i(function(t,r){r(e)})},i.race=function(e){return new i(function(t,r){e.forEach(function(e){i.resolve(e).then(t,r)})})},i.prototype.catch=function(e){return this.then(null,e)}},function(e,t,r){"use strict";function n(e,t){for(var r=[],n=0;n<t;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","return new Promise(function (rs, rj) {","var res = fn.call(",["self"].concat(r).concat([s]).join(","),");","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}function i(e){for(var t=Math.max(e.length-1,3),r=[],n=0;n<t;n++)r.push("a"+n);var i=["return function ("+r.join(",")+") {","var self = this;","var args;","var argLength = arguments.length;","if (arguments.length > "+t+") {","args = new Array(arguments.length + 1);","for (var i = 0; i < arguments.length; i++) {","args[i] = arguments[i];","}","}","return new Promise(function (rs, rj) {","var cb = "+s+";","var res;","switch (argLength) {",r.concat(["extra"]).map(function(e,t){return"case "+t+":res = fn.call("+["self"].concat(r.slice(0,t)).concat("cb").join(",")+");break;"}).join(""),"default:","args[argLength] = cb;","res = fn.apply(self, args);","}","if (res &&",'(typeof res === "object" || typeof res === "function") &&','typeof res.then === "function"',") {rs(res);}","});","};"].join("");return Function(["Promise","fn"],i)(o,e)}var o=r(10),a=r(19);e.exports=o,o.denodeify=function(e,t){return"number"==typeof t&&t!==1/0?n(e,t):i(e)};var s="function (err, res) {if (err) { rj(err); } else { rs(res); }}";o.nodeify=function(e){return function(){var t=Array.prototype.slice.call(arguments),r="function"==typeof t[t.length-1]?t.pop():null,n=this;try{return e.apply(this,arguments).nodeify(r,n)}catch(e){if(null===r||void 0===r)return new o(function(t,r){r(e)});a(function(){r.call(n,e)})}}},o.prototype.nodeify=function(e,t){if("function"!=typeof e)return this;this.then(function(r){a(function(){e.call(t,null,r)})},function(r){a(function(){e.call(t,r)})})}},function(e,t,r){"use strict";var n=r(10);e.exports=n,n.enableSynchronous=function(){n.prototype.isPending=function(){return 0==this.getState()},n.prototype.isFulfilled=function(){return 1==this.getState()},n.prototype.isRejected=function(){return 2==this.getState()},n.prototype.getValue=function(){if(3===this._65)return this._55.getValue();if(!this.isFulfilled())throw new Error("Cannot get a value of an unfulfilled promise.");return this._55},n.prototype.getReason=function(){if(3===this._65)return this._55.getReason();if(!this.isRejected())throw new Error("Cannot get a rejection reason of a non-rejected promise.");return this._55},n.prototype.getState=function(){return 3===this._65?this._55.getState():-1===this._65||-2===this._65?0:this._65}},n.disableSynchronous=function(){n.prototype.isPending=void 0,n.prototype.isFulfilled=void 0,n.prototype.isRejected=void 0,n.prototype.getValue=void 0,n.prototype.getReason=void 0,n.prototype.getState=void 0}},function(e,t,r){var n=r(21),i=r(15),o=r(33),a={requestTokenSMP:function(e){if(!e)throw new Error("TokenService requires some parameters");if(!e.authKey)throw new Error("TokenService requires a 'key' parameters");return new o(function(t,r){i.read({uri:n.tokenServiceURL,method:"post",responseType:"json",useXDR:!0,headers:{"Content-Type":"application/json",Accept:"application/json","api-token":e.authKey}}).then(function(e){t("?hdnts="+e.token)}).catch(function(e){throw new Error("Error reading embed data.")})})}};e.exports=a},function(e,t){var r={encode:function(e){var t,r,n,i,o,a,s,l,d="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",u=0,c=0,f="",p=[];if(!e)return e;e=unescape(encodeURIComponent(e));do{t=e.charCodeAt(u++),r=e.charCodeAt(u++),n=e.charCodeAt(u++),l=t<<16|r<<8|n,i=l>>18&63,o=l>>12&63,a=l>>6&63,s=63&l,p[c++]=d.charAt(i)+d.charAt(o)+d.charAt(a)+d.charAt(s)}while(u<e.length);f=p.join("");var h=e.length%3;return(h?f.slice(0,h-3):f)+"===".slice(h||3)}};e.exports=r},function(e,t,r){var n=r(111);r(132);window.meride=n},function(e,t,r){var n=r(112),i=r(35),o=r(34),a=window.meride||{};a.player={},a.player.Player=n,a.player.PlayerComponents=i,a.player.Skin=o,e.exports=a},function(e,t,r){function n(e){if(!e)throw new Error("No parameter to instanciate Player.");if(!e.src)throw new Error("No src parameter passed to Player.");if(!e.container)throw new Error("No container of the video element (container) parameter passed to Player.");if(e.container&&null===e.container.className.match(/meride-video-container/))throw new Error("Invalid Meride video container.");var t=this;t.container=e.container,t.container.setAttribute("data-plr-rnd-id",parseInt(9999*Math.random(),10));var r=t.container.querySelector("video");null!==r&&(r.pause(),r.src="",r.load(),r.remove()),t.container.innerHTML="",t.hls=null,t.video=document.createElement("video"),t.video.setAttribute("width",e.width||540),t.video.setAttribute("height",e.height||302),t.video.setAttribute("playsinline",""),t.video.setAttribute("webkit-playsinline",""),t.video.style.width=(e.width||540)+"px",t.video.style.height=(e.height||302)+"px",t.container.style.width=(e.width||540)+"px",t.container.style.height=(e.height||302)+"px";var n=!1!==e.loadDefaultFonts,f=e.skin||new i({loadDefaultFonts:n}),p=f.components,h=function(){try{return window.MediaSource&&"function"==typeof window.MediaSource.isTypeSupported&&window.MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"')}catch(e){return!1}}(),m=!(!0!==h||!e.src.match(/\.m3u8/)),v=e.hlsOpts||{},g=e.controls||[],y=!1!==e.showPauseBtnOnMouseOver,E=new o({video:t.video,controls:g,clickableVideo:!0===e.clickableVideo,dblClickFullscreen:!1!==e.dblClickFullscreen,skin:f,container:t.container,showPauseBtnOnMouseOver:y,cbAutoHide:!1!==e.cbAutoHide,showVolumeBar:!1!==e.showVolumeBar,showQualitySelection:!1!==e.showQualitySelection,showAudioTracksSelection:!1!==e.showAudioTracksSelection,showSubtitleTracksSelection:!1!==e.showSubtitleTracksSelection,volume:e.volume,muted:e.muted,canPlayHLS:m,enableFullscreen:!1!==e.enableFullscreen,is360:!0===e.is360,config360:e.config360||{}}),b=new s;void 0===v.maxBufferLength&&(v.maxBufferLength=8),void 0===v.maxMaxBufferLength&&(v.maxMaxBufferLength=8),void 0===v.capLevelToPlayerSize&&(v.capLevelToPlayerSize=!1),t.on=function(e,t){return b.on(e,t)},t.off=function(e,t){return b.off(e,t)},E.on("firstPlaying",function(){b.emit("meride.first_play")}),E.on("meride.enterfullscreen",function(){b.emit("meride.enterfullscreen")}),E.on("meride.exitfullscreen",function(){b.emit("meride.exitfullscreen")}),E.on("meride.seek_start",function(){b.emit("meride.seek_start")}),t.video.setAttribute("src",e.src);var w=function(){b.emit("meride.loadedmetadata")};if(t.video.addEventListener("loadedmetadata",w,!1),e.tracks){new a({tracks:e.tracks,video:t.video}).render();new l({tracks:e.tracks,container:f.components.settings,video:t.video})}if(t.watermark=null,e.watermark){e.watermark.container=t.container,e.watermark.interactionManager=E;var _=new d(e.watermark);t.watermark=_,_.render()}if(e.autoPlay&&!0===e.autoPlay&&t.video.setAttribute("autoplay","true"),e.loop&&!0===e.loop&&t.video.setAttribute("loop","true"),navigator.userAgent.match(/(iPod|iPhone|iPad)/)){var T=document.createElement("style");T.type="text/css",T.innerHTML="video { -webkit-transform-style: preserve-3d; } video::-webkit-media-controls-start-playback-button { display: none; }",document.body.appendChild(T)}t.enableSeek=function(){E.disableSeek(),E.enableSeek()},t.disableSeek=function(){E.disableSeek()},t.toggleControlBar=function(){"none"===p.controlBar.style.display?(p.controlBar.style.display="block",b.emit("meride.controlbarShown")):(p.controlBar.style.display="none",b.emit("meride.controlbarHidden"))},t.disableControlBar=function(){p.controlBarContainer.style.visibility="hidden",p.controlBar.style.visibility="hidden",b.emit("meride.controlbarDisabled")},t.enableControlBar=function(){p.controlBarContainer.style.visibility="visible",p.controlBar.style.visibility="visible",b.emit("meride.controlbarDisabled")},t.reload=function(e){e&&(m?(t.container.style.visibility="hidden",A({src:e}),t.container.style.visibility="visible"):t.video.setAttribute("src",e))};var A=function(e){null!==t.hls&&(t.video.src="",t.hls.detachMedia(),t.hls.destroy());var r=function(){t.hls.off(c.Events.MEDIA_ATTACHED,r),t.hls.loadSource(e.src),t.hls.on(c.Events.LEVEL_PTS_UPDATED,function(e,r){E.levelChanged(t.hls.levels[r.level])}),t.hls.on(c.Events.AUDIO_TRACKS_UPDATED,function(e,t){E.audioTracks(t.audioTracks)}),t.hls.on(c.Events.AUDIO_TRACK_LOADED,function(e,t){E.audioTrackChanged(t)}),t.hls.on(c.Events.SUBTITLE_TRACKS_UPDATED,function(e,t){E.subtitleTracks(t.subtitleTracks)}),t.hls.on(c.Events.SUBTITLE_TRACK_LOADED,function(e,t){E.subtitleTrackChanged(t)}),t.hls.on(c.Events.MANIFEST_PARSED,function(e,r){t.hls.autoLevelCapping>0&&t.hls.levels.length-1<=t.hls.autoLevelCapping&&(t.hls.autoLevelCapping=t.hls.levels.length-1),b.emit("meride.manifest_parsed"),void 0!==v.loadLevel&&t.hls.startLoad(),E.on("meride.qualityChanged",function(e){t.hls.currentLevel=e.arguments[0]}),E.on("meride.audioTrackChanged",function(e){t.hls.audioTrack=e.arguments[0]}),E.on("meride.subtitleTrackChanged",function(e){t.hls.subtitleTrack=e.arguments[0]}),void 0!==v.autoLevelCapping&&v.autoLevelCapping>-1?t.hls.autoLevelCapping=v.autoLevelCapping:t.hls.autoLevelCapping=-1;var n=t.hls.levels.filter(function(e,r){return-1===t.hls.autoLevelCapping||r<t.hls.levels.length&&r<=t.hls.autoLevelCapping});E.qualityLevels(n)})};void 0!==v.loadLevel&&(v.autoStartLoad=!1),t.hls=new c(v),void 0!==v.loadLevel&&(t.hls.loadLevel=v.loadLevel),t.hls.on(c.Events.ERROR,function(e,r){if(b.emit("meride.hlsobject_error",e,r),r.fatal)switch(r.type){case c.ErrorTypes.NETWORK_ERROR:t.hls.startLoad();break;case c.ErrorTypes.MEDIA_ERROR:t.hls.swapAudioCodec(),t.hls.recoverMediaError();break;default:t.hls.destroy()}else switch(r.type){case c.ErrorTypes.MEDIA_ERR_DECODE:t.hls.swapAudioCodec(),t.hls.recoverMediaError()}}),t.video.addEventListener("error",function(e){if("error"===e.type){var r=e.currentTarget.error;switch(r.code){case r.MEDIA_ERR_DECODE:t.hls.swapAudioCodec(),t.hls.recoverMediaError()}}}),t.hls.attachMedia(t.video),t.hls.on(c.Events.MEDIA_ATTACHED,r),b.emit("meride.hlsobject_ready")};if(t.enableKeyboard=function(e){return E.enableKeyboard(e)},!0===m&&(t.container.style.visibility="hidden",A({src:e.src}),t.container.style.visibility="visible"),null!==f.css){t.container.style.visibility="hidden";var S=function(){p.render(t.container),t.container.style.visibility="visible"};u.include(f.css,S,S)}else p.render(t.container)}var i=r(34),o=r(116),a=r(126),s=r(0),l=r(127),d=r(129),u=(r(3),r(130)),c=r(131);window.Hls=c,n.prototype.play=function(){this.video.play()},n.prototype.pause=function(){this.video.pause()},n.prototype.rewind=function(e){try{this.video.currentTime=0,!0===e&&this.video.play()}catch(e){}},n.prototype.resize=function(e){this.container.style.width=(e.width||this.container.offsetWidth)+"px",this.container.style.height=(e.height||this.container.offsetHeight)+"px",this.video.style.width=(e.width||this.video.offsetWidth)+"px",this.video.style.height=(e.height||this.video.offsetHeight)+"px",this.video.setAttribute("width",e.width||this.video.offsetWidth),this.video.setAttribute("height",e.height||this.video.offsetHeight)},e.exports=n},function(e,t,r){var n=r(114);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(38)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){t=e.exports=r(37)(!1),t.push([e.i,"@import url(https://fonts.googleapis.com/css?family=Open+Sans:700);",""]),t.push([e.i,"",""])},function(e,t){e.exports=function(e){var t="undefined"!=typeof window&&window.location;if(!t)throw new Error("fixUrls requires window.location");if(!e||"string"!=typeof e)return e;var r=t.protocol+"//"+t.host,n=r+t.pathname.replace(/\/[^\/]*$/,"/");return e.replace(/url\s*\(((?:[^)(]|\((?:[^)(]+|\([^)(]*\))*\))*)\)/gi,function(e,t){var i=t.trim().replace(/^"(.*)"$/,function(e,t){return t}).replace(/^'(.*)'$/,function(e,t){return t});if(/^(#|data:|http:\/\/|https:\/\/|file:\/\/\/)/i.test(i))return e;var o;return o=0===i.indexOf("//")?i:0===i.indexOf("/")?r+i:n+i.replace(/^\.\//,""),"url("+JSON.stringify(o)+")"})}},function(e,t,r){function n(e){if(!e.video)throw new Error("InteractionManager needs a video element");if(!e.skin)throw new Error("InteractionManager needs a Skin");if(!e.container)throw new Error("InteractionManager needs a video container element");var t,r=e.video,n=e.container,g=e.skin,y=g.components,E=new s,b=!1,w=!0,_=!1!==e.enableFullscreen,T=!1!==e.cbAutoHide,A=!1!==e.showVolumeBar,S=!1!==e.showQualitySelection,L=!1!==e.showAudioTracksSelection,k=!1!==e.showSubtitleTracksSelection,D=void 0!==e.volume?e.volume:.8,C=!1!==e.showPauseBtnOnMouseOver,R=!0===e.clickableVideo,x=!1!==e.dblClickFullscreen,O=o.addClickTouch,I=o.removeClickTouch,M=!1,P=!1,N=!0===e.is360;this.on=function(e,t){return E.on(e,t)},this.off=function(e,t){return E.off(e,t)},E.on("firstPlaying",function(){y.progressBar.style.display="block",O(n,X)}),u.applyStyles([y.progressBar,y.topBar],{display:"none"});var B,F,j=function(t){r.removeEventListener("loadedmetadata",j),M=!0,!1!==e.enableSeek?(Ae(),_e()):(Se(),Te()),r.offsetWidth<=380&&(y.playBtn.className=y.playBtn.className+" boxcenterBtnSmall",y.pauseBtn.className=y.playBtn.className+" boxcenterBtnSmall")},U=function(){P||M||(r.load(),P=!0),r.play(),u.applyStyles([y.playBtn,y.playSmallBtn],{display:"none"}),u.applyStyles([y.pauseBtn,y.pauseSmallBtn],{display:"inline-block"})},V=function(e){if(!0===T&&!r.paused&&!b){var t=function(){y.controlBarContainer.style.display="none",E.emit("meride.controlbarHidden")};e&&!1===e.timeout?t():setTimeout(function(){t()},1e3)}},G=function(){y.controlBarContainer.style.display="block",E.emit("meride.controlbarShown")},q=function(e){U(),e.preventDefault()},H=function(e){r.pause(),e.preventDefault()},K=null,W=function(){K=setTimeout(function(){r.paused?Y(null):(V({timeout:!1}),u.applyStyles([y.playBtn,y.pauseBtn],{display:"none"}))},2e3)},z=function(e){u.applyStyles([y.playBtn,y.playSmallBtn,y.loadingSpinner],{display:"none"}),u.applyStyles([y.pauseBtn,y.pauseSmallBtn],{display:"inline-block"}),W()},Y=function(e){clearTimeout(K),G(),u.applyStyles([y.pauseBtn,y.pauseSmallBtn],{display:"none"}),u.applyStyles([y.playBtn,y.playSmallBtn],{display:"inline-block"})},X=function(e){r.paused||N||(u.applyStyles([y.pauseBtn,y.controlBarContainer],{display:"block"}),clearTimeout(K),W()),e.preventDefault()},Q=function(e){w&&(w=!1,E.emit("firstPlaying")),y.loadingSpinner.style.display="none"},J=function(e){y.progressBarSpinner.style.width=100*r.currentTime/r.duration+"%",y.seekBtn.style.left=y.progressBarSpinner.style.width,y.timeUpdate.innerHTML=a.formatTime(r.currentTime.toFixed(0))},Z=function(){try{F=r.buffered}catch(e){F=[]}F.length>0?(y.bufferContainer.style.width=100*F.end(0)/r.duration+"%",F.end(0)===r.duration&&clearInterval(B)):clearInterval(B)},$=function(e){y.duration.innerHTML=a.formatTime(r.duration.toFixed(0)),B=setInterval(Z,1e3)},ee=function(){y.loadingSpinner.style.display="inline-block"},te=function(){y.loadingSpinner.style.display="none"},re=function(){y.loadingSpinner.style.display="none"},ne=0,ie=0,oe=0,ae=function(e){"none"===y.settings.style.display||""===y.settings.style.display?y.settings.style.display="block":y.settings.style.display="none",e.preventDefault()},se=function(e){y.settings.style.display="none",e.preventDefault()},le=!r.paused,de=function(e){le=!r.paused,r.pause(),E.emit("meride.seek_start")},ue=function(e){if(!isNaN(r.duration))try{fe=y.seekBtn.getClientRects()[0],pe=y.progressBar.getClientRects()[0],ne=y.seekBtn.offsetLeft,ne<y.seekBtn.offsetWidth/2*-1?r.currentTime=0:(oe=(fe.left+y.seekBtn.offsetWidth-pe.left-y.seekBtn.offsetWidth/2)/pe.width*r.duration,r.currentTime=isFinite(oe)?oe:r.currentTime)}catch(e){ne=y.seekBtn.offsetLeft,ne<0?r.currentTime=0:(ie=ne/(y.progressBar.offsetWidth-y.seekBtn.offsetWidth/2),oe=parseFloat(r.duration*ie).toFixed(1),r.currentTime=isFinite(oe)?oe:r.currentTime)}},ce=function(e){le&&r.play(),r.paused||V()},fe=[],pe=[],he=function(e){if(!isNaN(r.duration))try{fe=y.seekBtn.getClientRects()[0],pe=y.progressBar.getClientRects()[0],ne=y.seekBtn.offsetLeft,ne<y.seekBtn.offsetWidth/2*-1?r.currentTime=0:(oe=(fe.left+y.seekBtn.offsetWidth-pe.left-y.seekBtn.offsetWidth/2)/pe.width*r.duration,r.currentTime=isFinite(oe)?oe:r.currentTime)}catch(e){ne=y.seekBtn.offsetLeft,ne<0?r.currentTime=0:(ie=ne/(y.progressBar.offsetWidth-y.seekBtn.offsetWidth/2),oe=parseFloat(r.duration*ie).toFixed(1),r.currentTime=isFinite(oe)?oe:r.currentTime)}},me=function(e){b=!1,le&&r.play(),r.paused||V(),y.seekBtn.className="md-seekBtn"},ve=function(e){b=!0,le=!r.paused,r.pause(),E.emit("meride.seek_start"),y.seekBtn.className="md-seekBtn moving"},ge=function(e){var t=function(){var t=y.progressBar.getBoundingClientRect(),n=e.pageX-t.left;n<0&&(n=0),n>t.width&&(n=t.width),this.style.left=n+"px",n>this.offsetWidth/2&&n<y.progressBar.offsetWidth-this.offsetWidth/2?this.style.left=n-this.offsetWidth/2+"px":(n<=y.progressBar.offsetLeft+this.offsetWidth/2&&(this.style.left="0px"),n>=y.progressBar.offsetWidth-this.offsetWidth/2&&(this.style.left=y.progressBar.offsetWidth-this.offsetWidth+"px")),this.innerText=a.formatTime(Math.floor(n*r.duration/y.progressBar.offsetWidth))};isNaN(r.duration)||e.target===y.timeTooltip||(y.timeTooltip.style.visibility="visible",t.apply(y.timeTooltip))},ye=function(e){y.timeTooltip.style.visibility="hidden"},Ee=function(e){var t=y.progressBar.offsetWidth,n=y.progressBar.getBoundingClientRect(),i=0,o=0;i=window.TouchEvent&&e instanceof TouchEvent&&e.changedTouches.length>0?e.changedTouches[0].pageX-n.left:e.pageX-n.left,o=i/t;try{r.currentTime=o*r.duration}catch(e){}},be=function(){},we=function(){return r.offsetWidth>380?"md-progressBar":"md-progressBar progressBarTop"},_e=function(){y.progressBar.className=we(),be=O(y.progressBar,Ee)},Te=function(){y.progressBar.className=we()+" disabled",I(y.progressBar,be)},Ae=function(){y.seekBtn.style.display="inline-block",void 0===t&&(t=new d({handlerEl:y.seekBtn,barEl:y.progressBar})),t.on("meride.slider_mousemove",ue),t.on("meride.slider_mouseup",ce),t.on("meride.slider_mousedown",de),t.on("meride.slider_movetouch",he),t.on("meride.slider_movetouch_notreqanim",he),t.on("meride.slider_touchend",me),t.on("meride.slider_touchstart",ve);var e=0;try{e=r.currentTime/r.duration}catch(e){}t.init({level:e})},Se=function(){y.seekBtn.style.display="none",void 0!==t&&(t.off("meride.slider_mousemove",ue),t.off("meride.slider_mouseup",ce),t.off("meride.slider_mousedown",de),t.off("meride.slider_movetouch",he),t.off("meride.slider_movetouch_notreqanim",he),t.off("meride.slider_touchend",me),t.off("meride.slider_touchstart",ve),t.end())};y.pauseBtn.style.display="none";var Le=-1,ke=-1,De=function(e){G(),i.isFullScreen()&&(n.style.cursor="default"),r.paused||!0!==C||(y.pauseBtn.style.display="inline-block"),setTimeout(function(){e.clientX===Le&&e.clientY===ke&&(V(),i.isFullScreen()&&(n.style.cursor="none"),r.paused||(y.pauseBtn.style.display="none"))},2e3),Le=e.clientX,ke=e.clientY};if(n.addEventListener("mousemove",De),O(y.playBtn,q),O(y.pauseBtn,H),O(y.playSmallBtn,q),O(y.pauseSmallBtn,H),O(y.settingBtn,ae),O(y.closeSettingsBtn,se),!1===_)y.fullBtn.style.display="none";else{new c({skinComponents:y,video:r,container:n,interactionManagerDispatcher:E,dblClickFullscreen:x}).init()}if(r.addEventListener("loadedmetadata",j,!1),r.addEventListener("timeupdate",J,!1),r.addEventListener("durationchange",$,!1),r.addEventListener("playing",Q,!1),r.addEventListener("play",z,!1),r.addEventListener("pause",Y,!1),r.addEventListener("waiting",ee,!1),r.addEventListener("canplay",te,!1),r.addEventListener("seeked",re,!1),r.setAttribute("src",e.src),r.setAttribute("preload",e.preload||"metadata"),e.poster&&r.setAttribute("poster",e.poster),!0===N){var Ce=e.config360||{};new v({container:n,video:r,driver:"AFrame",scriptURL:Ce.scriptURL,vrModeUI:Ce.vrModeUI,embedded:Ce.embedded,skinComponents:y,interactionManagerDispatcher:E}).setUp().init(),n.addEventListener("touchstart",De)}else u.applyStyles([y.vrBtnContainer],{display:"none"}),n.appendChild(r);if(this.enableSeek=function(){Se(),Te(),Ae(),_e()},this.disableSeek=function(){Se(),Te()},this.toggleControlBar=function(){"none"===y.controlBarContainer.style.display?(y.controlBarContainer.style.display="block",E.emit("meride.controlbarShown")):(y.controlBarContainer.style.display="none",E.emit("meride.controlbarHidden"))},this.showControlBar=G(),this.hideControlBar=V(),u.applyStyles([y.volumeOnBtn,y.volumeOn1_3Btn,y.volumeOn2_3Btn,y.volumeOffBtn],{display:"none"}),!0===A){new f({skinComponents:y,video:r,container:n,interactionManagerDispatcher:E,volume:D,muted:e.muted}).init()}if(y.controlBarCenter.addEventListener("mousemove",ge,!1),y.controlBarCenter.addEventListener("mouseout",ye,!1),this.levelChanged=function(){},this.qualityLevels=function(){},u.applyStyles([y.qualityContainer,y.qualityBtn,y.qualityHDBtn],{display:"none"}),!0===S){var Re=new p({skinComponents:y,video:r,container:n,interactionManagerDispatcher:E});this.levelChanged=function(e){E.emit("meride.qualityLevelChanged",e),Re.levelChanged(e)},this.qualityLevels=function(e){E.emit("meride.qualityLevelsReady",e),Re.qualityLevels(e)},Re.init()}if(this.audioTrackChanged=function(){},this.audioTracks=function(){},u.applyStyles([y.audioTracksContainer],{display:"none"}),!0===L){var xe=new h({skinComponents:y,video:r,container:n,interactionManagerDispatcher:E});this.audioTrackChanged=xe.audioTrackChanged,this.audioTracks=xe.audioTracks,xe.init()}if(this.subtitleTrackChanged=function(){},this.subtitleTracks=function(){},u.applyStyles([y.subtitleTracksContainer],{display:"none"}),!0===k){var Oe=new m({skinComponents:y,video:r,container:n,interactionManagerDispatcher:E});this.subtitleTrackChanged=Oe.subtitleTrackChanged,this.subtitleTracks=Oe.subtitleTracks,Oe.init()}if(!0===R){O(r,function(e){return r.paused?r.play():r.pause(),!1}),r.className+=" clickable-video"}var Ie=null;e.controls&&-1!==e.controls.indexOf("keyboard")&&(Ie=new l({player:r,container:n})),this.enableKeyboard=function(e){Ie.enabled=e},r.paused&&Y()}var i=r(14),o=r(2),a=r(117),s=r(0),l=r(118),d=r(39),u=r(5),c=r(119),f=r(120),p=r(121),h=r(122),m=r(123),v=r(124);e.exports=n},function(e,t){var r={formatTime:function(e){var t=parseInt(e,10),r=Math.floor(t/3600),n=Math.floor((t-3600*r)/60),i=t-3600*r-60*n;return r<10&&(r="0"+r),n<10&&(n="0"+n),i<10&&(i="0"+i),isNaN(r)||isNaN(n)||isNaN(i)?"":"00"!==r?r+":"+n+":"+i:n+":"+i}};e.exports=r},function(e,t){var r=function(e){if(!e)throw new Error("No parameter passed to Keyboard. 'player' and 'container' params required");if(!e.player)throw new Error("No player passed to Keyboard. 'player' param required");if(!e.container)throw new Error("No player passed to Keyboard. 'container' param required");var t={},r=e.player,n=e.container,i=-1;correctVolumeVal=function(e){return e<=0?0:e>=1?1:e},correctTimeVal=function(e){return e<=0?0:(e>=r.duration&&r.duration,e)},t.enabled=!0;var o=function(e){if(!1!==t.enabled&&i===n.getAttribute("data-plr-rnd-id")){e.preventDefault();var o=document.activeElement.tagName.toUpperCase(),a=document.activeElement.getAttribute("contenteditable");if("INPUT"!==o&&"TEXTAREA"!==o&&""!==a&&"true"!==a){var s=e||window.event;switch(s.keyCode){case 32:s.preventDefault(),r.paused?r.play():r.pause();break;case 37:s.preventDefault(),r.currentTime=correctTimeVal(r.currentTime-5);break;case 39:s.preventDefault(),r.currentTime=correctTimeVal(r.currentTime+5);break;case 38:s.preventDefault(),r.volume=correctVolumeVal(r.volume+.1);break;case 40:s.preventDefault(),r.volume=correctVolumeVal(r.volume-.1)}}}},a=function(e){var t=e.path||e.composedPath&&e.composedPath();if(t){return t.filter(function(e){return"meride-video-container"===e.className})}try{var r=e.target.parentNode;if(-1!==r.className.search("meride-video-container"))return[r]}catch(e){}return[]};return document.body.addEventListener("click",function(e){var t=a(e);t.length>0?(i=t[0].getAttribute("data-plr-rnd-id"),document.documentElement.addEventListener("keydown",o)):document.documentElement.removeEventListener("keydown",o)},!0),t};e.exports=r},function(e,t,r){var n=r(14),i=r(2),o=r(5),a=function(e){if(!e)throw new Error("No options interactions/Fullscreen");if(!e.skinComponents)throw new Error("No skinComponents interactions/Fullscreen");if(!e.video)throw new Error("No video interactions/Fullscreen");if(!e.container)throw new Error("No container interactions/Fullscreen");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/Fullscreen");var t={},r=n.getFullScreenAPI().api,a=i.addClickTouch,s=(i.removeClickTouch,e.skinComponents),l=e.video,d=e.container,u=e.interactionManagerDispatcher,c=!1!==e.dblClickFullscreen,f=function(e){if(e.preventDefault(),n.isFullScreen())r.exitFullscreen(document);else try{r.requestFullscreen(d)}catch(e){r.requestFullscreen(l)}},p=function(e){n.isFullScreen()||r.requestFullscreen(l)},h=function(e){n.isFullScreen()?(o.applyStyles([l,d],{width:"100%",height:"100%"}),s.fullBtn.style.display="none",s.reduceBtn.style.display="inline-block",u.emit("meride.enterfullscreen")):(o.applyStyles([l,d],{width:l.getAttribute("width")+"px",height:l.getAttribute("height")+"px"}),s.reduceBtn.style.display="none",s.fullBtn.style.display="inline-block",d.style.cursor="default",u.emit("meride.exitfullscreen")),u.emit("fullscreenChange",n.isFullScreen())},m=function(e){l.removeEventListener("playing",m),navigator.userAgent.match(/(iPod|iPhone|iPad)/)&&(n.isFullScreen()?(s.fullBtn.style.display="none",s.reduceBtn.style.display="inline-block"):(s.reduceBtn.style.display="none",s.fullBtn.style.display="inline-block"),a(s.fullBtn,f),a(s.reduceBtn,f))};return t.init=function(){n.attachOnFullScreenError(l.ownerDocument,p),n.attachOnFullScreenChange(l.ownerDocument,h),navigator.userAgent.match(/(iPod|iPhone|iPad)/)?s.fullBtn.style.display="none":(a(s.fullBtn,f),a(s.reduceBtn,f)),l.addEventListener("playing",m,!1),!0===c&&l.addEventListener("dblclick",f,!1)},t};e.exports=a},function(e,t,r){var n=r(2),i=r(5),o=r(39),a=function(e){if(!e)throw new Error("No options inteactions/Volume");if(!e.skinComponents)throw new Error("No skinComponents inteactions/Volume");if(!e.video)throw new Error("No video inteactions/Volume");if(!e.container)throw new Error("No container inteactions/Volume");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher inteactions/Volume");var t,r={},a=n.addClickTouch,s=(n.removeClickTouch,e.skinComponents),l=e.video,d=(e.container,e.interactionManagerDispatcher,void 0!==e.volume&&e.volume>=0&&e.volume<=1?e.volume:.8),u=!0===e.muted,c=function(){var e=window.navigator.userAgent,t=e.indexOf("OS ");return(e.indexOf("iPhone")>-1||e.indexOf("iPad")>-1)&&t>-1&&window.Number(e.substr(t+3,3).replace("_","."))}(),f=function(e){setTimeout(function(){v()},500)},p=function(e){s.volumeHandlerBtn.offsetTop>=84?l.volume=0:s.volumeHandlerBtn.offsetTop>0&&(l.volume=parseFloat(1-s.volumeHandlerBtn.offsetTop/84).toFixed(1))},h=function(e){l.muted=!0,e.preventDefault()},m=function(e){l.muted=!1,l.volume<.1&&(l.volume=.5),e.preventDefault()},v=function(e){!0===l.muted||0===l.volume?(i.applyStyles([s.volumeOnBtn,s.volumeOn1_3Btn,s.volumeOn2_3Btn],{display:"none"}),s.volumeOffBtn.style.display="inline-block"):(i.applyStyles([s.volumeOffBtn,s.volumeOn1_3Btn,s.volumeOn2_3Btn,s.volumeOnBtn],{display:"none"}),l.volume<.4?s.volumeOn1_3Btn.style.display="inline-block":l.volume<.7?s.volumeOn2_3Btn.style.display="inline-block":s.volumeOnBtn.style.display="inline-block"),!1===t.mouseDown()&&t.setPosition({level:l.volume})},g=function(e){s.volumeBarContainer.className="volumeBarContainer active"},y=function(e){s.volumeBarContainer.className="volumeBarContainer inactive"};return r.init=function(){l.volume=d,l.muted=u,s.volumeBarContainer.className="volumeBarContainer inactive",t=new o({handlerEl:s.volumeHandlerBtn,barEl:s.volumeBarLevel,scrollDirection:"vertical",initLoad:d,spinnerEl:s.volumeBarSpinner}),t.on("meride.slider_mousemove",p),t.init(),s.volumeContainer.addEventListener("mouseover",g,!1),s.volumeContainer.addEventListener("mouseout",y,!1),l.addEventListener("loadedmetadata",f,!1),l.addEventListener("volumechange",v,!1),navigator.userAgent.match(/(iPod|iPhone|iPad)/)?c>=10?(s.volumeBarContainer.style.display="none",a(s.volumeOnBtn,h),a(s.volumeOffBtn,m)):s.volumeContainer.style.display="none":(a(s.volumeOnBtn,h),a(s.volumeOn1_3Btn,h),a(s.volumeOn2_3Btn,h),a(s.volumeOffBtn,m)),v()},r};e.exports=a},function(e,t,r){var n=r(2),i=r(5),o=function(e){if(!e)throw new Error("No options interactions/HlsQuality");if(!e.skinComponents)throw new Error("No skinComponents interactions/HlsQuality");if(!e.video)throw new Error("No video interactions/HlsQuality");if(!e.container)throw new Error("No container interactions/HlsQuality");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/HlsQuality");var t,r,o={},a=n.addClickTouch,s=(n.removeClickTouch,e.skinComponents),l=e.video,d=(e.container,e.interactionManagerDispatcher),u=function(e){d.emit("meride.qualityChanged",Number(e),r)},c=function(e){var t=document.querySelector(".qualityMenu .settingChooseMenuLinkActive");t&&(t.className="settingChooseMenuLink"),e.className="settingChooseMenuLinkActive"},f=function(e){var t=e.currentTarget;s.qualitySelectionContainer.className="qualitySelectionContainer inactive",c(t),u(t.getAttribute("data-quality")),e.preventDefault()},p=function(e){s.qualitySelectionContainer.className="qualitySelectionContainer active"},h=function(e){s.qualitySelectionContainer.className="qualitySelectionContainer inactive"},m=function(e){"qualitySelectionContainer inactive"===s.qualitySelectionContainer.className?s.qualitySelectionContainer.className="qualitySelectionContainer active":s.qualitySelectionContainer.className="qualitySelectionContainer inactive",e.preventDefault()};return o.levelChanged=function(e){if(!(r&&r.length<=1))if(void 0!==e.width&&void 0!==e.height){e.width>=1280&&e.height>=720?(s.qualityBtn.style.display="none",s.qualityHDBtn.style.display="inline-block"):(s.qualityHDBtn.style.display="none",s.qualityBtn.style.display="inline-block");var t=document.querySelector(".qualityMenu a[data-height='"+e.height+"']");null!==t&&c(document.querySelector(".qualityMenu a[data-height='"+e.height+"']"))}else e.bitrate>72e4?(s.qualityBtn.style.display="none",s.qualityHDBtn.style.display="inline-block"):(s.qualityHDBtn.style.display="none",s.qualityBtn.style.display="inline-block"),c(document.querySelector(".qualityMenu a[data-bitrate='"+e.bitrate+"']"))},o.qualityLevels=function(e){if(r=e,e&&e.length>1){s.qualityContainer.style.display="table-cell";try{s.qualitySelectionContainer.removeChild(t)}catch(e){}t.innerHTML="";var n;n=document.createElement("a"),n.className="settingChooseMenuLink",n.innerHTML="auto",n.setAttribute("href","#"),n.setAttribute("data-quality","-1"),n.setAttribute("data-bitrate","-1"),a(n,f),t.appendChild(n);var i,o="",l=e.length-1,d=e.slice();d.reverse(),d.forEach(function(e,r,s){o="",n=document.createElement("a"),n.className="settingChooseMenuLink",i=Math.floor(parseInt(e.bitrate,10)/1e3),void 0!==e.width&&void 0!==e.height?(e.width>=1280&&e.height>=720&&(o="HD"),e.width>=1920&&e.height>=1080&&(o="FHD"),e.width>=3840&&e.height>=2160&&(o="4k"),n.innerHTML=e.height+"p"):(i>720&&i<2160?o="HD":i>=2160&&(o="4k"),n.innerHTML=i),n.innerHTML+='<span class="hd_apex">'+o+"</span>",n.setAttribute("data-quality",l),n.setAttribute("data-bitrate",e.bitrate),n.setAttribute("data-width",e.width),n.setAttribute("data-height",e.height),a(n,f),t.appendChild(n),l-=1}),s.qualitySelectionContainer.appendChild(t)}},o.init=function(){s.qualitySelectionContainer.className="qualitySelectionContainer inactive",t=document.createElement("div"),t.className="qualityMenu settingChooseMenu",s.qualityContainer.addEventListener("mouseover",p,!1),s.qualityContainer.addEventListener("mouseout",h,!1),a(s.qualityBtn,m),a(s.qualityHDBtn,m),s.qualitySelectionContainer.style.maxHeight=l.offsetHeight-120+"px"},i.applyStyles([s.qualityContainer],{display:"none"}),o};e.exports=o},function(e,t,r){var n=r(2),i=r(5),o=function(e){if(!e)throw new Error("No options interactions/AudioTracks");if(!e.skinComponents)throw new Error("No skinComponents interactions/AudioTracks");if(!e.video)throw new Error("No video interactions/AudioTracks");if(!e.container)throw new Error("No container interactions/AudioTracks");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/AudioTracks");var t,r,o={},a=n.addClickTouch,s=(n.removeClickTouch,e.skinComponents),l=e.video,d=(e.container,e.interactionManagerDispatcher),u=[],c=[],f=function(e){d.emit("meride.audioTrackChanged",e)},p=function(e){if(e){var t=document.querySelector(".audioTracksMenu .settingChooseMenuLinkActive");t&&(t.className="settingChooseMenuLink"),e.className="settingChooseMenuLinkActive"}},h=function(e){s.audioTracksLabel.innerHTML=e},m=function(e){try{var t=e.currentTarget;s.audioTracksSelectionContainer.className="audioTracksSelectionContainer inactive",p(t),f(t.getAttribute("data-audiotrack"))}catch(e){}e.preventDefault()},v=function(e){s.audioTracksSelectionContainer.className="audioTracksSelectionContainer active"},g=function(e){s.audioTracksSelectionContainer.className="audioTracksSelectionContainer inactive"},y=function(e){"audioTracksSelectionContainer inactive"===s.audioTracksSelectionContainer.className?s.audioTracksSelectionContainer.className="audioTracksSelectionContainer active":s.audioTracksSelectionContainer.className="audioTracksSelectionContainer inactive",e.preventDefault()},E=function(e){b(e)},b=function(e){if((r=u[e])&&r.length>1&&t.getAttribute("data-audiogroup")!==e){s.audioTracksContainer.style.display="table-cell";try{s.audioTracksSelectionContainer.removeChild(t)}catch(e){}t.innerHTML="",t.setAttribute("data-audiogroup",e);var n,i="",o=r.length-1,l=r.slice();l.reverse(),l.forEach(function(e,r,s){i="",n=document.createElement("a"),n.className="settingChooseMenuLink",i=e.name,n.innerHTML=i,n.setAttribute("data-audiotrack",e.id),n.setAttribute("data-audiolang",e.lang||""),!0===e.default&&p(n),a(n,m),t.appendChild(n),o-=1}),s.audioTracksSelectionContainer.appendChild(t)}},w=function(e){var t=null;for(var r in u)if(u.hasOwnProperty(r)&&(t=u[r].filter(function(t){return t.id==e})),null!==t){try{t=t[0]}catch(e){}break}return t};return o.audioTrackChanged=function(e){if(!(r&&r.length<=1)){p(document.querySelector(".audioTracksMenu a[data-audiotrack='"+e.id+"']"));var t=w(e.id);t&&h(t.lang)}},o.audioTracks=function(e){(r=e)&&r.length>1&&(r.forEach(function(e,t,r){void 0===u[e.groupId]&&(u[e.groupId]=[]),u[e.groupId].push(e)}),b(Object.keys(u)[0]))},o.init=function(){s.audioTracksSelectionContainer.className="audioTracksSelectionContainer inactive",t=document.createElement("div"),t.className="audioTracksMenu settingChooseMenu",s.audioTracksContainer.addEventListener("mouseover",v,!1),s.audioTracksContainer.addEventListener("mouseout",g,!1),a(s.audioTracksBtn,y),s.audioTracksSelectionContainer.style.maxHeight=l.offsetHeight-120+"px"},d.on("meride.qualityChanged",function(e){if(-1!==e.arguments[0]){var t=e.arguments[1][e.arguments[0]];E(t.attrs.AUDIO)}}),d.on("meride.qualityLevelsReady",function(e){try{c=e.arguments[0].levels}catch(e){}}),d.on("meride.qualityLevelChanged",function(e){try{E(e.arguments[0].attrs.AUDIO)}catch(e){}}),i.applyStyles([s.audioTracksContainer],{display:"none"}),o};e.exports=o},function(e,t,r){var n=r(2),i=r(5),o=function(e){if(!e)throw new Error("No options interactions/HlsVttTracks");if(!e.skinComponents)throw new Error("No skinComponents interactions/HlsVttTracks");if(!e.video)throw new Error("No video interactions/HlsVttTracks");if(!e.container)throw new Error("No container interactions/HlsVttTracks");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/HlsVttTracks");var t,r,o={},a=n.addClickTouch,s=(n.removeClickTouch,e.skinComponents),l=e.video,d=(e.container,e.interactionManagerDispatcher),u=[],c=function(e){d.emit("meride.subtitleTrackChanged",e)},f=function(e){if(e){var t=document.querySelector(".subtitleTracksMenu .settingChooseMenuLinkActive");t&&(t.className="settingChooseMenuLink"),e.className="settingChooseMenuLinkActive"}},p=function(e){s.subtitleTracksLabel.innerHTML=e},h=function(e){s.subtitleTracksLabel.innerHTML=""},m=function(e){try{var t=e.currentTarget;s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer inactive",f(t),c(t.getAttribute("data-subtitletrack")),"-1"===t.getAttribute("data-subtitletrack")&&h()}catch(e){}e.preventDefault()},v=function(e){s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer active"},g=function(e){s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer inactive"},y=function(e){"subtitleTracksSelectionContainer inactive"===s.subtitleTracksSelectionContainer.className?s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer active":s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer inactive",e.preventDefault()},E=function(e){if((r=u[e])&&r.length>0&&t.getAttribute("data-subtitlegroup")!==e){s.subtitleTracksContainer.style.display="table-cell";try{s.subtitleTracksSelectionContainer.removeChild(t)}catch(e){}t.innerHTML="",t.setAttribute("data-subtitlegroup",e);var n,i="",o=r.slice();o.reverse(),i="",n=document.createElement("a"),n.className="settingChooseMenuLink",i="Disabled",n.innerHTML=i,n.setAttribute("data-subtitletrack","-1"),n.setAttribute("data-subtitlelang",""),a(n,m),t.appendChild(n),o.forEach(function(e){i="",n=document.createElement("a"),n.className="settingChooseMenuLink",i=e.name,n.innerHTML=i,n.setAttribute("data-subtitletrack",e.id),n.setAttribute("data-subtitlelang",e.lang||""),!0===e.default&&f(n),a(n,m),t.appendChild(n)}),s.subtitleTracksSelectionContainer.appendChild(t)}},b=function(e){var t=null;for(var r in u)if(u.hasOwnProperty(r)&&(t=u[r].filter(function(t){return t.id==e})),null!==t){try{t=t[0]}catch(e){}break}return t};return o.subtitleTrackChanged=function(e){if(!(r&&r.length<=0)){f(document.querySelector(".subtitleTracksMenu a[data-subtitletrack='"+e.id+"']"));var t=b(e.id);t&&p(t.lang)}},o.subtitleTracks=function(e){(r=e)&&r.length>0&&(r.forEach(function(e){void 0===u[e.groupId]&&(u[e.groupId]=[]),u[e.groupId].push(e)}),E(Object.keys(u)[0]))},o.init=function(){s.subtitleTracksSelectionContainer.className="subtitleTracksSelectionContainer inactive",t=document.createElement("div"),t.className="subtitleTracksMenu settingChooseMenu",s.subtitleTracksContainer.addEventListener("mouseover",v,!1),s.subtitleTracksContainer.addEventListener("mouseout",g,!1),a(s.subtitleTracksBtn,y),s.subtitleTracksSelectionContainer.style.maxHeight=l.offsetHeight-120+"px"},i.applyStyles([s.subtitleTracksContainer],{display:"none"}),o};e.exports=o},function(e,t,r){var n=r(125),i=function(e){if(!e)throw new Error("No options interactions/VR");if(!e.skinComponents)throw new Error("No skinComponents interactions/VR");if(!e.video)throw new Error("No video interactions/VR");if(!e.container)throw new Error("No container interactions/VR");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/VR");var t={},r=null,i=function(){switch(e.driver||"AFrame"){case"AFrame":r=new n(e)}return r};return t.setUp=i,t};e.exports=i},function(e,t,r){var n=r(3);ClickTouch=r(2),Util=r(5);var i=function(e){if(!e)throw new Error("No options interactions/AFrame");if(!e.skinComponents)throw new Error("No skinComponents interactions/AFrame");if(!e.video)throw new Error("No video interactions/AFrame");if(!e.container)throw new Error("No container interactions/AFrame");if(!e.interactionManagerDispatcher)throw new Error("No interactionManagerDispatcher interactions/AFrame");var t={},r=e.container,i=e.video,o=!1!==e.embedded,a=(e.interactionManagerDispatcher,e.skinComponents),s=e.scriptURL||"https://aframe.io/releases/0.9.0/aframe.min.js",l=!0===e.vrModeUI,d=ClickTouch.addClickTouch,u=(ClickTouch.removeClickTouch,null),c=null,f=function(){return parseInt(1e4*Math.random(),10)},p=function(e){u.removeEventListener("loaded",p),Util.applyStyles(a.vrBtnContainer,{display:"table-cell"}),d(a.vrBtnContainer,function(){u.enterVR(),c.components.material.material.map.image.play()})},h=function(e){a.vrBtn.id="merideVrBtn_"+f(),e.setAttribute("vr-mode-ui","enterVRButton: #"+a.vrBtn.id),e.addEventListener("loaded",p)},m=function(){var e="meride360_"+f();i.setAttribute("id",e),i.setAttribute("crossorigin","anonymous"),i.crossOrigin="anonymous",document.createElement("div").className="meride_360_scene",u=document.createElement("a-scene"),!0===o&&u.setAttribute("embedded",""),u.setAttribute("loading-screen","enabled: false");var t=document.createElement("a-assets");t.appendChild(i),c=document.createElement("a-videosphere"),c.setAttribute("src","#"+e),u.appendChild(t),u.appendChild(c),n.include(s,function(){var e=function(){i.removeEventListener("canplay",e),!1===l?u.setAttribute("vr-mode-ui","enabled: false"):h(u),r.appendChild(u)};4===i.readyState?e():i.addEventListener("canplay",e)})};return t.init=m,Util.applyStyles([a.vrBtnContainer],{display:"none"}),t};e.exports=i},function(e,t){function r(e){if(!e.tracks)throw new Error("Tracks required");if(!e.video)throw new Error("Video element required");this.tracks=e.tracks,this.video=e.video}r.prototype.render=function(){var e=this.video,t="";this.tracks.forEach(function(e,r){var n=document.createElement("track");n.setAttribute("label",e.label),n.setAttribute("kind",e.kind),n.setAttribute("srclang",e.srclang),n.setAttribute("src",e.src),e.default&&!0===e.default&&(n.setAttribute("default","true"),t=e.srclang),this.video.appendChild(n)},this),setTimeout(function(){for(var r=0;r<e.textTracks.length;r++)e.textTracks[r].language===t?e.textTracks[r].mode="showing":e.textTracks[r].mode="hidden"},500)},e.exports=r},function(e,t,r){function n(e){if(!e.container)throw new Error("CCComponent require a container");if(!e.video)throw new Error("CCComponent require a video");var t=this,r=function(e){t.ccContainer.style.display="block",e.preventDefault()},n=function(e){t.ccContainer.style.display="none",e.preventDefault()},i=a.addClickTouch;t.tracks=e.tracks||[],t.container=e.container,t.video=e.video,t.comp=document.createElement("div"),t.comp.className="settingComponent",t.ccBtn=document.createElement("button"),t.ccContainer=document.createElement("div"),t.ccContainer.className="settingChildContainer ccContainer",t.closeBtn=document.createElement("button"),i(t.closeBtn,n),s.applyComponent(t.closeBtn,o.closeSettingsBtn,"X");var l=document.createElement("div");l.className="ccMenu settingChooseMenu";var d,u=function(e){for(var r in t.video.textTracks)t.video.textTracks.hasOwnProperty(r)&&(t.video.textTracks[r].language===e?t.video.textTracks[r].mode="showing":t.video.textTracks[r].mode="hidden")},c=function(e){var r=document.querySelector(".ccMenu .settingChooseMenuLinkActive");r&&(r.className="settingChooseMenuLink"),e.target.className="settingChooseMenuLinkActive",u(e.target.getAttribute("data-cc-lang")),t.ccContainer.style.display="none",e.preventDefault()};d=document.createElement("a"),d.className="settingChooseMenuLink",d.innerHTML="disable",d.setAttribute("href","#"),i(d,c),l.appendChild(d),t.tracks.forEach(function(e,t){d=document.createElement("a"),d.className="settingChooseMenuLink",d.innerHTML=e.label,d.setAttribute("href","#"),d.setAttribute("data-cc-lang",e.srclang),i(d,c),l.appendChild(d)},t),i(t.ccBtn,r),s.applyComponent(t.ccBtn,o.ccBtn,"&#8801;"),t.ccContainer.appendChild(t.closeBtn),t.ccContainer.appendChild(l),t.comp.appendChild(t.ccBtn),t.container.appendChild(t.ccContainer)}var i=r(128),o=r(36),a=r(2),s=r(5);n.prototype=Object.create(i.prototype),e.exports=n},function(e,t){function r(){this.comp=document.createElement("div")}r.prototype.element=function(){return this.comp},e.exports=r},function(e,t,r){var n=(r(2),r(0)),i=function(e){if(!e)throw new Error("Watermark needs some parameter");if(!e.container)throw new Error("Watermark needs a container element");if(!e.interactionManager)throw new Error("Watermark needs a InteractionManager");if(!e.logoURL)throw new Error("Watermark needs a logoURL parameter");var t={},r=document.createElement("div"),i=document.createElement("a"),o=document.createElement("img"),a=(new n,function(e,t){for(var r in t)t.hasOwnProperty(r)&&e.setAttribute(r,t[r])}),s=function(e,t,r){isNaN(r/1)?e.style[t]=r:e.style[t]=r+"px"};r.style.position="absolute",e.right&&s(r,"right",e.right),e.bottom&&s(r,"bottom",e.bottom),e.top&&s(r,"top",e.top),e.left&&s(r,"left",e.left),e.right||e.bottom||e.top||e.left||(s(r,"top","4%"),s(r,"left","4%")),e.width&&(o.style.width=e.width+"px"),e.height&&(o.style.height=e.height+"px"),e.opacity&&(o.style.opacity=e.opacity),e.displayTime&&setTimeout(function(){r.remove()},e.displayTime),a(o,{src:e.logoURL,alt:"Player watermark"}),e.link&&a(i,{href:e.link,title:"Open link",onclick:"window.open(this.href, 'meride_wmarkurl'); return false;"}),e.hide&&!0===e.hide&&(e.interactionManager.on("meride.controlbarShown",function(){r.style.display="block"}),e.interactionManager.on("meride.controlbarHidden",function(){r.style.display="none"}));var l=function(){r.style.visibility="visible"},d=function(){r.style.visibility="hidden"},u=function(){e.link?(i.appendChild(o),r.appendChild(i)):r.appendChild(o),e.container.appendChild(r)};return t.render=u,t.show=l,t.hide=d,t};e.exports=i},function(e,t){var r={include:function(e,t,r){var n=document.getElementsByTagName("head")[0],i=document.createElement("link");i.setAttribute("rel","stylesheet"),i.setAttribute("type","text/css"),i.setAttribute("href",e),void 0!==i.onload?i.onload=t:void 0!==i.onreadystatechange?"loaded"!=i.readyState&&"complete"!=i.readyState||t():i.onload=t,"function"==typeof r&&(i.onerror=r),n.appendChild(i)}};e.exports=r},function(e,t,r){"undefined"!=typeof window&&function(t,r){e.exports=r()}(0,function(){return function(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};return t.m=e,t.c=r,t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{enumerable:!0,get:n})},t.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},t.t=function(e,r){if(1&r&&(e=t(e)),8&r)return e;if(4&r&&"object"==typeof e&&e&&e.__esModule)return e;var n=Object.create(null);if(t.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:e}),2&r&&"string"!=typeof e)for(var i in e)t.d(n,i,function(t){return e[t]}.bind(null,i));return n},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/dist/",t(t.s="./src/hls.js")}({"./node_modules/eventemitter3/index.js":function(e,t,r){"use strict";function n(){}function i(e,t,r){this.fn=e,this.context=t,this.once=r||!1}function o(e,t,r,n,o){if("function"!=typeof r)throw new TypeError("The listener must be a function");var a=new i(r,n||e,o),s=d?d+t:t;return e._events[s]?e._events[s].fn?e._events[s]=[e._events[s],a]:e._events[s].push(a):(e._events[s]=a,e._eventsCount++),e}function a(e,t){0==--e._eventsCount?e._events=new n:delete e._events[t]}function s(){this._events=new n,this._eventsCount=0}var l=Object.prototype.hasOwnProperty,d="~";Object.create&&(n.prototype=Object.create(null),(new n).__proto__||(d=!1)),s.prototype.eventNames=function(){var e,t,r=[];if(0===this._eventsCount)return r;for(t in e=this._events)l.call(e,t)&&r.push(d?t.slice(1):t);return Object.getOwnPropertySymbols?r.concat(Object.getOwnPropertySymbols(e)):r},s.prototype.listeners=function(e){var t=d?d+e:e,r=this._events[t];if(!r)return[];if(r.fn)return[r.fn];for(var n=0,i=r.length,o=new Array(i);n<i;n++)o[n]=r[n].fn;return o},s.prototype.listenerCount=function(e){var t=d?d+e:e,r=this._events[t];return r?r.fn?1:r.length:0},s.prototype.emit=function(e,t,r,n,i,o){var a=d?d+e:e;if(!this._events[a])return!1;var s,l,u=this._events[a],c=arguments.length;if(u.fn){switch(u.once&&this.removeListener(e,u.fn,void 0,!0),c){case 1:return u.fn.call(u.context),!0;case 2:return u.fn.call(u.context,t),!0;case 3:return u.fn.call(u.context,t,r),!0;case 4:return u.fn.call(u.context,t,r,n),!0;case 5:return u.fn.call(u.context,t,r,n,i),!0;case 6:return u.fn.call(u.context,t,r,n,i,o),!0}for(l=1,s=new Array(c-1);l<c;l++)s[l-1]=arguments[l];u.fn.apply(u.context,s)}else{var f,p=u.length;for(l=0;l<p;l++)switch(u[l].once&&this.removeListener(e,u[l].fn,void 0,!0),c){case 1:u[l].fn.call(u[l].context);break;case 2:u[l].fn.call(u[l].context,t);break;case 3:u[l].fn.call(u[l].context,t,r);break;case 4:u[l].fn.call(u[l].context,t,r,n);break;default:if(!s)for(f=1,s=new Array(c-1);f<c;f++)s[f-1]=arguments[f];u[l].fn.apply(u[l].context,s)}}return!0},s.prototype.on=function(e,t,r){return o(this,e,t,r,!1)},s.prototype.once=function(e,t,r){return o(this,e,t,r,!0)},s.prototype.removeListener=function(e,t,r,n){var i=d?d+e:e;if(!this._events[i])return this;if(!t)return a(this,i),this;var o=this._events[i];if(o.fn)o.fn!==t||n&&!o.once||r&&o.context!==r||a(this,i);else{for(var s=0,l=[],u=o.length;s<u;s++)(o[s].fn!==t||n&&!o[s].once||r&&o[s].context!==r)&&l.push(o[s]);l.length?this._events[i]=1===l.length?l[0]:l:a(this,i)}return this},s.prototype.removeAllListeners=function(e){var t;return e?(t=d?d+e:e,this._events[t]&&a(this,t)):(this._events=new n,this._eventsCount=0),this},s.prototype.off=s.prototype.removeListener,s.prototype.addListener=s.prototype.on,s.prefixed=d,s.EventEmitter=s,e.exports=s},"./node_modules/node-libs-browser/node_modules/events/events.js":function(e,t){function r(){this._events=this._events||{},this._maxListeners=this._maxListeners||void 0}function n(e){return"function"==typeof e}function i(e){return"number"==typeof e}function o(e){return"object"==typeof e&&null!==e}function a(e){return void 0===e}e.exports=r,r.EventEmitter=r,r.prototype._events=void 0,r.prototype._maxListeners=void 0,r.defaultMaxListeners=10,r.prototype.setMaxListeners=function(e){if(!i(e)||e<0||isNaN(e))throw TypeError("n must be a positive number");return this._maxListeners=e,this},r.prototype.emit=function(e){var t,r,i,s,l,d;if(this._events||(this._events={}),"error"===e&&(!this._events.error||o(this._events.error)&&!this._events.error.length)){if((t=arguments[1])instanceof Error)throw t;var u=new Error('Uncaught, unspecified "error" event. ('+t+")");throw u.context=t,u}if(r=this._events[e],a(r))return!1;if(n(r))switch(arguments.length){case 1:r.call(this);break;case 2:r.call(this,arguments[1]);break;case 3:r.call(this,arguments[1],arguments[2]);break;default:s=Array.prototype.slice.call(arguments,1),r.apply(this,s)}else if(o(r))for(s=Array.prototype.slice.call(arguments,1),d=r.slice(),i=d.length,l=0;l<i;l++)d[l].apply(this,s);return!0},r.prototype.addListener=function(e,t){var i;if(!n(t))throw TypeError("listener must be a function");return this._events||(this._events={}),this._events.newListener&&this.emit("newListener",e,n(t.listener)?t.listener:t),this._events[e]?o(this._events[e])?this._events[e].push(t):this._events[e]=[this._events[e],t]:this._events[e]=t,o(this._events[e])&&!this._events[e].warned&&(i=a(this._maxListeners)?r.defaultMaxListeners:this._maxListeners)&&i>0&&this._events[e].length>i&&(this._events[e].warned=!0,console.trace),this},r.prototype.on=r.prototype.addListener,r.prototype.once=function(e,t){function r(){this.removeListener(e,r),i||(i=!0,t.apply(this,arguments))}if(!n(t))throw TypeError("listener must be a function");var i=!1;return r.listener=t,this.on(e,r),this},r.prototype.removeListener=function(e,t){var r,i,a,s;if(!n(t))throw TypeError("listener must be a function");if(!this._events||!this._events[e])return this;if(r=this._events[e],a=r.length,i=-1,r===t||n(r.listener)&&r.listener===t)delete this._events[e],this._events.removeListener&&this.emit("removeListener",e,t);else if(o(r)){for(s=a;s-- >0;)if(r[s]===t||r[s].listener&&r[s].listener===t){i=s;break}if(i<0)return this;1===r.length?(r.length=0,delete this._events[e]):r.splice(i,1),this._events.removeListener&&this.emit("removeListener",e,t)}return this},r.prototype.removeAllListeners=function(e){var t,r;if(!this._events)return this;if(!this._events.removeListener)return 0===arguments.length?this._events={}:this._events[e]&&delete this._events[e],this;if(0===arguments.length){for(t in this._events)"removeListener"!==t&&this.removeAllListeners(t);return this.removeAllListeners("removeListener"),this._events={},this}if(r=this._events[e],n(r))this.removeListener(e,r);else if(r)for(;r.length;)this.removeListener(e,r[r.length-1]);return delete this._events[e],this},r.prototype.listeners=function(e){return this._events&&this._events[e]?n(this._events[e])?[this._events[e]]:this._events[e].slice():[]},r.prototype.listenerCount=function(e){if(this._events){var t=this._events[e];if(n(t))return 1;if(t)return t.length}return 0},r.listenerCount=function(e,t){return e.listenerCount(t)}},"./node_modules/url-toolkit/src/url-toolkit.js":function(e,t,r){!function(t){var r=/^((?:[a-zA-Z0-9+\-.]+:)?)(\/\/[^\/?#]*)?((?:[^\/\?#]*\/)*.*?)??(;.*?)?(\?.*?)?(#.*?)?$/,n=/^([^\/?#]*)(.*)$/,i=/(?:\/|^)\.(?=\/)/g,o=/(?:\/|^)\.\.\/(?!\.\.\/).*?(?=\/)/g,a={buildAbsoluteURL:function(e,t,r){if(r=r||{},e=e.trim(),!(t=t.trim())){if(!r.alwaysNormalize)return e;var i=a.parseURL(e);if(!i)throw new Error("Error trying to parse base URL.");return i.path=a.normalizePath(i.path),a.buildURLFromParts(i)}var o=a.parseURL(t);if(!o)throw new Error("Error trying to parse relative URL.");if(o.scheme)return r.alwaysNormalize?(o.path=a.normalizePath(o.path),a.buildURLFromParts(o)):t;var s=a.parseURL(e);if(!s)throw new Error("Error trying to parse base URL.");if(!s.netLoc&&s.path&&"/"!==s.path[0]){var l=n.exec(s.path);s.netLoc=l[1],s.path=l[2]}s.netLoc&&!s.path&&(s.path="/");var d={scheme:s.scheme,netLoc:o.netLoc,path:null,params:o.params,query:o.query,fragment:o.fragment};if(!o.netLoc&&(d.netLoc=s.netLoc,"/"!==o.path[0]))if(o.path){var u=s.path,c=u.substring(0,u.lastIndexOf("/")+1)+o.path;d.path=a.normalizePath(c)}else d.path=s.path,o.params||(d.params=s.params,o.query||(d.query=s.query));return null===d.path&&(d.path=r.alwaysNormalize?a.normalizePath(o.path):o.path),a.buildURLFromParts(d)},parseURL:function(e){var t=r.exec(e);return t?{scheme:t[1]||"",netLoc:t[2]||"",path:t[3]||"",params:t[4]||"",query:t[5]||"",fragment:t[6]||""}:null},normalizePath:function(e){for(e=e.split("").reverse().join("").replace(i,"");e.length!==(e=e.replace(o,"")).length;);return e.split("").reverse().join("")},buildURLFromParts:function(e){return e.scheme+e.netLoc+e.path+e.params+e.query+e.fragment}};e.exports=a}()},"./node_modules/webworkify-webpack/index.js":function(e,t,r){function n(e){function t(n){if(r[n])return r[n].exports;var i=r[n]={i:n,l:!1,exports:{}};return e[n].call(i.exports,i,i.exports,t),i.l=!0,i.exports}var r={};t.m=e,t.c=r,t.i=function(e){return e},t.d=function(e,r,n){t.o(e,r)||Object.defineProperty(e,r,{configurable:!1,enumerable:!0,get:n})},t.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},t.n=function(e){var r=e&&e.__esModule?function(){return e.default}:function(){return e};return t.d(r,"a",r),r},t.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},t.p="/",t.oe=function(e){throw e};var n=t(t.s=ENTRY_MODULE);return n.default||n}function i(e){return(e+"").replace(/[.?*+^$[\]\\(){}|-]/g,"\\$&")}function o(e){return!isNaN(1*e)}function a(e,t,n){var a={};a[n]=[];var s=t.toString(),l=s.match(/^function\s?\(\w+,\s*\w+,\s*(\w+)\)/);if(!l)return a;for(var c,f=l[1],p=new RegExp("(\\\\n|\\W)"+i(f)+u,"g");c=p.exec(s);)"dll-reference"!==c[3]&&a[n].push(c[3]);for(p=new RegExp("\\("+i(f)+'\\("(dll-reference\\s('+d+'))"\\)\\)'+u,"g");c=p.exec(s);)e[c[2]]||(a[n].push(c[1]),e[c[2]]=r(c[1]).m),a[c[2]]=a[c[2]]||[],a[c[2]].push(c[4]);for(var h=Object.keys(a),m=0;m<h.length;m++)for(var v=0;v<a[h[m]].length;v++)o(a[h[m]][v])&&(a[h[m]][v]=1*a[h[m]][v]);return a}function s(e){return Object.keys(e).reduce(function(t,r){return t||e[r].length>0},!1)}function l(e,t){for(var r={main:[t]},n={main:[]},i={main:{}};s(r);)for(var o=Object.keys(r),l=0;l<o.length;l++){var d=o[l],u=r[d],c=u.pop();if(i[d]=i[d]||{},!i[d][c]&&e[d][c]){i[d][c]=!0,n[d]=n[d]||[],n[d].push(c);for(var f=a(e,e[d][c],d),p=Object.keys(f),h=0;h<p.length;h++)r[p[h]]=r[p[h]]||[],r[p[h]]=r[p[h]].concat(f[p[h]])}}return n}var d="[\\.|\\-|\\+|\\w|/|@]+",u="\\((/\\*.*?\\*/)?s?.*?("+d+").*?\\)";e.exports=function(e,t){t=t||{};var i={main:r.m},o=t.all?{main:Object.keys(i.main)}:l(i,e),a="";Object.keys(o).filter(function(e){return"main"!==e}).forEach(function(e){for(var t=0;o[e][t];)t++;o[e].push(t),i[e][t]="(function(module, exports, __webpack_require__) { module.exports = __webpack_require__; })",a=a+"var "+e+" = ("+n.toString().replace("ENTRY_MODULE",JSON.stringify(t))+")({"+o[e].map(function(t){return JSON.stringify(t)+": "+i[e][t].toString()}).join(",")+"});\n"}),a=a+"new (("+n.toString().replace("ENTRY_MODULE",JSON.stringify(e))+")({"+o.main.map(function(e){return JSON.stringify(e)+": "+i.main[e].toString()}).join(",")+"}))(self);";var s=new window.Blob([a],{type:"text/javascript"});if(t.bare)return s;var d=window.URL||window.webkitURL||window.mozURL||window.msURL,u=d.createObjectURL(s),c=new window.Worker(u);return c.objectURL=u,c}},"./src/config.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/controller/abr-controller.js"),i=r("./src/controller/buffer-controller.js"),o=r("./src/controller/cap-level-controller.js"),a=r("./src/controller/fps-controller.js"),s=r("./src/utils/xhr-loader.js"),l=r("./src/controller/audio-track-controller.js"),d=r("./src/controller/audio-stream-controller.js"),u=r("./src/utils/cues.js"),c=r("./src/controller/timeline-controller.js"),f=r("./src/controller/subtitle-track-controller.js"),p=r("./src/controller/subtitle-stream-controller.js"),h=r("./src/controller/eme-controller.js"),m=r("./src/utils/mediakeys-helper.js");t.hlsDefaultConfig={autoStartLoad:!0,startPosition:-1,defaultAudioCodec:void 0,debug:!1,capLevelOnFPSDrop:!1,capLevelToPlayerSize:!1,initialLiveManifestSize:1,maxBufferLength:30,maxBufferSize:6e7,maxBufferHole:.5,lowBufferWatchdogPeriod:.5,highBufferWatchdogPeriod:3,nudgeOffset:.1,nudgeMaxRetry:3,maxFragLookUpTolerance:.25,liveSyncDurationCount:3,liveMaxLatencyDurationCount:1/0,liveSyncDuration:void 0,liveMaxLatencyDuration:void 0,liveDurationInfinity:!1,liveBackBufferLength:1/0,maxMaxBufferLength:600,enableWorker:!0,enableSoftwareAES:!0,manifestLoadingTimeOut:1e4,manifestLoadingMaxRetry:1,manifestLoadingRetryDelay:1e3,manifestLoadingMaxRetryTimeout:64e3,startLevel:void 0,levelLoadingTimeOut:1e4,levelLoadingMaxRetry:4,levelLoadingRetryDelay:1e3,levelLoadingMaxRetryTimeout:64e3,fragLoadingTimeOut:2e4,fragLoadingMaxRetry:6,fragLoadingRetryDelay:1e3,fragLoadingMaxRetryTimeout:64e3,startFragPrefetch:!1,fpsDroppedMonitoringPeriod:5e3,fpsDroppedMonitoringThreshold:.2,appendErrorMaxRetry:3,loader:s.default,fLoader:void 0,pLoader:void 0,xhrSetup:void 0,licenseXhrSetup:void 0,abrController:n.default,bufferController:i.default,capLevelController:o.default,fpsController:a.default,stretchShortVideoTrack:!1,maxAudioFramesDrift:1,forceKeyFrameOnDiscontinuity:!0,abrEwmaFastLive:3,abrEwmaSlowLive:9,abrEwmaFastVoD:3,abrEwmaSlowVoD:9,abrEwmaDefaultEstimate:5e5,abrBandWidthFactor:.95,abrBandWidthUpFactor:.7,abrMaxWithRealBitrate:!1,maxStarvationDelay:4,maxLoadingDelay:4,minAutoBitrate:0,emeEnabled:!1,widevineLicenseUrl:void 0,requestMediaKeySystemAccessFunc:m.requestMediaKeySystemAccess},t.hlsDefaultConfig.subtitleStreamController=p.SubtitleStreamController,t.hlsDefaultConfig.subtitleTrackController=f.default,t.hlsDefaultConfig.timelineController=c.default,t.hlsDefaultConfig.cueHandler=u,t.hlsDefaultConfig.enableCEA708Captions=!0,t.hlsDefaultConfig.enableWebVTT=!0,t.hlsDefaultConfig.captionsTextTrack1Label="English",t.hlsDefaultConfig.captionsTextTrack1LanguageCode="en",t.hlsDefaultConfig.captionsTextTrack2Label="Spanish",t.hlsDefaultConfig.captionsTextTrack2LanguageCode="es",t.hlsDefaultConfig.audioStreamController=d.default,t.hlsDefaultConfig.audioTrackController=l.default,t.hlsDefaultConfig.emeController=h.default},"./src/controller/abr-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/buffer-helper.js"),s=r("./src/errors.js"),l=r("./src/utils/logger.js"),d=r("./src/utils/ewma-bandwidth-estimator.js"),u=window.performance,c=function(t){function r(e){var r=t.call(this,e,i.default.FRAG_LOADING,i.default.FRAG_LOADED,i.default.FRAG_BUFFERED,i.default.ERROR)||this;return r.lastLoadedFragLevel=0,r._nextAutoLevel=-1,r.hls=e,r.timer=null,r._bwEstimator=null,r.onCheck=r._abandonRulesCheck.bind(r),r}return n(r,t),r.prototype.destroy=function(){this.clearTimer(),o.default.prototype.destroy.call(this)},r.prototype.onFragLoading=function(e){var t=e.frag;if("main"===t.type&&(this.timer||(this.fragCurrent=t,this.timer=setInterval(this.onCheck,100)),!this._bwEstimator)){var r=this.hls,n=r.config,i=t.level,o=r.levels[i].details.live,a=void 0,s=void 0;o?(a=n.abrEwmaFastLive,s=n.abrEwmaSlowLive):(a=n.abrEwmaFastVoD,s=n.abrEwmaSlowVoD),this._bwEstimator=new d.default(r,s,a,n.abrEwmaDefaultEstimate)}},r.prototype._abandonRulesCheck=function(){var e=this.hls,t=e.media,r=this.fragCurrent;if(r){var n=r.loader,o=e.minAutoLevel;if(!n||n.stats&&n.stats.aborted)return l.logger.warn("frag loader destroy or aborted, disarm abandonRules"),this.clearTimer(),void(this._nextAutoLevel=-1);var s=n.stats;if(t&&s&&(!t.paused&&0!==t.playbackRate||!t.readyState)&&r.autoLevel&&r.level){var d=u.now()-s.trequest,c=Math.abs(t.playbackRate);if(d>500*r.duration/c){var f=e.levels,p=Math.max(1,s.bw?s.bw/8:1e3*s.loaded/d),h=f[r.level],m=h.realBitrate?Math.max(h.realBitrate,h.bitrate):h.bitrate,v=s.total?s.total:Math.max(s.loaded,Math.round(r.duration*m/8)),g=t.currentTime,y=(v-s.loaded)/p,E=(a.BufferHelper.bufferInfo(t,g,e.config.maxBufferHole).end-g)/c;if(E<2*r.duration/c&&y>E){var b=void 0,w=void 0;for(w=r.level-1;w>o;w--){var _=f[w].realBitrate?Math.max(f[w].realBitrate,f[w].bitrate):f[w].bitrate;if((b=r.duration*_/(6.4*p))<E)break}b<y&&(l.logger.warn("loading too slow, abort fragment loading and switch to level "+w+":fragLoadedDelay["+w+"]<fragLoadedDelay["+(r.level-1)+"];bufferStarvationDelay:"+b.toFixed(1)+"<"+y.toFixed(1)+":"+E.toFixed(1)),e.nextLoadLevel=w,this._bwEstimator.sample(d,s.loaded),n.abort(),this.clearTimer(),e.trigger(i.default.FRAG_LOAD_EMERGENCY_ABORTED,{frag:r,stats:s}))}}}}},r.prototype.onFragLoaded=function(t){var r=t.frag;if("main"===r.type&&e.isFinite(r.sn)){if(this.clearTimer(),this.lastLoadedFragLevel=r.level,this._nextAutoLevel=-1,this.hls.config.abrMaxWithRealBitrate){var n=this.hls.levels[r.level],i=(n.loaded?n.loaded.bytes:0)+t.stats.loaded,o=(n.loaded?n.loaded.duration:0)+t.frag.duration;n.loaded={bytes:i,duration:o},n.realBitrate=Math.round(8*i/o)}if(t.frag.bitrateTest){var a=t.stats;a.tparsed=a.tbuffered=a.tload,this.onFragBuffered(t)}}},r.prototype.onFragBuffered=function(t){var r=t.stats,n=t.frag;if(!0!==r.aborted&&"main"===n.type&&e.isFinite(n.sn)&&(!n.bitrateTest||r.tload===r.tbuffered)){var i=r.tparsed-r.trequest;l.logger.log("latency/loading/parsing/append/kbps:"+Math.round(r.tfirst-r.trequest)+"/"+Math.round(r.tload-r.tfirst)+"/"+Math.round(r.tparsed-r.tload)+"/"+Math.round(r.tbuffered-r.tparsed)+"/"+Math.round(8*r.loaded/(r.tbuffered-r.trequest))),this._bwEstimator.sample(i,r.loaded),r.bwEstimate=this._bwEstimator.getEstimate(),n.bitrateTest?this.bitrateTestDelay=i/1e3:this.bitrateTestDelay=0}},r.prototype.onError=function(e){switch(e.details){case s.ErrorDetails.FRAG_LOAD_ERROR:case s.ErrorDetails.FRAG_LOAD_TIMEOUT:this.clearTimer()}},r.prototype.clearTimer=function(){clearInterval(this.timer),this.timer=null},Object.defineProperty(r.prototype,"nextAutoLevel",{get:function(){var e=this._nextAutoLevel,t=this._bwEstimator;if(!(-1===e||t&&t.canEstimate()))return e;var r=this._nextABRAutoLevel;return-1!==e&&(r=Math.min(e,r)),r},set:function(e){this._nextAutoLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"_nextABRAutoLevel",{get:function(){var e=this.hls,t=e.maxAutoLevel,r=e.levels,n=e.config,i=e.minAutoLevel,o=e.media,s=this.lastLoadedFragLevel,d=this.fragCurrent?this.fragCurrent.duration:0,u=o?o.currentTime:0,c=o&&0!==o.playbackRate?Math.abs(o.playbackRate):1,f=this._bwEstimator?this._bwEstimator.getEstimate():n.abrEwmaDefaultEstimate,p=(a.BufferHelper.bufferInfo(o,u,n.maxBufferHole).end-u)/c,h=this._findBestLevel(s,d,f,i,t,p,n.abrBandWidthFactor,n.abrBandWidthUpFactor,r);if(h>=0)return h;l.logger.trace("rebuffering expected to happen, lets try to find a quality level minimizing the rebuffering");var m=d?Math.min(d,n.maxStarvationDelay):n.maxStarvationDelay,v=n.abrBandWidthFactor,g=n.abrBandWidthUpFactor;if(0===p){var y=this.bitrateTestDelay;if(y){m=(d?Math.min(d,n.maxLoadingDelay):n.maxLoadingDelay)-y,l.logger.trace("bitrate test took "+Math.round(1e3*y)+"ms, set first fragment max fetchDuration to "+Math.round(1e3*m)+" ms"),v=g=1}}return h=this._findBestLevel(s,d,f,i,t,p+m,v,g,r),Math.max(h,0)},enumerable:!0,configurable:!0}),r.prototype._findBestLevel=function(e,t,r,n,i,o,a,s,d){for(var u=i;u>=n;u--){var c=d[u];if(c){var f=c.details,p=f?f.totalduration/f.fragments.length:t,h=!!f&&f.live,m=void 0;m=u<=e?a*r:s*r;var v=d[u].realBitrate?Math.max(d[u].realBitrate,d[u].bitrate):d[u].bitrate,g=v*p/m;if(l.logger.trace("level/adjustedbw/bitrate/avgDuration/maxFetchDuration/fetchDuration: "+u+"/"+Math.round(m)+"/"+v+"/"+p+"/"+o+"/"+g),m>v&&(!g||h&&!this.bitrateTestDelay||g<o))return u}}return-1},r}(o.default);t.default=c}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-stream-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/utils/binary-search.js"),o=r("./src/utils/buffer-helper.js"),a=r("./src/demux/demuxer.js"),s=r("./src/events.js"),l=r("./src/controller/level-helper.js"),d=r("./src/utils/time-ranges.js"),u=r("./src/errors.js"),c=r("./src/utils/logger.js"),f=r("./src/utils/discontinuities.js"),p=r("./src/controller/fragment-tracker.js"),h=r("./src/loader/fragment.js"),m=r("./src/controller/base-stream-controller.js"),v=window.performance,g=function(t){function r(e,r){var n=t.call(this,e,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.AUDIO_TRACKS_UPDATED,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.BUFFER_RESET,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED,s.default.INIT_PTS_FOUND)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=m.State.STOPPED,n.initPTS=[],n.waitingFragment=null,n.videoTrackCC=null,n}return n(r,t),r.prototype.onInitPtsFound=function(e){var t=e.id,r=e.frag.cc,n=e.initPTS;"main"===t&&(this.initPTS[r]=n,this.videoTrackCC=r,c.logger.log("InitPTS for cc: "+r+" found from video track: "+n),this.state===m.State.WAITING_INIT_PTS&&this.tick())},r.prototype.startLoad=function(e){if(this.tracks){var t=this.lastCurrentTime;this.stopLoad(),this.setInterval(100),this.fragLoadError=0,t>0&&-1===e?(c.logger.log("audio:override startPosition with lastCurrentTime @"+t.toFixed(3)),this.state=m.State.IDLE):(this.lastCurrentTime=this.startPosition?this.startPosition:e,this.state=m.State.STARTING),this.nextLoadPosition=this.startPosition=this.lastCurrentTime,this.tick()}else this.startPosition=e,this.state=m.State.STOPPED},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,c.logger.log("audio stream:"+t+"->"+e)}},enumerable:!0,configurable:!0}),r.prototype.doTick=function(){var t,r,n,a=this.hls,l=a.config;switch(this.state){case m.State.ERROR:case m.State.PAUSED:case m.State.BUFFER_FLUSHING:break;case m.State.STARTING:this.state=m.State.WAITING_TRACK,this.loadedmetadata=!1;break;case m.State.IDLE:var d=this.tracks;if(!d)break;if(!this.media&&(this.startFragRequested||!l.startFragPrefetch))break;if(this.loadedmetadata)t=this.media.currentTime;else if(void 0===(t=this.nextLoadPosition))break;var u=this.mediaBuffer?this.mediaBuffer:this.media,h=this.videoBuffer?this.videoBuffer:this.media,g=o.BufferHelper.bufferInfo(u,t,l.maxBufferHole),y=o.BufferHelper.bufferInfo(h,t,l.maxBufferHole),E=g.len,b=g.end,w=this.fragPrevious,_=Math.min(l.maxBufferLength,l.maxMaxBufferLength),T=Math.max(_,y.len),A=this.audioSwitch,S=this.trackId;if((E<T||A)&&S<d.length){if(void 0===(n=d[S].details)){this.state=m.State.WAITING_TRACK;break}if(!A&&this._streamEnded(g,n))return this.hls.trigger(s.default.BUFFER_EOS,{type:"audio"}),void(this.state=m.State.ENDED);var L=n.fragments,k=L.length,D=L[0].start,C=L[k-1].start+L[k-1].duration,R=void 0;if(A)if(n.live&&!n.PTSKnown)c.logger.log("switching audiotrack, live stream, unknown PTS,load first fragment"),b=0;else if(b=t,n.PTSKnown&&t<D){if(!(g.end>D||g.nextStart))return;c.logger.log("alt audio track ahead of main track, seek to start of alt audio track"),this.media.currentTime=D+.05}if(n.initSegment&&!n.initSegment.data)R=n.initSegment;else if(b<=D){if(R=L[0],null!==this.videoTrackCC&&R.cc!==this.videoTrackCC&&(R=f.findFragWithCC(L,this.videoTrackCC)),n.live&&R.loadIdx&&R.loadIdx===this.fragLoadIdx){var x=g.nextStart?g.nextStart:D;return c.logger.log("no alt audio available @currentTime:"+this.media.currentTime+", seeking @"+(x+.05)),void(this.media.currentTime=x+.05)}}else{var O=void 0,I=l.maxFragLookUpTolerance,M=w?L[w.sn-L[0].sn+1]:void 0,P=function(e){var t=Math.min(I,e.duration);return e.start+e.duration-t<=b?1:e.start-t>b&&e.start?-1:0};b<C?(b>C-I&&(I=0),O=M&&!P(M)?M:i.default.search(L,P)):O=L[k-1],O&&(R=O,D=O.start,w&&R.level===w.level&&R.sn===w.sn&&(R.sn<n.endSN?(R=L[R.sn+1-n.startSN],c.logger.log("SN just loaded, load next one: "+R.sn)):R=null))}R&&(R.encrypted?(c.logger.log("Loading key for "+R.sn+" of ["+n.startSN+" ,"+n.endSN+"],track "+S),this.state=m.State.KEY_LOADING,a.trigger(s.default.KEY_LOADING,{frag:R})):(c.logger.log("Loading "+R.sn+", cc: "+R.cc+" of ["+n.startSN+" ,"+n.endSN+"],track "+S+", currentTime:"+t+",bufferEnd:"+b.toFixed(3)),this.fragCurrent=R,(A||this.fragmentTracker.getState(R)===p.FragmentState.NOT_LOADED)&&(this.startFragRequested=!0,e.isFinite(R.sn)&&(this.nextLoadPosition=R.start+R.duration),a.trigger(s.default.FRAG_LOADING,{frag:R}),this.state=m.State.FRAG_LOADING)))}break;case m.State.WAITING_TRACK:r=this.tracks[this.trackId],r&&r.details&&(this.state=m.State.IDLE);break;case m.State.FRAG_LOADING_WAITING_RETRY:var N=v.now(),B=this.retryDate;u=this.media;var F=u&&u.seeking;(!B||N>=B||F)&&(c.logger.log("audioStreamController: retryDate reached, switch back to IDLE state"),this.state=m.State.IDLE);break;case m.State.WAITING_INIT_PTS:var j=this.videoTrackCC;if(void 0===this.initPTS[j])break;var U=this.waitingFragment;if(U){var V=U.frag.cc;j!==V?(r=this.tracks[this.trackId],r.details&&r.details.live&&(c.logger.warn("Waiting fragment CC ("+V+") does not match video track CC ("+j+")"),this.waitingFragment=null,this.state=m.State.IDLE)):(this.state=m.State.FRAG_LOADING,this.onFragLoaded(this.waitingFragment),this.waitingFragment=null)}else this.state=m.State.IDLE;break;case m.State.STOPPED:case m.State.FRAG_LOADING:case m.State.PARSING:case m.State.PARSED:case m.State.ENDED:}},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("ended",this.onvended);var r=this.config;this.tracks&&r.autoStartLoad&&this.startLoad(r.startPosition)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(c.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onAudioTracksUpdated=function(e){c.logger.log("audio tracks updated"),this.tracks=e.audioTracks},r.prototype.onAudioTrackSwitching=function(e){var t=!!e.url;this.trackId=e.id,this.fragCurrent=null,this.state=m.State.PAUSED,this.waitingFragment=null,t?this.setInterval(100):this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),t&&(this.audioSwitch=!0,this.state=m.State.IDLE),this.tick()},r.prototype.onAudioTrackLoaded=function(t){var r=t.details,n=t.id,i=this.tracks[n],o=r.totalduration,a=0;if(c.logger.log("track "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+o),r.live){var s=i.details;s&&r.fragments.length>0?(l.mergeDetails(s,r),a=r.fragments[0].start,r.PTSKnown?c.logger.log("live audio playlist sliding:"+a.toFixed(3)):c.logger.log("live audio playlist - outdated PTS, unknown sliding")):(r.PTSKnown=!1,c.logger.log("live audio playlist - first load, unknown sliding"))}else r.PTSKnown=!1;if(i.details=r,!this.startFragRequested){if(-1===this.startPosition){var d=r.startTimeOffset;e.isFinite(d)?(c.logger.log("start time offset found in playlist, adjust startPosition to "+d),this.startPosition=d):this.startPosition=0}this.nextLoadPosition=this.startPosition}this.state===m.State.WAITING_TRACK&&(this.state=m.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===m.State.KEY_LOADING&&(this.state=m.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag;if(this.state===m.State.FRAG_LOADING&&t&&"audio"===r.type&&r.level===t.level&&r.sn===t.sn){var n=this.tracks[this.trackId],i=n.details,o=i.totalduration,l=t.level,d=t.sn,u=t.cc,f=this.config.defaultAudioCodec||n.audioCodec||"mp4a.40.2",p=this.stats=e.stats;if("initSegment"===d)this.state=m.State.IDLE,p.tparsed=p.tbuffered=v.now(),i.initSegment.data=e.payload,this.hls.trigger(s.default.FRAG_BUFFERED,{stats:p,frag:t,id:"audio"}),this.tick();else{this.state=m.State.PARSING,this.appended=!1,this.demuxer||(this.demuxer=new a.default(this.hls,"audio"));var h=this.initPTS[u],g=i.initSegment?i.initSegment.data:[];if(i.initSegment||void 0!==h){this.pendingBuffering=!0,c.logger.log("Demuxing "+d+" of ["+i.startSN+" ,"+i.endSN+"],track "+l);this.demuxer.push(e.payload,g,f,null,t,o,!1,h)}else c.logger.log("unknown video PTS for continuity counter "+u+", waiting for video PTS before demuxing audio frag "+d+" of ["+i.startSN+" ,"+i.endSN+"],track "+l),this.waitingFragment=e,this.state=m.State.WAITING_INIT_PTS}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===m.State.PARSING){var n=e.tracks,i=void 0;if(n.video&&delete n.video,i=n.audio){i.levelCodec=i.codec,i.id=e.id,this.hls.trigger(s.default.BUFFER_CODECS,n),c.logger.log("audio track:audio,container:"+i.container+",codecs[level/parsed]=["+i.levelCodec+"/"+i.codec+"]");var o=i.initSegment;if(o){var a={type:"audio",data:o,parent:"audio",content:"initSegment"};this.audioSwitch?this.pendingData=[a]:(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,a))}this.tick()}}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"audio"===t.id&&"audio"===t.type&&i.sn===n.sn&&i.level===n.level&&this.state===m.State.PARSING){var o=this.trackId,a=this.tracks[o],d=this.hls;e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),n.addElementaryStream(h.default.ElementaryStreamTypes.AUDIO),c.logger.log("parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb),l.updateFragPTSDTS(a.details,n,t.startPTS,t.endPTS);var f=this.audioSwitch,p=this.media,v=!1;if(f&&p)if(p.readyState){var g=p.currentTime;c.logger.log("switching audio track : currentTime:"+g),g>=t.startPTS&&(c.logger.log("switching audio track : flushing all audio"),this.state=m.State.BUFFER_FLUSHING,d.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),v=!0,this.audioSwitch=!1,d.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:o}))}else this.audioSwitch=!1,d.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:o});var y=this.pendingData;if(!y)return c.logger.warn("Apparently attempt to enqueue media payload without codec initialization data upfront"),void d.trigger(s.default.ERROR,{type:u.ErrorTypes.MEDIA_ERROR,details:null,fatal:!0});this.audioSwitch||([t.data1,t.data2].forEach(function(e){e&&e.length&&y.push({type:t.type,data:e,parent:"audio",content:"data"})}),!v&&y.length&&(y.forEach(function(e){r.state===m.State.PARSING&&(r.pendingBuffering=!0,r.hls.trigger(s.default.BUFFER_APPENDING,e))}),this.pendingData=[],this.appended=!0)),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"audio"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===m.State.PARSING&&(this.stats.tparsed=v.now(),this.state=m.State.PARSED,this._checkAppendedParsed())},r.prototype.onBufferReset=function(){this.mediaBuffer=this.videoBuffer=null,this.loadedmetadata=!1},r.prototype.onBufferCreated=function(e){var t=e.tracks.audio;t&&(this.mediaBuffer=t.buffer,this.loadedmetadata=!0),e.tracks.video&&(this.videoBuffer=e.tracks.video.buffer)},r.prototype.onBufferAppended=function(e){if("audio"===e.parent){var t=this.state;t!==m.State.PARSING&&t!==m.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==m.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent,t=this.stats,r=this.hls;if(e){this.fragPrevious=e,t.tbuffered=v.now(),r.trigger(s.default.FRAG_BUFFERED,{stats:t,frag:e,id:"audio"});var n=this.mediaBuffer?this.mediaBuffer:this.media;c.logger.log("audio buffered : "+d.default.toString(n.buffered)),this.audioSwitch&&this.appended&&(this.audioSwitch=!1,r.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:this.trackId})),this.state=m.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag;if(!r||"audio"===r.type)switch(t.details){case u.ErrorDetails.FRAG_LOAD_ERROR:case u.ErrorDetails.FRAG_LOAD_TIMEOUT:var n=t.frag;if(n&&"audio"!==n.type)break;if(!t.fatal){var i=this.fragLoadError;i?i++:i=1;var a=this.config;if(i<=a.fragLoadingMaxRetry){this.fragLoadError=i;var l=Math.min(Math.pow(2,i-1)*a.fragLoadingRetryDelay,a.fragLoadingMaxRetryTimeout);c.logger.warn("AudioStreamController: frag loading failed, retry in "+l+" ms"),this.retryDate=v.now()+l,this.state=m.State.FRAG_LOADING_WAITING_RETRY}else c.logger.error("AudioStreamController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=m.State.ERROR}break;case u.ErrorDetails.AUDIO_TRACK_LOAD_ERROR:case u.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:case u.ErrorDetails.KEY_LOAD_ERROR:case u.ErrorDetails.KEY_LOAD_TIMEOUT:this.state!==m.State.ERROR&&(this.state=t.fatal?m.State.ERROR:m.State.IDLE,c.logger.warn("AudioStreamController: "+t.details+" while loading frag, now switching to "+this.state+" state ..."));break;case u.ErrorDetails.BUFFER_FULL_ERROR:if("audio"===t.parent&&(this.state===m.State.PARSING||this.state===m.State.PARSED)){var d=this.mediaBuffer,f=this.media.currentTime;if(d&&o.BufferHelper.isBuffered(d,f)&&o.BufferHelper.isBuffered(d,f+.5)){var a=this.config;a.maxMaxBufferLength>=a.maxBufferLength&&(a.maxMaxBufferLength/=2,c.logger.warn("AudioStreamController: reduce max buffer length to "+a.maxMaxBufferLength+"s")),this.state=m.State.IDLE}else c.logger.warn("AudioStreamController: buffer full error also media.currentTime is not buffered, flush audio buffer"),this.fragCurrent=null,this.state=m.State.BUFFER_FLUSHING,this.hls.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"})}}},r.prototype.onBufferFlushed=function(){var e=this,t=this.pendingData;t&&t.length?(c.logger.log("AudioStreamController: appending pending audio data after buffer flushed"),t.forEach(function(t){e.hls.trigger(s.default.BUFFER_APPENDING,t)}),this.appended=!0,this.pendingData=[],this.state=m.State.PARSED):(this.state=m.State.IDLE,this.fragPrevious=null,this.tick())},r}(m.default);t.default=g}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/audio-track-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/task-loop.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),l=function(e){function t(t){var r=e.call(this,t,i.default.MANIFEST_LOADING,i.default.MANIFEST_PARSED,i.default.AUDIO_TRACK_LOADED,i.default.AUDIO_TRACK_SWITCHED,i.default.LEVEL_LOADED,i.default.ERROR)||this;return r._trackId=-1,r._selectDefaultTrack=!0,r.tracks=[],r.trackIdBlacklist=Object.create(null),r.audioGroupId=null,r}return n(t,e),t.prototype.onManifestLoading=function(){this.tracks=[],this._trackId=-1,this._selectDefaultTrack=!0},t.prototype.onManifestParsed=function(e){var t=this.tracks=e.audioTracks||[];this.hls.trigger(i.default.AUDIO_TRACKS_UPDATED,{audioTracks:t})},t.prototype.onAudioTrackLoaded=function(e){if(e.id>=this.tracks.length)return void a.logger.warn("Invalid audio track id:",e.id);if(a.logger.log("audioTrack "+e.id+" loaded"),this.tracks[e.id].details=e.details,e.details.live&&!this.hasInterval()){var t=1e3*e.details.targetduration;this.setInterval(t)}!e.details.live&&this.hasInterval()&&this.clearInterval()},t.prototype.onAudioTrackSwitched=function(e){var t=this.tracks[e.id].groupId;t&&this.audioGroupId!==t&&(this.audioGroupId=t)},t.prototype.onLevelLoaded=function(e){var t=this.hls.levels[e.level];if(t.audioGroupIds){var r=t.audioGroupIds[t.urlId];this.audioGroupId!==r&&(this.audioGroupId=r,this._selectInitialAudioTrack())}},t.prototype.onError=function(e){e.type===s.ErrorTypes.NETWORK_ERROR&&(e.fatal&&this.clearInterval(),e.details===s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR&&(a.logger.warn("Network failure on audio-track id:",e.context.id),this._handleLoadError()))},Object.defineProperty(t.prototype,"audioTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){return this._trackId},set:function(e){this._setAudioTrack(e),this._selectDefaultTrack=!1},enumerable:!0,configurable:!0}),t.prototype._setAudioTrack=function(e){if(this._trackId===e&&this.tracks[this._trackId].details)return void a.logger.debug("Same id as current audio-track passed, and track details available -> no-op");if(e<0||e>=this.tracks.length)return void a.logger.warn("Invalid id passed to audio-track controller");var t=this.tracks[e];a.logger.log("Now switching to audio-track index "+e),this.clearInterval(),this._trackId=e;var r=t.url,n=t.type,o=t.id;this.hls.trigger(i.default.AUDIO_TRACK_SWITCHING,{id:o,type:n,url:r}),this._loadTrackDetailsIfNeeded(t)},t.prototype.doTick=function(){this._updateTrack(this._trackId)},t.prototype._selectInitialAudioTrack=function(){var e=this,t=this.tracks;if(t.length){var r=this.tracks[this._trackId],n=null;if(r&&(n=r.name),this._selectDefaultTrack){var o=t.filter(function(e){return e.default});o.length?t=o:a.logger.warn("No default audio tracks defined")}var l=!1,d=function(){t.forEach(function(t){l||e.audioGroupId&&t.groupId!==e.audioGroupId||n&&n!==t.name||(e._setAudioTrack(t.id),l=!0)})};d(),l||(n=null,d()),l||(a.logger.error("No track found for running audio group-ID: "+this.audioGroupId),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,fatal:!0}))}},t.prototype._needsTrackLoading=function(e){var t=e.details,r=e.url;return!(t&&!t.live)&&!!r},t.prototype._loadTrackDetailsIfNeeded=function(e){if(this._needsTrackLoading(e)){var t=e.url,r=e.id;a.logger.log("loading audio-track playlist for id: "+r),this.hls.trigger(i.default.AUDIO_TRACK_LOADING,{url:t,id:r})}},t.prototype._updateTrack=function(e){if(!(e<0||e>=this.tracks.length)){this.clearInterval(),this._trackId=e,a.logger.log("trying to update audio-track "+e);var t=this.tracks[e];this._loadTrackDetailsIfNeeded(t)}},t.prototype._handleLoadError=function(){this.trackIdBlacklist[this._trackId]=!0;var e=this._trackId,t=this.tracks[e],r=t.name,n=t.language,i=t.groupId;a.logger.warn("Loading failed on audio track id: "+e+", group-id: "+i+', name/language: "'+r+'" / "'+n+'"');for(var o=e,s=0;s<this.tracks.length;s++)if(!this.trackIdBlacklist[s]){var l=this.tracks[s];if(l.name===r){o=s;break}}if(o===e)return void a.logger.warn('No fallback audio-track found for name/language: "'+r+'" / "'+n+'"');a.logger.log("Attempting audio-track fallback id:",o,"group-id:",this.tracks[o].groupId),this._setAudioTrack(o)},t}(o.default);t.default=l},"./src/controller/base-stream-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/task-loop.js"),o=r("./src/controller/fragment-tracker.js"),a=r("./src/utils/buffer-helper.js"),s=r("./src/utils/logger.js");t.State={STOPPED:"STOPPED",STARTING:"STARTING",IDLE:"IDLE",PAUSED:"PAUSED",KEY_LOADING:"KEY_LOADING",FRAG_LOADING:"FRAG_LOADING",FRAG_LOADING_WAITING_RETRY:"FRAG_LOADING_WAITING_RETRY",WAITING_TRACK:"WAITING_TRACK",PARSING:"PARSING",PARSED:"PARSED",BUFFER_FLUSHING:"BUFFER_FLUSHING",ENDED:"ENDED",ERROR:"ERROR",WAITING_INIT_PTS:"WAITING_INIT_PTS",WAITING_LEVEL:"WAITING_LEVEL"};var l=function(r){function i(){return null!==r&&r.apply(this,arguments)||this}return n(i,r),i.prototype.doTick=function(){},i.prototype.startLoad=function(){},i.prototype.stopLoad=function(){var e=this.fragCurrent;e&&(e.loader&&e.loader.abort(),this.fragmentTracker.removeFragment(e)),this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.fragCurrent=null,this.fragPrevious=null,this.clearInterval(),this.clearNextTick(),this.state=t.State.STOPPED},i.prototype._streamEnded=function(e,t){var r=this,n=r.fragCurrent,i=r.fragmentTracker;if(!t.live&&n&&!n.backtracked&&n.sn===t.endSN&&!e.nextStart){var a=i.getState(n);return a===o.FragmentState.PARTIAL||a===o.FragmentState.OK}return!1},i.prototype.onMediaSeeking=function(){var r=this,n=r.config,i=r.media,o=r.mediaBuffer,l=r.state,d=i?i.currentTime:null,u=a.BufferHelper.bufferInfo(o||i,d,this.config.maxBufferHole);if(e.isFinite(d)&&s.logger.log("media seeking to "+d.toFixed(3)),l===t.State.FRAG_LOADING){var c=this.fragCurrent;if(0===u.len&&c){var f=n.maxFragLookUpTolerance,p=c.start-f,h=c.start+c.duration+f;d<p||d>h?(c.loader&&(s.logger.log("seeking outside of buffer while fragment load in progress, cancel fragment load"),c.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.state=t.State.IDLE):s.logger.log("seeking outside of buffer but within currently loaded fragment range")}}else l===t.State.ENDED&&(0===u.len&&(this.fragPrevious=null,this.fragCurrent=null),this.state=t.State.IDLE);i&&(this.lastCurrentTime=d),this.loadedmetadata||(this.nextLoadPosition=this.startPosition=d),this.tick()},i.prototype.onMediaEnded=function(){this.startPosition=this.lastCurrentTime=0},i.prototype.onHandlerDestroying=function(){this.stopLoad(),r.prototype.onHandlerDestroying.call(this)},i.prototype.onHandlerDestroyed=function(){this.state=t.State.STOPPED,this.fragmentTracker=null},i}(i.default);t.default=l}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/buffer-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),l=r("./src/utils/mediasource-helper.js"),d=l.getMediaSource(),u=function(t){function r(e){var r=t.call(this,e,i.default.MEDIA_ATTACHING,i.default.MEDIA_DETACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_RESET,i.default.BUFFER_APPENDING,i.default.BUFFER_CODECS,i.default.BUFFER_EOS,i.default.BUFFER_FLUSHING,i.default.LEVEL_PTS_UPDATED,i.default.LEVEL_UPDATED)||this;return r._msDuration=null,r._levelDuration=null,r._levelTargetDuration=10,r._live=null,r._objectUrl=null,r.bufferCodecEventsExpected=0,r.onsbue=r.onSBUpdateEnd.bind(r),r.onsbe=r.onSBUpdateError.bind(r),r.pendingTracks={},r.tracks={},r}return n(r,t),r.prototype.destroy=function(){o.default.prototype.destroy.call(this)},r.prototype.onLevelPtsUpdated=function(e){var t=e.type,r=this.tracks.audio;if("audio"===t&&r&&"audio/mpeg"===r.container){var n=this.sourceBuffer.audio;if(Math.abs(n.timestampOffset-e.start)>.1){var i=n.updating;try{n.abort()}catch(e){a.logger.warn("can not abort audio buffer: "+e)}i?this.audioTimestampOffset=e.start:(a.logger.warn("change mpeg audio timestamp offset from "+n.timestampOffset+" to "+e.start),n.timestampOffset=e.start)}}},r.prototype.onManifestParsed=function(e){this.bufferCodecEventsExpected=e.altAudio?2:1,a.logger.log(this.bufferCodecEventsExpected+" bufferCodec event(s) expected")},r.prototype.onMediaAttaching=function(e){var t=this.media=e.media;if(t){var r=this.mediaSource=new d;this.onmso=this.onMediaSourceOpen.bind(this),this.onmse=this.onMediaSourceEnded.bind(this),this.onmsc=this.onMediaSourceClose.bind(this),r.addEventListener("sourceopen",this.onmso),r.addEventListener("sourceended",this.onmse),r.addEventListener("sourceclose",this.onmsc),t.src=window.URL.createObjectURL(r),this._objectUrl=t.src}},r.prototype.onMediaDetaching=function(){a.logger.log("media source detaching");var e=this.mediaSource;if(e){if("open"===e.readyState)try{e.endOfStream()}catch(e){a.logger.warn("onMediaDetaching:"+e.message+" while calling endOfStream")}e.removeEventListener("sourceopen",this.onmso),e.removeEventListener("sourceended",this.onmse),e.removeEventListener("sourceclose",this.onmsc),this.media&&(window.URL.revokeObjectURL(this._objectUrl),this.media.src===this._objectUrl?(this.media.removeAttribute("src"),this.media.load()):a.logger.warn("media.src was changed by a third party - skip cleanup")),this.mediaSource=null,this.media=null,this._objectUrl=null,this.pendingTracks={},this.tracks={},this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0}this.onmso=this.onmse=this.onmsc=null,this.hls.trigger(i.default.MEDIA_DETACHED)},r.prototype.onMediaSourceOpen=function(){a.logger.log("media source opened"),this.hls.trigger(i.default.MEDIA_ATTACHED,{media:this.media});var e=this.mediaSource;e&&e.removeEventListener("sourceopen",this.onmso),this.checkPendingTracks()},r.prototype.checkPendingTracks=function(){var e=this,t=e.bufferCodecEventsExpected,r=e.pendingTracks,n=Object.keys(r).length;(n&&!t||2===n)&&(this.createSourceBuffers(r),this.pendingTracks={},this.doAppending())},r.prototype.onMediaSourceClose=function(){a.logger.log("media source closed")},r.prototype.onMediaSourceEnded=function(){a.logger.log("media source ended")},r.prototype.onSBUpdateEnd=function(){if(this.audioTimestampOffset){var e=this.sourceBuffer.audio;a.logger.warn("change mpeg audio timestamp offset from "+e.timestampOffset+" to "+this.audioTimestampOffset),e.timestampOffset=this.audioTimestampOffset,delete this.audioTimestampOffset}this._needsFlush&&this.doFlush(),this._needsEos&&this.checkEos(),this.appending=!1;var t=this.parent,r=this.segments.reduce(function(e,r){return r.parent===t?e+1:e},0),n={},o=this.sourceBuffer;for(var s in o)n[s]=o[s].buffered;this.hls.trigger(i.default.BUFFER_APPENDED,{parent:t,pending:r,timeRanges:n}),this._needsFlush||this.doAppending(),this.updateMediaElementDuration(),0===r&&this.flushLiveBackBuffer()},r.prototype.onSBUpdateError=function(e){a.logger.error("sourceBuffer error:",e),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferReset=function(){var e=this.sourceBuffer;for(var t in e){var r=e[t];try{this.mediaSource.removeSourceBuffer(r),r.removeEventListener("updateend",this.onsbue),r.removeEventListener("error",this.onsbe)}catch(e){}}this.sourceBuffer={},this.flushRange=[],this.segments=[],this.appended=0},r.prototype.onBufferCodecs=function(e){var t=this;if(!Object.keys(this.sourceBuffer).length){Object.keys(e).forEach(function(r){t.pendingTracks[r]=e[r]});var r=this.mediaSource;this.bufferCodecEventsExpected=Math.max(this.bufferCodecEventsExpected-1,0),r&&"open"===r.readyState&&this.checkPendingTracks()}},r.prototype.createSourceBuffers=function(e){var t=this.sourceBuffer,r=this.mediaSource;for(var n in e)if(!t[n]){var o=e[n],l=o.levelCodec||o.codec,d=o.container+";codecs="+l;a.logger.log("creating sourceBuffer("+d+")");try{var u=t[n]=r.addSourceBuffer(d);u.addEventListener("updateend",this.onsbue),u.addEventListener("error",this.onsbe),this.tracks[n]={codec:l,container:o.container},o.buffer=u}catch(e){a.logger.error("error while trying to add sourceBuffer:"+e.message),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_ADD_CODEC_ERROR,fatal:!1,err:e,mimeType:d})}}this.hls.trigger(i.default.BUFFER_CREATED,{tracks:e})},r.prototype.onBufferAppending=function(e){this._needsFlush||(this.segments?this.segments.push(e):this.segments=[e],this.doAppending())},r.prototype.onBufferAppendFail=function(e){a.logger.error("sourceBuffer error:",e.event),this.hls.trigger(i.default.ERROR,{type:s.ErrorTypes.MEDIA_ERROR,details:s.ErrorDetails.BUFFER_APPENDING_ERROR,fatal:!1})},r.prototype.onBufferEos=function(e){var t=this.sourceBuffer,r=e.type;for(var n in t)r&&n!==r||t[n].ended||(t[n].ended=!0,a.logger.log(n+" sourceBuffer now EOS"));this.checkEos()},r.prototype.checkEos=function(){var e=this.sourceBuffer,t=this.mediaSource;if(!t||"open"!==t.readyState)return void(this._needsEos=!1);for(var r in e){var n=e[r];if(!n.ended)return;if(n.updating)return void(this._needsEos=!0)}a.logger.log("all media data are available, signal endOfStream() to MediaSource and stop loading fragment");try{t.endOfStream()}catch(e){a.logger.warn("exception while calling mediaSource.endOfStream()")}this._needsEos=!1},r.prototype.onBufferFlushing=function(e){this.flushRange.push({start:e.startOffset,end:e.endOffset,type:e.type}),this.flushBufferCounter=0,this.doFlush()},r.prototype.flushLiveBackBuffer=function(){if(this._live){var e=this.hls.config.liveBackBufferLength;if(isFinite(e)&&!(e<0))for(var t=this.media.currentTime,r=this.sourceBuffer,n=Object.keys(r),i=t-Math.max(e,this._levelTargetDuration),o=n.length-1;o>=0;o--){var a=n[o],s=r[a].buffered;s.length>0&&i>s.start(0)&&this.removeBufferRange(a,r[a],0,i)}}},r.prototype.onLevelUpdated=function(e){var t=e.details;t.fragments.length>0&&(this._levelDuration=t.totalduration+t.fragments[0].start,this._levelTargetDuration=t.averagetargetduration||t.targetduration||10,this._live=t.live,this.updateMediaElementDuration())},r.prototype.updateMediaElementDuration=function(){var t,r=this.hls.config;if(null!==this._levelDuration&&this.media&&this.mediaSource&&this.sourceBuffer&&0!==this.media.readyState&&"open"===this.mediaSource.readyState){for(var n in this.sourceBuffer)if(!0===this.sourceBuffer[n].updating)return;t=this.media.duration,null===this._msDuration&&(this._msDuration=this.mediaSource.duration),!0===this._live&&!0===r.liveDurationInfinity?(a.logger.log("Media Source duration is set to Infinity"),this._msDuration=this.mediaSource.duration=1/0):(this._levelDuration>this._msDuration&&this._levelDuration>t||!e.isFinite(t))&&(a.logger.log("Updating Media Source duration to "+this._levelDuration.toFixed(3)),this._msDuration=this.mediaSource.duration=this._levelDuration)}},r.prototype.doFlush=function(){for(;this.flushRange.length;){var e=this.flushRange[0];if(!this.flushBuffer(e.start,e.end,e.type))return void(this._needsFlush=!0);this.flushRange.shift(),this.flushBufferCounter=0}if(0===this.flushRange.length){this._needsFlush=!1;var t=0,r=this.sourceBuffer;try{for(var n in r)t+=r[n].buffered.length}catch(e){a.logger.error("error while accessing sourceBuffer.buffered")}this.appended=t,this.hls.trigger(i.default.BUFFER_FLUSHED)}},r.prototype.doAppending=function(){var e=this,t=e.hls,r=e.segments,n=e.sourceBuffer;if(Object.keys(n).length){if(this.media.error)return this.segments=[],void a.logger.error("trying to append although a media error occured, flush segment and abort");if(this.appending)return;if(r&&r.length){var o=r.shift();try{var l=o.type,d=n[l];d?d.updating?r.unshift(o):(d.ended=!1,this.parent=o.parent,d.appendBuffer(o.data),this.appendError=0,this.appended++,this.appending=!0):this.onSBUpdateEnd()}catch(e){a.logger.error("error while trying to append buffer:"+e.message),r.unshift(o);var u={type:s.ErrorTypes.MEDIA_ERROR,parent:o.parent};22!==e.code?(this.appendError?this.appendError++:this.appendError=1,u.details=s.ErrorDetails.BUFFER_APPEND_ERROR,this.appendError>t.config.appendErrorMaxRetry?(a.logger.log("fail "+t.config.appendErrorMaxRetry+" times to append segment in sourceBuffer"),this.segments=[],u.fatal=!0,t.trigger(i.default.ERROR,u)):(u.fatal=!1,t.trigger(i.default.ERROR,u))):(this.segments=[],u.details=s.ErrorDetails.BUFFER_FULL_ERROR,u.fatal=!1,t.trigger(i.default.ERROR,u))}}}},r.prototype.flushBuffer=function(e,t,r){var n,i=this.sourceBuffer;if(Object.keys(i).length){if(a.logger.log("flushBuffer,pos/start/end: "+this.media.currentTime.toFixed(3)+"/"+e+"/"+t),this.flushBufferCounter<this.appended){for(var o in i)if(!r||o===r){if(n=i[o],n.ended=!1,n.updating)return a.logger.warn("cannot flush, sb updating in progress"),!1;if(this.removeBufferRange(o,n,e,t))return this.flushBufferCounter++,!1}}else a.logger.warn("abort flushing too many retries");a.logger.log("buffer flushed")}return!0},r.prototype.removeBufferRange=function(e,t,r,n){try{for(var i=0;i<t.buffered.length;i++){var o=t.buffered.start(i),s=t.buffered.end(i),l=Math.max(o,r),d=Math.min(s,n);if(Math.min(d,s)-l>.5)return a.logger.log("sb remove "+e+" ["+l+","+d+"], of ["+o+","+s+"], pos:"+this.media.currentTime),t.remove(l,d),!0}}catch(e){a.logger.warn("removeBufferRange failed",e)}return!1},r}(o.default);t.default=u}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/cap-level-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=function(t){function r(r){var n=t.call(this,r,i.default.FPS_DROP_LEVEL_CAPPING,i.default.MEDIA_ATTACHING,i.default.MANIFEST_PARSED,i.default.BUFFER_CODECS,i.default.MEDIA_DETACHING)||this;return n.autoLevelCapping=e.POSITIVE_INFINITY,n.firstLevel=null,n.levels=[],n.media=null,n.restrictedLevels=[],n.timer=null,n}return n(r,t),r.prototype.destroy=function(){this.hls.config.capLevelToPlayerSize&&(this.media=null,this._stopCapping())},r.prototype.onFpsDropLevelCapping=function(e){r.isLevelAllowed(e.droppedLevel,this.restrictedLevels)&&this.restrictedLevels.push(e.droppedLevel)},r.prototype.onMediaAttaching=function(e){this.media=e.media instanceof window.HTMLVideoElement?e.media:null},r.prototype.onManifestParsed=function(e){var t=this.hls;this.restrictedLevels=[],this.levels=e.levels,this.firstLevel=e.firstLevel,t.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onBufferCodecs=function(e){this.hls.config.capLevelToPlayerSize&&e.video&&this._startCapping()},r.prototype.onLevelsUpdated=function(e){this.levels=e.levels},r.prototype.onMediaDetaching=function(){this._stopCapping()},r.prototype.detectPlayerSize=function(){if(this.media){var e=this.levels?this.levels.length:0;if(e){var t=this.hls;t.autoLevelCapping=this.getMaxLevel(e-1),t.autoLevelCapping>this.autoLevelCapping&&t.streamController.nextLevelSwitch(),this.autoLevelCapping=t.autoLevelCapping}}},r.prototype.getMaxLevel=function(e){var t=this;if(!this.levels)return-1;var n=this.levels.filter(function(n,i){return r.isLevelAllowed(i,t.restrictedLevels)&&i<=e});return r.getMaxLevelByMediaSize(n,this.mediaWidth,this.mediaHeight)},r.prototype._startCapping=function(){this.timer||(this.autoLevelCapping=e.POSITIVE_INFINITY,this.hls.firstLevel=this.getMaxLevel(this.firstLevel),clearInterval(this.timer),this.timer=setInterval(this.detectPlayerSize.bind(this),1e3),this.detectPlayerSize())},r.prototype._stopCapping=function(){this.restrictedLevels=[],this.firstLevel=null,this.autoLevelCapping=e.POSITIVE_INFINITY,this.timer&&(this.timer=clearInterval(this.timer),this.timer=null)},Object.defineProperty(r.prototype,"mediaWidth",{get:function(){var e,t=this.media;return t&&(e=t.width||t.clientWidth||t.offsetWidth,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"mediaHeight",{get:function(){var e,t=this.media;return t&&(e=t.height||t.clientHeight||t.offsetHeight,e*=r.contentScaleFactor),e},enumerable:!0,configurable:!0}),Object.defineProperty(r,"contentScaleFactor",{get:function(){var e=1;try{e=window.devicePixelRatio}catch(e){}return e},enumerable:!0,configurable:!0}),r.isLevelAllowed=function(e,t){return void 0===t&&(t=[]),-1===t.indexOf(e)},r.getMaxLevelByMediaSize=function(e,t,r){if(!e||e&&!e.length)return-1;for(var n=e.length-1,i=0;i<e.length;i+=1){var o=e[i];if((o.width>=t||o.height>=r)&&function(e,t){return!t||(e.width!==t.width||e.height!==t.height)}(o,e[i+1])){n=i;break}}return n},r}(o.default);t.default=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/eme-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/event-handler.js"),o=r("./src/events.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=window.XMLHttpRequest,d={WIDEVINE:"com.widevine.alpha",PLAYREADY:"com.microsoft.playready"},u=function(e,t,r){var n={videoCapabilities:[]};return t.forEach(function(e){n.videoCapabilities.push({contentType:'video/mp4; codecs="'+e+'"'})}),[n]},c=function(e,t,r){switch(e){case d.WIDEVINE:return u(0,r);default:throw Error("Unknown key-system: "+e)}},f=function(e){function t(t){var r=e.call(this,t,o.default.MEDIA_ATTACHED,o.default.MANIFEST_PARSED)||this;return r._widevineLicenseUrl=t.config.widevineLicenseUrl,r._licenseXhrSetup=t.config.licenseXhrSetup,r._emeEnabled=t.config.emeEnabled,r._requestMediaKeySystemAccess=t.config.requestMediaKeySystemAccessFunc,r._mediaKeysList=[],r._media=null,r._hasSetMediaKeys=!1,r._isMediaEncrypted=!1,r._requestLicenseFailureCount=0,r}return n(t,e),t.prototype.getLicenseServerUrl=function(e){var t;switch(e){case d.WIDEVINE:t=this._widevineLicenseUrl;break;default:t=null}return t||(s.logger.error('No license server URL configured for key-system "'+e+'"'),this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})),t},t.prototype._attemptKeySystemAccess=function(e,t,r){var n=this,i=c(e,0,r);if(!i)return void s.logger.warn("Can not create config for key-system (maybe because platform is not supported):",e);s.logger.log("Requesting encrypted media key-system access"),this.requestMediaKeySystemAccess(e,i).then(function(t){n._onMediaKeySystemAccessObtained(e,t)}).catch(function(t){s.logger.error('Failed to obtain key-system "'+e+'" access:',t)})},Object.defineProperty(t.prototype,"requestMediaKeySystemAccess",{get:function(){if(!this._requestMediaKeySystemAccess)throw new Error("No requestMediaKeySystemAccess function configured");return this._requestMediaKeySystemAccess},enumerable:!0,configurable:!0}),t.prototype._onMediaKeySystemAccessObtained=function(e,t){var r=this;s.logger.log('Access for key-system "'+e+'" obtained');var n={mediaKeys:null,mediaKeysSession:null,mediaKeysSessionInitialized:!1,mediaKeySystemAccess:t,mediaKeySystemDomain:e};this._mediaKeysList.push(n),t.createMediaKeys().then(function(t){n.mediaKeys=t,s.logger.log('Media-keys created for key-system "'+e+'"'),r._onMediaKeysCreated()}).catch(function(e){s.logger.error("Failed to create media-keys:",e)})},t.prototype._onMediaKeysCreated=function(){var e=this;this._mediaKeysList.forEach(function(t){t.mediaKeysSession||(t.mediaKeysSession=t.mediaKeys.createSession(),e._onNewMediaKeySession(t.mediaKeysSession))})},t.prototype._onNewMediaKeySession=function(e){var t=this;s.logger.log("New key-system session "+e.sessionId),e.addEventListener("message",function(r){t._onKeySessionMessage(e,r.message)},!1)},t.prototype._onKeySessionMessage=function(e,t){s.logger.log("Got EME message event, creating license request"),this._requestLicense(t,function(t){s.logger.log("Received license data, updating key-session"),e.update(t)})},t.prototype._onMediaEncrypted=function(e,t){s.logger.log('Media is encrypted using "'+e+'" init data type'),this._isMediaEncrypted=!0,this._mediaEncryptionInitDataType=e,this._mediaEncryptionInitData=t,this._attemptSetMediaKeys(),this._generateRequestWithPreferredKeySession()},t.prototype._attemptSetMediaKeys=function(){if(!this._hasSetMediaKeys){var e=this._mediaKeysList[0];if(!e||!e.mediaKeys)return s.logger.error("Fatal: Media is encrypted but no CDM access or no keys have been obtained yet"),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_KEYS,fatal:!0});s.logger.log("Setting keys for encrypted media"),this._media.setMediaKeys(e.mediaKeys),this._hasSetMediaKeys=!0}},t.prototype._generateRequestWithPreferredKeySession=function(){var e=this,t=this._mediaKeysList[0];if(!t)return s.logger.error("Fatal: Media is encrypted but not any key-system access has been obtained yet"),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});if(t.mediaKeysSessionInitialized)return void s.logger.warn("Key-Session already initialized but requested again");var r=t.mediaKeysSession;r||(s.logger.error("Fatal: Media is encrypted but no key-session existing"),this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!0}));var n=this._mediaEncryptionInitDataType,i=this._mediaEncryptionInitData;s.logger.log('Generating key-session request for "'+n+'" init data type'),t.mediaKeysSessionInitialized=!0,r.generateRequest(n,i).then(function(){s.logger.debug("Key-session generation succeeded")}).catch(function(t){s.logger.error("Error generating key-session request:",t),e.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_SESSION,fatal:!1})})},t.prototype._createLicenseXhr=function(e,t,r){var n=new l,i=this._licenseXhrSetup;try{if(i)try{i(n,e)}catch(t){n.open("POST",e,!0),i(n,e)}n.readyState||n.open("POST",e,!0)}catch(e){return s.logger.error("Error setting up key-system license XHR",e),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}return n.responseType="arraybuffer",n.onreadystatechange=this._onLicenseRequestReadyStageChange.bind(this,n,e,t,r),n},t.prototype._onLicenseRequestReadyStageChange=function(e,t,r,n){switch(e.readyState){case 4:if(200===e.status)this._requestLicenseFailureCount=0,s.logger.log("License request succeeded"),n(e.response);else{if(s.logger.error("License Request XHR failed ("+t+"). Status: "+e.status+" ("+e.statusText+")"),++this._requestLicenseFailureCount<=3){var i=3-this._requestLicenseFailureCount+1;return s.logger.warn("Retrying license request, "+i+" attempts left"),void this._requestLicense(r,n)}this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_LICENSE_REQUEST_FAILED,fatal:!0})}}},t.prototype._generateLicenseRequestChallenge=function(e,t){var r;return e.mediaKeySystemDomain===d.PLAYREADY?s.logger.error("PlayReady is not supported (yet)"):e.mediaKeySystemDomain===d.WIDEVINE?r=t:s.logger.error("Unsupported key-system:",e.mediaKeySystemDomain),r},t.prototype._requestLicense=function(e,t){s.logger.log("Requesting content license for key-system");var r=this._mediaKeysList[0];if(!r)return s.logger.error("Fatal error: Media is encrypted but no key-system access has been obtained yet"),void this.hls.trigger(o.default.ERROR,{type:a.ErrorTypes.KEY_SYSTEM_ERROR,details:a.ErrorDetails.KEY_SYSTEM_NO_ACCESS,fatal:!0});var n=this.getLicenseServerUrl(r.mediaKeySystemDomain),i=this._createLicenseXhr(n,e,t);s.logger.log("Sending license request to URL: "+n),i.send(this._generateLicenseRequestChallenge(r,e))},t.prototype.onMediaAttached=function(e){var t=this;if(this._emeEnabled){var r=e.media;this._media=r,r.addEventListener("encrypted",function(e){t._onMediaEncrypted(e.initDataType,e.initData)})}},t.prototype.onManifestParsed=function(e){if(this._emeEnabled){var t=e.levels.map(function(e){return e.audioCodec}),r=e.levels.map(function(e){return e.videoCodec});this._attemptKeySystemAccess(d.WIDEVINE,t,r)}},t}(i.default);t.default=f},"./src/controller/fps-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/utils/logger.js"),s=window.performance,l=function(e){function t(t){return e.call(this,t,i.default.MEDIA_ATTACHING)||this}return n(t,e),t.prototype.destroy=function(){this.timer&&clearInterval(this.timer),this.isVideoPlaybackQualityAvailable=!1},t.prototype.onMediaAttaching=function(e){var t=this.hls.config;if(t.capLevelOnFPSDrop){"function"==typeof(this.video=e.media instanceof window.HTMLVideoElement?e.media:null).getVideoPlaybackQuality&&(this.isVideoPlaybackQualityAvailable=!0),clearInterval(this.timer),this.timer=setInterval(this.checkFPSInterval.bind(this),t.fpsDroppedMonitoringPeriod)}},t.prototype.checkFPS=function(e,t,r){var n=s.now();if(t){if(this.lastTime){var o=n-this.lastTime,l=r-this.lastDroppedFrames,d=t-this.lastDecodedFrames,u=1e3*l/o,c=this.hls;if(c.trigger(i.default.FPS_DROP,{currentDropped:l,currentDecoded:d,totalDroppedFrames:r}),u>0&&l>c.config.fpsDroppedMonitoringThreshold*d){var f=c.currentLevel;a.logger.warn("drop FPS ratio greater than max allowed value for currentLevel: "+f),f>0&&(-1===c.autoLevelCapping||c.autoLevelCapping>=f)&&(f-=1,c.trigger(i.default.FPS_DROP_LEVEL_CAPPING,{level:f,droppedLevel:c.currentLevel}),c.autoLevelCapping=f,c.streamController.nextLevelSwitch())}}this.lastTime=n,this.lastDroppedFrames=r,this.lastDecodedFrames=t}},t.prototype.checkFPSInterval=function(){var e=this.video;if(e)if(this.isVideoPlaybackQualityAvailable){var t=e.getVideoPlaybackQuality();this.checkFPS(e,t.totalVideoFrames,t.droppedVideoFrames)}else this.checkFPS(e,e.webkitDecodedFrameCount,e.webkitDroppedFrameCount)},t}(o.default);t.default=l},"./src/controller/fragment-finders.js":function(e,t,r){"use strict";(function(e){function n(t,r,n){if(!Array.isArray(t)||!t.length||!e.isFinite(r))return null;if(r<t[0].programDateTime)return null;if(r>=t[t.length-1].endProgramDateTime)return null;n=n||0;for(var i=0;i<t.length;++i){var o=t[i];if(a(r,n,o))return o}return null}function i(e,t,r,n){void 0===r&&(r=0),void 0===n&&(n=0);var i=e?t[e.sn-t[0].sn+1]:null;return i&&!o(r,n,i)?i:s.default.search(t,o.bind(null,r,n))}function o(e,t,r){void 0===e&&(e=0),void 0===t&&(t=0);var n=Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.start+r.duration-n<=e?1:r.start-n>e&&r.start?-1:0}function a(e,t,r){var n=1e3*Math.min(t,r.duration+(r.deltaPTS?r.deltaPTS:0));return r.endProgramDateTime-n>e}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./src/utils/binary-search.js");t.findFragmentByPDT=n,t.findFragmentByPTS=i,t.fragmentWithinToleranceTest=o,t.pdtWithinToleranceTest=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/fragment-tracker.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/event-handler.js"),o=r("./src/events.js");t.FragmentState={NOT_LOADED:"NOT_LOADED",APPENDING:"APPENDING",PARTIAL:"PARTIAL",OK:"OK"};var a=function(r){function a(e){var t=r.call(this,e,o.default.BUFFER_APPENDED,o.default.FRAG_BUFFERED,o.default.FRAG_LOADED)||this;return t.bufferPadding=.2,t.fragments=Object.create(null),t.timeRanges=Object.create(null),t.config=e.config,t}return n(a,r),a.prototype.destroy=function(){this.fragments=Object.create(null),this.timeRanges=Object.create(null),this.config=null,i.default.prototype.destroy.call(this),r.prototype.destroy.call(this)},a.prototype.getBufferedFrag=function(e,t){var r=this.fragments,n=Object.keys(r).filter(function(n){var i=r[n];if(i.body.type!==t)return!1;if(!i.buffered)return!1;var o=i.body;return o.startPTS<=e&&e<=o.endPTS});if(0===n.length)return null;var i=n.pop();return r[i].body},a.prototype.detectEvictedFragments=function(e,t){var r,n,i=this;Object.keys(this.fragments).forEach(function(o){var a=i.fragments[o];if(!0===a.buffered){var s=a.range[e];if(s){r=s.time;for(var l=0;l<r.length;l++)if(n=r[l],!1===i.isTimeBuffered(n.startPTS,n.endPTS,t)){i.removeFragment(a.body);break}}}})},a.prototype.detectPartialFragments=function(e){var t=this,r=this.getFragmentKey(e),n=this.fragments[r];n&&(n.buffered=!0,Object.keys(this.timeRanges).forEach(function(r){if(e.hasElementaryStream(r)){var i=t.timeRanges[r];n.range[r]=t.getBufferedTimes(e.startPTS,e.endPTS,i)}}))},a.prototype.getBufferedTimes=function(e,t,r){for(var n,i,o=[],a=!1,s=0;s<r.length;s++){if(n=r.start(s)-this.bufferPadding,i=r.end(s)+this.bufferPadding,e>=n&&t<=i){o.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))});break}if(e<i&&t>n)o.push({startPTS:Math.max(e,r.start(s)),endPTS:Math.min(t,r.end(s))}),a=!0;else if(t<=n)break}return{time:o,partial:a}},a.prototype.getFragmentKey=function(e){return e.type+"_"+e.level+"_"+e.urlId+"_"+e.sn},a.prototype.getPartialFragment=function(e){var t,r,n,i=this,o=null,a=0;return Object.keys(this.fragments).forEach(function(s){var l=i.fragments[s];i.isPartial(l)&&(r=l.body.startPTS-i.bufferPadding,n=l.body.endPTS+i.bufferPadding,e>=r&&e<=n&&(t=Math.min(e-r,n-e),a<=t&&(o=l.body,a=t)))}),o},a.prototype.getState=function(e){var r=this.getFragmentKey(e),n=this.fragments[r],i=t.FragmentState.NOT_LOADED;return void 0!==n&&(i=n.buffered?!0===this.isPartial(n)?t.FragmentState.PARTIAL:t.FragmentState.OK:t.FragmentState.APPENDING),i},a.prototype.isPartial=function(e){return!0===e.buffered&&(void 0!==e.range.video&&!0===e.range.video.partial||void 0!==e.range.audio&&!0===e.range.audio.partial)},a.prototype.isTimeBuffered=function(e,t,r){for(var n,i,o=0;o<r.length;o++){if(n=r.start(o)-this.bufferPadding,i=r.end(o)+this.bufferPadding,e>=n&&t<=i)return!0;if(t<=n)return!1}return!1},a.prototype.onFragLoaded=function(t){var r=t.frag;e.isFinite(r.sn)&&!r.bitrateTest&&(this.fragments[this.getFragmentKey(r)]={body:r,range:Object.create(null),buffered:!1})},a.prototype.onBufferAppended=function(e){var t=this;this.timeRanges=e.timeRanges,Object.keys(this.timeRanges).forEach(function(e){var r=t.timeRanges[e];t.detectEvictedFragments(e,r)})},a.prototype.onFragBuffered=function(e){this.detectPartialFragments(e.frag)},a.prototype.hasFragment=function(e){var t=this.getFragmentKey(e);return void 0!==this.fragments[t]},a.prototype.removeFragment=function(e){var t=this.getFragmentKey(e);delete this.fragments[t]},a.prototype.removeAllFragments=function(){this.fragments=Object.create(null)},a}(i.default);t.FragmentTracker=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/gap-controller.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/buffer-helper.js"),i=r("./src/errors.js"),o=r("./src/events.js"),a=r("./src/utils/logger.js"),s=function(){function e(e,t,r,n){this.config=e,this.media=t,this.fragmentTracker=r,this.hls=n,this.stallReported=!1}return e.prototype.poll=function(e,t){var r=this,i=r.config,o=r.media,s=o.currentTime,l=window.performance.now();if(s!==e)return this.stallReported&&(a.logger.warn("playback not stuck anymore @"+s+", after "+Math.round(l-this.stalled)+"ms"),this.stallReported=!1),this.stalled=null,void(this.nudgeRetry=0);if(!(o.ended||!o.buffered.length||o.readyState>2||o.seeking&&n.BufferHelper.isBuffered(o,s))){var d=l-this.stalled,u=n.BufferHelper.bufferInfo(o,s,i.maxBufferHole);if(!this.stalled)return void(this.stalled=l);d>=1e3&&this._reportStall(u.len),this._tryFixBufferStall(u,d)}},e.prototype._tryFixBufferStall=function(e,t){var r=this,n=r.config,i=r.fragmentTracker,o=r.media,a=o.currentTime,s=i.getPartialFragment(a);s&&this._trySkipBufferHole(s),e.len>.5&&t>1e3*n.highBufferWatchdogPeriod&&(this.stalled=null,this._tryNudgeBuffer())},e.prototype._reportStall=function(e){var t=this,r=t.hls,n=t.media;t.stallReported||(this.stallReported=!0,a.logger.warn("Playback stalling at @"+n.currentTime+" due to low buffer"),r.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!1,buffer:e}))},e.prototype._trySkipBufferHole=function(e){for(var t=this,r=t.hls,n=t.media,s=n.currentTime,l=0,d=0;d<n.buffered.length;d++){var u=n.buffered.start(d);if(s>=l&&s<u)return n.currentTime=Math.max(u,n.currentTime+.1),a.logger.warn("skipping hole, adjusting currentTime from "+s+" to "+n.currentTime),this.stalled=null,void r.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_SEEK_OVER_HOLE,fatal:!1,reason:"fragment loaded with buffer holes, seeking from "+s+" to "+n.currentTime,frag:e});l=n.buffered.end(d)}},e.prototype._tryNudgeBuffer=function(){var e=this,t=e.config,r=e.hls,n=e.media,s=n.currentTime,l=(this.nudgeRetry||0)+1;if(this.nudgeRetry=l,l<t.nudgeMaxRetry){var d=s+l*t.nudgeOffset;a.logger.log("adjust currentTime from "+s+" to "+d),n.currentTime=d,r.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_NUDGE_ON_STALL,fatal:!1})}else a.logger.error("still stuck in high buffer @"+s+" after "+t.nudgeMaxRetry+", raise fatal error"),r.trigger(o.default.ERROR,{type:i.ErrorTypes.MEDIA_ERROR,details:i.ErrorDetails.BUFFER_STALLED_ERROR,fatal:!0})},e}();t.default=s},"./src/controller/id3-track-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/demux/id3.js"),s=r("./src/utils/texttrack-utils.js"),l=function(e){function t(t){var r=e.call(this,t,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.FRAG_PARSING_METADATA)||this;return r.id3Track=void 0,r.media=void 0,r}return n(t,e),t.prototype.destroy=function(){o.default.prototype.destroy.call(this)},t.prototype.onMediaAttached=function(e){this.media=e.media,this.media},t.prototype.onMediaDetaching=function(){s.clearCurrentCues(this.id3Track),this.id3Track=void 0,this.media=void 0},t.prototype.getID3Track=function(e){for(var t=0;t<e.length;t++){var r=e[t];if("metadata"===r.kind&&"id3"===r.label)return s.sendAddTrackEvent(r,this.media),r}return this.media.addTextTrack("metadata","id3")},t.prototype.onFragParsingMetadata=function(e){var t=e.frag,r=e.samples;this.id3Track||(this.id3Track=this.getID3Track(this.media.textTracks),this.id3Track.mode="hidden");for(var n=window.WebKitDataCue||window.VTTCue||window.TextTrackCue,i=0;i<r.length;i++){var o=a.default.getID3Frames(r[i].data);if(o){var s=r[i].pts,l=i<r.length-1?r[i+1].pts:t.endPTS;s===l&&(l+=1e-4);for(var d=0;d<o.length;d++){var u=o[d];if(!a.default.isTimeStampFrame(u)){var c=new n(s,l,"");c.value=u,this.id3Track.addCue(c)}}}}},t}(o.default);t.default=l},"./src/controller/level-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i,o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/logger.js"),l=r("./src/errors.js"),d=r("./src/utils/codecs.js"),u=r("./src/controller/level-helper.js"),c=(window.performance,function(e){function t(t){var r=e.call(this,t,o.default.MANIFEST_LOADED,o.default.LEVEL_LOADED,o.default.AUDIO_TRACK_SWITCHED,o.default.FRAG_LOADED,o.default.ERROR)||this;return r.canload=!1,r.currentLevelIndex=null,r.manualLevelIndex=-1,r.timer=null,i=/chrome|firefox/.test(navigator.userAgent.toLowerCase()),r}return n(t,e),t.prototype.onHandlerDestroying=function(){this.clearTimer(),this.manualLevelIndex=-1},t.prototype.clearTimer=function(){null!==this.timer&&(clearTimeout(this.timer),this.timer=null)},t.prototype.startLoad=function(){var e=this._levels;this.canload=!0,this.levelRetryCount=0,e&&e.forEach(function(e){e.loadError=0;var t=e.details;t&&t.live&&(e.details=void 0)}),null!==this.timer&&this.loadLevel()},t.prototype.stopLoad=function(){this.canload=!1},t.prototype.onManifestLoaded=function(e){var t,r=[],n=[],a={},c=null,f=!1,p=!1;if(e.levels.forEach(function(e){var t=e.attrs;e.loadError=0,e.fragmentError=!1,f=f||!!e.videoCodec,p=p||!!e.audioCodec,i&&e.audioCodec&&-1!==e.audioCodec.indexOf("mp4a.40.34")&&(e.audioCodec=void 0),c=a[e.bitrate],c?c.url.push(e.url):(e.url=[e.url],e.urlId=0,a[e.bitrate]=e,r.push(e)),t&&(t.AUDIO&&(p=!0,u.addGroupId(c||e,"audio",t.AUDIO)),t.SUBTITLES&&u.addGroupId(c||e,"text",t.SUBTITLES))}),f&&p&&(r=r.filter(function(e){return!!e.videoCodec})),r=r.filter(function(e){var t=e.audioCodec,r=e.videoCodec;return(!t||d.isCodecSupportedInMp4(t,"audio"))&&(!r||d.isCodecSupportedInMp4(r,"video"))}),e.audioTracks&&(n=e.audioTracks.filter(function(e){return!e.audioCodec||d.isCodecSupportedInMp4(e.audioCodec,"audio")}),n.forEach(function(e,t){e.id=t})),r.length>0){t=r[0].bitrate,r.sort(function(e,t){return e.bitrate-t.bitrate}),this._levels=r;for(var h=0;h<r.length;h++)if(r[h].bitrate===t){this._firstLevel=h,s.logger.log("manifest loaded,"+r.length+" level(s) found, first bitrate:"+t);break}this.hls.trigger(o.default.MANIFEST_PARSED,{levels:r,audioTracks:n,firstLevel:this._firstLevel,stats:e.stats,audio:p,video:f,altAudio:n.some(function(e){return!!e.url})})}else this.hls.trigger(o.default.ERROR,{type:l.ErrorTypes.MEDIA_ERROR,details:l.ErrorDetails.MANIFEST_INCOMPATIBLE_CODECS_ERROR,fatal:!0,url:this.hls.url,reason:"no level with compatible codecs found in manifest"})},Object.defineProperty(t.prototype,"levels",{get:function(){return this._levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"level",{get:function(){return this.currentLevelIndex},set:function(e){var t=this._levels;t&&(e=Math.min(e,t.length-1),this.currentLevelIndex===e&&t[e].details||this.setLevelInternal(e))},enumerable:!0,configurable:!0}),t.prototype.setLevelInternal=function(e){var t=this._levels,r=this.hls;if(e>=0&&e<t.length){if(this.clearTimer(),this.currentLevelIndex!==e){s.logger.log("switching to level "+e),this.currentLevelIndex=e;var n=t[e];n.level=e,r.trigger(o.default.LEVEL_SWITCHING,n)}var i=t[e],a=i.details;if(!a||a.live){var d=i.urlId;r.trigger(o.default.LEVEL_LOADING,{url:i.url[d],level:e,id:d})}}else r.trigger(o.default.ERROR,{type:l.ErrorTypes.OTHER_ERROR,details:l.ErrorDetails.LEVEL_SWITCH_ERROR,level:e,fatal:!1,reason:"invalid level idx"})},Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.manualLevelIndex},set:function(e){this.manualLevelIndex=e,void 0===this._startLevel&&(this._startLevel=e),-1!==e&&(this.level=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return this._firstLevel},set:function(e){this._firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){if(void 0===this._startLevel){var e=this.hls.config.startLevel;return void 0!==e?e:this._firstLevel}return this._startLevel},set:function(e){this._startLevel=e},enumerable:!0,configurable:!0}),t.prototype.onError=function(e){if(e.fatal)return void(e.type===l.ErrorTypes.NETWORK_ERROR&&this.clearTimer());var t,r=!1,n=!1;switch(e.details){case l.ErrorDetails.FRAG_LOAD_ERROR:case l.ErrorDetails.FRAG_LOAD_TIMEOUT:case l.ErrorDetails.KEY_LOAD_ERROR:case l.ErrorDetails.KEY_LOAD_TIMEOUT:t=e.frag.level,n=!0;break;case l.ErrorDetails.LEVEL_LOAD_ERROR:case l.ErrorDetails.LEVEL_LOAD_TIMEOUT:t=e.context.level,r=!0;break;case l.ErrorDetails.REMUX_ALLOC_ERROR:t=e.level,r=!0}void 0!==t&&this.recoverLevel(e,t,r,n)},t.prototype.recoverLevel=function(e,t,r,n){var i,o,a,l=this,d=this.hls.config,u=e.details,c=this._levels[t];if(c.loadError++,c.fragmentError=n,r){if(!(this.levelRetryCount+1<=d.levelLoadingMaxRetry))return s.logger.error("level controller, cannot recover from "+u+" error"),this.currentLevelIndex=null,this.clearTimer(),void(e.fatal=!0);o=Math.min(Math.pow(2,this.levelRetryCount)*d.levelLoadingRetryDelay,d.levelLoadingMaxRetryTimeout),this.timer=setTimeout(function(){return l.loadLevel()},o),e.levelRetry=!0,this.levelRetryCount++,s.logger.warn("level controller, "+u+", retry in "+o+" ms, current retry count is "+this.levelRetryCount)}(r||n)&&(i=c.url.length,i>1&&c.loadError<i?(c.urlId=(c.urlId+1)%i,c.details=void 0,s.logger.warn("level controller, "+u+" for level "+t+": switching to redundant URL-id "+c.urlId)):-1===this.manualLevelIndex?(a=0===t?this._levels.length-1:t-1,s.logger.warn("level controller, "+u+": switch to "+a),this.hls.nextAutoLevel=this.currentLevelIndex=a):n&&(s.logger.warn("level controller, "+u+": reload a fragment"),this.currentLevelIndex=null))},t.prototype.onFragLoaded=function(e){var t=e.frag;if(void 0!==t&&"main"===t.type){var r=this._levels[t.level];void 0!==r&&(r.fragmentError=!1,r.loadError=0,this.levelRetryCount=0)}},t.prototype.onLevelLoaded=function(e){var t=this,r=e.level,n=e.details;if(r===this.currentLevelIndex){var i=this._levels[r];if(i.fragmentError||(i.loadError=0,this.levelRetryCount=0),n.live){var o=u.computeReloadInterval(i.details,n,e.stats.trequest);s.logger.log("live playlist, reload in "+Math.round(o)+" ms"),this.timer=setTimeout(function(){return t.loadLevel()},o)}else this.clearTimer()}},t.prototype.onAudioTrackSwitched=function(e){var t=this.hls.audioTracks[e.id].groupId,r=this.hls.levels[this.currentLevelIndex];if(r&&r.audioGroupIds){for(var n=-1,i=0;i<r.audioGroupIds.length;i++)if(r.audioGroupIds[i]===t){n=i;break}n!==r.urlId&&(r.urlId=n,this.startLoad())}},t.prototype.loadLevel=function(){if(s.logger.debug("call to loadLevel"),null!==this.currentLevelIndex&&this.canload){var e=this._levels[this.currentLevelIndex];if("object"==typeof e&&e.url.length>0){var t=this.currentLevelIndex,r=e.urlId,n=e.url[r];s.logger.log("Attempt loading level index "+t+" with URL-id "+r),this.hls.trigger(o.default.LEVEL_LOADING,{url:n,level:t,id:r})}}},Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return-1!==this.manualLevelIndex?this.manualLevelIndex:this.hls.nextAutoLevel},set:function(e){this.level=e,-1===this.manualLevelIndex&&(this.hls.nextAutoLevel=e)},enumerable:!0,configurable:!0}),t}(a.default));t.default=c},"./src/controller/level-helper.js":function(e,t,r){"use strict";(function(e){function n(e,t,r){switch(t){case"audio":e.audioGroupIds||(e.audioGroupIds=[]),e.audioGroupIds.push(r);break;case"text":e.textGroupIds||(e.textGroupIds=[]),e.textGroupIds.push(r)}}function i(t,r,n){var i=t[r],o=t[n],a=o.startPTS;e.isFinite(a)?n>r?(i.duration=a-i.start,i.duration<0&&c.logger.warn("negative duration computed for frag "+i.sn+",level "+i.level+", there should be some duration drift between playlist and fragment!")):(o.duration=i.start-a,o.duration<0&&c.logger.warn("negative duration computed for frag "+o.sn+",level "+o.level+", there should be some duration drift between playlist and fragment!")):o.start=n>r?i.start+i.duration:Math.max(i.start-o.duration,0)}function o(t,r,n,o,a,s){var l=n;if(e.isFinite(r.startPTS)){var d=Math.abs(r.startPTS-n);e.isFinite(r.deltaPTS)?r.deltaPTS=Math.max(d,r.deltaPTS):r.deltaPTS=d,l=Math.max(n,r.startPTS),n=Math.min(n,r.startPTS),o=Math.max(o,r.endPTS),a=Math.min(a,r.startDTS),s=Math.max(s,r.endDTS)}var u=n-r.start;r.start=r.startPTS=n,r.maxStartPTS=l,r.endPTS=o,r.startDTS=a,r.endDTS=s,r.duration=o-n;var c=r.sn;if(!t||c<t.startSN||c>t.endSN)return 0;var f,p,h;for(f=c-t.startSN,p=t.fragments,p[f]=r,h=f;h>0;h--)i(p,h,h-1);for(h=f;h<p.length-1;h++)i(p,h,h+1);return t.PTSKnown=!0,u}function a(t,r){r.initSegment&&t.initSegment&&(r.initSegment=t.initSegment);var n,i=0;if(l(t,r,function(t,o){i=t.cc-o.cc,e.isFinite(t.startPTS)&&(o.start=o.startPTS=t.startPTS,o.endPTS=t.endPTS,o.duration=t.duration,o.backtracked=t.backtracked,o.dropped=t.dropped,n=o),r.PTSKnown=!0}),r.PTSKnown){if(i){c.logger.log("discontinuity sliding from playlist, take drift into account");for(var a=r.fragments,s=0;s<a.length;s++)a[s].cc+=i}n?o(r,n,n.startPTS,n.endPTS,n.startDTS,n.endDTS):d(t,r),r.PTSKnown=t.PTSKnown}}function s(e,t,r){void 0===r&&(r=0);var n=-1;l(e,t,function(e,t,r){t.start=e.start,n=r});var i=t.fragments;if(n<0)return void i.forEach(function(e){e.start+=r});for(var o=n+1;o<i.length;o++)i[o].start=i[o-1].start+i[o-1].duration}function l(e,t,r){if(e&&t)for(var n=Math.max(e.startSN,t.startSN)-t.startSN,i=Math.min(e.endSN,t.endSN)-t.startSN,o=t.startSN-e.startSN,a=n;a<=i;a++){var s=e.fragments[o+a],l=t.fragments[a];if(!s||!l)break;r(s,l,a)}}function d(e,t){var r=t.startSN-e.startSN,n=e.fragments,i=t.fragments;if(!(r<0||r>n.length))for(var o=0;o<i.length;o++)i[o].start+=n[r].start}function u(e,t,r){var n=1e3*(t.averagetargetduration?t.averagetargetduration:t.targetduration),i=n/2;return e&&t.endSN===e.endSN&&(n=i),r&&(n=Math.max(i,n-(window.performance.now()-r))),Math.round(n)}Object.defineProperty(t,"__esModule",{value:!0});var c=r("./src/utils/logger.js");t.addGroupId=n,t.updatePTS=i,t.updateFragPTSDTS=o,t.mergeDetails=a,t.mergeSubtitlePlaylists=s,t.mapFragmentIntersection=l,t.adjustSliding=d,t.computeReloadInterval=u}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/stream-controller.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/utils/binary-search.js"),o=r("./src/utils/buffer-helper.js"),a=r("./src/demux/demuxer.js"),s=r("./src/events.js"),l=r("./src/controller/fragment-tracker.js"),d=r("./src/loader/fragment.js"),u=r("./src/loader/playlist-loader.js"),c=r("./src/controller/level-helper.js"),f=r("./src/utils/time-ranges.js"),p=r("./src/errors.js"),h=r("./src/utils/logger.js"),m=r("./src/utils/discontinuities.js"),v=r("./src/controller/fragment-finders.js"),g=r("./src/controller/gap-controller.js"),y=r("./src/controller/base-stream-controller.js"),E=function(t){function r(e,r){var n=t.call(this,e,s.default.MEDIA_ATTACHED,s.default.MEDIA_DETACHING,s.default.MANIFEST_LOADING,s.default.MANIFEST_PARSED,s.default.LEVEL_LOADED,s.default.KEY_LOADED,s.default.FRAG_LOADED,s.default.FRAG_LOAD_EMERGENCY_ABORTED,s.default.FRAG_PARSING_INIT_SEGMENT,s.default.FRAG_PARSING_DATA,s.default.FRAG_PARSED,s.default.ERROR,s.default.AUDIO_TRACK_SWITCHING,s.default.AUDIO_TRACK_SWITCHED,s.default.BUFFER_CREATED,s.default.BUFFER_APPENDED,s.default.BUFFER_FLUSHED)||this;return n.fragmentTracker=r,n.config=e.config,n.audioCodecSwap=!1,n._state=y.State.STOPPED,n.stallReported=!1,n.gapController=null,n}return n(r,t),r.prototype.startLoad=function(e){if(this.levels){var t=this.lastCurrentTime,r=this.hls;if(this.stopLoad(),this.setInterval(100),this.level=-1,this.fragLoadError=0,!this.startFragRequested){var n=r.startLevel;-1===n&&(n=0,this.bitrateTest=!0),this.level=r.nextLoadLevel=n,this.loadedmetadata=!1}t>0&&-1===e&&(h.logger.log("override startPosition with lastCurrentTime @"+t.toFixed(3)),e=t),this.state=y.State.IDLE,this.nextLoadPosition=this.startPosition=this.lastCurrentTime=e,this.tick()}else this.forceStartLoad=!0,this.state=y.State.STOPPED},r.prototype.stopLoad=function(){this.forceStartLoad=!1,t.prototype.stopLoad.call(this)},r.prototype.doTick=function(){switch(this.state){case y.State.BUFFER_FLUSHING:this.fragLoadError=0;break;case y.State.IDLE:this._doTickIdle();break;case y.State.WAITING_LEVEL:var e=this.levels[this.level];e&&e.details&&(this.state=y.State.IDLE);break;case y.State.FRAG_LOADING_WAITING_RETRY:var t=window.performance.now(),r=this.retryDate;(!r||t>=r||this.media&&this.media.seeking)&&(h.logger.log("mediaController: retryDate reached, switch back to IDLE state"),this.state=y.State.IDLE);break;case y.State.ERROR:case y.State.STOPPED:case y.State.FRAG_LOADING:case y.State.PARSING:case y.State.PARSED:case y.State.ENDED:}this._checkBuffer(),this._checkFragmentChanged()},r.prototype._doTickIdle=function(){var e=this.hls,t=e.config,r=this.media;if(void 0!==this.levelLastLoaded&&(r||!this.startFragRequested&&t.startFragPrefetch)){var n;n=this.loadedmetadata?r.currentTime:this.nextLoadPosition;var i=e.nextLoadLevel,a=this.levels[i];if(a){var l,d=a.bitrate;l=d?Math.max(8*t.maxBufferSize/d,t.maxBufferLength):t.maxBufferLength,l=Math.min(l,t.maxMaxBufferLength);var u=o.BufferHelper.bufferInfo(this.mediaBuffer?this.mediaBuffer:r,n,t.maxBufferHole),c=u.len;if(!(c>=l)){h.logger.trace("buffer length of "+c.toFixed(3)+" is below max of "+l.toFixed(3)+". checking for more payload ..."),this.level=e.nextLoadLevel=i;var f=a.details;if(!f||f.live&&this.levelLastLoaded!==i)return void(this.state=y.State.WAITING_LEVEL);if(this._streamEnded(u,f)){var p={};return this.altAudio&&(p.type="video"),this.hls.trigger(s.default.BUFFER_EOS,p),void(this.state=y.State.ENDED)}this._fetchPayloadOrEos(n,u,f)}}}},r.prototype._fetchPayloadOrEos=function(e,t,r){var n=this.fragPrevious,i=this.level,o=r.fragments,a=o.length;if(0!==a){var s,l=o[0].start,d=o[a-1].start+o[a-1].duration,u=t.end;if(r.initSegment&&!r.initSegment.data)s=r.initSegment;else if(r.live){var c=this.config.initialLiveManifestSize;if(a<c)return void h.logger.warn("Can not start playback of a level, reason: not enough fragments "+a+" < "+c);if(null===(s=this._ensureFragmentAtLivePoint(r,u,l,d,n,o,a)))return}else u<l&&(s=o[0]);s||(s=this._findFragment(l,n,a,o,u,d,r)),s&&(s.encrypted?(h.logger.log("Loading key for "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i),this._loadKey(s)):(h.logger.log("Loading "+s.sn+" of ["+r.startSN+" ,"+r.endSN+"],level "+i+", currentTime:"+e.toFixed(3)+",bufferEnd:"+u.toFixed(3)),this._loadFragment(s)))}},r.prototype._ensureFragmentAtLivePoint=function(e,t,r,n,o,a,s){var l,d=this.hls.config,u=this.media,c=void 0!==d.liveMaxLatencyDuration?d.liveMaxLatencyDuration:d.liveMaxLatencyDurationCount*e.targetduration;if(t<Math.max(r-d.maxFragLookUpTolerance,n-c)){var f=this.liveSyncPosition=this.computeLivePosition(r,e);h.logger.log("buffer end: "+t.toFixed(3)+" is located too far from the end of live sliding playlist, reset currentTime to : "+f.toFixed(3)),t=f,u&&u.readyState&&u.duration>f&&(u.currentTime=f),this.nextLoadPosition=f}if(e.PTSKnown&&t>n&&u&&u.readyState)return null;if(this.startFragRequested&&!e.PTSKnown){if(o)if(e.hasProgramDateTime)h.logger.log("live playlist, switching playlist, load frag with same PDT: "+o.programDateTime),l=v.findFragmentByPDT(a,o.endProgramDateTime,d.maxFragLookUpTolerance);else{var p=o.sn+1;if(p>=e.startSN&&p<=e.endSN){var m=a[p-e.startSN];o.cc===m.cc&&(l=m,h.logger.log("live playlist, switching playlist, load frag with next SN: "+l.sn))}l||(l=i.default.search(a,function(e){return o.cc-e.cc}))&&h.logger.log("live playlist, switching playlist, load frag with same CC: "+l.sn)}l||(l=a[Math.min(s-1,Math.round(s/2))],h.logger.log("live playlist, switching playlist, unknown, load middle frag : "+l.sn))}return l},r.prototype._findFragment=function(e,t,r,n,i,o,a){var s,l=this.hls.config;if(i<o){var d=i>o-l.maxFragLookUpTolerance?0:l.maxFragLookUpTolerance;s=v.findFragmentByPTS(t,n,i,d)}else s=n[r-1];if(s){var u=s.sn-a.startSN,c=t&&s.level===t.level,f=n[u-1],p=n[u+1];if(t&&s.sn===t.sn)if(c&&!s.backtracked)if(s.sn<a.endSN){var m=t.deltaPTS;m&&m>l.maxBufferHole&&t.dropped&&u?(s=f,h.logger.warn("SN just loaded, with large PTS gap between audio and video, maybe frag is not starting with a keyframe ? load previous one to try to overcome this")):(s=p,h.logger.log("SN just loaded, load next one: "+s.sn,s))}else s=null;else s.backtracked&&(p&&p.backtracked?(h.logger.warn("Already backtracked from fragment "+p.sn+", will not backtrack to fragment "+s.sn+". Loading fragment "+p.sn),s=p):(h.logger.warn("Loaded fragment with dropped frames, backtracking 1 segment to find a keyframe"),s.dropped=0,f?(s=f,s.backtracked=!0):u&&(s=null)))}return s},r.prototype._loadKey=function(e){this.state=y.State.KEY_LOADING,this.hls.trigger(s.default.KEY_LOADING,{frag:e})},r.prototype._loadFragment=function(t){var r=this.fragmentTracker.getState(t);this.fragCurrent=t,this.startFragRequested=!0,e.isFinite(t.sn)&&!t.bitrateTest&&(this.nextLoadPosition=t.start+t.duration),t.backtracked||r===l.FragmentState.NOT_LOADED||r===l.FragmentState.PARTIAL?(t.autoLevel=this.hls.autoLevelEnabled,t.bitrateTest=this.bitrateTest,this.hls.trigger(s.default.FRAG_LOADING,{frag:t}),this.demuxer||(this.demuxer=new a.default(this.hls,"main")),this.state=y.State.FRAG_LOADING):r===l.FragmentState.APPENDING&&this._reduceMaxBufferLength(t.duration)&&this.fragmentTracker.removeFragment(t)},Object.defineProperty(r.prototype,"state",{get:function(){return this._state},set:function(e){if(this.state!==e){var t=this.state;this._state=e,h.logger.log("main stream:"+t+"->"+e),this.hls.trigger(s.default.STREAM_STATE_TRANSITION,{previousState:t,nextState:e})}},enumerable:!0,configurable:!0}),r.prototype.getBufferedFrag=function(e){return this.fragmentTracker.getBufferedFrag(e,u.default.LevelType.MAIN)},Object.defineProperty(r.prototype,"currentLevel",{get:function(){var e=this.media;if(e){var t=this.getBufferedFrag(e.currentTime);if(t)return t.level}return-1},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"nextBufferedFrag",{get:function(){var e=this.media;return e?this.followingBufferedFrag(this.getBufferedFrag(e.currentTime)):null},enumerable:!0,configurable:!0}),r.prototype.followingBufferedFrag=function(e){return e?this.getBufferedFrag(e.endPTS+.5):null},Object.defineProperty(r.prototype,"nextLevel",{get:function(){var e=this.nextBufferedFrag;return e?e.level:-1},enumerable:!0,configurable:!0}),r.prototype._checkFragmentChanged=function(){var e,t,r=this.media;if(r&&r.readyState&&!1===r.seeking&&(t=r.currentTime,t>this.lastCurrentTime&&(this.lastCurrentTime=t),o.BufferHelper.isBuffered(r,t)?e=this.getBufferedFrag(t):o.BufferHelper.isBuffered(r,t+.1)&&(e=this.getBufferedFrag(t+.1)),e)){var n=e;if(n!==this.fragPlaying){this.hls.trigger(s.default.FRAG_CHANGED,{frag:n});var i=n.level;this.fragPlaying&&this.fragPlaying.level===i||this.hls.trigger(s.default.LEVEL_SWITCHED,{level:i}),this.fragPlaying=n}}},r.prototype.immediateLevelSwitch=function(){if(h.logger.log("immediateLevelSwitch"),!this.immediateSwitch){this.immediateSwitch=!0;var t=this.media,r=void 0;t?(r=t.paused,t.pause()):r=!0,this.previouslyPaused=r}var n=this.fragCurrent;n&&n.loader&&n.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)},r.prototype.immediateLevelSwitchEnd=function(){var e=this.media;e&&e.buffered.length&&(this.immediateSwitch=!1,o.BufferHelper.isBuffered(e,e.currentTime)&&(e.currentTime-=1e-4),this.previouslyPaused||e.play())},r.prototype.nextLevelSwitch=function(){var t=this.media;if(t&&t.readyState){var r=void 0,n=void 0,i=void 0;if(n=this.getBufferedFrag(t.currentTime),n&&n.startPTS>1&&this.flushMainBuffer(0,n.startPTS-1),t.paused)r=0;else{var o=this.hls.nextLoadLevel,a=this.levels[o],s=this.fragLastKbps;r=s&&this.fragCurrent?this.fragCurrent.duration*a.bitrate/(1e3*s)+1:0}if((i=this.getBufferedFrag(t.currentTime+r))&&(i=this.followingBufferedFrag(i))){var l=this.fragCurrent;l&&l.loader&&l.loader.abort(),this.fragCurrent=null,this.flushMainBuffer(i.maxStartPTS,e.POSITIVE_INFINITY)}}},r.prototype.flushMainBuffer=function(e,t){this.state=y.State.BUFFER_FLUSHING;var r={startOffset:e,endOffset:t};this.altAudio&&(r.type="video"),this.hls.trigger(s.default.BUFFER_FLUSHING,r)},r.prototype.onMediaAttached=function(e){var t=this.media=this.mediaBuffer=e.media;this.onvseeking=this.onMediaSeeking.bind(this),this.onvseeked=this.onMediaSeeked.bind(this),this.onvended=this.onMediaEnded.bind(this),t.addEventListener("seeking",this.onvseeking),t.addEventListener("seeked",this.onvseeked),t.addEventListener("ended",this.onvended);var r=this.config;this.levels&&r.autoStartLoad&&this.hls.startLoad(r.startPosition),this.gapController=new g.default(r,t,this.fragmentTracker,this.hls)},r.prototype.onMediaDetaching=function(){var e=this.media;e&&e.ended&&(h.logger.log("MSE detaching and video ended, reset startPosition"),this.startPosition=this.lastCurrentTime=0);var t=this.levels;t&&t.forEach(function(e){e.details&&e.details.fragments.forEach(function(e){e.backtracked=void 0})}),e&&(e.removeEventListener("seeking",this.onvseeking),e.removeEventListener("seeked",this.onvseeked),e.removeEventListener("ended",this.onvended),this.onvseeking=this.onvseeked=this.onvended=null),this.media=this.mediaBuffer=null,this.loadedmetadata=!1,this.stopLoad()},r.prototype.onMediaSeeked=function(){var t=this.media,r=t?t.currentTime:void 0;e.isFinite(r)&&h.logger.log("media seeked to "+r.toFixed(3)),this.tick()},r.prototype.onManifestLoading=function(){h.logger.log("trigger BUFFER_RESET"),this.hls.trigger(s.default.BUFFER_RESET),this.fragmentTracker.removeAllFragments(),this.stalled=!1,this.startPosition=this.lastCurrentTime=0},r.prototype.onManifestParsed=function(e){var t,r=!1,n=!1;e.levels.forEach(function(e){(t=e.audioCodec)&&(-1!==t.indexOf("mp4a.40.2")&&(r=!0),-1!==t.indexOf("mp4a.40.5")&&(n=!0))}),this.audioCodecSwitch=r&&n,this.audioCodecSwitch&&h.logger.log("both AAC/HE-AAC audio found in levels; declaring level codec as HE-AAC"),this.levels=e.levels,this.startFragRequested=!1;var i=this.config;(i.autoStartLoad||this.forceStartLoad)&&this.hls.startLoad(i.startPosition)},r.prototype.onLevelLoaded=function(t){var r=t.details,n=t.level,i=this.levels[this.levelLastLoaded],o=this.levels[n],a=r.totalduration,l=0;if(h.logger.log("level "+n+" loaded ["+r.startSN+","+r.endSN+"],duration:"+a),r.live){var d=o.details;d&&r.fragments.length>0?(c.mergeDetails(d,r),l=r.fragments[0].start,this.liveSyncPosition=this.computeLivePosition(l,d),r.PTSKnown&&e.isFinite(l)?h.logger.log("live playlist sliding:"+l.toFixed(3)):(h.logger.log("live playlist - outdated PTS, unknown sliding"),m.alignStream(this.fragPrevious,i,r))):(h.logger.log("live playlist - first load, unknown sliding"),r.PTSKnown=!1,m.alignStream(this.fragPrevious,i,r))}else r.PTSKnown=!1;if(o.details=r,this.levelLastLoaded=n,this.hls.trigger(s.default.LEVEL_UPDATED,{details:r,level:n}),!1===this.startFragRequested){if(-1===this.startPosition||-1===this.lastCurrentTime){var u=r.startTimeOffset;e.isFinite(u)?(u<0&&(h.logger.log("negative start time offset "+u+", count from end of last fragment"),u=l+a+u),h.logger.log("start time offset found in playlist, adjust startPosition to "+u),this.startPosition=u):r.live?(this.startPosition=this.computeLivePosition(l,r),h.logger.log("configure startPosition to "+this.startPosition)):this.startPosition=0,this.lastCurrentTime=this.startPosition}this.nextLoadPosition=this.startPosition}this.state===y.State.WAITING_LEVEL&&(this.state=y.State.IDLE),this.tick()},r.prototype.onKeyLoaded=function(){this.state===y.State.KEY_LOADING&&(this.state=y.State.IDLE,this.tick())},r.prototype.onFragLoaded=function(e){var t=this,r=t.fragCurrent,n=t.hls,i=t.levels,o=t.media,l=e.frag;if(this.state===y.State.FRAG_LOADING&&r&&"main"===l.type&&l.level===r.level&&l.sn===r.sn){var d=e.stats,u=i[r.level],c=u.details;if(this.bitrateTest=!1,this.stats=d,h.logger.log("Loaded "+r.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+r.level),l.bitrateTest&&n.nextLoadLevel)this.state=y.State.IDLE,this.startFragRequested=!1,d.tparsed=d.tbuffered=window.performance.now(),n.trigger(s.default.FRAG_BUFFERED,{stats:d,frag:r,id:"main"}),this.tick();else if("initSegment"===l.sn)this.state=y.State.IDLE,d.tparsed=d.tbuffered=window.performance.now(),c.initSegment.data=e.payload,n.trigger(s.default.FRAG_BUFFERED,{stats:d,frag:r,id:"main"}),this.tick();else{h.logger.log("Parsing "+r.sn+" of ["+c.startSN+" ,"+c.endSN+"],level "+r.level+", cc "+r.cc),this.state=y.State.PARSING,this.pendingBuffering=!0,this.appended=!1,l.bitrateTest&&(l.bitrateTest=!1,this.fragmentTracker.onFragLoaded({frag:l}));var f=!(o&&o.seeking)&&(c.PTSKnown||!c.live),p=c.initSegment?c.initSegment.data:[],m=this._getAudioCodec(u),v=this.demuxer=this.demuxer||new a.default(this.hls,"main");v.push(e.payload,p,m,u.videoCodec,r,c.totalduration,f)}}this.fragLoadError=0},r.prototype.onFragParsingInitSegment=function(e){var t=this.fragCurrent,r=e.frag;if(t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===y.State.PARSING){var n=e.tracks,i=void 0,o=void 0;if(n.audio&&this.altAudio&&delete n.audio,o=n.audio){var a=this.levels[this.level].audioCodec,l=navigator.userAgent.toLowerCase();a&&this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),a=-1!==a.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5"),this.audioCodecSwitch&&1!==o.metadata.channelCount&&-1===l.indexOf("firefox")&&(a="mp4a.40.5"),-1!==l.indexOf("android")&&"audio/mpeg"!==o.container&&(a="mp4a.40.2",h.logger.log("Android: force audio codec to "+a)),o.levelCodec=a,o.id=e.id}o=n.video,o&&(o.levelCodec=this.levels[this.level].videoCodec,o.id=e.id),this.hls.trigger(s.default.BUFFER_CODECS,n);for(i in n){o=n[i],h.logger.log("main track:"+i+",container:"+o.container+",codecs[level/parsed]=["+o.levelCodec+"/"+o.codec+"]");var d=o.initSegment;d&&(this.appended=!0,this.pendingBuffering=!0,this.hls.trigger(s.default.BUFFER_APPENDING,{type:i,data:d,parent:"main",content:"initSegment"}))}this.tick()}},r.prototype.onFragParsingData=function(t){var r=this,n=this.fragCurrent,i=t.frag;if(n&&"main"===t.id&&i.sn===n.sn&&i.level===n.level&&("audio"!==t.type||!this.altAudio)&&this.state===y.State.PARSING){var o=this.levels[this.level],a=n;if(e.isFinite(t.endPTS)||(t.endPTS=t.startPTS+n.duration,t.endDTS=t.startDTS+n.duration),!0===t.hasAudio&&a.addElementaryStream(d.default.ElementaryStreamTypes.AUDIO),!0===t.hasVideo&&a.addElementaryStream(d.default.ElementaryStreamTypes.VIDEO),h.logger.log("Parsed "+t.type+",PTS:["+t.startPTS.toFixed(3)+","+t.endPTS.toFixed(3)+"],DTS:["+t.startDTS.toFixed(3)+"/"+t.endDTS.toFixed(3)+"],nb:"+t.nb+",dropped:"+(t.dropped||0)),"video"===t.type)if(a.dropped=t.dropped,a.dropped)if(a.backtracked)h.logger.warn("Already backtracked on this fragment, appending with the gap",a.sn);else{var l=o.details;if(!l||a.sn!==l.startSN)return h.logger.warn("missing video frame(s), backtracking fragment",a.sn),this.fragmentTracker.removeFragment(a),a.backtracked=!0,this.nextLoadPosition=t.startPTS,this.state=y.State.IDLE,this.fragPrevious=a,void this.tick();h.logger.warn("missing video frame(s) on first frag, appending with gap",a.sn)}else a.backtracked=!1;var u=c.updateFragPTSDTS(o.details,a,t.startPTS,t.endPTS,t.startDTS,t.endDTS),f=this.hls;f.trigger(s.default.LEVEL_PTS_UPDATED,{details:o.details,level:this.level,drift:u,type:t.type,start:t.startPTS,end:t.endPTS}),[t.data1,t.data2].forEach(function(e){e&&e.length&&r.state===y.State.PARSING&&(r.appended=!0,r.pendingBuffering=!0,f.trigger(s.default.BUFFER_APPENDING,{type:t.type,data:e,parent:"main",content:"data"}))}),this.tick()}},r.prototype.onFragParsed=function(e){var t=this.fragCurrent,r=e.frag;t&&"main"===e.id&&r.sn===t.sn&&r.level===t.level&&this.state===y.State.PARSING&&(this.stats.tparsed=window.performance.now(),this.state=y.State.PARSED,this._checkAppendedParsed())},r.prototype.onAudioTrackSwitching=function(t){var r=!!t.url,n=t.id;if(!r){if(this.mediaBuffer!==this.media){h.logger.log("switching on main audio, use media.buffered to schedule main fragment loading"),this.mediaBuffer=this.media;var i=this.fragCurrent;i.loader&&(h.logger.log("switching to main audio track, cancel main fragment load"),i.loader.abort()),this.fragCurrent=null,this.fragPrevious=null,this.demuxer&&(this.demuxer.destroy(),this.demuxer=null),this.state=y.State.IDLE}var o=this.hls;o.trigger(s.default.BUFFER_FLUSHING,{startOffset:0,endOffset:e.POSITIVE_INFINITY,type:"audio"}),o.trigger(s.default.AUDIO_TRACK_SWITCHED,{id:n}),this.altAudio=!1}},r.prototype.onAudioTrackSwitched=function(e){var t=e.id,r=!!this.hls.audioTracks[t].url;if(r){var n=this.videoBuffer;n&&this.mediaBuffer!==n&&(h.logger.log("switching on alternate audio, use video.buffered to schedule main fragment loading"),this.mediaBuffer=n)}this.altAudio=r,this.tick()},r.prototype.onBufferCreated=function(e){var t,r,n=e.tracks,i=!1;for(var o in n){var a=n[o];"main"===a.id?(r=o,t=a,"video"===o&&(this.videoBuffer=n[o].buffer)):i=!0}i&&t?(h.logger.log("alternate track found, use "+r+".buffered to schedule main fragment loading"),this.mediaBuffer=t.buffer):this.mediaBuffer=this.media},r.prototype.onBufferAppended=function(e){if("main"===e.parent){var t=this.state;t!==y.State.PARSING&&t!==y.State.PARSED||(this.pendingBuffering=e.pending>0,this._checkAppendedParsed())}},r.prototype._checkAppendedParsed=function(){if(!(this.state!==y.State.PARSED||this.appended&&this.pendingBuffering)){var e=this.fragCurrent;if(e){var t=this.mediaBuffer?this.mediaBuffer:this.media;h.logger.log("main buffered : "+f.default.toString(t.buffered)),this.fragPrevious=e;var r=this.stats;r.tbuffered=window.performance.now(),this.fragLastKbps=Math.round(8*r.total/(r.tbuffered-r.tfirst)),this.hls.trigger(s.default.FRAG_BUFFERED,{stats:r,frag:e,id:"main"}),this.state=y.State.IDLE}this.tick()}},r.prototype.onError=function(t){var r=t.frag||this.fragCurrent;if(!r||"main"===r.type){var n=!!this.media&&o.BufferHelper.isBuffered(this.media,this.media.currentTime)&&o.BufferHelper.isBuffered(this.media,this.media.currentTime+.5);switch(t.details){case p.ErrorDetails.FRAG_LOAD_ERROR:case p.ErrorDetails.FRAG_LOAD_TIMEOUT:case p.ErrorDetails.KEY_LOAD_ERROR:case p.ErrorDetails.KEY_LOAD_TIMEOUT:if(!t.fatal)if(this.fragLoadError+1<=this.config.fragLoadingMaxRetry){var i=Math.min(Math.pow(2,this.fragLoadError)*this.config.fragLoadingRetryDelay,this.config.fragLoadingMaxRetryTimeout);h.logger.warn("mediaController: frag loading failed, retry in "+i+" ms"),this.retryDate=window.performance.now()+i,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.fragLoadError++,this.state=y.State.FRAG_LOADING_WAITING_RETRY}else h.logger.error("mediaController: "+t.details+" reaches max retry, redispatch as fatal ..."),t.fatal=!0,this.state=y.State.ERROR;break;case p.ErrorDetails.LEVEL_LOAD_ERROR:case p.ErrorDetails.LEVEL_LOAD_TIMEOUT:this.state!==y.State.ERROR&&(t.fatal?(this.state=y.State.ERROR,h.logger.warn("streamController: "+t.details+",switch to "+this.state+" state ...")):t.levelRetry||this.state!==y.State.WAITING_LEVEL||(this.state=y.State.IDLE));break;case p.ErrorDetails.BUFFER_FULL_ERROR:"main"!==t.parent||this.state!==y.State.PARSING&&this.state!==y.State.PARSED||(n?(this._reduceMaxBufferLength(this.config.maxBufferLength),this.state=y.State.IDLE):(h.logger.warn("buffer full error also media.currentTime is not buffered, flush everything"),this.fragCurrent=null,this.flushMainBuffer(0,e.POSITIVE_INFINITY)))}}},r.prototype._reduceMaxBufferLength=function(e){var t=this.config;return t.maxMaxBufferLength>=e&&(t.maxMaxBufferLength/=2,h.logger.warn("main:reduce max buffer length to "+t.maxMaxBufferLength+"s"),!0)},r.prototype._checkBuffer=function(){var e=this.media;if(e&&0!==e.readyState){var t=this.mediaBuffer?this.mediaBuffer:e,r=t.buffered;!this.loadedmetadata&&r.length?(this.loadedmetadata=!0,this._seekToStartPos()):this.immediateSwitch?this.immediateLevelSwitchEnd():this.gapController.poll(this.lastCurrentTime,r)}},r.prototype.onFragLoadEmergencyAborted=function(){this.state=y.State.IDLE,this.loadedmetadata||(this.startFragRequested=!1,this.nextLoadPosition=this.startPosition),this.tick()},r.prototype.onBufferFlushed=function(){var e=this.mediaBuffer?this.mediaBuffer:this.media;e&&this.fragmentTracker.detectEvictedFragments(d.default.ElementaryStreamTypes.VIDEO,e.buffered),this.state=y.State.IDLE,this.fragPrevious=null},r.prototype.swapAudioCodec=function(){this.audioCodecSwap=!this.audioCodecSwap},r.prototype.computeLivePosition=function(e,t){var r=void 0!==this.config.liveSyncDuration?this.config.liveSyncDuration:this.config.liveSyncDurationCount*t.targetduration;return e+Math.max(0,t.totalduration-r)},r.prototype._seekToStartPos=function(){var e=this.media,t=e.currentTime,r=e.seeking?t:this.startPosition;t!==r&&(h.logger.log("target start position not buffered, seek to buffered.start(0) "+r+" from current time "+t+" "),e.currentTime=r)},r.prototype._getAudioCodec=function(e){var t=this.config.defaultAudioCodec||e.audioCodec;return this.audioCodecSwap&&(h.logger.log("swapping playlist audio codec"),t&&(t=-1!==t.indexOf("mp4a.40.5")?"mp4a.40.2":"mp4a.40.5")),t},Object.defineProperty(r.prototype,"liveSyncPosition",{get:function(){return this._liveSyncPosition},set:function(e){this._liveSyncPosition=e},enumerable:!0,configurable:!0}),r}(y.default);t.default=E}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/subtitle-stream-controller.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/utils/logger.js"),a=r("./src/crypt/decrypter.js"),s=r("./src/utils/buffer-helper.js"),l=r("./src/controller/fragment-finders.js"),d=r("./src/controller/fragment-tracker.js"),u=r("./src/controller/base-stream-controller.js"),c=r("./src/controller/level-helper.js"),f=window.performance,p=function(e){function t(t,r){var n=e.call(this,t,i.default.MEDIA_ATTACHED,i.default.MEDIA_DETACHING,i.default.ERROR,i.default.KEY_LOADED,i.default.FRAG_LOADED,i.default.SUBTITLE_TRACKS_UPDATED,i.default.SUBTITLE_TRACK_SWITCH,i.default.SUBTITLE_TRACK_LOADED,i.default.SUBTITLE_FRAG_PROCESSED,i.default.LEVEL_UPDATED)||this;return n.fragmentTracker=r,n.config=t.config,n.state=u.State.STOPPED,n.tracks=[],n.tracksBuffered=[],n.currentTrackId=-1,n.decrypter=new a.default(t,t.config),n.lastAVStart=0,n._onMediaSeeking=n.onMediaSeeking.bind(n),n}return n(t,e),t.prototype.onSubtitleFragProcessed=function(e){var t=e.frag,r=e.success;if(this.fragPrevious=t,this.state=u.State.IDLE,r){var n=this.tracksBuffered[this.currentTrackId];if(n){for(var i,o=t.start,a=0;a<n.length;a++)if(o>=n[a].start&&o<=n[a].end){i=n[a];break}var s=t.start+t.duration;i?i.end=s:(i={start:o,end:s},n.push(i))}}},t.prototype.onMediaAttached=function(e){var t=e.media;this.media=t,t.addEventListener("seeking",this._onMediaSeeking),this.state=u.State.IDLE},t.prototype.onMediaDetaching=function(){this.media.removeEventListener("seeking",this._onMediaSeeking),this.media=null,this.state=u.State.STOPPED},t.prototype.onError=function(e){var t=e.frag;t&&"subtitle"===t.type&&(this.state=u.State.IDLE)},t.prototype.onSubtitleTracksUpdated=function(e){var t=this;o.logger.log("subtitle tracks updated"),this.tracksBuffered=[],this.tracks=e.subtitleTracks,this.tracks.forEach(function(e){t.tracksBuffered[e.id]=[]})},t.prototype.onSubtitleTrackSwitch=function(e){if(this.currentTrackId=e.id,!this.tracks||-1===this.currentTrackId)return void this.clearInterval();var t=this.tracks[this.currentTrackId];t&&t.details&&this.setInterval(500)},t.prototype.onSubtitleTrackLoaded=function(e){var t=e.id,r=e.details,n=this,i=n.currentTrackId,o=n.tracks,a=o[i];t>=o.length||t!==i||!a||(r.live&&c.mergeSubtitlePlaylists(a.details,r,this.lastAVStart),a.details=r,this.setInterval(500))},t.prototype.onKeyLoaded=function(){this.state===u.State.KEY_LOADING&&(this.state=u.State.IDLE)},t.prototype.onFragLoaded=function(e){var t=this.fragCurrent,r=e.frag.decryptdata,n=e.frag,o=this.hls;if(this.state===u.State.FRAG_LOADING&&t&&"subtitle"===e.frag.type&&t.sn===e.frag.sn&&e.payload.byteLength>0&&r&&r.key&&"AES-128"===r.method){var a=f.now();this.decrypter.decrypt(e.payload,r.key.buffer,r.iv.buffer,function(e){var t=f.now();o.trigger(i.default.FRAG_DECRYPTED,{frag:n,payload:e,stats:{tstart:a,tdecrypt:t}})})}},t.prototype.onLevelUpdated=function(e){var t=e.details,r=t.fragments;this.lastAVStart=r.length?r[0].start:0},t.prototype.doTick=function(){if(!this.media)return void(this.state=u.State.IDLE);switch(this.state){case u.State.IDLE:var e=this,t=e.config,r=e.currentTrackId,n=e.fragmentTracker,a=e.media,c=e.tracks;if(!c||!c[r]||!c[r].details)break;var f=t.maxBufferHole,p=t.maxFragLookUpTolerance,h=Math.min(t.maxBufferLength,t.maxMaxBufferLength),m=s.BufferHelper.bufferedInfo(this._getBuffered(),a.currentTime,f),v=m.end,g=m.len,y=c[r].details,E=y.fragments,b=E.length,w=E[b-1].start+E[b-1].duration;if(g>h)return;var _=void 0,T=this.fragPrevious;v<w?(T&&y.hasProgramDateTime&&(_=l.findFragmentByPDT(E,T.endProgramDateTime,p)),_||(_=l.findFragmentByPTS(T,E,v,p))):_=E[b-1],_&&_.encrypted?(o.logger.log("Loading key for "+_.sn),this.state=u.State.KEY_LOADING,this.hls.trigger(i.default.KEY_LOADING,{frag:_})):_&&n.getState(_)===d.FragmentState.NOT_LOADED&&(this.fragCurrent=_,this.state=u.State.FRAG_LOADING,this.hls.trigger(i.default.FRAG_LOADING,{frag:_}))}},t.prototype.stopLoad=function(){this.lastAVStart=0,e.prototype.stopLoad.call(this)},t.prototype._getBuffered=function(){return this.tracksBuffered[this.currentTrackId]||[]},t.prototype.onMediaSeeking=function(){this.fragPrevious=null},t}(u.default);t.SubtitleStreamController=p},"./src/controller/subtitle-track-controller.js":function(e,t,r){"use strict";(function(e){function n(e){for(var t=[],r=0;r<e.length;r++){var n=e[r];"subtitles"===n.kind&&n.label&&t.push(e[r])}return t}var i=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var o=r("./src/events.js"),a=r("./src/event-handler.js"),s=r("./src/utils/logger.js"),l=r("./src/controller/level-helper.js"),d=function(t){function r(e){var r=t.call(this,e,o.default.MEDIA_ATTACHED,o.default.MEDIA_DETACHING,o.default.MANIFEST_LOADED,o.default.SUBTITLE_TRACK_LOADED)||this;return r.tracks=[],r.trackId=-1,r.media=null,r.stopped=!0,r.subtitleDisplay=!0,r}return i(r,t),r.prototype.destroy=function(){a.default.prototype.destroy.call(this)},r.prototype.onMediaAttached=function(e){var t=this;this.media=e.media,this.media&&(this.queuedDefaultTrack&&(this.subtitleTrack=this.queuedDefaultTrack,delete this.queuedDefaultTrack),this.trackChangeListener=this._onTextTracksChanged.bind(this),this.useTextTrackPolling=!(this.media.textTracks&&"onchange"in this.media.textTracks),this.useTextTrackPolling?this.subtitlePollingInterval=setInterval(function(){t.trackChangeListener()},500):this.media.textTracks.addEventListener("change",this.trackChangeListener))},r.prototype.onMediaDetaching=function(){this.media&&(this.useTextTrackPolling?clearInterval(this.subtitlePollingInterval):this.media.textTracks.removeEventListener("change",this.trackChangeListener),this.media=null)},r.prototype.onManifestLoaded=function(e){var t=this,r=e.subtitles||[];this.tracks=r,this.hls.trigger(o.default.SUBTITLE_TRACKS_UPDATED,{subtitleTracks:r}),r.forEach(function(e){e.default&&(t.media?t.subtitleTrack=e.id:t.queuedDefaultTrack=e.id)})},r.prototype.onSubtitleTrackLoaded=function(e){var t=this,r=e.id,n=e.details,i=this,o=i.trackId,a=i.tracks,d=a[o];if(r>=a.length||r!==o||!d||this.stopped)return void this._clearReloadTimer();if(s.logger.log("subtitle track "+r+" loaded"),n.live){var u=l.computeReloadInterval(d.details,n,e.stats.trequest);s.logger.log("Reloading live subtitle playlist in "+u+"ms"),this.timer=setTimeout(function(){t._loadCurrentTrack()},u)}else this._clearReloadTimer()},r.prototype.startLoad=function(){this.stopped=!1,this._loadCurrentTrack()},r.prototype.stopLoad=function(){this.stopped=!0,this._clearReloadTimer()},Object.defineProperty(r.prototype,"subtitleTracks",{get:function(){return this.tracks},enumerable:!0,configurable:!0}),Object.defineProperty(r.prototype,"subtitleTrack",{get:function(){return this.trackId},set:function(e){this.trackId!==e&&(this._toggleTrackModes(e),this._setSubtitleTrackInternal(e))},enumerable:!0,configurable:!0}),r.prototype._clearReloadTimer=function(){this.timer&&(clearTimeout(this.timer),this.timer=null)},r.prototype._loadCurrentTrack=function(){var e=this,t=e.trackId,r=e.tracks,n=e.hls,i=r[t];t<0||!i||i.details&&!i.details.live||(s.logger.log("Loading subtitle track "+t),n.trigger(o.default.SUBTITLE_TRACK_LOADING,{url:i.url,id:t}))},r.prototype._toggleTrackModes=function(e){var t=this,r=t.media,i=t.subtitleDisplay,o=t.trackId;if(r){var a=n(r.textTracks);if(-1===e)[].slice.call(a).forEach(function(e){e.mode="disabled"});else{var s=a[o];s&&(s.mode="disabled")}var l=a[e];l&&(l.mode=i?"showing":"hidden")}},r.prototype._setSubtitleTrackInternal=function(t){var r=this,n=r.hls,i=r.tracks;!e.isFinite(t)||t<-1||t>=i.length||(this.trackId=t,s.logger.log("Switching to subtitle track "+t),n.trigger(o.default.SUBTITLE_TRACK_SWITCH,{id:t}),this._loadCurrentTrack())},r.prototype._onTextTracksChanged=function(){if(this.media){for(var e=-1,t=n(this.media.textTracks),r=0;r<t.length;r++)if("hidden"===t[r].mode)e=r;else if("showing"===t[r].mode){e=r;break}this.subtitleTrack=e}},r}(a.default);t.default=d}).call(this,r("./src/polyfills/number.js").Number)},"./src/controller/timeline-controller.js":function(e,t,r){"use strict";(function(e){function n(e,t){return e&&e.label===t.name&&!(e.textTrack1||e.textTrack2)}function i(e,t,r,n){return Math.min(t,n)-Math.max(e,r)}var o=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var a=r("./src/events.js"),s=r("./src/event-handler.js"),l=r("./src/utils/cea-608-parser.js"),d=r("./src/utils/output-filter.js"),u=r("./src/utils/webvtt-parser.js"),c=r("./src/utils/logger.js"),f=r("./src/utils/texttrack-utils.js"),p=function(t){function r(e){var r=t.call(this,e,a.default.MEDIA_ATTACHING,a.default.MEDIA_DETACHING,a.default.FRAG_PARSING_USERDATA,a.default.FRAG_DECRYPTED,a.default.MANIFEST_LOADING,a.default.MANIFEST_LOADED,a.default.FRAG_LOADED,a.default.LEVEL_SWITCHING,a.default.INIT_PTS_FOUND)||this;if(r.hls=e,r.config=e.config,r.enabled=!0,r.Cues=e.config.cueHandler,r.textTracks=[],r.tracks=[],r.unparsedVttFrags=[],r.initPTS=[],r.cueRanges=[],r.captionsTracks={},r.captionsProperties={textTrack1:{label:r.config.captionsTextTrack1Label,languageCode:r.config.captionsTextTrack1LanguageCode},textTrack2:{label:r.config.captionsTextTrack2Label,languageCode:r.config.captionsTextTrack2LanguageCode}},r.config.enableCEA708Captions){var n=new d.default(r,"textTrack1"),i=new d.default(r,"textTrack2");r.cea608Parser=new l.default(0,n,i)}return r}return o(r,t),r.prototype.addCues=function(e,t,r,n){for(var o=this.cueRanges,a=!1,s=o.length;s--;){var l=o[s],d=i(l[0],l[1],t,r);if(d>=0&&(l[0]=Math.min(l[0],t),l[1]=Math.max(l[1],r),a=!0,d/(r-t)>.5))return}a||o.push([t,r]),this.Cues.newCue(this.captionsTracks[e],t,r,n)},r.prototype.onInitPtsFound=function(e){var t=this;if("main"===e.id&&(this.initPTS[e.frag.cc]=e.initPTS),this.unparsedVttFrags.length){var r=this.unparsedVttFrags;this.unparsedVttFrags=[],r.forEach(function(e){t.onFragLoaded(e)})}},r.prototype.getExistingTrack=function(e){var t=this.media;if(t)for(var r=0;r<t.textTracks.length;r++){var n=t.textTracks[r];if(n[e])return n}return null},r.prototype.createCaptionsTrack=function(e){var t=this.captionsProperties[e],r=t.label,n=t.languageCode,i=this.captionsTracks;if(!i[e]){var o=this.getExistingTrack(e);if(o)i[e]=o,f.clearCurrentCues(i[e]),f.sendAddTrackEvent(i[e],this.media);else{var a=this.createTextTrack("captions",r,n);a&&(a[e]=!0,i[e]=a)}}},r.prototype.createTextTrack=function(e,t,r){var n=this.media;if(n)return n.addTextTrack(e,t,r)},r.prototype.destroy=function(){s.default.prototype.destroy.call(this)},r.prototype.onMediaAttaching=function(e){this.media=e.media,this._cleanTracks()},r.prototype.onMediaDetaching=function(){var e=this.captionsTracks;Object.keys(e).forEach(function(t){f.clearCurrentCues(e[t]),delete e[t]})},r.prototype.onManifestLoading=function(){this.lastSn=-1,this.prevCC=-1,this.vttCCs={ccOffset:0,presentationOffset:0,0:{start:0,prevCC:-1,new:!1}},this._cleanTracks()},r.prototype._cleanTracks=function(){var e=this.media;if(e){var t=e.textTracks;if(t)for(var r=0;r<t.length;r++)f.clearCurrentCues(t[r])}},r.prototype.onManifestLoaded=function(e){var t=this;if(this.textTracks=[],this.unparsedVttFrags=this.unparsedVttFrags||[],this.initPTS=[],this.cueRanges=[],this.config.enableWebVTT){this.tracks=e.subtitles||[];var r=this.media?this.media.textTracks:[];this.tracks.forEach(function(e,i){var o;if(i<r.length){for(var a=null,s=0;s<r.length;s++)if(n(r[s],e)){a=r[s];break}a&&(o=a)}o||(o=t.createTextTrack("subtitles",e.name,e.lang)),e.default?o.mode=t.hls.subtitleDisplay?"showing":"hidden":o.mode="disabled",t.textTracks.push(o)})}},r.prototype.onLevelSwitching=function(){this.enabled="NONE"!==this.hls.currentLevel.closedCaptions},r.prototype.onFragLoaded=function(t){var r=t.frag,n=t.payload;if("main"===r.type){var i=r.sn;if(i!==this.lastSn+1){var o=this.cea608Parser;o&&o.reset()}this.lastSn=i}else if("subtitle"===r.type)if(n.byteLength){if(!e.isFinite(this.initPTS[r.cc]))return this.unparsedVttFrags.push(t),void(this.initPTS.length&&this.hls.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r}));var s=r.decryptdata;null!=s&&null!=s.key&&"AES-128"===s.method||this._parseVTTs(r,n)}else this.hls.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:r})},r.prototype._parseVTTs=function(e,t){var r=this.vttCCs;r[e.cc]||(r[e.cc]={start:e.start,prevCC:this.prevCC,new:!0},this.prevCC=e.cc);var n=this.textTracks,i=this.hls;u.default.parse(t,this.initPTS[e.cc],r,e.cc,function(t){var r=n[e.level];if("disabled"===r.mode)return void i.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e});t.forEach(function(e){if(!r.cues.getCueById(e.id))try{r.addCue(e)}catch(n){var t=new window.TextTrackCue(e.startTime,e.endTime,e.text);t.id=e.id,r.addCue(t)}}),i.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!0,frag:e})},function(t){c.logger.log("Failed to parse VTT cue: "+t),i.trigger(a.default.SUBTITLE_FRAG_PROCESSED,{success:!1,frag:e})})},r.prototype.onFragDecrypted=function(t){var r=t.payload,n=t.frag;if("subtitle"===n.type){if(!e.isFinite(this.initPTS[n.cc]))return void this.unparsedVttFrags.push(t);this._parseVTTs(n,r)}},r.prototype.onFragParsingUserdata=function(e){if(this.enabled&&this.config.enableCEA708Captions)for(var t=0;t<e.samples.length;t++){var r=this.extractCea608Data(e.samples[t].bytes);this.cea608Parser.addData(e.samples[t].pts,r)}},r.prototype.extractCea608Data=function(e){for(var t,r,n,i,o,a=31&e[0],s=2,l=[],d=0;d<a;d++)t=e[s++],r=127&e[s++],n=127&e[s++],i=0!=(4&t),o=3&t,0===r&&0===n||i&&0===o&&(l.push(r),l.push(n));return l},r}(s.default);t.default=p}).call(this,r("./src/polyfills/number.js").Number)},"./src/crypt/aes-crypto.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.aesIV=t}return e.prototype.decrypt=function(e,t){return this.subtle.decrypt({name:"AES-CBC",iv:this.aesIV},t,e)},e}();t.default=n},"./src/crypt/aes-decryptor.js":function(e,t,r){"use strict";function n(e){var t=e.byteLength,r=t&&new DataView(e).getUint8(t-1);return r?e.slice(0,t-r):e}Object.defineProperty(t,"__esModule",{value:!0}),t.removePadding=n;var i=function(){function e(){this.rcon=[0,1,2,4,8,16,32,64,128,27,54],this.subMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.invSubMix=[new Uint32Array(256),new Uint32Array(256),new Uint32Array(256),new Uint32Array(256)],this.sBox=new Uint32Array(256),this.invSBox=new Uint32Array(256),this.key=new Uint32Array(0),this.initTable()}return e.prototype.uint8ArrayToUint32Array_=function(e){for(var t=new DataView(e),r=new Uint32Array(4),n=0;n<4;n++)r[n]=t.getUint32(4*n);return r},e.prototype.initTable=function(){var e=this.sBox,t=this.invSBox,r=this.subMix,n=r[0],i=r[1],o=r[2],a=r[3],s=this.invSubMix,l=s[0],d=s[1],u=s[2],c=s[3],f=new Uint32Array(256),p=0,h=0,m=0;for(m=0;m<256;m++)f[m]=m<128?m<<1:m<<1^283;for(m=0;m<256;m++){var v=h^h<<1^h<<2^h<<3^h<<4;v=v>>>8^255&v^99,e[p]=v,t[v]=p;var g=f[p],y=f[g],E=f[y],b=257*f[v]^16843008*v;n[p]=b<<24|b>>>8,i[p]=b<<16|b>>>16,o[p]=b<<8|b>>>24,a[p]=b,b=16843009*E^65537*y^257*g^16843008*p,l[v]=b<<24|b>>>8,d[v]=b<<16|b>>>16,u[v]=b<<8|b>>>24,c[v]=b,p?(p=g^f[f[f[E^g]]],h^=f[f[h]]):p=h=1}},e.prototype.expandKey=function(e){for(var t=this.uint8ArrayToUint32Array_(e),r=!0,n=0;n<t.length&&r;)r=t[n]===this.key[n],n++;if(!r){this.key=t;var i=this.keySize=t.length;if(4!==i&&6!==i&&8!==i)throw new Error("Invalid aes key size="+i);var o,a,s,l,d=this.ksRows=4*(i+6+1),u=this.keySchedule=new Uint32Array(d),c=this.invKeySchedule=new Uint32Array(d),f=this.sBox,p=this.rcon,h=this.invSubMix,m=h[0],v=h[1],g=h[2],y=h[3];for(o=0;o<d;o++)o<i?s=u[o]=t[o]:(l=s,o%i==0?(l=l<<8|l>>>24,l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l],l^=p[o/i|0]<<24):i>6&&o%i==4&&(l=f[l>>>24]<<24|f[l>>>16&255]<<16|f[l>>>8&255]<<8|f[255&l]),u[o]=s=(u[o-i]^l)>>>0);for(a=0;a<d;a++)o=d-a,l=3&a?u[o]:u[o-4],c[a]=a<4||o<=4?l:m[f[l>>>24]]^v[f[l>>>16&255]]^g[f[l>>>8&255]]^y[f[255&l]],c[a]=c[a]>>>0}},e.prototype.networkToHostOrderSwap=function(e){return e<<24|(65280&e)<<8|(16711680&e)>>8|e>>>24},e.prototype.decrypt=function(e,t,r,i){for(var o,a,s,l,d,u,c,f,p,h,m,v,g,y,E=this.keySize+6,b=this.invKeySchedule,w=this.invSBox,_=this.invSubMix,T=_[0],A=_[1],S=_[2],L=_[3],k=this.uint8ArrayToUint32Array_(r),D=k[0],C=k[1],R=k[2],x=k[3],O=new Int32Array(e),I=new Int32Array(O.length),M=this.networkToHostOrderSwap;t<O.length;){for(p=M(O[t]),h=M(O[t+1]),m=M(O[t+2]),v=M(O[t+3]),d=p^b[0],u=v^b[1],c=m^b[2],f=h^b[3],g=4,y=1;y<E;y++)o=T[d>>>24]^A[u>>16&255]^S[c>>8&255]^L[255&f]^b[g],a=T[u>>>24]^A[c>>16&255]^S[f>>8&255]^L[255&d]^b[g+1],s=T[c>>>24]^A[f>>16&255]^S[d>>8&255]^L[255&u]^b[g+2],l=T[f>>>24]^A[d>>16&255]^S[u>>8&255]^L[255&c]^b[g+3],d=o,u=a,c=s,f=l,g+=4;o=w[d>>>24]<<24^w[u>>16&255]<<16^w[c>>8&255]<<8^w[255&f]^b[g],a=w[u>>>24]<<24^w[c>>16&255]<<16^w[f>>8&255]<<8^w[255&d]^b[g+1],s=w[c>>>24]<<24^w[f>>16&255]<<16^w[d>>8&255]<<8^w[255&u]^b[g+2],l=w[f>>>24]<<24^w[d>>16&255]<<16^w[u>>8&255]<<8^w[255&c]^b[g+3],g+=3,I[t]=M(o^D),I[t+1]=M(l^C),I[t+2]=M(s^R),I[t+3]=M(a^x),D=p,C=h,R=m,x=v,t+=4}return i?n(I.buffer):I.buffer},e.prototype.destroy=function(){this.key=void 0,this.keySize=void 0,this.ksRows=void 0,this.sBox=void 0,this.invSBox=void 0,this.subMix=void 0,this.invSubMix=void 0,this.keySchedule=void 0,this.invKeySchedule=void 0,this.rcon=void 0},e}();t.default=i},"./src/crypt/decrypter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/crypt/aes-crypto.js"),i=r("./src/crypt/fast-aes-key.js"),o=r("./src/crypt/aes-decryptor.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=r("./src/events.js"),d=r("./src/utils/get-self-scope.js"),u=d.getSelfScope(),c=function(){function e(e,t,r){var n=(void 0===r?{}:r).removePKCS7Padding,i=void 0===n||n;if(this.logEnabled=!0,this.observer=e,this.config=t,this.removePKCS7Padding=i,i)try{var o=u.crypto;o&&(this.subtle=o.subtle||o.webkitSubtle)}catch(e){}this.disableWebCrypto=!this.subtle}return e.prototype.isSync=function(){return this.disableWebCrypto&&this.config.enableSoftwareAES},e.prototype.decrypt=function(e,t,r,a){var l=this;if(this.disableWebCrypto&&this.config.enableSoftwareAES){this.logEnabled&&(s.logger.log("JS AES decrypt"),this.logEnabled=!1);var d=this.decryptor;d||(this.decryptor=d=new o.default),d.expandKey(t),a(d.decrypt(e,0,r,this.removePKCS7Padding))}else{this.logEnabled&&(s.logger.log("WebCrypto AES decrypt"),this.logEnabled=!1);var u=this.subtle;this.key!==t&&(this.key=t,this.fastAesKey=new i.default(u,t)),this.fastAesKey.expandKey().then(function(i){new n.default(u,r).decrypt(e,i).catch(function(n){l.onWebCryptoError(n,e,t,r,a)}).then(function(e){a(e)})}).catch(function(n){l.onWebCryptoError(n,e,t,r,a)})}},e.prototype.onWebCryptoError=function(e,t,r,n,i){this.config.enableSoftwareAES?(s.logger.log("WebCrypto Error, disable WebCrypto API"),this.disableWebCrypto=!0,this.logEnabled=!0,this.decrypt(t,r,n,i)):(s.logger.error("decrypting error : "+e.message),this.observer.trigger(l.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_DECRYPT_ERROR,fatal:!0,reason:e.message}))},e.prototype.destroy=function(){var e=this.decryptor;e&&(e.destroy(),this.decryptor=void 0)},e}();t.default=c},"./src/crypt/fast-aes-key.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.subtle=e,this.key=t}return e.prototype.expandKey=function(){return this.subtle.importKey("raw",this.key,{name:"AES-CBC"},!1,["encrypt","decrypt"])},e}();t.default=n},"./src/demux/aacdemuxer.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/adts.js"),i=r("./src/utils/logger.js"),o=r("./src/demux/id3.js"),a=function(){function t(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return t.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/adts",type:"audio",id:0,sequenceNumber:0,isAAC:!0,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},t.prototype.resetTimeStamp=function(){},t.probe=function(e){if(!e)return!1;for(var t=o.default.getID3Data(e,0)||[],r=t.length,a=e.length;r<a;r++)if(n.probe(e,r))return i.logger.log("ADTS sync word found !"),!0;return!1},t.prototype.append=function(t,r,a,s){for(var l=this._audioTrack,d=o.default.getID3Data(t,0)||[],u=o.default.getTimeStamp(d),c=e.isFinite(u)?90*u:9e4*r,f=0,p=c,h=t.length,m=d.length,v=[{pts:p,dts:p,data:d}];m<h-1;)if(n.isHeader(t,m)&&m+5<h){n.initTrackConfig(l,this.observer,t,m,l.manifestCodec);var g=n.appendFrame(l,t,m,c,f);if(!g){i.logger.log("Unable to parse AAC frame");break}m+=g.length,p=g.sample.pts,f++}else o.default.isHeader(t,m)?(d=o.default.getID3Data(t,m),v.push({pts:p,dts:p,data:d}),m+=d.length):m++;this.remuxer.remux(l,{samples:[]},{samples:v,inputTimeScale:9e4},{samples:[]},r,a,s)},t.prototype.destroy=function(){},t}();t.default=a}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/adts.js":function(e,t,r){"use strict";function n(e,t,r,n){var i,o,a,s,l,d=navigator.userAgent.toLowerCase(),u=n,c=[96e3,88200,64e3,48e3,44100,32e3,24e3,22050,16e3,12e3,11025,8e3,7350];return i=1+((192&t[r+2])>>>6),(o=(60&t[r+2])>>>2)>c.length-1?void e.trigger(m.default.ERROR,{type:h.ErrorTypes.MEDIA_ERROR,details:h.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"invalid ADTS sampling index:"+o}):(s=(1&t[r+2])<<2,s|=(192&t[r+3])>>>6,p.logger.log("manifest codec:"+n+",ADTS data:type:"+i+",sampleingIndex:"+o+"["+c[o]+"Hz],channelConfig:"+s),/firefox/i.test(d)?o>=6?(i=5,l=new Array(4),a=o-3):(i=2,l=new Array(2),a=o):-1!==d.indexOf("android")?(i=2,l=new Array(2),a=o):(i=5,l=new Array(4),n&&(-1!==n.indexOf("mp4a.40.29")||-1!==n.indexOf("mp4a.40.5"))||!n&&o>=6?a=o-3:((n&&-1!==n.indexOf("mp4a.40.2")&&(o>=6&&1===s||/vivaldi/i.test(d))||!n&&1===s)&&(i=2,l=new Array(2)),a=o)),l[0]=i<<3,l[0]|=(14&o)>>1,l[1]|=(1&o)<<7,l[1]|=s<<3,5===i&&(l[1]|=(14&a)>>1,l[2]=(1&a)<<7,l[2]|=8,l[3]=0),{config:l,samplerate:c[o],channelCount:s,codec:"mp4a.40."+i,manifestCodec:u})}function i(e,t){return 255===e[t]&&240==(246&e[t+1])}function o(e,t){return 1&e[t+1]?7:9}function a(e,t){return(3&e[t+3])<<11|e[t+4]<<3|(224&e[t+5])>>>5}function s(e,t){return!!(t+1<e.length&&i(e,t))}function l(e,t){if(t+1<e.length&&i(e,t)){var r=o(e,t),n=r;t+5<e.length&&(n=a(e,t));var s=t+n;if(s===e.length||s+1<e.length&&i(e,s))return!0}return!1}function d(e,t,r,i,o){if(!e.samplerate){var a=n(t,r,i,o);e.config=a.config,e.samplerate=a.samplerate,e.channelCount=a.channelCount,e.codec=a.codec,e.manifestCodec=a.manifestCodec,p.logger.log("parsed codec:"+e.codec+",rate:"+a.samplerate+",nb channel:"+a.channelCount)}}function u(e){return 9216e4/e}function c(e,t,r,n,i){var s,l,d,u=e.length;if(s=o(e,t),l=a(e,t),(l-=s)>0&&t+s+l<=u)return d=r+n*i,{headerLength:s,frameLength:l,stamp:d}}function f(e,t,r,n,i){var o=u(e.samplerate),a=c(t,r,n,i,o);if(a){var s=a.stamp,l=a.headerLength,d=a.frameLength,f={unit:t.subarray(r+l,r+l+d),pts:s,dts:s};return e.samples.push(f),e.len+=d,{sample:f,length:d+l}}}Object.defineProperty(t,"__esModule",{value:!0});var p=r("./src/utils/logger.js"),h=r("./src/errors.js"),m=r("./src/events.js");t.getAudioConfig=n,t.isHeaderPattern=i,t.getHeaderLength=o,t.getFullFrameLength=a,t.isHeader=s,t.probe=l,t.initTrackConfig=d,t.getFrameDuration=u,t.parseFrameHeader=c,t.appendFrame=f},"./src/demux/demuxer-inline.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n,i=r("./src/events.js"),o=r("./src/errors.js"),a=r("./src/crypt/decrypter.js"),s=r("./src/demux/aacdemuxer.js"),l=r("./src/demux/mp4demuxer.js"),d=r("./src/demux/tsdemuxer.js"),u=r("./src/demux/mp3demuxer.js"),c=r("./src/remux/mp4-remuxer.js"),f=r("./src/remux/passthrough-remuxer.js"),p=r("./src/utils/get-self-scope.js"),h=r("./src/utils/logger.js"),m=p.getSelfScope();try{n=m.performance.now.bind(m.performance)}catch(e){h.logger.debug("Unable to use Performance API on this environment"),n=m.Date.now}var v=function(){function e(e,t,r,n){this.observer=e,this.typeSupported=t,this.config=r,this.vendor=n}return e.prototype.destroy=function(){var e=this.demuxer;e&&e.destroy()},e.prototype.push=function(e,t,r,o,s,l,d,u,c,f,p,h){var m=this;if(e.byteLength>0&&null!=t&&null!=t.key&&"AES-128"===t.method){var v=this.decrypter;null==v&&(v=this.decrypter=new a.default(this.observer,this.config));var g=n();v.decrypt(e,t.key.buffer,t.iv.buffer,function(e){var a=n();m.observer.trigger(i.default.FRAG_DECRYPTED,{stats:{tstart:g,tdecrypt:a}}),m.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),o,s,l,d,u,c,f,p,h)})}else this.pushDecrypted(new Uint8Array(e),t,new Uint8Array(r),o,s,l,d,u,c,f,p,h)},e.prototype.pushDecrypted=function(e,t,r,n,a,p,h,m,v,g,y,E){var b=this.demuxer;if(!b||(h||m)&&!this.probe(e)){for(var w=this.observer,_=this.typeSupported,T=this.config,A=[{demux:d.default,remux:c.default},{demux:l.default,remux:f.default},{demux:s.default,remux:c.default},{demux:u.default,remux:c.default}],S=0,L=A.length;S<L;S++){var k=A[S],D=k.demux.probe;if(D(e)){var C=this.remuxer=new k.remux(w,T,_,this.vendor);b=new k.demux(w,C,T,_),this.probe=D;break}}if(!b)return void w.trigger(i.default.ERROR,{type:o.ErrorTypes.MEDIA_ERROR,details:o.ErrorDetails.FRAG_PARSING_ERROR,fatal:!0,reason:"no demux matching with content found"});this.demuxer=b}var R=this.remuxer;(h||m)&&(b.resetInitSegment(r,n,a,g),R.resetInitSegment()),h&&(b.resetTimeStamp(E),R.resetTimeStamp(E)),"function"==typeof b.setDecryptData&&b.setDecryptData(t),b.append(e,p,v,y)},e}();t.default=v},"./src/demux/demuxer-worker.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/demuxer-inline.js"),i=r("./src/events.js"),o=r("./src/utils/logger.js"),a=r("./node_modules/node-libs-browser/node_modules/events/events.js"),s=function(e){var t=new a.EventEmitter;t.trigger=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.emit.apply(t,[e,e].concat(r))},t.off=function(e){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];t.removeListener.apply(t,[e].concat(r))};var r=function(t,r){e.postMessage({event:t,data:r})};e.addEventListener("message",function(i){var a=i.data;switch(a.cmd){case"init":var s=JSON.parse(a.config);e.demuxer=new n.default(t,a.typeSupported,s,a.vendor),o.enableLogs(s.debug),r("init",null);break;case"demux":e.demuxer.push(a.data,a.decryptdata,a.initSegment,a.audioCodec,a.videoCodec,a.timeOffset,a.discontinuity,a.trackSwitch,a.contiguous,a.duration,a.accurateTimeOffset,a.defaultInitPTS)}}),t.on(i.default.FRAG_DECRYPTED,r),t.on(i.default.FRAG_PARSING_INIT_SEGMENT,r),t.on(i.default.FRAG_PARSED,r),t.on(i.default.ERROR,r),t.on(i.default.FRAG_PARSING_METADATA,r),t.on(i.default.FRAG_PARSING_USERDATA,r),t.on(i.default.INIT_PTS_FOUND,r),t.on(i.default.FRAG_PARSING_DATA,function(t,r){var n=[],i={event:t,data:r};r.data1&&(i.data1=r.data1.buffer,n.push(r.data1.buffer),delete r.data1),r.data2&&(i.data2=r.data2.buffer,n.push(r.data2.buffer),delete r.data2),e.postMessage(i,n)})};t.default=s},"./src/demux/demuxer.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/webworkify-webpack/index.js"),i=r("./src/events.js"),o=r("./src/demux/demuxer-inline.js"),a=r("./src/utils/logger.js"),s=r("./src/errors.js"),l=r("./src/utils/mediasource-helper.js"),d=r("./src/utils/get-self-scope.js"),u=r("./src/observer.js"),c=d.getSelfScope(),f=l.getMediaSource(),p=function(){function t(e,t){var r=this;this.hls=e,this.id=t;var l=this.observer=new u.Observer,d=e.config,p=function(t,n){n=n||{},n.frag=r.frag,n.id=r.id,e.trigger(t,n)};l.on(i.default.FRAG_DECRYPTED,p),l.on(i.default.FRAG_PARSING_INIT_SEGMENT,p),l.on(i.default.FRAG_PARSING_DATA,p),l.on(i.default.FRAG_PARSED,p),l.on(i.default.ERROR,p),l.on(i.default.FRAG_PARSING_METADATA,p),l.on(i.default.FRAG_PARSING_USERDATA,p),l.on(i.default.INIT_PTS_FOUND,p);var h={mp4:f.isTypeSupported("video/mp4"),mpeg:f.isTypeSupported("audio/mpeg"),mp3:f.isTypeSupported('audio/mp4; codecs="mp3"')},m=navigator.vendor;if(d.enableWorker&&"undefined"!=typeof Worker){a.logger.log("demuxing in webworker");var v=void 0;try{v=this.w=n("./src/demux/demuxer-worker.js"),this.onwmsg=this.onWorkerMessage.bind(this),v.addEventListener("message",this.onwmsg),v.onerror=function(t){e.trigger(i.default.ERROR,{type:s.ErrorTypes.OTHER_ERROR,details:s.ErrorDetails.INTERNAL_EXCEPTION,fatal:!0,event:"demuxerWorker",err:{message:t.message+" ("+t.filename+":"+t.lineno+")"}})},v.postMessage({cmd:"init",typeSupported:h,vendor:m,id:t,config:JSON.stringify(d)})}catch(e){a.logger.warn("Error in worker:",e),a.logger.error("Error while initializing DemuxerWorker, fallback on DemuxerInline"),v&&c.URL.revokeObjectURL(v.objectURL),this.demuxer=new o.default(l,h,d,m),this.w=void 0}}else this.demuxer=new o.default(l,h,d,m)}return t.prototype.destroy=function(){var e=this.w;if(e)e.removeEventListener("message",this.onwmsg),e.terminate(),this.w=null;else{var t=this.demuxer;t&&(t.destroy(),this.demuxer=null)}var r=this.observer;r&&(r.removeAllListeners(),this.observer=null)},t.prototype.push=function(t,r,n,i,o,s,l,d){var u=this.w,c=e.isFinite(o.startPTS)?o.startPTS:o.start,f=o.decryptdata,p=this.frag,h=!(p&&o.cc===p.cc),m=!(p&&o.level===p.level),v=p&&o.sn===p.sn+1,g=!m&&v;if(h&&a.logger.log(this.id+":discontinuity detected"),m&&a.logger.log(this.id+":switch detected"),this.frag=o,u)u.postMessage({cmd:"demux",data:t,decryptdata:f,initSegment:r,audioCodec:n,videoCodec:i,timeOffset:c,discontinuity:h,trackSwitch:m,contiguous:g,duration:s,accurateTimeOffset:l,defaultInitPTS:d},t instanceof ArrayBuffer?[t]:[]);else{var y=this.demuxer;y&&y.push(t,f,r,n,i,c,h,m,g,s,l,d)}},t.prototype.onWorkerMessage=function(e){var t=e.data,r=this.hls;switch(t.event){case"init":c.URL.revokeObjectURL(this.w.objectURL);break;case i.default.FRAG_PARSING_DATA:t.data.data1=new Uint8Array(t.data1),t.data2&&(t.data.data2=new Uint8Array(t.data2));default:t.data=t.data||{},t.data.frag=this.frag,t.data.id=this.id,r.trigger(t.event,t.data)}},t}();t.default=p}).call(this,r("./src/polyfills/number.js").Number)},"./src/demux/exp-golomb.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=function(){function e(e){this.data=e,this.bytesAvailable=e.byteLength,this.word=0,this.bitsAvailable=0}return e.prototype.loadWord=function(){var e=this.data,t=this.bytesAvailable,r=e.byteLength-t,n=new Uint8Array(4),i=Math.min(4,t);if(0===i)throw new Error("no bytes available");n.set(e.subarray(r,r+i)),this.word=new DataView(n.buffer).getUint32(0),this.bitsAvailable=8*i,this.bytesAvailable-=i},e.prototype.skipBits=function(e){var t;this.bitsAvailable>e?(this.word<<=e,this.bitsAvailable-=e):(e-=this.bitsAvailable,t=e>>3,e-=t>>3,this.bytesAvailable-=t,this.loadWord(),this.word<<=e,this.bitsAvailable-=e)},e.prototype.readBits=function(e){var t=Math.min(this.bitsAvailable,e),r=this.word>>>32-t;return e>32&&n.logger.error("Cannot read more than 32 bits at a time"),this.bitsAvailable-=t,this.bitsAvailable>0?this.word<<=t:this.bytesAvailable>0&&this.loadWord(),t=e-t,t>0&&this.bitsAvailable?r<<t|this.readBits(t):r},e.prototype.skipLZ=function(){var e;for(e=0;e<this.bitsAvailable;++e)if(0!=(this.word&2147483648>>>e))return this.word<<=e,this.bitsAvailable-=e,e;return this.loadWord(),e+this.skipLZ()},e.prototype.skipUEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.skipEG=function(){this.skipBits(1+this.skipLZ())},e.prototype.readUEG=function(){var e=this.skipLZ();return this.readBits(e+1)-1},e.prototype.readEG=function(){var e=this.readUEG();return 1&e?1+e>>>1:-1*(e>>>1)},e.prototype.readBoolean=function(){return 1===this.readBits(1)},e.prototype.readUByte=function(){return this.readBits(8)},e.prototype.readUShort=function(){return this.readBits(16)},e.prototype.readUInt=function(){return this.readBits(32)},e.prototype.skipScalingList=function(e){var t,r,n=8,i=8;for(t=0;t<e;t++)0!==i&&(r=this.readEG(),i=(n+r+256)%256),n=0===i?n:i},e.prototype.readSPS=function(){var e,t,r,n,i,o,a,s=0,l=0,d=0,u=0,c=this.readUByte.bind(this),f=this.readBits.bind(this),p=this.readUEG.bind(this),h=this.readBoolean.bind(this),m=this.skipBits.bind(this),v=this.skipEG.bind(this),g=this.skipUEG.bind(this),y=this.skipScalingList.bind(this);if(c(),e=c(),f(5),m(3),c(),g(),100===e||110===e||122===e||244===e||44===e||83===e||86===e||118===e||128===e){var E=p();if(3===E&&m(1),g(),g(),m(1),h())for(o=3!==E?8:12,a=0;a<o;a++)h()&&y(a<6?16:64)}g();var b=p();if(0===b)p();else if(1===b)for(m(1),v(),v(),t=p(),a=0;a<t;a++)v();g(),m(1),r=p(),n=p(),i=f(1),0===i&&m(1),m(1),h()&&(s=p(),l=p(),d=p(),u=p());var w=[1,1];if(h()&&h()){switch(c()){case 1:w=[1,1];break;case 2:w=[12,11];break;case 3:w=[10,11];break;case 4:w=[16,11];break;case 5:w=[40,33];break;case 6:w=[24,11];break;case 7:w=[20,11];break;case 8:w=[32,11];break;case 9:w=[80,33];break;case 10:w=[18,11];break;case 11:w=[15,11];break;case 12:w=[64,33];break;case 13:w=[160,99];break;case 14:w=[4,3];break;case 15:w=[3,2];break;case 16:w=[2,1];break;case 255:w=[c()<<8|c(),c()<<8|c()]}}return{width:Math.ceil(16*(r+1)-2*s-2*l),height:(2-i)*(n+1)*16-(i?2:4)*(d+u),pixelRatio:w}},e.prototype.readSliceType=function(){return this.readUByte(),this.readUEG(),this.readUEG()},e}();t.default=i},"./src/demux/id3.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isHeader=function(e,t){return t+10<=e.length&&73===e[t]&&68===e[t+1]&&51===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.isFooter=function(e,t){return t+10<=e.length&&51===e[t]&&68===e[t+1]&&73===e[t+2]&&e[t+3]<255&&e[t+4]<255&&e[t+6]<128&&e[t+7]<128&&e[t+8]<128&&e[t+9]<128},e.getID3Data=function(t,r){for(var n=r,i=0;e.isHeader(t,r);){i+=10;i+=e._readSize(t,r+6),e.isFooter(t,r+10)&&(i+=10),r+=i}if(i>0)return t.subarray(n,n+i)},e._readSize=function(e,t){var r=0;return r=(127&e[t])<<21,r|=(127&e[t+1])<<14,r|=(127&e[t+2])<<7,r|=127&e[t+3]},e.getTimeStamp=function(t){for(var r=e.getID3Frames(t),n=0;n<r.length;n++){var i=r[n];if(e.isTimeStampFrame(i))return e._readTimeStamp(i)}},e.isTimeStampFrame=function(e){return e&&"PRIV"===e.key&&"com.apple.streaming.transportStreamTimestamp"===e.info},e._getFrameData=function(t){var r=String.fromCharCode(t[0],t[1],t[2],t[3]),n=e._readSize(t,4);return{type:r,size:n,data:t.subarray(10,10+n)}},e.getID3Frames=function(t){for(var r=0,n=[];e.isHeader(t,r);){var i=e._readSize(t,r+6);r+=10;for(var o=r+i;r+8<o;){var a=e._getFrameData(t.subarray(r)),s=e._decodeFrame(a);s&&n.push(s),r+=a.size+10}e.isFooter(t,r)&&(r+=10)}return n},e._decodeFrame=function(t){return"PRIV"===t.type?e._decodePrivFrame(t):"T"===t.type[0]?e._decodeTextFrame(t):"W"===t.type[0]?e._decodeURLFrame(t):void 0},e._readTimeStamp=function(e){if(8===e.data.byteLength){var t=new Uint8Array(e.data),r=1&t[3],n=(t[4]<<23)+(t[5]<<15)+(t[6]<<7)+t[7];return n/=45,r&&(n+=47721858.84),Math.round(n)}},e._decodePrivFrame=function(t){if(!(t.size<2)){var r=e._utf8ArrayToStr(t.data,!0),n=new Uint8Array(t.data.subarray(r.length+1));return{key:t.type,info:r,data:n.buffer}}},e._decodeTextFrame=function(t){if(!(t.size<2)){if("TXXX"===t.type){var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var o=e._utf8ArrayToStr(t.data.subarray(1));return{key:t.type,data:o}}},e._decodeURLFrame=function(t){if("WXXX"===t.type){if(t.size<2)return;var r=1,n=e._utf8ArrayToStr(t.data.subarray(r));r+=n.length+1;var i=e._utf8ArrayToStr(t.data.subarray(r));return{key:t.type,info:n,data:i}}var o=e._utf8ArrayToStr(t.data);return{key:t.type,data:o}},e._utf8ArrayToStr=function(e,t){void 0===t&&(t=!1);for(var r,n,i,o=e.length,a="",s=0;s<o;){if(0===(r=e[s++])&&t)return a;if(0!==r&&3!==r)switch(r>>4){case 0:case 1:case 2:case 3:case 4:case 5:case 6:case 7:a+=String.fromCharCode(r);break;case 12:case 13:n=e[s++],a+=String.fromCharCode((31&r)<<6|63&n);break;case 14:n=e[s++],i=e[s++],a+=String.fromCharCode((15&r)<<12|(63&n)<<6|(63&i)<<0)}}return a},e}(),i=n._utf8ArrayToStr;t.utf8ArrayToStr=i,t.default=n},"./src/demux/mp3demuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/id3.js"),i=r("./src/utils/logger.js"),o=r("./src/demux/mpegaudio.js"),a=function(){function e(e,t,r){this.observer=e,this.config=r,this.remuxer=t}return e.prototype.resetInitSegment=function(e,t,r,n){this._audioTrack={container:"audio/mpeg",type:"audio",id:-1,sequenceNumber:0,isAAC:!1,samples:[],len:0,manifestCodec:t,duration:n,inputTimeScale:9e4}},e.prototype.resetTimeStamp=function(){},e.probe=function(e){var t,r,a=n.default.getID3Data(e,0);if(a&&void 0!==n.default.getTimeStamp(a))for(t=a.length,r=Math.min(e.length-1,t+100);t<r;t++)if(o.default.probe(e,t))return i.logger.log("MPEG Audio sync word found !"),!0;return!1},e.prototype.append=function(e,t,r,i){for(var a=n.default.getID3Data(e,0),s=n.default.getTimeStamp(a),l=s?90*s:9e4*t,d=a.length,u=e.length,c=0,f=0,p=this._audioTrack,h=[{pts:l,dts:l,data:a}];d<u;)if(o.default.isHeader(e,d)){var m=o.default.appendFrame(p,e,d,l,c);if(!m)break;d+=m.length,f=m.sample.pts,c++}else n.default.isHeader(e,d)?(a=n.default.getID3Data(e,d),h.push({pts:f,dts:f,data:a}),d+=a.length):d++;this.remuxer.remux(p,{samples:[]},{samples:h,inputTimeScale:9e4},{samples:[]},t,r,i)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mp4demuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/events.js"),o=Math.pow(2,32)-1,a=function(){function e(e,t){this.observer=e,this.remuxer=t}return e.prototype.resetTimeStamp=function(e){this.initPTS=e},e.prototype.resetInitSegment=function(t,r,n,o){if(t&&t.byteLength){var a=this.initData=e.parseInitSegment(t);null==r&&(r="mp4a.40.5"),null==n&&(n="avc1.42e01e");var s={};a.audio&&a.video?s.audiovideo={container:"video/mp4",codec:r+","+n,initSegment:o?t:null}:(a.audio&&(s.audio={container:"audio/mp4",codec:r,initSegment:o?t:null}),a.video&&(s.video={container:"video/mp4",codec:n,initSegment:o?t:null})),this.observer.trigger(i.default.FRAG_PARSING_INIT_SEGMENT,{tracks:s})}else r&&(this.audioCodec=r),n&&(this.videoCodec=n)},e.probe=function(t){return e.findBox({data:t,start:0,end:Math.min(t.length,16384)},["moof"]).length>0},e.bin2str=function(e){return String.fromCharCode.apply(null,e)},e.readUint16=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<8|e[t+1];return r<0?65536+r:r},e.readUint32=function(e,t){e.data&&(t+=e.start,e=e.data);var r=e[t]<<24|e[t+1]<<16|e[t+2]<<8|e[t+3];return r<0?4294967296+r:r},e.writeUint32=function(e,t,r){e.data&&(t+=e.start,e=e.data),e[t]=r>>24,e[t+1]=r>>16&255,e[t+2]=r>>8&255,e[t+3]=255&r},e.findBox=function(t,r){var n,i,o,a,s,l,d,u=[];if(t.data?(l=t.start,a=t.end,t=t.data):(l=0,a=t.byteLength),!r.length)return null;for(n=l;n<a;)i=e.readUint32(t,n),o=e.bin2str(t.subarray(n+4,n+8)),d=i>1?n+i:a,o===r[0]&&(1===r.length?u.push({data:t,start:n+8,end:d}):(s=e.findBox({data:t,start:n+8,end:d},r.slice(1)),s.length&&(u=u.concat(s)))),n=d;return u},e.parseSegmentIndex=function(t){var r,n=e.findBox(t,["moov"])[0],i=n?n.end:null,o=0,a=e.findBox(t,["sidx"]);if(!a||!a[0])return null;r=[],a=a[0];var s=a.data[0];o=0===s?8:16;var l=e.readUint32(a,o);o+=4;o+=0===s?8:16,o+=2;var d=a.end+0,u=e.readUint16(a,o);o+=2;for(var c=0;c<u;c++){var f=o,p=e.readUint32(a,f);f+=4;var h=2147483647&p;if(1===(2147483648&p)>>>31)return;var m=e.readUint32(a,f);f+=4,r.push({referenceSize:h,subsegmentDuration:m,info:{duration:m/l,start:d,end:d+h-1}}),d+=h,f+=4,o=f}return{earliestPresentationTime:0,timescale:l,version:s,referencesCount:u,references:r,moovEndOffset:i}},e.parseInitSegment=function(t){var r=[];return e.findBox(t,["moov","trak"]).forEach(function(t){var i=e.findBox(t,["tkhd"])[0];if(i){var o=i.data[i.start],a=0===o?12:20,s=e.readUint32(i,a),l=e.findBox(t,["mdia","mdhd"])[0];if(l){o=l.data[l.start],a=0===o?12:20;var d=e.readUint32(l,a),u=e.findBox(t,["mdia","hdlr"])[0];if(u){var c=e.bin2str(u.data.subarray(u.start+8,u.start+12)),f={soun:"audio",vide:"video"}[c];if(f){var p=e.findBox(t,["mdia","minf","stbl","stsd"]);if(p.length){p=p[0];var h=e.bin2str(p.data.subarray(p.start+12,p.start+16));n.logger.log("MP4Demuxer:"+f+":"+h+" found")}r[s]={timescale:d,type:f},r[f]={timescale:d,id:s}}}}}}),r},e.getStartDTS=function(t,r){var n,i,o;return n=e.findBox(r,["moof","traf"]),i=[].concat.apply([],n.map(function(r){return e.findBox(r,["tfhd"]).map(function(n){var i,o;return i=e.readUint32(n,4),o=t[i].timescale||9e4,e.findBox(r,["tfdt"]).map(function(t){var r,n;return r=t.data[t.start],n=e.readUint32(t,4),1===r&&(n*=Math.pow(2,32),n+=e.readUint32(t,8)),n})[0]/o})})),o=Math.min.apply(null,i),isFinite(o)?o:0},e.offsetStartDTS=function(t,r,n){e.findBox(r,["moof","traf"]).map(function(r){return e.findBox(r,["tfhd"]).map(function(i){var a=e.readUint32(i,4),s=t[a].timescale||9e4;e.findBox(r,["tfdt"]).map(function(t){var r=t.data[t.start],i=e.readUint32(t,4);if(0===r)e.writeUint32(t,4,i-n*s);else{i*=Math.pow(2,32),i+=e.readUint32(t,8),i-=n*s,i=Math.max(i,0);var a=Math.floor(i/(o+1)),l=Math.floor(i%(o+1));e.writeUint32(t,4,a),e.writeUint32(t,8,l)}})})})},e.prototype.append=function(t,r,n,o){var a=this.initData;a||(this.resetInitSegment(t,this.audioCodec,this.videoCodec,!1),a=this.initData);var s,l=this.initPTS;if(void 0===l){var d=e.getStartDTS(a,t);this.initPTS=l=d-r,this.observer.trigger(i.default.INIT_PTS_FOUND,{initPTS:l})}e.offsetStartDTS(a,t,l),s=e.getStartDTS(a,t),this.remuxer.remux(a.audio,a.video,null,null,s,n,o,t)},e.prototype.destroy=function(){},e}();t.default=a},"./src/demux/mpegaudio.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={BitratesMap:[32,64,96,128,160,192,224,256,288,320,352,384,416,448,32,48,56,64,80,96,112,128,160,192,224,256,320,384,32,40,48,56,64,80,96,112,128,160,192,224,256,320,32,48,56,64,80,96,112,128,144,160,176,192,224,256,8,16,24,32,40,48,56,64,80,96,112,128,144,160],SamplingRateMap:[44100,48e3,32e3,22050,24e3,16e3,11025,12e3,8e3],SamplesCoefficients:[[0,72,144,12],[0,0,0,0],[0,72,144,12],[0,144,144,12]],BytesInSlot:[0,1,1,4],appendFrame:function(e,t,r,n,i){if(!(r+24>t.length)){var o=this.parseHeader(t,r);if(o&&r+o.frameLength<=t.length){var a=9e4*o.samplesPerFrame/o.sampleRate,s=n+i*a,l={unit:t.subarray(r,r+o.frameLength),pts:s,dts:s};return e.config=[],e.channelCount=o.channelCount,e.samplerate=o.sampleRate,e.samples.push(l),e.len+=o.frameLength,{sample:l,length:o.frameLength}}}},parseHeader:function(e,t){var r=e[t+1]>>3&3,i=e[t+1]>>1&3,o=e[t+2]>>4&15,a=e[t+2]>>2&3,s=e[t+2]>>1&1;if(1!==r&&0!==o&&15!==o&&3!==a){var l=3===r?3-i:3===i?3:4,d=1e3*n.BitratesMap[14*l+o-1],u=3===r?0:2===r?1:2,c=n.SamplingRateMap[3*u+a],f=e[t+3]>>6==3?1:2,p=n.SamplesCoefficients[r][i],h=n.BytesInSlot[i],m=8*p*h;return{sampleRate:c,channelCount:f,frameLength:parseInt(p*d/c+s,10)*h,samplesPerFrame:m}}},isHeaderPattern:function(e,t){return 255===e[t]&&224==(224&e[t+1])&&0!=(6&e[t+1])},isHeader:function(e,t){return!!(t+1<e.length&&this.isHeaderPattern(e,t))},probe:function(e,t){if(t+1<e.length&&this.isHeaderPattern(e,t)){var r=this.parseHeader(e,t),n=4;r&&r.frameLength&&(n=r.frameLength);var i=t+n;if(i===e.length||i+1<e.length&&this.isHeaderPattern(e,i))return!0}return!1}};t.default=n},"./src/demux/sample-aes.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/crypt/decrypter.js"),i=function(){function e(e,t,r,i){this.decryptdata=r,this.discardEPB=i,this.decrypter=new n.default(e,t,{removePKCS7Padding:!1})}return e.prototype.decryptBuffer=function(e,t){this.decrypter.decrypt(e,this.decryptdata.key.buffer,this.decryptdata.iv.buffer,t)},e.prototype.decryptAacSample=function(e,t,r,n){var i=e[t].unit,o=i.subarray(16,i.length-i.length%16),a=o.buffer.slice(o.byteOffset,o.byteOffset+o.length),s=this;this.decryptBuffer(a,function(o){o=new Uint8Array(o),i.set(o,16),n||s.decryptAacSamples(e,t+1,r)})},e.prototype.decryptAacSamples=function(e,t,r){for(;;t++){if(t>=e.length)return void r();if(!(e[t].unit.length<32)){var n=this.decrypter.isSync();if(this.decryptAacSample(e,t,r,n),!n)return}}},e.prototype.getAvcEncryptedData=function(e){for(var t=16*Math.floor((e.length-48)/160)+16,r=new Int8Array(t),n=0,i=32;i<=e.length-16;i+=160,n+=16)r.set(e.subarray(i,i+16),n);return r},e.prototype.getAvcDecryptedUnit=function(e,t){t=new Uint8Array(t);for(var r=0,n=32;n<=e.length-16;n+=160,r+=16)e.set(t.subarray(r,r+16),n);return e},e.prototype.decryptAvcSample=function(e,t,r,n,i,o){var a=this.discardEPB(i.data),s=this.getAvcEncryptedData(a),l=this;this.decryptBuffer(s.buffer,function(s){i.data=l.getAvcDecryptedUnit(a,s),o||l.decryptAvcSamples(e,t,r+1,n)})},e.prototype.decryptAvcSamples=function(e,t,r,n){for(;;t++,r=0){if(t>=e.length)return void n();for(var i=e[t].units;!(r>=i.length);r++){var o=i[r];if(!(o.length<=48||1!==o.type&&5!==o.type)){var a=this.decrypter.isSync();if(this.decryptAvcSample(e,t,r,n,o,a),!a)return}}}},e}();t.default=i},"./src/demux/tsdemuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/demux/adts.js"),i=r("./src/demux/mpegaudio.js"),o=r("./src/events.js"),a=r("./src/demux/exp-golomb.js"),s=r("./src/demux/sample-aes.js"),l=r("./src/utils/logger.js"),d=r("./src/errors.js"),u={video:1,audio:2,id3:3,text:4},c=function(){function e(e,t,r,n){this.observer=e,this.config=r,this.typeSupported=n,this.remuxer=t,this.sampleAes=null}return e.prototype.setDecryptData=function(e){null!=e&&null!=e.key&&"SAMPLE-AES"===e.method?this.sampleAes=new s.default(this.observer,this.config,e,this.discardEPB):this.sampleAes=null},e.probe=function(t){var r=e._syncOffset(t);return!(r<0)&&(r&&l.logger.warn("MPEG2-TS detected but first sync word found @ offset "+r+", junk ahead ?"),!0)},e._syncOffset=function(e){for(var t=Math.min(1e3,e.length-564),r=0;r<t;){if(71===e[r]&&71===e[r+188]&&71===e[r+376])return r;r++}return-1},e.createTrack=function(e,t){return{container:"video"===e||"audio"===e?"video/mp2t":void 0,type:e,id:u[e],pid:-1,inputTimeScale:9e4,sequenceNumber:0,samples:[],len:0,dropped:"video"===e?0:void 0,isAAC:"audio"===e||void 0,duration:"audio"===e?t:void 0}},e.prototype.resetInitSegment=function(t,r,n,i){this.pmtParsed=!1,this._pmtId=-1,this._avcTrack=e.createTrack("video",i),this._audioTrack=e.createTrack("audio",i),this._id3Track=e.createTrack("id3",i),this._txtTrack=e.createTrack("text",i),this.aacOverFlow=null,this.aacLastPTS=null,this.avcSample=null,this.audioCodec=r,this.videoCodec=n,this._duration=i},e.prototype.resetTimeStamp=function(){},e.prototype.append=function(t,r,n,i){var a,s,u,c,f,p=t.length,h=!1;this.contiguous=n;var m=this.pmtParsed,v=this._avcTrack,g=this._audioTrack,y=this._id3Track,E=v.pid,b=g.pid,w=y.pid,_=this._pmtId,T=v.pesData,A=g.pesData,S=y.pesData,L=this._parsePAT,k=this._parsePMT,D=this._parsePES,C=this._parseAVCPES.bind(this),R=this._parseAACPES.bind(this),x=this._parseMPEGPES.bind(this),O=this._parseID3PES.bind(this),I=e._syncOffset(t);for(p-=(p+I)%188,a=I;a<p;a+=188)if(71===t[a]){if(s=!!(64&t[a+1]),u=((31&t[a+1])<<8)+t[a+2],(48&t[a+3])>>4>1){if((c=a+5+t[a+4])===a+188)continue}else c=a+4;switch(u){case E:s&&(T&&(f=D(T))&&void 0!==f.pts&&C(f,!1),T={data:[],size:0}),T&&(T.data.push(t.subarray(c,a+188)),T.size+=a+188-c);break;case b:s&&(A&&(f=D(A))&&void 0!==f.pts&&(g.isAAC?R(f):x(f)),A={data:[],size:0}),A&&(A.data.push(t.subarray(c,a+188)),A.size+=a+188-c);break;case w:s&&(S&&(f=D(S))&&void 0!==f.pts&&O(f),S={data:[],size:0}),S&&(S.data.push(t.subarray(c,a+188)),S.size+=a+188-c);break;case 0:s&&(c+=t[c]+1),_=this._pmtId=L(t,c);break;case _:s&&(c+=t[c]+1);var M=k(t,c,!0===this.typeSupported.mpeg||!0===this.typeSupported.mp3,null!=this.sampleAes);E=M.avc,E>0&&(v.pid=E),b=M.audio,b>0&&(g.pid=b,g.isAAC=M.isAAC),w=M.id3,w>0&&(y.pid=w),h&&!m&&(l.logger.log("reparse from beginning"),h=!1,a=I-188),m=this.pmtParsed=!0;break;case 17:case 8191:break;default:h=!0}}else this.observer.trigger(o.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"TS packet did not start with 0x47"});T&&(f=D(T))&&void 0!==f.pts?(C(f,!0),v.pesData=null):v.pesData=T,A&&(f=D(A))&&void 0!==f.pts?(g.isAAC?R(f):x(f),g.pesData=null):(A&&A.size&&l.logger.log("last AAC PES packet truncated,might overlap between fragments"),g.pesData=A),S&&(f=D(S))&&void 0!==f.pts?(O(f),y.pesData=null):y.pesData=S,null==this.sampleAes?this.remuxer.remux(g,v,y,this._txtTrack,r,n,i):this.decryptAndRemux(g,v,y,this._txtTrack,r,n,i)},e.prototype.decryptAndRemux=function(e,t,r,n,i,o,a){if(e.samples&&e.isAAC){var s=this;this.sampleAes.decryptAacSamples(e.samples,0,function(){s.decryptAndRemuxAvc(e,t,r,n,i,o,a)})}else this.decryptAndRemuxAvc(e,t,r,n,i,o,a)},e.prototype.decryptAndRemuxAvc=function(e,t,r,n,i,o,a){if(t.samples){var s=this;this.sampleAes.decryptAvcSamples(t.samples,0,0,function(){s.remuxer.remux(e,t,r,n,i,o,a)})}else this.remuxer.remux(e,t,r,n,i,o,a)},e.prototype.destroy=function(){this._initPTS=this._initDTS=void 0,this._duration=0},e.prototype._parsePAT=function(e,t){return(31&e[t+10])<<8|e[t+11]},e.prototype._parsePMT=function(e,t,r,n){var i,o,a,s,d={audio:-1,avc:-1,id3:-1,isAAC:!0};for(i=(15&e[t+1])<<8|e[t+2],o=t+3+i-4,a=(15&e[t+10])<<8|e[t+11],t+=12+a;t<o;){switch(s=(31&e[t+1])<<8|e[t+2],e[t]){case 207:if(!n){l.logger.log("unkown stream type:"+e[t]);break}case 15:-1===d.audio&&(d.audio=s);break;case 21:-1===d.id3&&(d.id3=s);break;case 219:if(!n){l.logger.log("unkown stream type:"+e[t]);break}case 27:-1===d.avc&&(d.avc=s);break;case 3:case 4:r?-1===d.audio&&(d.audio=s,d.isAAC=!1):l.logger.log("MPEG audio found, not supported in this browser for now");break;case 36:l.logger.warn("HEVC stream type found, not supported for now");break;default:l.logger.log("unkown stream type:"+e[t])}t+=5+((15&e[t+3])<<8|e[t+4])}return d},e.prototype._parsePES=function(e){var t,r,n,i,o,a,s,d,u=0,c=e.data;if(!e||0===e.size)return null;for(;c[0].length<19&&c.length>1;){var f=new Uint8Array(c[0].length+c[1].length);f.set(c[0]),f.set(c[1],c[0].length),c[0]=f,c.splice(1,1)}if(t=c[0],1===(t[0]<<16)+(t[1]<<8)+t[2]){if((n=(t[4]<<8)+t[5])&&n>e.size-6)return null;r=t[7],192&r&&(a=536870912*(14&t[9])+4194304*(255&t[10])+16384*(254&t[11])+128*(255&t[12])+(254&t[13])/2,a>4294967295&&(a-=8589934592),64&r?(s=536870912*(14&t[14])+4194304*(255&t[15])+16384*(254&t[16])+128*(255&t[17])+(254&t[18])/2,s>4294967295&&(s-=8589934592),a-s>54e5&&(l.logger.warn(Math.round((a-s)/9e4)+"s delta between PTS and DTS, align them"),a=s)):s=a),i=t[8],d=i+9,e.size-=d,o=new Uint8Array(e.size);for(var p=0,h=c.length;p<h;p++){t=c[p];var m=t.byteLength;if(d){if(d>m){d-=m;continue}t=t.subarray(d),m-=d,d=0}o.set(t,u),u+=m}return n&&(n-=i+3),{data:o,pts:a,dts:s,len:n}}return null},e.prototype.pushAccesUnit=function(e,t){if(e.units.length&&e.frame){var r=t.samples,n=r.length;!this.config.forceKeyFrameOnDiscontinuity||!0===e.key||t.sps&&(n||this.contiguous)?(e.id=n,r.push(e)):t.dropped++}e.debug.length&&l.logger.log(e.pts+"/"+e.dts+":"+e.debug)},e.prototype._parseAVCPES=function(e,t){var r,n,i,o=this,s=this._avcTrack,l=this._parseAVCNALu(e.data),d=this.avcSample,u=!1,c=this.pushAccesUnit.bind(this),f=function(e,t,r,n){return{key:e,pts:t,dts:r,units:[],debug:n}};e.data=null,d&&l.length&&!s.audFound&&(c(d,s),d=this.avcSample=f(!1,e.pts,e.dts,"")),l.forEach(function(t){switch(t.type){case 1:n=!0,d||(d=o.avcSample=f(!0,e.pts,e.dts,"")),d.frame=!0;var l=t.data;if(u&&l.length>4){var p=new a.default(l).readSliceType();2!==p&&4!==p&&7!==p&&9!==p||(d.key=!0)}break;case 5:n=!0,d||(d=o.avcSample=f(!0,e.pts,e.dts,"")),d.key=!0,d.frame=!0;break;case 6:n=!0,r=new a.default(o.discardEPB(t.data)),r.readUByte();for(var h=0,m=0,v=!1,g=0;!v&&r.bytesAvailable>1;){h=0;do{g=r.readUByte(),h+=g}while(255===g);m=0;do{g=r.readUByte(),m+=g}while(255===g);if(4===h&&0!==r.bytesAvailable){v=!0;if(181===r.readUByte()){if(49===r.readUShort()){if(1195456820===r.readUInt()){if(3===r.readUByte()){var y=r.readUByte(),E=r.readUByte(),b=31&y,w=[y,E];for(i=0;i<b;i++)w.push(r.readUByte()),w.push(r.readUByte()),w.push(r.readUByte());o._insertSampleInOrder(o._txtTrack.samples,{type:3,pts:e.pts,bytes:w})}}}}}else if(m<r.bytesAvailable)for(i=0;i<m;i++)r.readUByte()}break;case 7:if(n=!0,u=!0,!s.sps){r=new a.default(t.data);var _=r.readSPS();s.width=_.width,s.height=_.height,s.pixelRatio=_.pixelRatio,s.sps=[t.data],s.duration=o._duration;var T=t.data.subarray(1,4),A="avc1.";for(i=0;i<3;i++){var S=T[i].toString(16);S.length<2&&(S="0"+S),A+=S}s.codec=A}break;case 8:n=!0,s.pps||(s.pps=[t.data]);break;case 9:n=!1,s.audFound=!0,d&&c(d,s),d=o.avcSample=f(!1,e.pts,e.dts,"");break;case 12:n=!1;break;default:n=!1,d&&(d.debug+="unknown NAL "+t.type+" ")}if(d&&n){d.units.push(t)}}),t&&d&&(c(d,s),this.avcSample=null)},e.prototype._insertSampleInOrder=function(e,t){var r=e.length;if(r>0){if(t.pts>=e[r-1].pts)e.push(t);else for(var n=r-1;n>=0;n--)if(t.pts<e[n].pts){e.splice(n,0,t);break}}else e.push(t)},e.prototype._getLastNalUnit=function(){var e,t=this.avcSample;if(!t||0===t.units.length){var r=this._avcTrack,n=r.samples;t=n[n.length-1]}if(t){var i=t.units;e=i[i.length-1]}return e},e.prototype._parseAVCNALu=function(e){var t,r,n,i,o,a=0,s=e.byteLength,l=this._avcTrack,d=l.naluState||0,u=d,c=[],f=-1;for(-1===d&&(f=0,o=31&e[0],d=0,a=1);a<s;)if(t=e[a++],d)if(1!==d)if(t)if(1===t){if(f>=0)n={data:e.subarray(f,a-d-1),type:o},c.push(n);else{var p=this._getLastNalUnit();if(p&&(u&&a<=4-u&&p.state&&(p.data=p.data.subarray(0,p.data.byteLength-u)),(r=a-d-1)>0)){var h=new Uint8Array(p.data.byteLength+r);h.set(p.data,0),h.set(e.subarray(0,r),p.data.byteLength),p.data=h}}a<s?(i=31&e[a],f=a,o=i,d=0):d=-1}else d=0;else d=3;else d=t?0:2;else d=t?0:1;if(f>=0&&d>=0&&(n={data:e.subarray(f,s),type:o,state:d},c.push(n)),0===c.length){var p=this._getLastNalUnit();if(p){var h=new Uint8Array(p.data.byteLength+e.byteLength);h.set(p.data,0),h.set(e,p.data.byteLength),p.data=h}}return l.naluState=d,c},e.prototype.discardEPB=function(e){for(var t,r,n=e.byteLength,i=[],o=1;o<n-2;)0===e[o]&&0===e[o+1]&&3===e[o+2]?(i.push(o+2),o+=2):o++;if(0===i.length)return e;t=n-i.length,r=new Uint8Array(t);var a=0;for(o=0;o<t;a++,o++)a===i[0]&&(a++,i.shift()),r[o]=e[a];return r},e.prototype._parseAACPES=function(e){var t,r,i,a,s,u=this._audioTrack,c=e.data,f=e.pts,p=this.aacOverFlow,h=this.aacLastPTS;if(p){var m=new Uint8Array(p.byteLength+c.byteLength);m.set(p,0),m.set(c,p.byteLength),c=m}for(i=0,s=c.length;i<s-1&&!n.isHeader(c,i);i++);if(i){var v=void 0,g=void 0;if(i<s-1?(v="AAC PES did not start with ADTS header,offset:"+i,g=!1):(v="no ADTS header found in AAC PES",g=!0),l.logger.warn("parsing error:"+v),this.observer.trigger(o.default.ERROR,{type:d.ErrorTypes.MEDIA_ERROR,details:d.ErrorDetails.FRAG_PARSING_ERROR,fatal:g,reason:v}),g)return}if(n.initTrackConfig(u,this.observer,c,i,this.audioCodec),r=0,t=n.getFrameDuration(u.samplerate),p&&h){var y=h+t;Math.abs(y-f)>1&&(l.logger.log("AAC: align PTS for overlapping frames by "+Math.round((y-f)/90)),f=y)}for(;i<s;)if(n.isHeader(c,i)&&i+5<s){var E=n.appendFrame(u,c,i,f,r);if(!E)break;i+=E.length,a=E.sample.pts,r++}else i++;p=i<s?c.subarray(i,s):null,this.aacOverFlow=p,this.aacLastPTS=a},e.prototype._parseMPEGPES=function(e){for(var t=e.data,r=t.length,n=0,o=0,a=e.pts;o<r;)if(i.default.isHeader(t,o)){var s=i.default.appendFrame(this._audioTrack,t,o,a,n);if(!s)break;o+=s.length,n++}else o++},e.prototype._parseID3PES=function(e){this._id3Track.samples.push(e)},e}();t.default=c},"./src/errors.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.ErrorTypes={NETWORK_ERROR:"networkError",MEDIA_ERROR:"mediaError",KEY_SYSTEM_ERROR:"keySystemError",MUX_ERROR:"muxError",OTHER_ERROR:"otherError"},t.ErrorDetails={KEY_SYSTEM_NO_KEYS:"keySystemNoKeys",KEY_SYSTEM_NO_ACCESS:"keySystemNoAccess",KEY_SYSTEM_NO_SESSION:"keySystemNoSession",KEY_SYSTEM_LICENSE_REQUEST_FAILED:"keySystemLicenseRequestFailed",MANIFEST_LOAD_ERROR:"manifestLoadError",MANIFEST_LOAD_TIMEOUT:"manifestLoadTimeOut",MANIFEST_PARSING_ERROR:"manifestParsingError",MANIFEST_INCOMPATIBLE_CODECS_ERROR:"manifestIncompatibleCodecsError",LEVEL_LOAD_ERROR:"levelLoadError",LEVEL_LOAD_TIMEOUT:"levelLoadTimeOut",LEVEL_SWITCH_ERROR:"levelSwitchError",AUDIO_TRACK_LOAD_ERROR:"audioTrackLoadError",AUDIO_TRACK_LOAD_TIMEOUT:"audioTrackLoadTimeOut",FRAG_LOAD_ERROR:"fragLoadError",FRAG_LOAD_TIMEOUT:"fragLoadTimeOut",FRAG_DECRYPT_ERROR:"fragDecryptError",FRAG_PARSING_ERROR:"fragParsingError",REMUX_ALLOC_ERROR:"remuxAllocError",KEY_LOAD_ERROR:"keyLoadError",KEY_LOAD_TIMEOUT:"keyLoadTimeOut",BUFFER_ADD_CODEC_ERROR:"bufferAddCodecError",BUFFER_APPEND_ERROR:"bufferAppendError",BUFFER_APPENDING_ERROR:"bufferAppendingError",BUFFER_STALLED_ERROR:"bufferStalledError",BUFFER_FULL_ERROR:"bufferFullError",BUFFER_SEEK_OVER_HOLE:"bufferSeekOverHole",BUFFER_NUDGE_ON_STALL:"bufferNudgeOnStall",INTERNAL_EXCEPTION:"internalException"}},"./src/event-handler.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=r("./src/errors.js"),o=r("./src/events.js"),a={hlsEventGeneric:!0,hlsHandlerDestroying:!0,hlsHandlerDestroyed:!0},s=function(){function e(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.hls=e,this.onEvent=this.onEvent.bind(this),this.handledEvents=t,this.useGenericHandler=!0,this.registerListeners()}return e.prototype.destroy=function(){this.onHandlerDestroying(),this.unregisterListeners(),this.onHandlerDestroyed()},e.prototype.onHandlerDestroying=function(){},e.prototype.onHandlerDestroyed=function(){},e.prototype.isEventHandler=function(){return"object"==typeof this.handledEvents&&this.handledEvents.length&&"function"==typeof this.onEvent},e.prototype.registerListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){if(a[e])throw new Error("Forbidden event-name: "+e);this.hls.on(e,this.onEvent)},this)},e.prototype.unregisterListeners=function(){this.isEventHandler()&&this.handledEvents.forEach(function(e){this.hls.off(e,this.onEvent)},this)},e.prototype.onEvent=function(e,t){this.onEventGeneric(e,t)},e.prototype.onEventGeneric=function(e,t){var r=function(e,t){var r="on"+e.replace("hls","");if("function"!=typeof this[r])throw new Error("Event "+e+" has no generic handler in this "+this.constructor.name+" class (tried "+r+")");return this[r].bind(this,t)};try{r.call(this,e,t).call()}catch(t){n.logger.error("An internal error happened while handling event "+e+'. Error message: "'+t.message+'". Here is a stacktrace:',t),this.hls.trigger(o.default.ERROR,{type:i.ErrorTypes.OTHER_ERROR,details:i.ErrorDetails.INTERNAL_EXCEPTION,fatal:!1,event:e,err:t})}},e}();t.default=s},"./src/events.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={MEDIA_ATTACHING:"hlsMediaAttaching",MEDIA_ATTACHED:"hlsMediaAttached",MEDIA_DETACHING:"hlsMediaDetaching",MEDIA_DETACHED:"hlsMediaDetached",BUFFER_RESET:"hlsBufferReset",BUFFER_CODECS:"hlsBufferCodecs",BUFFER_CREATED:"hlsBufferCreated",BUFFER_APPENDING:"hlsBufferAppending",BUFFER_APPENDED:"hlsBufferAppended",BUFFER_EOS:"hlsBufferEos",BUFFER_FLUSHING:"hlsBufferFlushing",BUFFER_FLUSHED:"hlsBufferFlushed",MANIFEST_LOADING:"hlsManifestLoading",MANIFEST_LOADED:"hlsManifestLoaded",MANIFEST_PARSED:"hlsManifestParsed",LEVEL_SWITCHING:"hlsLevelSwitching",LEVEL_SWITCHED:"hlsLevelSwitched",LEVEL_LOADING:"hlsLevelLoading",LEVEL_LOADED:"hlsLevelLoaded",LEVEL_UPDATED:"hlsLevelUpdated",LEVEL_PTS_UPDATED:"hlsLevelPtsUpdated",AUDIO_TRACKS_UPDATED:"hlsAudioTracksUpdated",AUDIO_TRACK_SWITCHING:"hlsAudioTrackSwitching",AUDIO_TRACK_SWITCHED:"hlsAudioTrackSwitched",AUDIO_TRACK_LOADING:"hlsAudioTrackLoading",AUDIO_TRACK_LOADED:"hlsAudioTrackLoaded",SUBTITLE_TRACKS_UPDATED:"hlsSubtitleTracksUpdated",SUBTITLE_TRACK_SWITCH:"hlsSubtitleTrackSwitch",SUBTITLE_TRACK_LOADING:"hlsSubtitleTrackLoading",SUBTITLE_TRACK_LOADED:"hlsSubtitleTrackLoaded",SUBTITLE_FRAG_PROCESSED:"hlsSubtitleFragProcessed",INIT_PTS_FOUND:"hlsInitPtsFound",FRAG_LOADING:"hlsFragLoading",FRAG_LOAD_PROGRESS:"hlsFragLoadProgress",FRAG_LOAD_EMERGENCY_ABORTED:"hlsFragLoadEmergencyAborted",FRAG_LOADED:"hlsFragLoaded",FRAG_DECRYPTED:"hlsFragDecrypted",FRAG_PARSING_INIT_SEGMENT:"hlsFragParsingInitSegment",FRAG_PARSING_USERDATA:"hlsFragParsingUserdata",FRAG_PARSING_METADATA:"hlsFragParsingMetadata",FRAG_PARSING_DATA:"hlsFragParsingData",FRAG_PARSED:"hlsFragParsed",FRAG_BUFFERED:"hlsFragBuffered",FRAG_CHANGED:"hlsFragChanged",FPS_DROP:"hlsFpsDrop",FPS_DROP_LEVEL_CAPPING:"hlsFpsDropLevelCapping",ERROR:"hlsError",DESTROYING:"hlsDestroying",KEY_LOADING:"hlsKeyLoading",KEY_LOADED:"hlsKeyLoaded",STREAM_STATE_TRANSITION:"hlsStreamStateTransition"};t.default=n},"./src/hls.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/url-toolkit/src/url-toolkit.js"),o=r("./src/errors.js"),a=r("./src/loader/playlist-loader.js"),s=r("./src/loader/fragment-loader.js"),l=r("./src/loader/key-loader.js"),d=r("./src/controller/fragment-tracker.js"),u=r("./src/controller/stream-controller.js"),c=r("./src/controller/level-controller.js"),f=r("./src/controller/id3-track-controller.js"),p=r("./src/is-supported.js"),h=r("./src/utils/logger.js"),m=r("./src/config.js"),v=r("./src/events.js"),g=r("./src/observer.js"),y=function(e){function t(r){void 0===r&&(r={});var n=e.call(this)||this,i=t.DefaultConfig;if((r.liveSyncDurationCount||r.liveMaxLatencyDurationCount)&&(r.liveSyncDuration||r.liveMaxLatencyDuration))throw new Error("Illegal hls.js config: don't mix up liveSyncDurationCount/liveMaxLatencyDurationCount and liveSyncDuration/liveMaxLatencyDuration");for(var o in i)o in r||(r[o]=i[o]);if(void 0!==r.liveMaxLatencyDurationCount&&r.liveMaxLatencyDurationCount<=r.liveSyncDurationCount)throw new Error('Illegal hls.js config: "liveMaxLatencyDurationCount" must be gt "liveSyncDurationCount"');if(void 0!==r.liveMaxLatencyDuration&&(r.liveMaxLatencyDuration<=r.liveSyncDuration||void 0===r.liveSyncDuration))throw new Error('Illegal hls.js config: "liveMaxLatencyDuration" must be gt "liveSyncDuration"');h.enableLogs(r.debug),n.config=r,n._autoLevelCapping=-1;var p=n.abrController=new r.abrController(n),m=new r.bufferController(n),v=new r.capLevelController(n),g=new r.fpsController(n),y=new a.default(n),E=new s.default(n),b=new l.default(n),w=new f.default(n),_=n.levelController=new c.default(n),T=new d.FragmentTracker(n),A=n.streamController=new u.default(n,T),S=[_,A],L=r.audioStreamController;L&&S.push(new L(n,T)),n.networkControllers=S;var k=[y,E,b,p,m,v,g,w,T];if(L=r.audioTrackController){var D=new L(n);n.audioTrackController=D,k.push(D)}if(L=r.subtitleTrackController){var C=new L(n);n.subtitleTrackController=C,S.push(C)}if(L=r.emeController){var R=new L(n);n.emeController=R,k.push(R)}return L=r.subtitleStreamController,L&&S.push(new L(n,T)),L=r.timelineController,L&&k.push(new L(n)),n.coreComponents=k,n}return n(t,e),Object.defineProperty(t,"version",{get:function(){return"0.12.4"},enumerable:!0,configurable:!0}),t.isSupported=function(){return p.isSupported()},Object.defineProperty(t,"Events",{get:function(){return v.default},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorTypes",{get:function(){return o.ErrorTypes},enumerable:!0,configurable:!0}),Object.defineProperty(t,"ErrorDetails",{get:function(){return o.ErrorDetails},enumerable:!0,configurable:!0}),Object.defineProperty(t,"DefaultConfig",{get:function(){return t.defaultConfig?t.defaultConfig:m.hlsDefaultConfig},set:function(e){t.defaultConfig=e},enumerable:!0,configurable:!0}),t.prototype.destroy=function(){h.logger.log("destroy"),this.trigger(v.default.DESTROYING),this.detachMedia(),this.coreComponents.concat(this.networkControllers).forEach(function(e){e.destroy()}),this.url=null,this.removeAllListeners(),this._autoLevelCapping=-1},t.prototype.attachMedia=function(e){h.logger.log("attachMedia"),this.media=e,this.trigger(v.default.MEDIA_ATTACHING,{media:e})},t.prototype.detachMedia=function(){h.logger.log("detachMedia"),this.trigger(v.default.MEDIA_DETACHING),this.media=null},t.prototype.loadSource=function(e){e=i.buildAbsoluteURL(window.location.href,e,{alwaysNormalize:!0}),h.logger.log("loadSource:"+e),this.url=e,this.trigger(v.default.MANIFEST_LOADING,{url:e})},t.prototype.startLoad=function(e){void 0===e&&(e=-1),h.logger.log("startLoad("+e+")"),this.networkControllers.forEach(function(t){t.startLoad(e)})},t.prototype.stopLoad=function(){h.logger.log("stopLoad"),this.networkControllers.forEach(function(e){e.stopLoad()})},t.prototype.swapAudioCodec=function(){h.logger.log("swapAudioCodec"),this.streamController.swapAudioCodec()},t.prototype.recoverMediaError=function(){h.logger.log("recoverMediaError");var e=this.media;this.detachMedia(),this.attachMedia(e)},Object.defineProperty(t.prototype,"levels",{get:function(){return this.levelController.levels},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"currentLevel",{get:function(){return this.streamController.currentLevel},set:function(e){h.logger.log("set currentLevel:"+e),this.loadLevel=e,this.streamController.immediateLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLevel",{get:function(){return this.streamController.nextLevel},set:function(e){h.logger.log("set nextLevel:"+e),this.levelController.manualLevel=e,this.streamController.nextLevelSwitch()},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"loadLevel",{get:function(){return this.levelController.level},set:function(e){h.logger.log("set loadLevel:"+e),this.levelController.manualLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextLoadLevel",{get:function(){return this.levelController.nextLoadLevel},set:function(e){this.levelController.nextLoadLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"firstLevel",{get:function(){return Math.max(this.levelController.firstLevel,this.minAutoLevel)},set:function(e){h.logger.log("set firstLevel:"+e),this.levelController.firstLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"startLevel",{get:function(){return this.levelController.startLevel},set:function(e){h.logger.log("set startLevel:"+e);var t=this;-1!==e&&(e=Math.max(e,t.minAutoLevel)),t.levelController.startLevel=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelCapping",{get:function(){return this._autoLevelCapping},set:function(e){h.logger.log("set autoLevelCapping:"+e),this._autoLevelCapping=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"autoLevelEnabled",{get:function(){return-1===this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"manualLevel",{get:function(){return this.levelController.manualLevel},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"minAutoLevel",{get:function(){for(var e=this,t=e.levels,r=e.config.minAutoBitrate,n=t?t.length:0,i=0;i<n;i++){if((t[i].realBitrate?Math.max(t[i].realBitrate,t[i].bitrate):t[i].bitrate)>r)return i}return 0},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"maxAutoLevel",{get:function(){var e=this,t=e.levels,r=e.autoLevelCapping;return-1===r&&t&&t.length?t.length-1:r},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"nextAutoLevel",{get:function(){var e=this;return Math.min(Math.max(e.abrController.nextAutoLevel,e.minAutoLevel),e.maxAutoLevel)},set:function(e){var t=this;t.abrController.nextAutoLevel=Math.max(t.minAutoLevel,e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTracks",{get:function(){var e=this.audioTrackController;return e?e.audioTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"audioTrack",{get:function(){var e=this.audioTrackController;return e?e.audioTrack:-1},set:function(e){var t=this.audioTrackController;t&&(t.audioTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"liveSyncPosition",{get:function(){return this.streamController.liveSyncPosition},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTracks",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTracks:[]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleTrack",{get:function(){var e=this.subtitleTrackController;return e?e.subtitleTrack:-1},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleTrack=e)},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"subtitleDisplay",{get:function(){var e=this.subtitleTrackController;return!!e&&e.subtitleDisplay},set:function(e){var t=this.subtitleTrackController;t&&(t.subtitleDisplay=e)},enumerable:!0,configurable:!0}),t}(g.Observer);t.default=y},"./src/is-supported.js":function(e,t,r){"use strict";function n(){var e=i.getMediaSource(),t=window.SourceBuffer||window.WebKitSourceBuffer,r=e&&"function"==typeof e.isTypeSupported&&e.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),n=!t||t.prototype&&"function"==typeof t.prototype.appendBuffer&&"function"==typeof t.prototype.remove;return!!r&&!!n}Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/utils/mediasource-helper.js");t.isSupported=n},"./src/loader/fragment-loader.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=function(t){function r(e){var r=t.call(this,e,i.default.FRAG_LOADING)||this;return r.loaders={},r}return n(r,t),r.prototype.destroy=function(){var e=this.loaders;for(var r in e){var n=e[r];n&&n.destroy()}this.loaders={},t.prototype.destroy.call(this)},r.prototype.onFragLoading=function(t){var r=t.frag,n=r.type,i=this.loaders,o=this.hls.config,a=o.fLoader,l=o.loader;r.loaded=0;var d=i[n];d&&(s.logger.warn("abort previous fragment loader for type: "+n),d.abort()),d=i[n]=r.loader=o.fLoader?new a(o):new l(o);var u,c,f;u={url:r.url,frag:r,responseType:"arraybuffer",progressData:!1};var p=r.byteRangeStartOffset,h=r.byteRangeEndOffset;e.isFinite(p)&&e.isFinite(h)&&(u.rangeStart=p,u.rangeEnd=h),c={timeout:o.fragLoadingTimeOut,maxRetry:0,retryDelay:0,maxRetryDelay:o.fragLoadingMaxRetryTimeout},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this),onProgress:this.loadprogress.bind(this)},d.load(u,c,f)},r.prototype.loadsuccess=function(e,t,r,n){void 0===n&&(n=null);var o=e.data,a=r.frag;a.loader=void 0,this.loaders[a.type]=void 0,this.hls.trigger(i.default.FRAG_LOADED,{payload:o,frag:a,stats:t,networkDetails:n})},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null);var n=t.frag,o=n.loader;o&&o.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.FRAG_LOAD_ERROR,fatal:!1,frag:t.frag,response:e,networkDetails:r})},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null);var n=t.frag,o=n.loader;o&&o.abort(),this.loaders[n.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.FRAG_LOAD_TIMEOUT,fatal:!1,frag:t.frag,networkDetails:r})},r.prototype.loadprogress=function(e,t,r,n){void 0===n&&(n=null);var o=t.frag;o.loaded=e.loaded,this.hls.trigger(i.default.FRAG_LOAD_PROGRESS,{frag:o,stats:e,networkDetails:n})},r}(o.default);t.default=l}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/fragment.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=r("./src/loader/level-key.js"),o=function(){function t(){var e;this._url=null,this._byteRange=null,this._decryptdata=null,this.tagList=[],this.programDateTime=null,this.rawProgramDateTime=null,this._elementaryStreams=(e={},e[t.ElementaryStreamTypes.AUDIO]=!1,e[t.ElementaryStreamTypes.VIDEO]=!1,e)}return Object.defineProperty(t,"ElementaryStreamTypes",{get:function(){return{AUDIO:"audio",VIDEO:"video"}},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"url",{get:function(){return!this._url&&this.relurl&&(this._url=n.buildAbsoluteURL(this.baseurl,this.relurl,{alwaysNormalize:!0})),this._url},set:function(e){this._url=e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRange",{get:function(){if(!this._byteRange&&!this.rawByteRange)return[];if(this._byteRange)return this._byteRange;var e=[];if(this.rawByteRange){var t=this.rawByteRange.split("@",2);if(1===t.length){var r=this.lastByteRangeEndOffset;e[0]=r||0}else e[0]=parseInt(t[1]);e[1]=parseInt(t[0])+e[0],this._byteRange=e}return e},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeStartOffset",{get:function(){return this.byteRange[0]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"byteRangeEndOffset",{get:function(){return this.byteRange[1]},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"decryptdata",{get:function(){return this._decryptdata||(this._decryptdata=this.fragmentDecryptdataFromLevelkey(this.levelkey,this.sn)),this._decryptdata},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"endProgramDateTime",{get:function(){if(!e.isFinite(this.programDateTime))return null;var t=e.isFinite(this.duration)?this.duration:0;return this.programDateTime+1e3*t},enumerable:!0,configurable:!0}),Object.defineProperty(t.prototype,"encrypted",{get:function(){return!(!this.decryptdata||null===this.decryptdata.uri||null!==this.decryptdata.key)},enumerable:!0,configurable:!0}),t.prototype.addElementaryStream=function(e){this._elementaryStreams[e]=!0},t.prototype.hasElementaryStream=function(e){return!0===this._elementaryStreams[e]},t.prototype.createInitializationVector=function(e){for(var t=new Uint8Array(16),r=12;r<16;r++)t[r]=e>>8*(15-r)&255;return t},t.prototype.fragmentDecryptdataFromLevelkey=function(e,t){var r=e;return e&&e.method&&e.uri&&!e.iv&&(r=new i.default,r.method=e.method,r.baseuri=e.baseuri,r.reluri=e.reluri,r.iv=this.createInitializationVector(t)),r},t}();t.default=o}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/key-loader.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=function(e){function t(t){var r=e.call(this,t,i.default.KEY_LOADING)||this;return r.loaders={},r.decryptkey=null,r.decrypturl=null,r}return n(t,e),t.prototype.destroy=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy()}this.loaders={},o.default.prototype.destroy.call(this)},t.prototype.onKeyLoading=function(e){var t=e.frag,r=t.type,n=this.loaders[r],o=t.decryptdata,a=o.uri;if(a!==this.decrypturl||null===this.decryptkey){var l=this.hls.config;n&&(s.logger.warn("abort previous key loader for type:"+r),n.abort()),t.loader=this.loaders[r]=new l.loader(l),this.decrypturl=a,this.decryptkey=null;var d=void 0,u=void 0,c=void 0;d={url:a,frag:t,responseType:"arraybuffer"},u={timeout:l.fragLoadingTimeOut,maxRetry:0,retryDelay:l.fragLoadingRetryDelay,maxRetryDelay:l.fragLoadingMaxRetryTimeout},c={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)},t.loader.load(d,u,c)}else this.decryptkey&&(o.key=this.decryptkey,this.hls.trigger(i.default.KEY_LOADED,{frag:t}))},t.prototype.loadsuccess=function(e,t,r){var n=r.frag;this.decryptkey=n.decryptdata.key=new Uint8Array(e.data),n.loader=void 0,this.loaders[n.type]=void 0,this.hls.trigger(i.default.KEY_LOADED,{frag:n})},t.prototype.loaderror=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.KEY_LOAD_ERROR,fatal:!1,frag:r,response:e})},t.prototype.loadtimeout=function(e,t){var r=t.frag,n=r.loader;n&&n.abort(),this.loaders[t.type]=void 0,this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.KEY_LOAD_TIMEOUT,fatal:!1,frag:r})},t}(o.default);t.default=l},"./src/loader/level-key.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./node_modules/url-toolkit/src/url-toolkit.js"),i=function(){function e(){this.method=null,this.key=null,this.iv=null,this._uri=null}return Object.defineProperty(e.prototype,"uri",{get:function(){return!this._uri&&this.reluri&&(this._uri=n.buildAbsoluteURL(this.baseuri,this.reluri,{alwaysNormalize:!0})),this._uri},enumerable:!0,configurable:!0}),e}();t.default=i},"./src/loader/level.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=function(){function t(e){this.endCC=0,this.endSN=0,this.fragments=[],this.initSegment=null,this.live=!0,this.needSidxRanges=!1,this.startCC=0,this.startSN=0,this.startTimeOffset=null,this.targetduration=0,this.totalduration=0,this.type=null,this.url=e,this.version=null}return Object.defineProperty(t.prototype,"hasProgramDateTime",{get:function(){return!(!this.fragments[0]||!e.isFinite(this.fragments[0].programDateTime))},enumerable:!0,configurable:!0}),t}();t.default=r}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/m3u8-parser.js":function(e,t,r){"use strict";(function(e){function n(e,t){for(var r=e[t],n=t-1;n>=0;n--){var i=e[n];i.programDateTime=r.programDateTime-1e3*i.duration,r=i}}function i(t,r){t.rawProgramDateTime?t.programDateTime=Date.parse(t.rawProgramDateTime):r&&r.programDateTime&&(t.programDateTime=r.endProgramDateTime),e.isFinite(t.programDateTime)||(t.programDateTime=null,t.rawProgramDateTime=null)}Object.defineProperty(t,"__esModule",{value:!0});var o=r("./node_modules/url-toolkit/src/url-toolkit.js"),a=r("./src/loader/fragment.js"),s=r("./src/loader/level.js"),l=r("./src/loader/level-key.js"),d=r("./src/utils/attr-list.js"),u=r("./src/utils/logger.js"),c=r("./src/utils/codecs.js"),f=/#EXT-X-STREAM-INF:([^\n\r]*)[\r\n]+([^\r\n]+)/g,p=/#EXT-X-MEDIA:(.*)/g,h=new RegExp([/#EXTINF:\s*(\d*(?:\.\d+)?)(?:,(.*)\s+)?/.source,/|(?!#)([\S+ ?]+)/.source,/|#EXT-X-BYTERANGE:*(.+)/.source,/|#EXT-X-PROGRAM-DATE-TIME:(.+)/.source,/|#.*/.source].join(""),"g"),m=/(?:(?:#(EXTM3U))|(?:#EXT-X-(PLAYLIST-TYPE):(.+))|(?:#EXT-X-(MEDIA-SEQUENCE): *(\d+))|(?:#EXT-X-(TARGETDURATION): *(\d+))|(?:#EXT-X-(KEY):(.+))|(?:#EXT-X-(START):(.+))|(?:#EXT-X-(ENDLIST))|(?:#EXT-X-(DISCONTINUITY-SEQ)UENCE:(\d+))|(?:#EXT-X-(DIS)CONTINUITY))|(?:#EXT-X-(VERSION):(\d+))|(?:#EXT-X-(MAP):(.+))|(?:(#)([^:]*):(.*))|(?:(#)(.*))(?:.*)\r?\n?/,v=/\.(mp4|m4s|m4v|m4a)$/i,g=function(){function t(){}return t.findGroup=function(e,t){if(!e)return null;for(var r=null,n=0;n<e.length;n++){var i=e[n];i.id===t&&(r=i)}return r},t.convertAVC1ToAVCOTI=function(e){var t,r=e.split(".");return r.length>2?(t=r.shift()+".",t+=parseInt(r.shift()).toString(16),t+=("000"+parseInt(r.shift()).toString(16)).substr(-4)):t=e,t},t.resolve=function(e,t){return o.buildAbsoluteURL(t,e,{alwaysNormalize:!0})},t.parseMasterPlaylist=function(e,r){var n,i=[];for(f.lastIndex=0;null!=(n=f.exec(e));){var o={},a=o.attrs=new d.default(n[1]);o.url=t.resolve(n[2],r);var s=a.decimalResolution("RESOLUTION");s&&(o.width=s.width,o.height=s.height),o.bitrate=a.decimalInteger("AVERAGE-BANDWIDTH")||a.decimalInteger("BANDWIDTH"),o.name=a.NAME,function(e,t){["video","audio"].forEach(function(r){var n=e.filter(function(e){return c.isCodecType(e,r)});if(n.length){var i=n.filter(function(e){return 0===e.lastIndexOf("avc1",0)||0===e.lastIndexOf("mp4a",0)});t[r+"Codec"]=i.length>0?i[0]:n[0],e=e.filter(function(e){return-1===n.indexOf(e)})}}),t.unknownCodecs=e}([].concat((a.CODECS||"").split(/[ ,]+/)),o),o.videoCodec&&-1!==o.videoCodec.indexOf("avc1")&&(o.videoCodec=t.convertAVC1ToAVCOTI(o.videoCodec)),i.push(o)}return i},t.parseMasterPlaylistMedia=function(e,r,n,i){void 0===i&&(i=[]);var o,a=[],s=0;for(p.lastIndex=0;null!==(o=p.exec(e));){var l={},u=new d.default(o[1]);if(u.TYPE===n){if(l.groupId=u["GROUP-ID"],l.name=u.NAME,l.type=n,l.default="YES"===u.DEFAULT,l.autoselect="YES"===u.AUTOSELECT,l.forced="YES"===u.FORCED,u.URI&&(l.url=t.resolve(u.URI,r)),l.lang=u.LANGUAGE,l.name||(l.name=l.lang),i.length){var c=t.findGroup(i,l.groupId);l.audioCodec=c?c.codec:i[0].codec}l.id=s++,a.push(l)}}return a},t.parseLevelPlaylist=function(t,r,o,c,f){var p,g,y=0,E=0,b=new s.default(r),w=new l.default,_=0,T=null,A=new a.default,S=null;for(h.lastIndex=0;null!==(p=h.exec(t));){var L=p[1];if(L){A.duration=parseFloat(L);var k=(" "+p[2]).slice(1);A.title=k||null,A.tagList.push(k?["INF",L,k]:["INF",L])}else if(p[3]){if(e.isFinite(A.duration)){var D=y++;A.type=c,A.start=E,A.levelkey=w,A.sn=D,A.level=o,A.cc=_,A.urlId=f,A.baseurl=r,A.relurl=(" "+p[3]).slice(1),i(A,T),b.fragments.push(A),T=A,E+=A.duration,A=new a.default}}else if(p[4]){if(A.rawByteRange=(" "+p[4]).slice(1),T){var C=T.byteRangeEndOffset;C&&(A.lastByteRangeEndOffset=C)}}else if(p[5])A.rawProgramDateTime=(" "+p[5]).slice(1),A.tagList.push(["PROGRAM-DATE-TIME",A.rawProgramDateTime]),null===S&&(S=b.fragments.length);else{for(p=p[0].match(m),g=1;g<p.length&&void 0===p[g];g++);var R=(" "+p[g+1]).slice(1),x=(" "+p[g+2]).slice(1);switch(p[g]){case"#":A.tagList.push(x?[R,x]:[R]);break;case"PLAYLIST-TYPE":b.type=R.toUpperCase();break;case"MEDIA-SEQUENCE":y=b.startSN=parseInt(R);break;case"TARGETDURATION":b.targetduration=parseFloat(R);break;case"VERSION":b.version=parseInt(R);break;case"EXTM3U":break;case"ENDLIST":b.live=!1;break;case"DIS":_++,A.tagList.push(["DIS"]);break;case"DISCONTINUITY-SEQ":_=parseInt(R);break;case"KEY":var O=R,I=new d.default(O),M=I.enumeratedString("METHOD"),P=I.URI,N=I.hexadecimalInteger("IV");M&&(w=new l.default,P&&["AES-128","SAMPLE-AES","SAMPLE-AES-CENC"].indexOf(M)>=0&&(w.method=M,w.baseuri=r,w.reluri=P,w.key=null,w.iv=N));break;case"START":var B=R,F=new d.default(B),j=F.decimalFloatingPoint("TIME-OFFSET");e.isFinite(j)&&(b.startTimeOffset=j);break;case"MAP":var U=new d.default(R);A.relurl=U.URI,A.rawByteRange=U.BYTERANGE,A.baseurl=r,A.level=o,A.type=c,A.sn="initSegment",b.initSegment=A,A=new a.default,A.rawProgramDateTime=b.initSegment.rawProgramDateTime;break;default:u.logger.warn("line parsed but not handled: "+p)}}}return A=T,A&&!A.relurl&&(b.fragments.pop(),E-=A.duration),b.totalduration=E,b.averagetargetduration=E/b.fragments.length,b.endSN=y-1,b.startCC=b.fragments[0]?b.fragments[0].cc:0,b.endCC=_,!b.initSegment&&b.fragments.length&&b.fragments.every(function(e){return v.test(e.relurl)})&&(u.logger.warn("MP4 fragments found but no init segment (probably no MAP, incomplete M3U8), trying to fetch SIDX"),A=new a.default,A.relurl=b.fragments[0].relurl,A.baseurl=r,A.level=o,A.type=c,A.sn="initSegment",b.initSegment=A,b.needSidxRanges=!0),S&&n(b.fragments,S),b},t}();t.default=g}).call(this,r("./src/polyfills/number.js").Number)},"./src/loader/playlist-loader.js":function(e,t,r){"use strict";(function(e){var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/events.js"),o=r("./src/event-handler.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=r("./src/demux/mp4demuxer.js"),d=r("./src/loader/m3u8-parser.js"),u=window.performance,c={MANIFEST:"manifest",LEVEL:"level",AUDIO_TRACK:"audioTrack",SUBTITLE_TRACK:"subtitleTrack"},f={MAIN:"main",AUDIO:"audio",SUBTITLE:"subtitle"},p=function(t){function r(e){var r=t.call(this,e,i.default.MANIFEST_LOADING,i.default.LEVEL_LOADING,i.default.AUDIO_TRACK_LOADING,i.default.SUBTITLE_TRACK_LOADING)||this;return r.loaders={},r}return n(r,t),Object.defineProperty(r,"ContextType",{get:function(){return c},enumerable:!0,configurable:!0}),Object.defineProperty(r,"LevelType",{get:function(){return f},enumerable:!0,configurable:!0}),r.canHaveQualityLevels=function(e){return e!==c.AUDIO_TRACK&&e!==c.SUBTITLE_TRACK},r.mapContextToLevelType=function(e){switch(e.type){case c.AUDIO_TRACK:return f.AUDIO;case c.SUBTITLE_TRACK:return f.SUBTITLE;default:return f.MAIN}},r.getResponseUrl=function(e,t){var r=e.url;return void 0!==r&&0!==r.indexOf("data:")||(r=t.url),r},r.prototype.createInternalLoader=function(e){var t=this.hls.config,r=t.pLoader,n=t.loader,i=r||n,o=new i(t);return e.loader=o,this.loaders[e.type]=o,o},r.prototype.getInternalLoader=function(e){return this.loaders[e.type]},r.prototype.resetInternalLoader=function(e){this.loaders[e]&&delete this.loaders[e]},r.prototype.destroyInternalLoaders=function(){for(var e in this.loaders){var t=this.loaders[e];t&&t.destroy(),this.resetInternalLoader(e)}},r.prototype.destroy=function(){this.destroyInternalLoaders(),t.prototype.destroy.call(this)},r.prototype.onManifestLoading=function(e){this.load(e.url,{type:c.MANIFEST,level:0,id:null})},r.prototype.onLevelLoading=function(e){this.load(e.url,{type:c.LEVEL,level:e.level,id:e.id})},r.prototype.onAudioTrackLoading=function(e){this.load(e.url,{type:c.AUDIO_TRACK,level:null,id:e.id})},r.prototype.onSubtitleTrackLoading=function(e){this.load(e.url,{type:c.SUBTITLE_TRACK,level:null,id:e.id})},r.prototype.load=function(e,t){var r=this.hls.config;s.logger.debug("Loading playlist of type "+t.type+", level: "+t.level+", id: "+t.id);var n=this.getInternalLoader(t);if(n){var i=n.context;if(i&&i.url===e)return s.logger.trace("playlist request ongoing"),!1;s.logger.warn("aborting previous loader for type: "+t.type),n.abort()}var o,a,l,d;switch(t.type){case c.MANIFEST:o=r.manifestLoadingMaxRetry,a=r.manifestLoadingTimeOut,l=r.manifestLoadingRetryDelay,d=r.manifestLoadingMaxRetryTimeout;break;case c.LEVEL:o=0,a=r.levelLoadingTimeOut;break;default:o=r.levelLoadingMaxRetry,a=r.levelLoadingTimeOut,l=r.levelLoadingRetryDelay,d=r.levelLoadingMaxRetryTimeout}n=this.createInternalLoader(t),t.url=e,t.responseType=t.responseType||"";var u={timeout:a,maxRetry:o,retryDelay:l,maxRetryDelay:d},f={onSuccess:this.loadsuccess.bind(this),onError:this.loaderror.bind(this),onTimeout:this.loadtimeout.bind(this)};return s.logger.debug("Calling internal loader delegate for URL: "+e),n.load(t,u,f),!0},r.prototype.loadsuccess=function(e,t,r,n){if(void 0===n&&(n=null),r.isSidxRequest)return this._handleSidxRequest(e,r),void this._handlePlaylistLoaded(e,t,r,n);this.resetInternalLoader(r.type);var i=e.data;if(t.tload=u.now(),0!==i.indexOf("#EXTM3U"))return void this._handleManifestParsingError(e,r,"no EXTM3U delimiter",n);i.indexOf("#EXTINF:")>0||i.indexOf("#EXT-X-TARGETDURATION:")>0?this._handleTrackOrLevelPlaylist(e,t,r,n):this._handleMasterPlaylist(e,t,r,n)},r.prototype.loaderror=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!1,e)},r.prototype.loadtimeout=function(e,t,r){void 0===r&&(r=null),this._handleNetworkError(t,r,!0)},r.prototype._handleMasterPlaylist=function(e,t,n,o){var a=this.hls,l=e.data,u=r.getResponseUrl(e,n),c=d.default.parseMasterPlaylist(l,u);if(!c.length)return void this._handleManifestParsingError(e,n,"no level found in manifest",o);var f=c.map(function(e){return{id:e.attrs.AUDIO,codec:e.audioCodec}}),p=d.default.parseMasterPlaylistMedia(l,u,"AUDIO",f),h=d.default.parseMasterPlaylistMedia(l,u,"SUBTITLES");if(p.length){var m=!1;p.forEach(function(e){e.url||(m=!0)}),!1===m&&c[0].audioCodec&&!c[0].attrs.AUDIO&&(s.logger.log("audio codec signaled in quality level, but no embedded audio track signaled, create one"),p.unshift({type:"main",name:"main"}))}a.trigger(i.default.MANIFEST_LOADED,{levels:c,audioTracks:p,subtitles:h,url:u,stats:t,networkDetails:o})},r.prototype._handleTrackOrLevelPlaylist=function(t,n,o,a){var s=this.hls,l=o.id,f=o.level,p=o.type,h=r.getResponseUrl(t,o),m=e.isFinite(l)?l:0,v=e.isFinite(f)?f:m,g=r.mapContextToLevelType(o),y=d.default.parseLevelPlaylist(t.data,h,v,g,m);if(y.tload=n.tload,p===c.MANIFEST){var E={url:h,details:y};s.trigger(i.default.MANIFEST_LOADED,{levels:[E],audioTracks:[],url:h,stats:n,networkDetails:a})}if(n.tparsed=u.now(),y.needSidxRanges){var b=y.initSegment.url;return void this.load(b,{isSidxRequest:!0,type:p,level:f,levelDetails:y,id:l,rangeStart:0,rangeEnd:2048,responseType:"arraybuffer"})}o.levelDetails=y,this._handlePlaylistLoaded(t,n,o,a)},r.prototype._handleSidxRequest=function(e,t){var r=l.default.parseSegmentIndex(new Uint8Array(e.data));if(r){var n=r.references,i=t.levelDetails;n.forEach(function(e,t){var r=e.info,n=i.fragments[t];0===n.byteRange.length&&(n.rawByteRange=String(1+r.end-r.start)+"@"+String(r.start))}),i.initSegment.rawByteRange=String(r.moovEndOffset)+"@0"}},r.prototype._handleManifestParsingError=function(e,t,r,n){this.hls.trigger(i.default.ERROR,{type:a.ErrorTypes.NETWORK_ERROR,details:a.ErrorDetails.MANIFEST_PARSING_ERROR,fatal:!0,url:e.url,reason:r,networkDetails:n})},r.prototype._handleNetworkError=function(e,t,r,n){void 0===r&&(r=!1),void 0===n&&(n=null),s.logger.info("A network error occured while loading a "+e.type+"-type playlist");var o,l,d=this.getInternalLoader(e);switch(e.type){case c.MANIFEST:o=r?a.ErrorDetails.MANIFEST_LOAD_TIMEOUT:a.ErrorDetails.MANIFEST_LOAD_ERROR,l=!0;break;case c.LEVEL:o=r?a.ErrorDetails.LEVEL_LOAD_TIMEOUT:a.ErrorDetails.LEVEL_LOAD_ERROR,l=!1;break;case c.AUDIO_TRACK:o=r?a.ErrorDetails.AUDIO_TRACK_LOAD_TIMEOUT:a.ErrorDetails.AUDIO_TRACK_LOAD_ERROR,l=!1;break;default:l=!1}d&&(d.abort(),this.resetInternalLoader(e.type));var u={type:a.ErrorTypes.NETWORK_ERROR,details:o,fatal:l,url:d.url,loader:d,context:e,networkDetails:t};n&&(u.response=n),this.hls.trigger(i.default.ERROR,u)},r.prototype._handlePlaylistLoaded=function(e,t,n,o){var a=n.type,s=n.level,l=n.id,d=n.levelDetails;if(!d.targetduration)return void this._handleManifestParsingError(e,n,"invalid target duration",o);if(r.canHaveQualityLevels(n.type))this.hls.trigger(i.default.LEVEL_LOADED,{details:d,level:s||0,id:l||0,stats:t,networkDetails:o});else switch(a){case c.AUDIO_TRACK:this.hls.trigger(i.default.AUDIO_TRACK_LOADED,{details:d,id:l,stats:t,networkDetails:o});break;case c.SUBTITLE_TRACK:this.hls.trigger(i.default.SUBTITLE_TRACK_LOADED,{details:d,id:l,stats:t,networkDetails:o})}},r}(o.default);t.default=p}).call(this,r("./src/polyfills/number.js").Number)},"./src/observer.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./node_modules/eventemitter3/index.js"),o=function(e){function t(){return null!==e&&e.apply(this,arguments)||this}return n(t,e),t.prototype.trigger=function(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];this.emit.apply(this,[e,e].concat(t))},t}(i.EventEmitter);t.Observer=o},"./src/polyfills/number.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/get-self-scope.js"),i=n.getSelfScope(),o=i.Number;t.Number=o,o.isFinite=o.isFinite||function(e){return"number"==typeof e&&isFinite(e)}},"./src/remux/aac-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.getSilentFrame=function(e,t){switch(e){case"mp4a.40.2":if(1===t)return new Uint8Array([0,200,0,128,35,128]);if(2===t)return new Uint8Array([33,0,73,144,2,25,0,35,128]);if(3===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,142]);if(4===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,128,44,128,8,2,56]);if(5===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,56]);if(6===t)return new Uint8Array([0,200,0,128,32,132,1,38,64,8,100,0,130,48,4,153,0,33,144,2,0,178,0,32,8,224]);break;default:if(1===t)return new Uint8Array([1,64,34,128,163,78,230,128,186,8,0,0,0,28,6,241,193,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(2===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94]);if(3===t)return new Uint8Array([1,64,34,128,163,94,230,128,186,8,0,0,0,0,149,0,6,241,161,10,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,90,94])}return null},e}();t.default=n},"./src/remux/mp4-generator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=Math.pow(2,32)-1,i=function(){function e(){}return e.init=function(){e.types={avc1:[],avcC:[],btrt:[],dinf:[],dref:[],esds:[],ftyp:[],hdlr:[],mdat:[],mdhd:[],mdia:[],mfhd:[],minf:[],moof:[],moov:[],mp4a:[],".mp3":[],mvex:[],mvhd:[],pasp:[],sdtp:[],stbl:[],stco:[],stsc:[],stsd:[],stsz:[],stts:[],tfdt:[],tfhd:[],traf:[],trak:[],trun:[],trex:[],tkhd:[],vmhd:[],smhd:[]};var t;for(t in e.types)e.types.hasOwnProperty(t)&&(e.types[t]=[t.charCodeAt(0),t.charCodeAt(1),t.charCodeAt(2),t.charCodeAt(3)]);var r=new Uint8Array([0,0,0,0,0,0,0,0,118,105,100,101,0,0,0,0,0,0,0,0,0,0,0,0,86,105,100,101,111,72,97,110,100,108,101,114,0]),n=new Uint8Array([0,0,0,0,0,0,0,0,115,111,117,110,0,0,0,0,0,0,0,0,0,0,0,0,83,111,117,110,100,72,97,110,100,108,101,114,0]);e.HDLR_TYPES={video:r,audio:n};var i=new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,12,117,114,108,32,0,0,0,1]),o=new Uint8Array([0,0,0,0,0,0,0,0]);e.STTS=e.STSC=e.STCO=o,e.STSZ=new Uint8Array([0,0,0,0,0,0,0,0,0,0,0,0]),e.VMHD=new Uint8Array([0,0,0,1,0,0,0,0,0,0,0,0]),e.SMHD=new Uint8Array([0,0,0,0,0,0,0,0]),e.STSD=new Uint8Array([0,0,0,0,0,0,0,1]);var a=new Uint8Array([105,115,111,109]),s=new Uint8Array([97,118,99,49]),l=new Uint8Array([0,0,0,1]);e.FTYP=e.box(e.types.ftyp,a,l,a,s),e.DINF=e.box(e.types.dinf,e.box(e.types.dref,i))},e.box=function(e){for(var t,r=Array.prototype.slice.call(arguments,1),n=8,i=r.length,o=i;i--;)n+=r[i].byteLength;for(t=new Uint8Array(n),t[0]=n>>24&255,t[1]=n>>16&255,t[2]=n>>8&255,t[3]=255&n,t.set(e,4),i=0,n=8;i<o;i++)t.set(r[i],n),n+=r[i].byteLength;return t},e.hdlr=function(t){return e.box(e.types.hdlr,e.HDLR_TYPES[t])},e.mdat=function(t){return e.box(e.types.mdat,t)},e.mdhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1));return e.box(e.types.mdhd,new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,85,196,0,0]))},e.mdia=function(t){return e.box(e.types.mdia,e.mdhd(t.timescale,t.duration),e.hdlr(t.type),e.minf(t))},e.mfhd=function(t){return e.box(e.types.mfhd,new Uint8Array([0,0,0,0,t>>24,t>>16&255,t>>8&255,255&t]))},e.minf=function(t){return"audio"===t.type?e.box(e.types.minf,e.box(e.types.smhd,e.SMHD),e.DINF,e.stbl(t)):e.box(e.types.minf,e.box(e.types.vmhd,e.VMHD),e.DINF,e.stbl(t))},e.moof=function(t,r,n){return e.box(e.types.moof,e.mfhd(t),e.traf(n,r))},e.moov=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trak(t[r]);return e.box.apply(null,[e.types.moov,e.mvhd(t[0].timescale,t[0].duration)].concat(n).concat(e.mvex(t)))},e.mvex=function(t){for(var r=t.length,n=[];r--;)n[r]=e.trex(t[r]);return e.box.apply(null,[e.types.mvex].concat(n))},e.mvhd=function(t,r){r*=t;var i=Math.floor(r/(n+1)),o=Math.floor(r%(n+1)),a=new Uint8Array([1,0,0,0,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,t>>24&255,t>>16&255,t>>8&255,255&t,i>>24,i>>16&255,i>>8&255,255&i,o>>24,o>>16&255,o>>8&255,255&o,0,1,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,255,255,255,255]);return e.box(e.types.mvhd,a)},e.sdtp=function(t){var r,n,i=t.samples||[],o=new Uint8Array(4+i.length);for(n=0;n<i.length;n++)r=i[n].flags,o[n+4]=r.dependsOn<<4|r.isDependedOn<<2|r.hasRedundancy;return e.box(e.types.sdtp,o)},e.stbl=function(t){return e.box(e.types.stbl,e.stsd(t),e.box(e.types.stts,e.STTS),e.box(e.types.stsc,e.STSC),e.box(e.types.stsz,e.STSZ),e.box(e.types.stco,e.STCO))},e.avc1=function(t){var r,n,i,o=[],a=[];for(r=0;r<t.sps.length;r++)n=t.sps[r],i=n.byteLength,o.push(i>>>8&255),o.push(255&i),o=o.concat(Array.prototype.slice.call(n));for(r=0;r<t.pps.length;r++)n=t.pps[r],i=n.byteLength,a.push(i>>>8&255),a.push(255&i),a=a.concat(Array.prototype.slice.call(n));var s=e.box(e.types.avcC,new Uint8Array([1,o[3],o[4],o[5],255,224|t.sps.length].concat(o).concat([t.pps.length]).concat(a))),l=t.width,d=t.height,u=t.pixelRatio[0],c=t.pixelRatio[1];return e.box(e.types.avc1,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,l>>8&255,255&l,d>>8&255,255&d,0,72,0,0,0,72,0,0,0,0,0,0,0,1,18,100,97,105,108,121,109,111,116,105,111,110,47,104,108,115,46,106,115,0,0,0,0,0,0,0,0,0,0,0,0,0,0,24,17,17]),s,e.box(e.types.btrt,new Uint8Array([0,28,156,128,0,45,198,192,0,45,198,192])),e.box(e.types.pasp,new Uint8Array([u>>24,u>>16&255,u>>8&255,255&u,c>>24,c>>16&255,c>>8&255,255&c])))},e.esds=function(e){var t=e.config.length;return new Uint8Array([0,0,0,0,3,23+t,0,1,0,4,15+t,64,21,0,0,0,0,0,0,0,0,0,0,0,5].concat([t]).concat(e.config).concat([6,1,2]))},e.mp4a=function(t){var r=t.samplerate;return e.box(e.types.mp4a,new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]),e.box(e.types.esds,e.esds(t)))},e.mp3=function(t){var r=t.samplerate;return e.box(e.types[".mp3"],new Uint8Array([0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,t.channelCount,0,16,0,0,0,0,r>>8&255,255&r,0,0]))},e.stsd=function(t){return"audio"===t.type?t.isAAC||"mp3"!==t.codec?e.box(e.types.stsd,e.STSD,e.mp4a(t)):e.box(e.types.stsd,e.STSD,e.mp3(t)):e.box(e.types.stsd,e.STSD,e.avc1(t))},e.tkhd=function(t){var r=t.id,i=t.duration*t.timescale,o=t.width,a=t.height,s=Math.floor(i/(n+1)),l=Math.floor(i%(n+1));return e.box(e.types.tkhd,new Uint8Array([1,0,0,7,0,0,0,0,0,0,0,2,0,0,0,0,0,0,0,3,r>>24&255,r>>16&255,r>>8&255,255&r,0,0,0,0,s>>24,s>>16&255,s>>8&255,255&s,l>>24,l>>16&255,l>>8&255,255&l,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,0,1,0,0,0,0,0,0,0,0,0,0,0,0,0,0,64,0,0,0,o>>8&255,255&o,0,0,a>>8&255,255&a,0,0]))},e.traf=function(t,r){var i=e.sdtp(t),o=t.id,a=Math.floor(r/(n+1)),s=Math.floor(r%(n+1));return e.box(e.types.traf,e.box(e.types.tfhd,new Uint8Array([0,0,0,0,o>>24,o>>16&255,o>>8&255,255&o])),e.box(e.types.tfdt,new Uint8Array([1,0,0,0,a>>24,a>>16&255,a>>8&255,255&a,s>>24,s>>16&255,s>>8&255,255&s])),e.trun(t,i.length+16+20+8+16+8+8),i)},e.trak=function(t){return t.duration=t.duration||4294967295,e.box(e.types.trak,e.tkhd(t),e.mdia(t))},e.trex=function(t){var r=t.id;return e.box(e.types.trex,new Uint8Array([0,0,0,0,r>>24,r>>16&255,r>>8&255,255&r,0,0,0,1,0,0,0,0,0,0,0,0,0,1,0,1]))},e.trun=function(t,r){var n,i,o,a,s,l,d=t.samples||[],u=d.length,c=12+16*u,f=new Uint8Array(c);for(r+=8+c,f.set([0,0,15,1,u>>>24&255,u>>>16&255,u>>>8&255,255&u,r>>>24&255,r>>>16&255,r>>>8&255,255&r],0),n=0;n<u;n++)i=d[n],o=i.duration,a=i.size,s=i.flags,l=i.cts,f.set([o>>>24&255,o>>>16&255,o>>>8&255,255&o,a>>>24&255,a>>>16&255,a>>>8&255,255&a,s.isLeading<<2|s.dependsOn,s.isDependedOn<<6|s.hasRedundancy<<4|s.paddingValue<<1|s.isNonSync,61440&s.degradPrio,15&s.degradPrio,l>>>24&255,l>>>16&255,l>>>8&255,255&l],12+16*n);return e.box(e.types.trun,f)},e.initSegment=function(t){e.types||e.init();var r,n=e.moov(t);return r=new Uint8Array(e.FTYP.byteLength+n.byteLength),r.set(e.FTYP),r.set(n,e.FTYP.byteLength),r},e}();t.default=i},"./src/remux/mp4-remuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/remux/aac-helper.js"),i=r("./src/remux/mp4-generator.js"),o=r("./src/events.js"),a=r("./src/errors.js"),s=r("./src/utils/logger.js"),l=function(){function e(e,t,r,n){this.observer=e,this.config=t,this.typeSupported=r;var i=navigator.userAgent;this.isSafari=n&&n.indexOf("Apple")>-1&&i&&!i.match("CriOS"),this.ISGenerated=!1}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(e){this._initPTS=this._initDTS=e},e.prototype.resetInitSegment=function(){this.ISGenerated=!1},e.prototype.remux=function(e,t,r,n,i,a,l){if(this.ISGenerated||this.generateIS(e,t,i),this.ISGenerated){var d=e.samples.length,u=t.samples.length,c=i,f=i;if(d&&u){var p=(e.samples[0].pts-t.samples[0].pts)/t.inputTimeScale;c+=Math.max(0,p),f+=Math.max(0,-p)}if(d){e.timescale||(s.logger.warn("regenerate InitSegment as audio detected"),this.generateIS(e,t,i));var h=this.remuxAudio(e,c,a,l);if(u){var m=void 0;h&&(m=h.endPTS-h.startPTS),t.timescale||(s.logger.warn("regenerate InitSegment as video detected"),this.generateIS(e,t,i)),this.remuxVideo(t,f,a,m,l)}}else if(u){var v=this.remuxVideo(t,f,a,0,l);v&&e.codec&&this.remuxEmptyAudio(e,c,a,v)}}r.samples.length&&this.remuxID3(r,i),n.samples.length&&this.remuxText(n,i),this.observer.trigger(o.default.FRAG_PARSED)},e.prototype.generateIS=function(e,t,r){var n,l,d=this.observer,u=e.samples,c=t.samples,f=this.typeSupported,p="audio/mp4",h={},m={tracks:h},v=void 0===this._initPTS;if(v&&(n=l=1/0),e.config&&u.length&&(e.timescale=e.samplerate,s.logger.log("audio sampling rate : "+e.samplerate),e.isAAC||(f.mpeg?(p="audio/mpeg",e.codec=""):f.mp3&&(e.codec="mp3")),h.audio={container:p,codec:e.codec,initSegment:!e.isAAC&&f.mpeg?new Uint8Array:i.default.initSegment([e]),metadata:{channelCount:e.channelCount}},v&&(n=l=u[0].pts-e.inputTimeScale*r)),t.sps&&t.pps&&c.length){var g=t.inputTimeScale;t.timescale=g,h.video={container:"video/mp4",codec:t.codec,initSegment:i.default.initSegment([t]),metadata:{width:t.width,height:t.height}},v&&(n=Math.min(n,c[0].pts-g*r),l=Math.min(l,c[0].dts-g*r),this.observer.trigger(o.default.INIT_PTS_FOUND,{initPTS:n}))}Object.keys(h).length?(d.trigger(o.default.FRAG_PARSING_INIT_SEGMENT,m),this.ISGenerated=!0,v&&(this._initPTS=n,this._initDTS=l)):d.trigger(o.default.ERROR,{type:a.ErrorTypes.MEDIA_ERROR,details:a.ErrorDetails.FRAG_PARSING_ERROR,fatal:!1,reason:"no audio/video samples found"})},e.prototype.remuxVideo=function(e,t,r,n,l){var d,u,c,f,p,h,m,v=8,g=e.timescale,y=e.samples,E=[],b=y.length,w=this._PTSNormalize,_=this._initPTS,T=this.nextAvcDts,A=this.isSafari;if(0!==b){A&&(r|=y.length&&T&&(l&&Math.abs(t-T/g)<.1||Math.abs(y[0].pts-T-_)<g/5)),r||(T=t*g),y.forEach(function(e){e.pts=w(e.pts-_,T),e.dts=w(e.dts-_,T)}),y.sort(function(e,t){var r=e.dts-t.dts,n=e.pts-t.pts;return r||n||e.id-t.id});var S=y.reduce(function(e,t){return Math.max(Math.min(e,t.pts-t.dts),-18e3)},0);if(S<0){s.logger.warn("PTS < DTS detected in video samples, shifting DTS by "+Math.round(S/90)+" ms to overcome this issue");for(var L=0;L<y.length;L++)y[L].dts+=S}var k=y[0];p=Math.max(k.dts,0),f=Math.max(k.pts,0);var D=Math.round((p-T)/90);r&&D&&(D>1?s.logger.log("AVC:"+D+" ms hole between fragments detected,filling it"):D<-1&&s.logger.log("AVC:"+-D+" ms overlapping between fragments detected"),p=T,y[0].dts=p,f=Math.max(f-D,T),y[0].pts=f,s.logger.log("Video/PTS/DTS adjusted: "+Math.round(f/90)+"/"+Math.round(p/90)+",delta:"+D+" ms")),k=y[y.length-1],m=Math.max(k.dts,0),h=Math.max(k.pts,0,m),A&&(d=Math.round((m-p)/(y.length-1)));for(var C=0,R=0,L=0;L<b;L++){for(var x=y[L],O=x.units,I=O.length,M=0,P=0;P<I;P++)M+=O[P].data.length;R+=M,C+=I,x.length=M,x.dts=A?p+L*d:Math.max(x.dts,p),x.pts=Math.max(x.pts,x.dts)}var N=R+4*C+8;try{u=new Uint8Array(N)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:N,reason:"fail allocating video mdat "+N})}var B=new DataView(u.buffer);B.setUint32(0,N),u.set(i.default.types.mdat,4);for(var L=0;L<b;L++){for(var F=y[L],j=F.units,U=0,V=void 0,P=0,I=j.length;P<I;P++){var G=j[P],q=G.data,H=G.data.byteLength;B.setUint32(v,H),v+=4,u.set(q,v),v+=H,U+=4+H}if(A)V=Math.max(0,d*Math.round((F.pts-F.dts)/d));else{if(L<b-1)d=y[L+1].dts-F.dts;else{var K=this.config,W=F.dts-y[L>0?L-1:L].dts;if(K.stretchShortVideoTrack){var z=K.maxBufferHole,Y=Math.floor(z*g),X=(n?f+n*g:this.nextAudioPts)-F.pts;X>Y?(d=X-W,d<0&&(d=W),s.logger.log("It is approximately "+X/90+" ms to the next segment; using duration "+d/90+" ms for the last video frame.")):d=W}else d=W}V=Math.round(F.pts-F.dts)}E.push({size:U,duration:d,cts:V,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:F.key?2:1,isNonSync:F.key?0:1}})}this.nextAvcDts=m+d;var Q=e.dropped;if(e.len=0,e.nbNalu=0,e.dropped=0,E.length&&navigator.userAgent.toLowerCase().indexOf("chrome")>-1){var J=E[0].flags;J.dependsOn=2,J.isNonSync=0}e.samples=E,c=i.default.moof(e.sequenceNumber++,p,e),e.samples=[];var Z={data1:c,data2:u,startPTS:f/g,endPTS:(h+d)/g,startDTS:p/g,endDTS:this.nextAvcDts/g,type:"video",hasAudio:!1,hasVideo:!0,nb:E.length,dropped:Q};return this.observer.trigger(o.default.FRAG_PARSING_DATA,Z),Z}},e.prototype.remuxAudio=function(e,t,r,l){var d,u,c,f,p,h,m,v=e.inputTimeScale,g=e.timescale,y=v/g,E=e.isAAC?1024:1152,b=E*y,w=this._PTSNormalize,_=this._initPTS,T=!e.isAAC&&this.typeSupported.mpeg,A=e.samples,S=[],L=this.nextAudioPts;if(r|=A.length&&L&&(l&&Math.abs(t-L/v)<.1||Math.abs(A[0].pts-L-_)<20*b),A.forEach(function(e){e.pts=e.dts=w(e.pts-_,t*v)}),A=A.filter(function(e){return e.pts>=0}),0!==A.length){if(r||(L=l?t*v:A[0].pts),e.isAAC)for(var k=this.config.maxAudioFramesDrift,D=0,C=L;D<A.length;){var R,x=A[D],O=x.pts;R=O-C;var I=Math.abs(1e3*R/v);if(R<=-k*b)s.logger.warn("Dropping 1 audio frame @ "+(C/v).toFixed(3)+"s due to "+Math.round(I)+" ms overlap."),A.splice(D,1),e.len-=x.unit.length;else if(R>=k*b&&I<1e4&&C){var M=Math.round(R/b);s.logger.warn("Injecting "+M+" audio frame @ "+(C/v).toFixed(3)+"s due to "+Math.round(1e3*R/v)+" ms gap.");for(var P=0;P<M;P++){var N=Math.max(C,0);c=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),c||(s.logger.log("Unable to get silent frame for given audio codec; duplicating last frame instead."),c=x.unit.subarray()),A.splice(D,0,{unit:c,pts:N,dts:N}),e.len+=c.length,C+=b,D++}x.pts=x.dts=C,C+=b,D++}else Math.abs(R),x.pts=x.dts=C,C+=b,D++}for(var P=0,B=A.length;P<B;P++){var F=A[P],j=F.unit,O=F.pts;if(void 0!==m)u.duration=Math.round((O-m)/y);else{var U=Math.round(1e3*(O-L)/v),V=0;if(r&&e.isAAC&&U){if(U>0&&U<1e4)V=Math.round((O-L)/b),s.logger.log(U+" ms hole between AAC samples detected,filling it"),V>0&&(c=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),c||(c=j.subarray()),e.len+=V*c.length);else if(U<-12){s.logger.log("drop overlapping AAC sample, expected/parsed/delta:"+(L/v).toFixed(3)+"s/"+(O/v).toFixed(3)+"s/"+-U+"ms"),e.len-=j.byteLength;continue}O=L}if(h=O,!(e.len>0))return;var G=T?e.len:e.len+8;d=T?0:8;try{f=new Uint8Array(G)}catch(e){return void this.observer.trigger(o.default.ERROR,{type:a.ErrorTypes.MUX_ERROR,details:a.ErrorDetails.REMUX_ALLOC_ERROR,fatal:!1,bytes:G,reason:"fail allocating audio mdat "+G})}if(!T){new DataView(f.buffer).setUint32(0,G),f.set(i.default.types.mdat,4)}for(var D=0;D<V;D++)c=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount),c||(s.logger.log("Unable to get silent frame for given audio codec; duplicating this frame instead."),c=j.subarray()),f.set(c,d),d+=c.byteLength,u={size:c.byteLength,cts:0,duration:1024,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(u)}f.set(j,d);var q=j.byteLength;d+=q,u={size:q,cts:0,duration:0,flags:{isLeading:0,isDependedOn:0,hasRedundancy:0,degradPrio:0,dependsOn:1}},S.push(u),m=O}var H=0,K=S.length;if(K>=2&&(H=S[K-2].duration,u.duration=H),K){this.nextAudioPts=L=m+y*H,e.len=0,e.samples=S,p=T?new Uint8Array:i.default.moof(e.sequenceNumber++,h/y,e),e.samples=[];var W=h/v,z=L/v,Y={data1:p,data2:f,startPTS:W,endPTS:z,startDTS:W,endDTS:z,type:"audio",hasAudio:!0,hasVideo:!1,nb:K};return this.observer.trigger(o.default.FRAG_PARSING_DATA,Y),Y}return null}},e.prototype.remuxEmptyAudio=function(e,t,r,i){var o=e.inputTimeScale,a=e.samplerate?e.samplerate:o,l=o/a,d=this.nextAudioPts,u=(void 0!==d?d:i.startDTS*o)+this._initDTS,c=i.endDTS*o+this._initDTS,f=1024*l,p=Math.ceil((c-u)/f),h=n.default.getSilentFrame(e.manifestCodec||e.codec,e.channelCount);if(s.logger.warn("remux empty Audio"),!h)return void s.logger.trace("Unable to remuxEmptyAudio since we were unable to get a silent frame for given audio codec!");for(var m=[],v=0;v<p;v++){var g=u+v*f;m.push({unit:h,pts:g,dts:g}),e.len+=h.length}e.samples=m,this.remuxAudio(e,t,r)},e.prototype.remuxID3=function(e){var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS,a=this._initDTS;if(r){for(var s=0;s<r;s++)t=e.samples[s],t.pts=(t.pts-i)/n,t.dts=(t.dts-a)/n;this.observer.trigger(o.default.FRAG_PARSING_METADATA,{samples:e.samples})}e.samples=[]},e.prototype.remuxText=function(e){e.samples.sort(function(e,t){return e.pts-t.pts});var t,r=e.samples.length,n=e.inputTimeScale,i=this._initPTS;if(r){for(var a=0;a<r;a++)t=e.samples[a],t.pts=(t.pts-i)/n;this.observer.trigger(o.default.FRAG_PARSING_USERDATA,{samples:e.samples})}e.samples=[]},e.prototype._PTSNormalize=function(e,t){var r;if(void 0===t)return e;for(r=t<e?-8589934592:8589934592;Math.abs(e-t)>4294967296;)e+=r;return e},e}();t.default=l},"./src/remux/passthrough-remuxer.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/events.js"),i=function(){function e(e){this.observer=e}return e.prototype.destroy=function(){},e.prototype.resetTimeStamp=function(){},e.prototype.resetInitSegment=function(){},e.prototype.remux=function(e,t,r,i,o,a,s,l){var d=this.observer,u="";e&&(u+="audio"),t&&(u+="video"),d.trigger(n.default.FRAG_PARSING_DATA,{data1:l,startPTS:o,startDTS:o,type:u,hasAudio:!!e,hasVideo:!!t,nb:1,dropped:0}),d.trigger(n.default.FRAG_PARSED)},e}();t.default=i},"./src/task-loop.js":function(e,t,r){"use strict";var n=this&&this.__extends||function(){var e=Object.setPrototypeOf||{__proto__:[]}instanceof Array&&function(e,t){e.__proto__=t}||function(e,t){for(var r in t)t.hasOwnProperty(r)&&(e[r]=t[r])};return function(t,r){function n(){this.constructor=t}e(t,r),t.prototype=null===r?Object.create(r):(n.prototype=r.prototype,new n)}}();Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/event-handler.js"),o=function(e){function t(t){for(var r=[],n=1;n<arguments.length;n++)r[n-1]=arguments[n];var i=e.apply(this,[t].concat(r))||this;return i._tickInterval=null,i._tickTimer=null,i._tickCallCount=0,i._boundTick=i.tick.bind(i),i}return n(t,e),t.prototype.onHandlerDestroying=function(){this.clearNextTick(),this.clearInterval()},t.prototype.hasInterval=function(){return!!this._tickInterval},t.prototype.hasNextTick=function(){return!!this._tickTimer},t.prototype.setInterval=function(e){return!this._tickInterval&&(this._tickInterval=setInterval(this._boundTick,e),!0)},t.prototype.clearInterval=function(){return!!this._tickInterval&&(clearInterval(this._tickInterval),this._tickInterval=null,!0)},t.prototype.clearNextTick=function(){return!!this._tickTimer&&(clearTimeout(this._tickTimer),this._tickTimer=null,!0)},t.prototype.tick=function(){1===++this._tickCallCount&&(this.doTick(),this._tickCallCount>1&&(this.clearNextTick(),this._tickTimer=setTimeout(this._boundTick,0)),this._tickCallCount=0)},t.prototype.doTick=function(){},t}(i.default);t.default=o},"./src/utils/attr-list.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var r=/^(\d+)x(\d+)$/,n=/\s*(.+?)\s*=((?:\".*?\")|.*?)(?:,|$)/g,i=function(){function t(e){"string"==typeof e&&(e=t.parseAttrList(e));for(var r in e)e.hasOwnProperty(r)&&(this[r]=e[r])}return t.prototype.decimalInteger=function(t){var r=parseInt(this[t],10);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.hexadecimalInteger=function(e){if(this[e]){var t=(this[e]||"0x").slice(2);t=(1&t.length?"0":"")+t;for(var r=new Uint8Array(t.length/2),n=0;n<t.length/2;n++)r[n]=parseInt(t.slice(2*n,2*n+2),16);return r}return null},t.prototype.hexadecimalIntegerAsNumber=function(t){var r=parseInt(this[t],16);return r>e.MAX_SAFE_INTEGER?1/0:r},t.prototype.decimalFloatingPoint=function(e){return parseFloat(this[e])},t.prototype.enumeratedString=function(e){return this[e]},t.prototype.decimalResolution=function(e){var t=r.exec(this[e]);if(null!==t)return{width:parseInt(t[1],10),height:parseInt(t[2],10)}},t.parseAttrList=function(e){var t,r={};for(n.lastIndex=0;null!==(t=n.exec(e));){var i=t[2];0===i.indexOf('"')&&i.lastIndexOf('"')===i.length-1&&(i=i.slice(1,-1)),r[t[1]]=i}return r},t}();t.default=i}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/binary-search.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={search:function(e,t){for(var r=0,n=e.length-1,i=null,o=null;r<=n;){i=(r+n)/2|0,o=e[i];var a=t(o);if(a>0)r=i+1;else{if(!(a<0))return o;n=i-1}}return null}};t.default=n},"./src/utils/buffer-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(){}return e.isBuffered=function(e,t){try{if(e)for(var r=e.buffered,n=0;n<r.length;n++)if(t>=r.start(n)&&t<=r.end(n))return!0}catch(e){}return!1},e.bufferInfo=function(e,t,r){try{if(e){var n=e.buffered,i=[],o=void 0;for(o=0;o<n.length;o++)i.push({start:n.start(o),end:n.end(o)});return this.bufferedInfo(i,t,r)}}catch(e){}return{len:0,start:t,end:t,nextStart:void 0}},e.bufferedInfo=function(e,t,r){var n,i,o,a,s,l=[];for(e.sort(function(e,t){var r=e.start-t.start;return r||t.end-e.end}),s=0;s<e.length;s++){var d=l.length;if(d){var u=l[d-1].end;e[s].start-u<r?e[s].end>u&&(l[d-1].end=e[s].end):l.push(e[s])}else l.push(e[s])}for(s=0,n=0,i=o=t;s<l.length;s++){var c=l[s].start,f=l[s].end;if(t+r>=c&&t<f)i=c,o=f,n=o-t;else if(t+r<c){a=c;break}}return{len:n,start:i,end:o,nextStart:a}},e}();t.BufferHelper=n},"./src/utils/cea-608-parser.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={42:225,92:233,94:237,95:243,96:250,123:231,124:247,125:209,126:241,127:9608,128:174,129:176,130:189,131:191,132:8482,133:162,134:163,135:9834,136:224,137:32,138:232,139:226,140:234,141:238,142:244,143:251,144:193,145:201,146:211,147:218,148:220,149:252,150:8216,151:161,152:42,153:8217,154:9473,155:169,156:8480,157:8226,158:8220,159:8221,160:192,161:194,162:199,163:200,164:202,165:203,166:235,167:206,168:207,169:239,170:212,171:217,172:249,173:219,174:171,175:187,176:195,177:227,178:205,179:204,180:236,181:210,182:242,183:213,184:245,185:123,186:125,187:92,188:94,189:95,190:124,191:8764,192:196,193:228,194:214,195:246,196:223,197:165,198:164,199:9475,200:197,201:229,202:216,203:248,204:9487,205:9491,206:9495,207:9499},i=function(e){var t=e;return n.hasOwnProperty(e)&&(t=n[e]),String.fromCharCode(t)},o=15,a=100,s={17:1,18:3,21:5,22:7,23:9,16:11,19:12,20:14},l={17:2,18:4,21:6,22:8,23:10,19:13,20:15},d={25:1,26:3,29:5,30:7,31:9,24:11,27:12,28:14},u={25:2,26:4,29:6,30:8,31:10,27:13,28:15},c=["white","green","blue","cyan","red","yellow","magenta","black","transparent"],f={verboseFilter:{DATA:3,DEBUG:3,INFO:2,WARNING:2,TEXT:1,ERROR:0},time:null,verboseLevel:0,setTime:function(e){this.time=e},log:function(e,t){this.verboseFilter[e];this.verboseLevel}},p=function(e){for(var t=[],r=0;r<e.length;r++)t.push(e[r].toString(16));return t},h=function(){function e(e,t,r,n,i){this.foreground=e||"white",this.underline=t||!1,this.italics=r||!1,this.background=n||"black",this.flash=i||!1}return e.prototype.reset=function(){this.foreground="white",this.underline=!1,this.italics=!1,this.background="black",this.flash=!1},e.prototype.setStyles=function(e){for(var t=["foreground","underline","italics","background","flash"],r=0;r<t.length;r++){var n=t[r];e.hasOwnProperty(n)&&(this[n]=e[n])}},e.prototype.isDefault=function(){return"white"===this.foreground&&!this.underline&&!this.italics&&"black"===this.background&&!this.flash},e.prototype.equals=function(e){return this.foreground===e.foreground&&this.underline===e.underline&&this.italics===e.italics&&this.background===e.background&&this.flash===e.flash},e.prototype.copy=function(e){this.foreground=e.foreground,this.underline=e.underline,this.italics=e.italics,this.background=e.background,this.flash=e.flash},e.prototype.toString=function(){return"color="+this.foreground+", underline="+this.underline+", italics="+this.italics+", background="+this.background+", flash="+this.flash},e}(),m=function(){function e(e,t,r,n,i,o){this.uchar=e||" ",this.penState=new h(t,r,n,i,o)}return e.prototype.reset=function(){this.uchar=" ",this.penState.reset()},e.prototype.setChar=function(e,t){this.uchar=e,this.penState.copy(t)},e.prototype.setPenState=function(e){this.penState.copy(e)},e.prototype.equals=function(e){return this.uchar===e.uchar&&this.penState.equals(e.penState)},e.prototype.copy=function(e){this.uchar=e.uchar,this.penState.copy(e.penState)},e.prototype.isEmpty=function(){return" "===this.uchar&&this.penState.isDefault()},e}(),v=function(){function e(){this.chars=[];for(var e=0;e<a;e++)this.chars.push(new m);this.pos=0,this.currPenState=new h}return e.prototype.equals=function(e){for(var t=!0,r=0;r<a;r++)if(!this.chars[r].equals(e.chars[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<a;t++)this.chars[t].copy(e.chars[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<a;t++)if(!this.chars[t].isEmpty()){e=!1;break}return e},e.prototype.setCursor=function(e){this.pos!==e&&(this.pos=e),this.pos<0?(f.log("ERROR","Negative cursor position "+this.pos),this.pos=0):this.pos>a&&(f.log("ERROR","Too large cursor position "+this.pos),this.pos=a)},e.prototype.moveCursor=function(e){var t=this.pos+e;if(e>1)for(var r=this.pos+1;r<t+1;r++)this.chars[r].setPenState(this.currPenState);this.setCursor(t)},e.prototype.backSpace=function(){this.moveCursor(-1),this.chars[this.pos].setChar(" ",this.currPenState)},e.prototype.insertChar=function(e){e>=144&&this.backSpace();var t=i(e);if(this.pos>=a)return void f.log("ERROR","Cannot insert "+e.toString(16)+" ("+t+") at position "+this.pos+". Skipping it!");this.chars[this.pos].setChar(t,this.currPenState),this.moveCursor(1)},e.prototype.clearFromPos=function(e){var t;for(t=e;t<a;t++)this.chars[t].reset()},e.prototype.clear=function(){this.clearFromPos(0),this.pos=0,this.currPenState.reset()},e.prototype.clearToEndOfRow=function(){this.clearFromPos(this.pos)},e.prototype.getTextString=function(){for(var e=[],t=!0,r=0;r<a;r++){var n=this.chars[r].uchar;" "!==n&&(t=!1),e.push(n)}return t?"":e.join("")},e.prototype.setPenStyles=function(e){this.currPenState.setStyles(e),this.chars[this.pos].setPenState(this.currPenState)},e}(),g=function(){function e(){this.rows=[];for(var e=0;e<o;e++)this.rows.push(new v);this.currRow=o-1,this.nrRollUpRows=null,this.reset()}return e.prototype.reset=function(){for(var e=0;e<o;e++)this.rows[e].clear();this.currRow=o-1},e.prototype.equals=function(e){for(var t=!0,r=0;r<o;r++)if(!this.rows[r].equals(e.rows[r])){t=!1;break}return t},e.prototype.copy=function(e){for(var t=0;t<o;t++)this.rows[t].copy(e.rows[t])},e.prototype.isEmpty=function(){for(var e=!0,t=0;t<o;t++)if(!this.rows[t].isEmpty()){e=!1;break}return e},e.prototype.backSpace=function(){this.rows[this.currRow].backSpace()},e.prototype.clearToEndOfRow=function(){this.rows[this.currRow].clearToEndOfRow()},e.prototype.insertChar=function(e){this.rows[this.currRow].insertChar(e)},e.prototype.setPen=function(e){this.rows[this.currRow].setPenStyles(e)},e.prototype.moveCursor=function(e){this.rows[this.currRow].moveCursor(e)},e.prototype.setCursor=function(e){f.log("INFO","setCursor: "+e),this.rows[this.currRow].setCursor(e)},e.prototype.setPAC=function(e){f.log("INFO","pacData = "+JSON.stringify(e));var t=e.row-1;if(this.nrRollUpRows&&t<this.nrRollUpRows-1&&(t=this.nrRollUpRows-1),this.nrRollUpRows&&this.currRow!==t){for(var r=0;r<o;r++)this.rows[r].clear();var n=this.currRow+1-this.nrRollUpRows,i=this.lastOutputScreen;if(i){var a=i.rows[n].cueStartTime;if(a&&a<f.time)for(var r=0;r<this.nrRollUpRows;r++)this.rows[t-this.nrRollUpRows+r+1].copy(i.rows[n+r])}}this.currRow=t;var s=this.rows[this.currRow];if(null!==e.indent){var l=e.indent,d=Math.max(l-1,0);s.setCursor(e.indent),e.color=s.chars[d].penState.foreground}var u={foreground:e.color,underline:e.underline,italics:e.italics,background:"black",flash:!1};this.setPen(u)},e.prototype.setBkgData=function(e){f.log("INFO","bkgData = "+JSON.stringify(e)),this.backSpace(),this.setPen(e),this.insertChar(32)},e.prototype.setRollUpRows=function(e){this.nrRollUpRows=e},e.prototype.rollUp=function(){if(null===this.nrRollUpRows)return void f.log("DEBUG","roll_up but nrRollUpRows not set yet");f.log("TEXT",this.getDisplayText());var e=this.currRow+1-this.nrRollUpRows,t=this.rows.splice(e,1)[0];t.clear(),this.rows.splice(this.currRow,0,t),f.log("INFO","Rolling up")},e.prototype.getDisplayText=function(e){e=e||!1;for(var t=[],r="",n=-1,i=0;i<o;i++){var a=this.rows[i].getTextString();a&&(n=i+1,e?t.push("Row "+n+": '"+a+"'"):t.push(a.trim()))}return t.length>0&&(r=e?"["+t.join(" | ")+"]":t.join("\n")),r},e.prototype.getTextAndFormat=function(){return this.rows},e}(),y=function(){function e(e,t){this.chNr=e,this.outputFilter=t,this.mode=null,this.verbose=0,this.displayedMemory=new g,this.nonDisplayedMemory=new g,this.lastOutputScreen=new g,this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null}return e.prototype.reset=function(){this.mode=null,this.displayedMemory.reset(),this.nonDisplayedMemory.reset(),this.lastOutputScreen.reset(),this.currRollUpRow=this.displayedMemory.rows[o-1],this.writeScreen=this.displayedMemory,this.mode=null,this.cueStartTime=null,this.lastCueEndTime=null},e.prototype.getHandler=function(){return this.outputFilter},e.prototype.setHandler=function(e){this.outputFilter=e},e.prototype.setPAC=function(e){this.writeScreen.setPAC(e)},e.prototype.setBkgData=function(e){this.writeScreen.setBkgData(e)},e.prototype.setMode=function(e){e!==this.mode&&(this.mode=e,f.log("INFO","MODE="+e),"MODE_POP-ON"===this.mode?this.writeScreen=this.nonDisplayedMemory:(this.writeScreen=this.displayedMemory,this.writeScreen.reset()),"MODE_ROLL-UP"!==this.mode&&(this.displayedMemory.nrRollUpRows=null,this.nonDisplayedMemory.nrRollUpRows=null),this.mode=e)},e.prototype.insertChars=function(e){for(var t=0;t<e.length;t++)this.writeScreen.insertChar(e[t]);var r=this.writeScreen===this.displayedMemory?"DISP":"NON_DISP";f.log("INFO",r+": "+this.writeScreen.getDisplayText(!0)),"MODE_PAINT-ON"!==this.mode&&"MODE_ROLL-UP"!==this.mode||(f.log("TEXT","DISPLAYED: "+this.displayedMemory.getDisplayText(!0)),this.outputDataUpdate())},e.prototype.ccRCL=function(){f.log("INFO","RCL - Resume Caption Loading"),this.setMode("MODE_POP-ON")},e.prototype.ccBS=function(){f.log("INFO","BS - BackSpace"),"MODE_TEXT"!==this.mode&&(this.writeScreen.backSpace(),this.writeScreen===this.displayedMemory&&this.outputDataUpdate())},e.prototype.ccAOF=function(){},e.prototype.ccAON=function(){},e.prototype.ccDER=function(){f.log("INFO","DER- Delete to End of Row"),this.writeScreen.clearToEndOfRow(),this.outputDataUpdate()},e.prototype.ccRU=function(e){f.log("INFO","RU("+e+") - Roll Up"),this.writeScreen=this.displayedMemory,this.setMode("MODE_ROLL-UP"),this.writeScreen.setRollUpRows(e)},e.prototype.ccFON=function(){f.log("INFO","FON - Flash On"),this.writeScreen.setPen({flash:!0})},e.prototype.ccRDC=function(){f.log("INFO","RDC - Resume Direct Captioning"),this.setMode("MODE_PAINT-ON")},e.prototype.ccTR=function(){f.log("INFO","TR"),this.setMode("MODE_TEXT")},e.prototype.ccRTD=function(){f.log("INFO","RTD"),this.setMode("MODE_TEXT")},e.prototype.ccEDM=function(){f.log("INFO","EDM - Erase Displayed Memory"),this.displayedMemory.reset(),this.outputDataUpdate(!0)},e.prototype.ccCR=function(){f.log("CR - Carriage Return"),this.writeScreen.rollUp(),this.outputDataUpdate(!0)},e.prototype.ccENM=function(){f.log("INFO","ENM - Erase Non-displayed Memory"),this.nonDisplayedMemory.reset()},e.prototype.ccEOC=function(){if(f.log("INFO","EOC - End Of Caption"),"MODE_POP-ON"===this.mode){var e=this.displayedMemory;this.displayedMemory=this.nonDisplayedMemory,this.nonDisplayedMemory=e,this.writeScreen=this.nonDisplayedMemory,f.log("TEXT","DISP: "+this.displayedMemory.getDisplayText())}this.outputDataUpdate(!0)},e.prototype.ccTO=function(e){f.log("INFO","TO("+e+") - Tab Offset"),this.writeScreen.moveCursor(e)},e.prototype.ccMIDROW=function(e){var t={flash:!1};if(t.underline=e%2==1,t.italics=e>=46,t.italics)t.foreground="white";else{var r=Math.floor(e/2)-16,n=["white","green","blue","cyan","red","yellow","magenta"];t.foreground=n[r]}f.log("INFO","MIDROW: "+JSON.stringify(t)),this.writeScreen.setPen(t)},e.prototype.outputDataUpdate=function(e){void 0===e&&(e=!1);var t=f.time;null!==t&&this.outputFilter&&(null!==this.cueStartTime||this.displayedMemory.isEmpty()?this.displayedMemory.equals(this.lastOutputScreen)||(this.outputFilter.newCue&&(this.outputFilter.newCue(this.cueStartTime,t,this.lastOutputScreen),!0===e&&this.outputFilter.dispatchCue&&this.outputFilter.dispatchCue()),this.cueStartTime=this.displayedMemory.isEmpty()?null:t):this.cueStartTime=t,this.lastOutputScreen.copy(this.displayedMemory))},e.prototype.cueSplitAtTime=function(e){this.outputFilter&&(this.displayedMemory.isEmpty()||(this.outputFilter.newCue&&this.outputFilter.newCue(this.cueStartTime,e,this.displayedMemory),this.cueStartTime=e))},e}(),E=function(){function e(e,t,r){this.field=e||1,this.outputs=[t,r],this.channels=[new y(1,t),new y(2,r)],this.currChNr=-1,this.lastCmdA=null,this.lastCmdB=null,this.bufferedData=[],this.startTime=null,this.lastTime=null,this.dataCounters={padding:0,char:0,cmd:0,other:0}}return e.prototype.getHandler=function(e){return this.channels[e].getHandler()},e.prototype.setHandler=function(e,t){this.channels[e].setHandler(t)},e.prototype.addData=function(e,t){var r,n,i,o=!1;this.lastTime=e,f.setTime(e);for(var a=0;a<t.length;a+=2)if(n=127&t[a],i=127&t[a+1],0!==n||0!==i){if(f.log("DATA","["+p([t[a],t[a+1]])+"] -> ("+p([n,i])+")"),r=this.parseCmd(n,i),r||(r=this.parseMidrow(n,i)),r||(r=this.parsePAC(n,i)),r||(r=this.parseBackgroundAttributes(n,i)),!r&&(o=this.parseChars(n,i)))if(this.currChNr&&this.currChNr>=0){var s=this.channels[this.currChNr-1];s.insertChars(o)}else f.log("WARNING","No channel found yet. TEXT-MODE?");r?this.dataCounters.cmd+=2:o?this.dataCounters.char+=2:(this.dataCounters.other+=2,f.log("WARNING","Couldn't parse cleaned data "+p([n,i])+" orig: "+p([t[a],t[a+1]])))}else this.dataCounters.padding+=2},e.prototype.parseCmd=function(e,t){var r=null,n=(20===e||28===e)&&t>=32&&t<=47,i=(23===e||31===e)&&t>=33&&t<=35;if(!n&&!i)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,f.log("DEBUG","Repeated command ("+p([e,t])+") is dropped"),!0;r=20===e||23===e?1:2;var o=this.channels[r-1];return 20===e||28===e?32===t?o.ccRCL():33===t?o.ccBS():34===t?o.ccAOF():35===t?o.ccAON():36===t?o.ccDER():37===t?o.ccRU(2):38===t?o.ccRU(3):39===t?o.ccRU(4):40===t?o.ccFON():41===t?o.ccRDC():42===t?o.ccTR():43===t?o.ccRTD():44===t?o.ccEDM():45===t?o.ccCR():46===t?o.ccENM():47===t&&o.ccEOC():o.ccTO(t-32),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.parseMidrow=function(e,t){var r=null;if((17===e||25===e)&&t>=32&&t<=47){if((r=17===e?1:2)!==this.currChNr)return f.log("ERROR","Mismatch channel in midrow parsing"),!1;return this.channels[r-1].ccMIDROW(t),f.log("DEBUG","MIDROW ("+p([e,t])+")"),!0}return!1},e.prototype.parsePAC=function(e,t){var r=null,n=null,i=(e>=17&&e<=23||e>=25&&e<=31)&&t>=64&&t<=127,o=(16===e||24===e)&&t>=64&&t<=95;if(!i&&!o)return!1;if(e===this.lastCmdA&&t===this.lastCmdB)return this.lastCmdA=null,this.lastCmdB=null,!0;r=e<=23?1:2,n=t>=64&&t<=95?1===r?s[e]:d[e]:1===r?l[e]:u[e];var a=this.interpretPAC(n,t);return this.channels[r-1].setPAC(a),this.lastCmdA=e,this.lastCmdB=t,this.currChNr=r,!0},e.prototype.interpretPAC=function(e,t){var r=t,n={color:null,italics:!1,indent:null,underline:!1,row:e};return r=t>95?t-96:t-64,n.underline=1==(1&r),r<=13?n.color=["white","green","blue","cyan","red","yellow","magenta","white"][Math.floor(r/2)]:r<=15?(n.italics=!0,n.color="white"):n.indent=4*Math.floor((r-16)/2),n},e.prototype.parseChars=function(e,t){var r=null,n=null,o=null;if(e>=25?(r=2,o=e-8):(r=1,o=e),o>=17&&o<=19){var a=t;a=17===o?t+80:18===o?t+112:t+144,f.log("INFO","Special char '"+i(a)+"' in channel "+r),n=[a]}else e>=32&&e<=127&&(n=0===t?[e]:[e,t]);if(n){var s=p(n);f.log("DEBUG","Char codes =  "+s.join(",")),this.lastCmdA=null,this.lastCmdB=null}return n},e.prototype.parseBackgroundAttributes=function(e,t){var r,n,i,o,a=(16===e||24===e)&&t>=32&&t<=47,s=(23===e||31===e)&&t>=45&&t<=47;return!(!a&&!s)&&(r={},16===e||24===e?(n=Math.floor((t-32)/2),r.background=c[n],t%2==1&&(r.background=r.background+"_semi")):45===t?r.background="transparent":(r.foreground="black",47===t&&(r.underline=!0)),i=e<24?1:2,o=this.channels[i-1],o.setBkgData(r),this.lastCmdA=null,this.lastCmdB=null,!0)},e.prototype.reset=function(){for(var e=0;e<this.channels.length;e++)this.channels[e]&&this.channels[e].reset();this.lastCmdA=null,this.lastCmdB=null},e.prototype.cueSplitAtTime=function(e){for(var t=0;t<this.channels.length;t++)this.channels[t]&&this.channels[t].cueSplitAtTime(e)},e}();t.default=E},"./src/utils/codecs.js":function(e,t,r){"use strict";function n(e,t){var r=o[t];return!!r&&!0===r[e.slice(0,4)]}function i(e,t){return window.MediaSource.isTypeSupported((t||"video")+'/mp4;codecs="'+e+'"')}Object.defineProperty(t,"__esModule",{value:!0});var o={audio:{a3ds:!0,"ac-3":!0,"ac-4":!0,alac:!0,alaw:!0,dra1:!0,"dts+":!0,"dts-":!0,dtsc:!0,dtse:!0,dtsh:!0,"ec-3":!0,enca:!0,g719:!0,g726:!0,m4ae:!0,mha1:!0,mha2:!0,mhm1:!0,mhm2:!0,mlpa:!0,mp4a:!0,"raw ":!0,Opus:!0,samr:!0,sawb:!0,sawp:!0,sevc:!0,sqcp:!0,ssmv:!0,twos:!0,ulaw:!0},video:{avc1:!0,avc2:!0,avc3:!0,avc4:!0,avcp:!0,drac:!0,dvav:!0,dvhe:!0,encv:!0,hev1:!0,hvc1:!0,mjp2:!0,mp4v:!0,mvc1:!0,mvc2:!0,mvc3:!0,mvc4:!0,resv:!0,rv60:!0,s263:!0,svc1:!0,svc2:!0,"vc-1":!0,vp08:!0,vp09:!0}};t.isCodecType=n,t.isCodecSupportedInMp4=i},"./src/utils/cues.js":function(e,t,r){"use strict";function n(e,t,r,n){for(var o,a,s,l,d,u=window.VTTCue||window.TextTrackCue,c=0;c<n.rows.length;c++)if(o=n.rows[c],s=!0,l=0,d="",!o.isEmpty()){for(var f=0;f<o.chars.length;f++)o.chars[f].uchar.match(/\s/)&&s?l++:(d+=o.chars[f].uchar,s=!1);o.cueStartTime=t,t===r&&(r+=1e-4),a=new u(t,r,i.fixLineBreaks(d.trim())),l>=16?l--:l++,navigator.userAgent.match(/Firefox\//)?a.line=c+1:a.line=c>7?c-2:c+1,a.align="left",a.position=Math.max(0,Math.min(100,l/32*100+(navigator.userAgent.match(/Firefox\//)?50:0))),e.addCue(a)}}Object.defineProperty(t,"__esModule",{value:!0});var i=r("./src/utils/vttparser.js");t.newCue=n},"./src/utils/discontinuities.js":function(e,t,r){"use strict";(function(e){function n(e,t){for(var r=null,n=0;n<e.length;n+=1){var i=e[n];if(i&&i.cc===t){r=i;break}}return r}function i(e,t){return c.default.search(e,function(e){return e.cc<t?1:e.cc>t?-1:0})}function o(e,t,r){var n=!1;return t&&t.details&&r&&(r.endCC>r.startCC||e&&e.cc<r.startCC)&&(n=!0),n}function a(e,t){var r=e.fragments,i=t.fragments;if(!i.length||!r.length)return void f.logger.log("No fragments to align");var o=n(r,i[0].cc);return!o||o&&!o.startPTS?void f.logger.log("No frag in previous level to align on"):o}function s(e,t){t.fragments.forEach(function(t){if(t){var r=t.start+e;t.start=t.startPTS=r,t.endPTS=r+t.duration}}),t.PTSKnown=!0}function l(e,t,r){d(e,r,t),!r.PTSKnown&&t&&u(r,t.details)}function d(e,t,r){if(o(e,r,t)){var n=a(r.details,t);n&&(f.logger.log("Adjusting PTS using last level due to CC increase within current level"),s(n.start,t))}}function u(t,r){if(r&&r.fragments.length){if(!t.hasProgramDateTime||!r.hasProgramDateTime)return;var n=r.fragments[0].programDateTime,i=t.fragments[0].programDateTime,o=(i-n)/1e3+r.fragments[0].start;e.isFinite(o)&&(f.logger.log("adjusting PTS using programDateTime delta, sliding:"+o.toFixed(3)),s(o,t))}}Object.defineProperty(t,"__esModule",{value:!0});var c=r("./src/utils/binary-search.js"),f=r("./src/utils/logger.js");t.findFirstFragWithCC=n,t.findFragWithCC=i,t.shouldAlignOnDiscontinuities=o,t.findDiscontinuousReferenceFrag=a,t.adjustPts=s,t.alignStream=l,t.alignDiscontinuities=d,t.alignPDT=u}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/ewma-bandwidth-estimator.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/ewma.js"),i=function(){function e(e,t,r,i){this.hls=e,this.defaultEstimate_=i,this.minWeight_=.001,this.minDelayMs_=50,this.slow_=new n.default(t),this.fast_=new n.default(r)}return e.prototype.sample=function(e,t){e=Math.max(e,this.minDelayMs_);var r=8e3*t/e,n=e/1e3;this.fast_.sample(n,r),this.slow_.sample(n,r)},e.prototype.canEstimate=function(){var e=this.fast_;return e&&e.getTotalWeight()>=this.minWeight_},e.prototype.getEstimate=function(){return this.canEstimate()?Math.min(this.fast_.getEstimate(),this.slow_.getEstimate()):this.defaultEstimate_},e.prototype.destroy=function(){},e}();t.default=i},"./src/utils/ewma.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e){this.alpha_=e?Math.exp(Math.log(.5)/e):0,this.estimate_=0,this.totalWeight_=0}return e.prototype.sample=function(e,t){var r=Math.pow(this.alpha_,e);this.estimate_=t*(1-r)+r*this.estimate_,this.totalWeight_+=e},e.prototype.getTotalWeight=function(){return this.totalWeight_},e.prototype.getEstimate=function(){if(this.alpha_){var e=1-Math.pow(this.alpha_,this.totalWeight_);return this.estimate_/e}return this.estimate_},e}();t.default=n},"./src/utils/get-self-scope.js":function(e,t,r){"use strict";function n(){return"undefined"==typeof window?self:window}Object.defineProperty(t,"__esModule",{value:!0}),t.getSelfScope=n},"./src/utils/logger.js":function(e,t,r){"use strict";function n(){}function i(e,t){return t="["+e+"] > "+t}function o(e){var t=u.console[e];return t?function(){for(var r=[],n=0;n<arguments.length;n++)r[n]=arguments[n];r[0]&&(r[0]=i(e,r[0])),t.apply(u.console,r)}:n}function a(e){for(var t=[],r=1;r<arguments.length;r++)t[r-1]=arguments[r];t.forEach(function(t){d[t]=e[t]?e[t].bind(e):o(t)})}Object.defineProperty(t,"__esModule",{value:!0});var s=r("./src/utils/get-self-scope.js"),l={trace:n,debug:n,log:n,warn:n,info:n,error:n},d=l,u=s.getSelfScope();t.enableLogs=function(e){if(!0===e||"object"==typeof e){a(e,"debug","log","info","warn","error");try{d.log()}catch(e){d=l}}else d=l},t.logger=d},"./src/utils/mediakeys-helper.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){return"undefined"!=typeof window&&window.navigator&&window.navigator.requestMediaKeySystemAccess?window.navigator.requestMediaKeySystemAccess.bind(window.navigator):null}();t.requestMediaKeySystemAccess=n},"./src/utils/mediasource-helper.js":function(e,t,r){"use strict";function n(){if("undefined"!=typeof window)return window.MediaSource||window.WebKitMediaSource}Object.defineProperty(t,"__esModule",{value:!0}),t.getMediaSource=n},"./src/utils/output-filter.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=function(){function e(e,t){this.timelineController=e,this.trackName=t,this.startTime=null,this.endTime=null,this.screen=null}return e.prototype.dispatchCue=function(){null!==this.startTime&&(this.timelineController.addCues(this.trackName,this.startTime,this.endTime,this.screen),this.startTime=null)},e.prototype.newCue=function(e,t,r){(null===this.startTime||this.startTime>e)&&(this.startTime=e),this.endTime=t,this.screen=r,this.timelineController.createCaptionsTrack(this.trackName)},e}();t.default=n},"./src/utils/texttrack-utils.js":function(e,t,r){"use strict";function n(e,t){var r=null;try{r=new window.Event("addtrack")}catch(e){r=document.createEvent("Event"),r.initEvent("addtrack",!1,!1)}r.track=e,t.dispatchEvent(r)}function i(e){if(e&&e.cues)for(;e.cues.length>0;)e.removeCue(e.cues[0])}Object.defineProperty(t,"__esModule",{value:!0}),t.sendAddTrackEvent=n,t.clearCurrentCues=i},"./src/utils/time-ranges.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n={toString:function(e){for(var t="",r=e.length,n=0;n<r;n++)t+="["+e.start(n).toFixed(3)+","+e.end(n).toFixed(3)+"]";return t}};t.default=n},"./src/utils/vttcue.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(){function e(e){return"string"==typeof e&&(!!o[e.toLowerCase()]&&e.toLowerCase())}function t(e){return"string"==typeof e&&(!!a[e.toLowerCase()]&&e.toLowerCase())}function r(e){for(var t=1;t<arguments.length;t++){var r=arguments[t];for(var n in r)e[n]=r[n]}return e}function n(n,o,a){var s=this,l=function(){if("undefined"!=typeof navigator)return/MSIE\s8\.0/.test(navigator.userAgent)}(),d={};l?s=document.createElement("custom"):d.enumerable=!0,s.hasBeenReset=!1;var u="",c=!1,f=n,p=o,h=a,m=null,v="",g=!0,y="auto",E="start",b=50,w="middle",_=50,T="middle";if(Object.defineProperty(s,"id",r({},d,{get:function(){return u},set:function(e){u=""+e}})),Object.defineProperty(s,"pauseOnExit",r({},d,{get:function(){return c},set:function(e){c=!!e}})),Object.defineProperty(s,"startTime",r({},d,{get:function(){return f},set:function(e){if("number"!=typeof e)throw new TypeError("Start time must be set to a number.");f=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"endTime",r({},d,{get:function(){return p},set:function(e){if("number"!=typeof e)throw new TypeError("End time must be set to a number.");p=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"text",r({},d,{get:function(){return h},set:function(e){h=""+e,this.hasBeenReset=!0}})),Object.defineProperty(s,"region",r({},d,{get:function(){return m},set:function(e){m=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"vertical",r({},d,{get:function(){return v},set:function(t){var r=e(t);if(!1===r)throw new SyntaxError("An invalid or illegal string was specified.");v=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"snapToLines",r({},d,{get:function(){return g},set:function(e){g=!!e,this.hasBeenReset=!0}})),Object.defineProperty(s,"line",r({},d,{get:function(){return y},set:function(e){if("number"!=typeof e&&e!==i)throw new SyntaxError("An invalid number or illegal string was specified.");y=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"lineAlign",r({},d,{get:function(){return E},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");E=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"position",r({},d,{get:function(){return b},set:function(e){if(e<0||e>100)throw new Error("Position must be between 0 and 100.");b=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"positionAlign",r({},d,{get:function(){return w},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");w=r,this.hasBeenReset=!0}})),Object.defineProperty(s,"size",r({},d,{get:function(){return _},set:function(e){if(e<0||e>100)throw new Error("Size must be between 0 and 100.");_=e,this.hasBeenReset=!0}})),Object.defineProperty(s,"align",r({},d,{get:function(){return T},set:function(e){var r=t(e);if(!r)throw new SyntaxError("An invalid or illegal string was specified.");T=r,this.hasBeenReset=!0}})),s.displayState=void 0,l)return s}if("undefined"!=typeof window&&window.VTTCue)return window.VTTCue;var i="auto",o={"":!0,lr:!0,rl:!0},a={start:!0,middle:!0,end:!0,left:!0,right:!0};return n.prototype.getCueAsHTML=function(){return window.WebVTT.convertCueToDOMTree(window,this.text)},n}()},"./src/utils/vttparser.js":function(e,t,r){"use strict";function n(){this.window=window,this.state="INITIAL",this.buffer="",this.decoder=new u,this.regionList=[]}function i(e){function t(e,t,r,n){return 3600*(0|e)+60*(0|t)+(0|r)+(0|n)/1e3}var r=e.match(/^(\d+):(\d{2})(:\d{2})?\.(\d{3})/);return r?r[3]?t(r[1],r[2],r[3].replace(":",""),r[4]):r[1]>59?t(r[1],r[2],0,r[4]):t(0,r[1],r[2],r[4]):null}function o(){this.values=Object.create(null)}function a(e,t,r,n){var i=n?e.split(n):[e];for(var o in i)if("string"==typeof i[o]){var a=i[o].split(r);if(2===a.length){var s=a[0],l=a[1];t(s,l)}}}function s(e,t,r){function n(){var t=i(e);if(null===t)throw new Error("Malformed timestamp: "+l);return e=e.replace(/^[^\sa-zA-Z-]+/,""),t}function s(){e=e.replace(/^\s+/,"")}var l=e;if(s(),t.startTime=n(),s(),"--\x3e"!==e.substr(0,3))throw new Error("Malformed time stamp (time stamps must be separated by '--\x3e'): "+l);e=e.substr(3),s(),t.endTime=n(),s(),function(e,t){var n=new o;a(e,function(e,t){switch(e){case"region":for(var i=r.length-1;i>=0;i--)if(r[i].id===t){n.set(e,r[i].region);break}break;case"vertical":n.alt(e,t,["rl","lr"]);break;case"line":var o=t.split(","),a=o[0];n.integer(e,a),n.percent(e,a)&&n.set("snapToLines",!1),n.alt(e,a,["auto"]),2===o.length&&n.alt("lineAlign",o[1],["start",f,"end"]);break;case"position":o=t.split(","),n.percent(e,o[0]),2===o.length&&n.alt("positionAlign",o[1],["start",f,"end","line-left","line-right","auto"]);break;case"size":n.percent(e,t);break;case"align":n.alt(e,t,["start",f,"end","left","right"])}},/:/,/\s/),t.region=n.get("region",null),t.vertical=n.get("vertical","");var i=n.get("line","auto");"auto"===i&&-1===c.line&&(i=-1),t.line=i,t.lineAlign=n.get("lineAlign","start"),t.snapToLines=n.get("snapToLines",!0),t.size=n.get("size",100),t.align=n.get("align",f);var s=n.get("position","auto");"auto"===s&&50===c.position&&(s="start"===t.align||"left"===t.align?0:"end"===t.align||"right"===t.align?100:50),t.position=s}(e,t)}function l(e){return e.replace(/<br(?: \/)?>/gi,"\n")}Object.defineProperty(t,"__esModule",{value:!0});var d=r("./src/utils/vttcue.js"),u=function(){return{decode:function(e){if(!e)return"";if("string"!=typeof e)throw new Error("Error - expected string data.");return decodeURIComponent(encodeURIComponent(e))}}};o.prototype={set:function(e,t){this.get(e)||""===t||(this.values[e]=t)},get:function(e,t,r){return r?this.has(e)?this.values[e]:t[r]:this.has(e)?this.values[e]:t},has:function(e){return e in this.values},alt:function(e,t,r){for(var n=0;n<r.length;++n)if(t===r[n]){this.set(e,t);break}},integer:function(e,t){/^-?\d+$/.test(t)&&this.set(e,parseInt(t,10))},percent:function(e,t){return!!(t.match(/^([\d]{1,3})(\.[\d]*)?%$/)&&(t=parseFloat(t))>=0&&t<=100)&&(this.set(e,t),!0)}};var c=new d.default(0,0,0),f="middle"===c.align?"middle":"center";t.fixLineBreaks=l,n.prototype={parse:function(e){function t(){var e=r.buffer,t=0;for(e=l(e);t<e.length&&"\r"!==e[t]&&"\n"!==e[t];)++t;var n=e.substr(0,t);return"\r"===e[t]&&++t,"\n"===e[t]&&++t,r.buffer=e.substr(t),n}var r=this;e&&(r.buffer+=r.decoder.decode(e,{stream:!0}));try{var n=void 0;if("INITIAL"===r.state){if(!/\r\n|\n/.test(r.buffer))return this;n=t();var i=n.match(/^()?WEBVTT([ \t].*)?$/);if(!i||!i[0])throw new Error("Malformed WebVTT signature.");r.state="HEADER"}for(var o=!1;r.buffer;){if(!/\r\n|\n/.test(r.buffer))return this;switch(o?o=!1:n=t(),r.state){case"HEADER":/:/.test(n)?function(e){a(e,function(e,t){},/:/)}(n):n||(r.state="ID");continue;case"NOTE":n||(r.state="ID");continue;case"ID":if(/^NOTE($|[ \t])/.test(n)){r.state="NOTE";break}if(!n)continue;if(r.cue=new d.default(0,0,""),r.state="CUE",-1===n.indexOf("--\x3e")){r.cue.id=n;continue}case"CUE":try{s(n,r.cue,r.regionList)}catch(e){r.cue=null,r.state="BADCUE";continue}r.state="CUETEXT";continue;case"CUETEXT":var u=-1!==n.indexOf("--\x3e");if(!n||u&&(o=!0)){r.oncue&&r.oncue(r.cue),r.cue=null,r.state="ID";continue}r.cue.text&&(r.cue.text+="\n"),r.cue.text+=n;continue;case"BADCUE":n||(r.state="ID");continue}}}catch(e){"CUETEXT"===r.state&&r.cue&&r.oncue&&r.oncue(r.cue),r.cue=null,r.state="INITIAL"===r.state?"BADWEBVTT":"BADCUE"}return this},flush:function(){var e=this;try{if(e.buffer+=e.decoder.decode(),(e.cue||"HEADER"===e.state)&&(e.buffer+="\n\n",e.parse()),"INITIAL"===e.state)throw new Error("Malformed WebVTT signature.")}catch(e){throw e}return e.onflush&&e.onflush(),this}},t.default=n},"./src/utils/webvtt-parser.js":function(e,t,r){"use strict";(function(e){Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/vttparser.js"),i=r("./src/demux/id3.js"),o=function(e,t,r){return e.substr(r||0,t.length)===t},a=function(t){var r=parseInt(t.substr(-3)),n=parseInt(t.substr(-6,2)),i=parseInt(t.substr(-9,2)),o=t.length>9?parseInt(t.substr(0,t.indexOf(":"))):0;return e.isFinite(r)&&e.isFinite(n)&&e.isFinite(i)&&e.isFinite(o)?(r+=1e3*n,r+=6e4*i,r+=36e5*o):-1},s=function(e){for(var t=5381,r=e.length;r;)t=33*t^e.charCodeAt(--r);return(t>>>0).toString()},l=function(e,t,r){var n=e[t],i=e[n.prevCC];if(!i||!i.new&&n.new)return e.ccOffset=e.presentationOffset=n.start,void(n.new=!1);for(;i&&i.new;)e.ccOffset+=n.start-i.start,n.new=!1,n=i,i=e[n.prevCC];e.presentationOffset=r},d={parse:function(e,t,r,d,u,c){var f,p=/\r\n|\n\r|\n|\r/g,h=i.utf8ArrayToStr(new Uint8Array(e)).trim().replace(p,"\n").split("\n"),m="00:00.000",v=0,g=0,y=0,E=[],b=!0,w=new n.default;w.oncue=function(e){var t=r[d],n=r.ccOffset;t&&t.new&&(void 0!==g?n=r.ccOffset=t.start:l(r,d,y)),y&&(n=y-r.presentationOffset),e.startTime+=n-g,e.endTime+=n-g,e.id=s(e.startTime.toString())+s(e.endTime.toString())+s(e.text),e.text=decodeURIComponent(encodeURIComponent(e.text)),e.endTime>0&&E.push(e)},w.onparsingerror=function(e){f=e},w.onflush=function(){if(f&&c)return void c(f);u(E)},h.forEach(function(e){if(b){if(o(e,"X-TIMESTAMP-MAP=")){b=!1,e.substr(16).split(",").forEach(function(e){o(e,"LOCAL:")?m=e.substr(6):o(e,"MPEGTS:")&&(v=parseInt(e.substr(7)))});try{t+(9e4*r[d].start||0)<0&&(t+=8589934592),v-=t,g=a(m)/1e3,y=v/9e4,-1===g&&(f=new Error("Malformed X-TIMESTAMP-MAP: "+e))}catch(t){f=new Error("Malformed X-TIMESTAMP-MAP: "+e)}return}""===e&&(b=!1)}w.parse(e+"\n")}),w.flush()}};t.default=d}).call(this,r("./src/polyfills/number.js").Number)},"./src/utils/xhr-loader.js":function(e,t,r){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var n=r("./src/utils/logger.js"),i=window.performance,o=window.XMLHttpRequest,a=function(){function e(e){e&&e.xhrSetup&&(this.xhrSetup=e.xhrSetup)}return e.prototype.destroy=function(){this.abort(),this.loader=null},e.prototype.abort=function(){var e=this.loader;e&&4!==e.readyState&&(this.stats.aborted=!0,e.abort()),window.clearTimeout(this.requestTimeout),this.requestTimeout=null,window.clearTimeout(this.retryTimeout),this.retryTimeout=null},e.prototype.load=function(e,t,r){this.context=e,this.config=t,this.callbacks=r,this.stats={trequest:i.now(),retry:0},this.retryDelay=t.retryDelay,this.loadInternal()},e.prototype.loadInternal=function(){var e,t=this.context;e=this.loader=new o;var r=this.stats;r.tfirst=0,r.loaded=0;var n=this.xhrSetup;try{if(n)try{n(e,t.url)}catch(r){e.open("GET",t.url,!0),n(e,t.url)}e.readyState||e.open("GET",t.url,!0)}catch(r){return void this.callbacks.onError({code:e.status,text:r.message},t,e)}t.rangeEnd&&e.setRequestHeader("Range","bytes="+t.rangeStart+"-"+(t.rangeEnd-1)),e.onreadystatechange=this.readystatechange.bind(this),e.onprogress=this.loadprogress.bind(this),e.responseType=t.responseType,this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),this.config.timeout),e.send()},e.prototype.readystatechange=function(e){var t=e.currentTarget,r=t.readyState,o=this.stats,a=this.context,s=this.config;if(!o.aborted&&r>=2)if(window.clearTimeout(this.requestTimeout),0===o.tfirst&&(o.tfirst=Math.max(i.now(),o.trequest)),4===r){var l=t.status;if(l>=200&&l<300){o.tload=Math.max(o.tfirst,i.now());var d=void 0,u=void 0;"arraybuffer"===a.responseType?(d=t.response,u=d.byteLength):(d=t.responseText,u=d.length),o.loaded=o.total=u;var c={url:t.responseURL,data:d};this.callbacks.onSuccess(c,o,a,t)}else o.retry>=s.maxRetry||l>=400&&l<499?(n.logger.error(l+" while loading "+a.url),this.callbacks.onError({code:l,text:t.statusText},a,t)):(n.logger.warn(l+" while loading "+a.url+", retrying in "+this.retryDelay+"..."),this.destroy(),this.retryTimeout=window.setTimeout(this.loadInternal.bind(this),this.retryDelay),this.retryDelay=Math.min(2*this.retryDelay,s.maxRetryDelay),o.retry++)}else this.requestTimeout=window.setTimeout(this.loadtimeout.bind(this),s.timeout)},e.prototype.loadtimeout=function(){n.logger.warn("timeout while loading "+this.context.url),this.callbacks.onTimeout(this.stats,this.context,null)},e.prototype.loadprogress=function(e){var t=e.currentTarget,r=this.stats;r.loaded=e.loaded,e.lengthComputable&&(r.total=e.total);var n=this.callbacks.onProgress;n&&n(r,this.context,null,t)},e}();t.default=a}}).default})},function(e,t,r){var n=r(133);"string"==typeof n&&(n=[[e.i,n,""]]);var i={};i.transform=void 0;r(38)(n,i);n.locals&&(e.exports=n.locals)},function(e,t,r){t=e.exports=r(37)(!1),t.push([e.i,".meride-video-container {\n    background-color: #000;\n    position: relative;\n    clear: both;\n    font-family: 'Open Sans', sans-serif;\n    max-width: 100%;\n    word-break: normal;\n}\n\n.meride-video-container video {\n    max-width: 100%;\n    left: 0;\n}\n\n.meride-video-container video.clickable-video {\n    cursor: pointer;\n}\n\n.meride-video-container * {\n    transition: none;\n    -webkit-transition: none;\n}\n\n.meride-video-container::-webkit-media-controls-play-button,\n.meride-video-container::-webkit-media-controls-start-playback-button {\n    opacity: 0;\n    pointer-events: none;\n    width: 5px;\n}\n\n/*.meride-video-container .loadingSpinner {\n    width: 100px;\n    height: 100px;\n    left: 50%;\n    top: 50%;\n    position: absolute;\n    margin-left: -50px;\n    margin-top: -50px;\n    display: none;\n}*/\n\n.meride-video-container .loadingSpinner {\n    width: 60px;\n    height: 60px;\n    background-color: #29abe2;\n    left: 50%;\n    top: 50%;\n    position: absolute;\n    margin-left: -30px;\n    margin-top: -30px;\n    display: none;\n    border-radius: 100%;\n    z-index: 12;\n    -webkit-animation: sk-scaleout 1.0s infinite ease-in-out;\n    animation: sk-scaleout 1.0s infinite ease-in-out;\n}\n\n@-webkit-keyframes sk-scaleout {\n  0% { -webkit-transform: scale(0) }\n  100% {\n    -webkit-transform: scale(1.0);\n    opacity: 0;\n  }\n}\n\n@keyframes sk-scaleout {\n  0% {\n    -webkit-transform: scale(0);\n    transform: scale(0);\n  } 100% {\n    -webkit-transform: scale(1.0);\n    transform: scale(1.0);\n    opacity: 0;\n  }\n}\n\n.meride-video-container .btn {\n    fill: #fff;\n}\n\n.meride-video-container button:focus {\n    outline: none;\n}\n\n.meride-video-container .controlBarContainer {\n    position: absolute;\n    bottom: 0;\n    left: 0;\n    height: 55px;\n    width: 100%;\n    background-color: transparent;\n    background-color: rgba(0, 0, 0, .25);\n}\n\n.meride-video-container .controlBar {\n    height: 55px;\n    width: 96%;\n    position: absolute;\n    bottom: 0;\n    margin-left: 2%;\n    background-color: transparent;\n    display: table-cell;\n    color: #fff;\n    z-index: 10;\n}\n\n.meride-video-container .controlBar .controlBarBtn:hover g:first-child {\n    fill: #f0f0f0;\n}\n\n.meride-video-container .md-progressBar {\n    height: 8px;\n    background-color: rgb(102, 102, 102);\n    background-color: rgba(102, 102, 102, 1);\n    width: 100%;\n    bottom: 0;\n    left: 0;\n    vertical-align: middle;\n    position: relative;\n    box-sizing: content-box;\n}\n\n.meride-video-container .progressBarTop {\n    position: absolute;\n    top: 0;\n}\n\n.meride-video-container .md-progressBar:hover.disabled {\n    cursor: default;\n}\n\n.meride-video-container .md-progressBar:hover {\n    cursor: pointer;\n}\n\n.meride-video-container .md-progressBar .md-spinner {\n    height: 8px;\n    width: 0;\n    background-color: rgb(41, 171, 226);\n    background-color: rgba(41, 171, 226, 1);\n    position: absolute;\n    top: 0;\n    left: 0;\n}\n\n.meride-video-container .md-progressBar .md-bufferContainer {\n    height: 8px;\n    width: 0;\n    position: absolute;\n    top: 0;\n\n    margin: 0;\n    background-color: rgb(230, 230, 230);\n    background-color: rgba(230, 230, 230, 1);\n}\n\n.meride-video-container .controlBarContainer button, .meride-video-container .md-progressBar button {\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    padding: 2px;\n    width: 35px;\n    height: 35px;\n    margin: 0;\n    box-sizing: border-box;\n}\n\n.meride-video-container .volumeBarContainer {\n    position: absolute;\n    /*bottom: 35px;*/\n    /*bottom: inherit;*/\n    left: 50%;\n    margin-left: -15px;\n    height: 120px;\n    /*margin-top: -166px;*/\n    bottom: 55px;\n    padding-bottom: 2px;\n}\n\n.meride-video-container .volumeBarContainer.active {\n    visibility: visible;\n}\n\n.meride-video-container .volumeBarContainer.inactive {\n    visibility: hidden;\n}\n\n.meride-video-container .volumeContainer {\n    position: relative;\n    /*display: inline;*/\n}\n\n.meride-video-container .volumeBarContainer .volumeBarInnerContainer {\n    position: relative;\n    width: 30px;\n    height: 120px;\n    background-color: rgb(0, 0, 0);\n    background-color: rgba(0, 0, 0, .25);\n}\n\n\n.meride-video-container .volumeBarContainer .volumeBarInnerContainer .volumeBarSpinner {\n    position:  absolute;\n    width: 4px;\n    left: 0;\n    bottom: 0;\n    background-color: rgb(41, 171, 226);\n    background-color: rgba(41, 171, 226, 1);\n    min-height: 8px; /* half the dimension of the handler */\n    z-index: 11;\n}\n\n.meride-video-container .volumeBarContainer .volumeBarInnerContainer .volumeBarLevel {\n    position:  absolute;\n    width: 4px;\n    height: 100px;\n    left: 13px;\n    top: 10px;\n    background-color: #fff;\n    z-index: 10;\n}\n\n\n.meride-video-container .volumeBarContainer .volumeBarInnerContainer .volumeHandlerBtn {\n    position: absolute;\n    left: -6px;\n    width: 16px;\n    height: 16px;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    padding: 0;\n    z-index: 13;\n    max-width: initial;\n}\n\n.meride-video-container .md-progressBar .md-seekBtn {\n    width: 46px;\n    height: 46px;\n    position: absolute;\n    margin-left: -23px;\n    bottom: -18px;\n}\n\n.meride-video-container .toright {\n    float: right;\n}\n\n.meride-video-container .timeUpdate {\n    font-size: 10.5pt;\n    line-height: 40px;\n    min-width: 1.5em;\n    /*text-shadow: 1px 1px 1px #000;*/\n    text-align: left;\n}\n\n.meride-video-container .duration {\n    font-size: 10.5pt;\n    min-width: 1.5em;\n    text-align: left;\n    line-height: 40px;\n    /*text-shadow: 1px 1px 1px #000;*/\n}\n\n.meride-video-container .fullBtn {\n    display: inline-block;\n}\n\n.meride-video-container .reduceBtn {\n    display: none;\n}\n\n.meride-video-container .md-settings {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    background-color: rgb(0, 0, 0);\n    background-color: rgba(0, 0, 0, 0.7);\n    display: none;\n    z-index: 999;\n}\n\n.meride-video-container .settings button {\n    width: 60px;\n    height: 60px;\n    border: none;\n    background-color: transparent;\n    float: left;\n    cursor: pointer;\n}\n\n.meride-video-container .settings .closeSettingBtn {\n    position: absolute;\n    top: 2%;\n    right: 2%;\n    width: 30px;\n    height: 30px;\n}\n\n.meride-video-container .settings .closeSettingBtn .btn {\n    fill: #fff;\n}\n\n.meride-video-container .settings .settingsContainer {\n    display: table;\n    position: absolute;\n    width: 90%;\n    margin-left: 5%;\n    top: 50%;\n    margin-top: -23px;\n}\n\n.meride-video-container .settings .settingsContainer .settingComponent {\n    display: table-cell;\n}\n\n.meride-video-container .settings .settingsContainer .settingComponent button {\n    width: 100%;\n}\n\n\n.meride-video-container .boxcenter {\n    left: 50%;\n    top: 50%;\n    position: absolute;\n}\n\n.meride-video-container .boxcenterBtn {\n    width: 100px;\n    height: 100px;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    z-index: 12;\n    margin-left: -50px;\n    margin-top: -50px;\n    padding: 0;\n}\n\n.meride-video-container .boxcenterBtnSmall {\n    width: 90px;\n    height: 90px;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n    z-index: 12;\n    margin-left: -45px;\n    margin-top: -55px;\n    padding: 0;\n}\n\n.meride-video-container .boxcenterBtn:hover circle {\n    fill: #000;\n}\n\n.meride-video-container .topBarBtn {\n    height: 40px;\n    border: none;\n    background-color: transparent;\n    cursor: pointer;\n}\n\n.meride-video-container .topBar {\n    height: 60px;\n    width: 96%;\n    position: absolute;\n    top: 10px;\n    margin-left: 2%;\n    z-index: 10;\n}\n\n.meride-video-container .controlBarRight {\n    white-space: nowrap;\n}\n\n.meride-video-container .controlBarCenter {\n    width: 100%;\n    padding: 0;\n}\n\n.meride-video-container .controlBarCell {\n    padding: 0 0.3em;\n    display: table-cell;\n    vertical-align: middle;\n    height: 55px;\n}\n\n.meride-video-container .controlBarCellRight {\n    padding: 0;\n}\n\n.meride-video-container .poster {\n    width: 100%;\n    height: 100%;\n}\n\n.meride-video-container video::cue {\n    color: #fff;\n    text-shadow: 1px 1px 1px #000;\n    font-family: sans-serif;\n    font-weight: normal;\n    bottom: 55px;\n    position: relative;\n}\n.meride-video-container video::-webkit-media-text-track-display {\n    transform: translateY(-55px);\n}\n\n.meride-video-container a {\n    text-decoration: none;\n}\n\n.meride-video-container .settingChooseMenu {\n    font-size: 10.5pt;\n    /*display: none;*/\n    max-height: 100%;\n    overflow: auto;\n    overflow-y: auto;\n    overflow-x: hidden;\n    box-sizing: border-box;\n    z-index: 99;\n}\n\n.meride-video-container .settingChooseMenu .settingChooseMenuLink {\n    color: #fff;\n    padding: 4px 20px;\n    display: block;\n    text-align: left;\n    background-color: #000;\n    background-color: rgba(0, 0, 0, .25);\n    cursor: pointer;\n}\n\n.meride-video-container .settingChooseMenu .settingChooseMenuLinkActive {\n    color: #fff;\n    background-color: #29abe2;\n    background-color: rgba(51, 214, 255, .5);\n    padding: 4px 20px;\n    display: block;\n    text-align: left;\n    cursor: pointer;\n}\n\n.meride-video-container .settingChooseMenu .settingChooseMenuLink:hover {\n    color: #fff;\n    background-color: #29abe2;\n    background-color: rgba(51, 214, 255, .5);\n    padding: 4px 20px;\n    display: block;\n    text-align: left;\n    cursor: pointer;\n}\n\n.meride-video-container .settingChooseMenu .hd_apex {\n    vertical-align: super;\n    font-size: 5.5pt;\n    color: #29abe2;\n    padding-left: 2px;\n}\n\n.meride-video-container .settingChildContainer {\n    position: absolute;\n    background-color: rgb(41, 171, 226);\n    background-color: rgba(41, 171, 226, 1);\n    color: #fff;\n    font-size: 1.2em;\n    display: none;\n    width: 100%;\n    left: 0;\n    top: 0;\n    height: 100%;\n    overflow: auto;\n    box-sizing: border-box;\n    z-index: 99;\n}\n\n.meride-video-container .infoContainer {\n    text-align: center;\n}\n\n.meride-video-container .infoContainer a {\n    color: #fff;\n}\n\n.meride-video-container .infoContainer .merideTxt {\n    font-weight: 900;\n    font-size: 2em;\n    top: 36%;\n    width: 100%;\n    text-align: center;\n    position: absolute;\n}\n\n.meride-video-container .infoContainer .merideSlogan {\n    display: block;\n    font-weight: normal;\n    font-size: 0.8em;\n}\n\n.meride-video-container .infoContainer .mosaicoLab {\n    font-weight: normal;\n    font-size: 0.8em;\n    position: absolute;\n    bottom: 8%;\n    width: 100%;\n    text-align: center;\n}\n\n/*.meride-video-container .qualityContainer, .meride-video-container .ccContainer {\n    background-color: transparent;\n}*/\n\n.meride-video-container .qualityContainer {\n    position: relative;\n}\n\n\n.meride-video-container .qualitySelectionContainer {\n    position: absolute;\n    overflow: auto;\n    overflow-y: auto;\n    overflow-x: hidden;\n    /*bottom: 35px;*/\n    /*bottom: inherit;*/\n    /*left: 50%;*/\n    margin-left: -25px;\n    /*height: 120px;*/\n    bottom: 55px;\n    padding-bottom: 2px;\n    width: 80px;\n    min-width: 80px;\n    /*background-color: rgba(0, 0, 0, .25);*/\n    color: #fff;\n    white-space: nowrap;\n}\n\n.meride-video-container .qualitySelectionContainer.active {\n    visibility: visible;\n}\n\n.meride-video-container .qualitySelectionContainer.inactive {\n    visibility: hidden;\n}\n\n.meride-video-container .audioTracksSelectionContainer {\n    position: absolute;\n    overflow: auto;\n    overflow-y: auto;\n    overflow-x: hidden;\n    /*bottom: 35px;*/\n    /*bottom: inherit;*/\n    /*left: 50%;*/\n    margin-left: -25px;\n    /*height: 120px;*/\n    bottom: 55px;\n    padding-bottom: 2px;\n    width: 120px;\n    min-width: 80px;\n    /*background-color: rgba(0, 0, 0, .25);*/\n    color: #fff;\n    white-space: nowrap;\n}\n\n.meride-video-container .audioTracksSelectionContainer.active {\n    visibility: visible;\n}\n\n.meride-video-container .audioTracksSelectionContainer.inactive {\n    visibility: hidden;\n}\n\n.meride-video-container .subtitleTracksSelectionContainer {\n    position: absolute;\n    overflow: auto;\n    overflow-y: auto;\n    overflow-x: hidden;\n    /*bottom: 35px;*/\n    /*bottom: inherit;*/\n    /*left: 50%;*/\n    margin-left: -25px;\n    /*height: 120px;*/\n    bottom: 55px;\n    padding-bottom: 2px;\n    width: 120px;\n    min-width: 80px;\n    /*background-color: rgba(0, 0, 0, .25);*/\n    color: #fff;\n    white-space: nowrap;\n}\n\n.meride-video-container .subtitleTracksSelectionContainer.active {\n    visibility: visible;\n}\n\n.meride-video-container .subtitleTracksSelectionContainer.inactive {\n    visibility: hidden;\n}\n\n.meride-video-container .subtitleTracksContainer {\n    position: relative;\n}\n.meride-video-container .subtitleTracksLabel {\n    color: #29abe2;\n    font-size: 5.5pt;\n    position: absolute;\n    right: 2px;\n    top: 13px;\n}\n\n.meride-video-container .md-timeTooltip {\n    position: absolute;\n    visibility: hidden;\n    top: -34px;\n    left: 0;\n    width: 60px;\n    height: 24px;\n    background-color: rgb(0, 0, 0);\n    background-color: rgba(0, 0, 0, .5);\n    color: #fff;\n    text-align: center;\n    font-size: 13px;\n    line-height: 24px;\n}\n.meride-video-container .audioTracksContainer {\n    position: relative;\n}\n.meride-video-container .audioTracksLabel {\n    color: #29abe2;\n    font-size: 5.5pt;\n    position: absolute;\n    right: 2px;\n    top: 13px;\n}\n",""])}]);